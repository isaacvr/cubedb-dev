var GC=Object.defineProperty;var WC=(t,e,n)=>e in t?GC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ke=(t,e,n)=>(WC(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function Ve(){}function ya(t,e){for(const n in e)t[n]=e[n];return t}function aE(t){return t()}function Jb(){return Object.create(null)}function Jn(t){t.forEach(aE)}function Pl(t){return typeof t=="function"}function ft(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Xh;function gi(t,e){return Xh||(Xh=document.createElement("a")),Xh.href=e,t===Xh.href}function jC(t){return Object.keys(t).length===0}function lE(t,...e){if(t==null)return Ve;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Lt(t,e,n){t.$$.on_destroy.push(lE(e,n))}function Ca(t,e,n,i){if(t){const s=cE(t,e,n,i);return t[0](s)}}function cE(t,e,n,i){return t[1]&&i?ya(n.ctx.slice(),t[1](i(e))):n.ctx}function La(t,e,n,i){if(t[2]&&i){const s=t[2](i(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const r=[],o=Math.max(e.dirty.length,s.length);for(let a=0;a<o;a+=1)r[a]=e.dirty[a]|s[a];return r}return e.dirty|s}return e.dirty}function Pa(t,e,n,i,s,r){if(s){const o=cE(e,n,i,r);t.p(o,s)}}function Ra(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function a1(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Kb(t,e){const n={};e=new Set(e);for(const i in t)!e.has(i)&&i[0]!=="$"&&(n[i]=t[i]);return n}function is(t){return t==null?"":t}function gt(t,e,n){return t.set(n),e}function YC(t){return t&&Pl(t.destroy)?t.destroy:Ve}function E(t,e){t.appendChild(e)}function I(t,e,n){t.insertBefore(e,n||null)}function O(t){t.parentNode&&t.parentNode.removeChild(t)}function en(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function D(t){return document.createElement(t)}function ot(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ye(t){return document.createTextNode(t)}function z(){return ye(" ")}function ms(){return ye("")}function tt(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function qC(t){return function(e){return e.preventDefault(),t.call(this,e)}}function uE(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function pv(t){return function(e){e.target===this&&t.call(this,e)}}function M(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $b(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set?t[i]=e[i]:M(t,i,e[i])}function fE(t){return t===""?null:+t}function XC(t){return Array.from(t.childNodes)}function nt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function wa(t,e){t.value=e==null?"":e}function $i(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function bt(t,e,n){t.classList[n?"add":"remove"](e)}function ZC(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,i,e),s}function jr(t,e){return new t(e)}let Rf;function lf(t){Rf=t}function Ah(){if(!Rf)throw new Error("Function called outside component initialization");return Rf}function gs(t){Ah().$$.on_mount.push(t)}function er(t){Ah().$$.on_destroy.push(t)}function Da(){const t=Ah();return(e,n,{cancelable:i=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=ZC(e,n,{cancelable:i});return s.slice().forEach(o=>{o.call(t,r)}),!r.defaultPrevented}return!0}}function l1(t,e){return Ah().$$.context.set(t,e),e}function xa(t){return Ah().$$.context.get(t)}function hE(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const gc=[],wt=[],sp=[],c1=[],dE=Promise.resolve();let u1=!1;function pE(){u1||(u1=!0,dE.then(mE))}function Qb(){return pE(),dE}function Jc(t){sp.push(t)}function It(t){c1.push(t)}const jg=new Set;let zl=0;function mE(){if(zl!==0)return;const t=Rf;do{try{for(;zl<gc.length;){const e=gc[zl];zl++,lf(e),JC(e.$$)}}catch(e){throw gc.length=0,zl=0,e}for(lf(null),gc.length=0,zl=0;wt.length;)wt.pop()();for(let e=0;e<sp.length;e+=1){const n=sp[e];jg.has(n)||(jg.add(n),n())}sp.length=0}while(gc.length);for(;c1.length;)c1.pop()();u1=!1,jg.clear(),lf(t)}function JC(t){if(t.fragment!==null){t.update(),Jn(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Jc)}}const rp=new Set;let $a;function at(){$a={r:0,c:[],p:$a}}function lt(){$a.r||Jn($a.c),$a=$a.p}function P(t,e){t&&t.i&&(rp.delete(t),t.i(e))}function H(t,e,n,i){if(t&&t.o){if(rp.has(t))return;rp.add(t),$a.c.push(()=>{rp.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const KC=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function mv(t,e){const n={},i={},s={$$scope:1};let r=t.length;for(;r--;){const o=t[r],a=e[r];if(a){for(const l in o)l in a||(i[l]=1);for(const l in a)s[l]||(n[l]=a[l],s[l]=1);t[r]=a}else for(const l in o)s[l]=1}for(const o in i)o in n||(n[o]=void 0);return n}function f1(t){return typeof t=="object"&&t!==null?t:{}}function Nt(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function ce(t){t&&t.c()}function ae(t,e,n,i){const{fragment:s,after_update:r}=t.$$;s&&s.m(e,n),i||Jc(()=>{const o=t.$$.on_mount.map(aE).filter(Pl);t.$$.on_destroy?t.$$.on_destroy.push(...o):Jn(o),t.$$.on_mount=[]}),r.forEach(Jc)}function le(t,e){const n=t.$$;n.fragment!==null&&(Jn(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function $C(t,e){t.$$.dirty[0]===-1&&(gc.push(t),pE(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ht(t,e,n,i,s,r,o,a=[-1]){const l=Rf;lf(t);const c=t.$$={fragment:null,ctx:[],props:r,update:Ve,not_equal:s,bound:Jb(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Jb(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(f,h,...d)=>{const p=d.length?d[0]:h;return c.ctx&&s(c.ctx[f],c.ctx[f]=p)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](p),u&&$C(t,f)),h}):[],c.update(),u=!0,Jn(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const f=XC(e.target);c.fragment&&c.fragment.l(f),f.forEach(O)}else c.fragment&&c.fragment.c();e.intro&&P(t.$$.fragment),ae(t,e.target,e.anchor,e.customElement),mE()}lf(l)}class dt{$destroy(){le(this,1),this.$destroy=Ve}$on(e,n){if(!Pl(n))return Ve;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!jC(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ul=[];function QC(t,e){return{subscribe:bn(t,e).subscribe}}function bn(t,e=Ve){let n;const i=new Set;function s(a){if(ft(t,a)&&(t=a,n)){const l=!Ul.length;for(const c of i)c[1](),Ul.push(c,t);if(l){for(let c=0;c<Ul.length;c+=2)Ul[c][0](Ul[c+1]);Ul.length=0}}}function r(a){s(a(t))}function o(a,l=Ve){const c=[a,l];return i.add(c),i.size===1&&(n=e(s)||Ve),a(t),()=>{i.delete(c),i.size===0&&(n(),n=null)}}return{set:s,update:r,subscribe:o}}function eL(t,e,n){const i=!Array.isArray(t),s=i?[t]:t,r=e.length<2;return QC(n,o=>{let a=!1;const l=[];let c=0,u=Ve;const f=()=>{if(c)return;u();const d=e(i?l[0]:l,o);r?o(d):u=Pl(d)?d:Ve},h=s.map((d,p)=>lE(d,_=>{l[p]=_,c&=~(1<<p),a&&f()},()=>{c|=1<<p}));return a=!0,f(),function(){Jn(h),u()}})}const Gp={},Df={};function Yg(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}function tL(t,e){const n=[];let i=Yg(t);return{get location(){return i},listen(s){n.push(s);const r=()=>{i=Yg(t),s({location:i,action:"POP"})};return t.addEventListener("popstate",r),()=>{t.removeEventListener("popstate",r);const o=n.indexOf(s);n.splice(o,1)}},navigate(s,{state:r,replace:o=!1}={}){r={...r,key:Date.now()+""};try{o?t.history.replaceState(r,null,s):t.history.pushState(r,null,s)}catch{t.location[o?"replace":"assign"](s)}i=Yg(t),n.forEach(a=>a({location:i,action:"PUSH"}))}}}function nL(t="/"){let e=0;const n=[{pathname:t,search:""}],i=[];return{get location(){return n[e]},addEventListener(s,r){},removeEventListener(s,r){},history:{get entries(){return n},get index(){return e},get state(){return i[e]},pushState(s,r,o){const[a,l=""]=o.split("?");e++,n.push({pathname:a,search:l}),i.push(s)},replaceState(s,r,o){const[a,l=""]=o.split("?");n[e]={pathname:a,search:l},i[e]=s}}}}const iL=Boolean(typeof window<"u"&&window.document&&window.document.createElement),h1=tL(iL?window:nL()),{navigate:Wp}=h1,gE=/^:(.+)/,ey=4,sL=3,rL=2,oL=1,aL=1;function d1(t,e){return t.substr(0,e.length)===e}function lL(t){return t===""}function cL(t){return gE.test(t)}function _E(t){return t[0]==="*"}function Of(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function qg(t){return t.replace(/(^\/+|\/+$)/g,"")}function uL(t,e){const n=t.default?0:Of(t.path).reduce((i,s)=>(i+=ey,lL(s)?i+=aL:cL(s)?i+=rL:_E(s)?i-=ey+oL:i+=sL,i),0);return{route:t,score:n,index:e}}function fL(t){return t.map(uL).sort((e,n)=>e.score<n.score?1:e.score>n.score?-1:e.index-n.index)}function vE(t,e){let n,i;const[s]=e.split("?"),r=Of(s),o=r[0]==="",a=fL(t);for(let l=0,c=a.length;l<c;l++){const u=a[l].route;let f=!1;if(u.default){i={route:u,params:{},uri:e};continue}const h=Of(u.path),d={},p=Math.max(r.length,h.length);let _=0;for(;_<p;_++){const m=h[_],v=r[_];if(m!==void 0&&_E(m)){const b=m==="*"?"*":m.slice(1);d[b]=r.slice(_).map(decodeURIComponent).join("/");break}if(v===void 0){f=!0;break}let g=gE.exec(m);if(g&&!o){const b=decodeURIComponent(v);d[g[1]]=b}else if(m!==v){f=!0;break}}if(!f){n={route:u,params:d,uri:"/"+r.slice(0,_).join("/")};break}}return n||i||null}function hL(t,e){return vE([t],e)}function Xg(t,e){return t+(e?`?${e}`:"")}function dL(t,e){if(d1(t,"/"))return t;const[n,i]=t.split("?"),[s]=e.split("?"),r=Of(n),o=Of(s);if(r[0]==="")return Xg(s,i);if(!d1(r[0],".")){const c=o.concat(r).join("/");return Xg((s==="/"?"":"/")+c,i)}const a=o.concat(r),l=[];return a.forEach(c=>{c===".."?l.pop():c!=="."&&l.push(c)}),Xg("/"+l.join("/"),i)}function ty(t,e){return`${qg(e==="/"?t:`${qg(t)}/${qg(e)}`)}/`}function pL(t){return!t.defaultPrevented&&t.button===0&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mL(t){let e;const n=t[9].default,i=Ca(n,t,t[8],null);return{c(){i&&i.c()},m(s,r){i&&i.m(s,r),e=!0},p(s,[r]){i&&i.p&&(!e||r&256)&&Pa(i,n,s,s[8],e?La(n,s[8],r,null):Ra(s[8]),null)},i(s){e||(P(i,s),e=!0)},o(s){H(i,s),e=!1},d(s){i&&i.d(s)}}}function gL(t,e,n){let i,s,r,{$$slots:o={},$$scope:a}=e,{basepath:l="/"}=e,{url:c=null}=e;const u=xa(Gp),f=xa(Df),h=bn([]);Lt(t,h,y=>n(6,s=y));const d=bn(null);let p=!1;const _=u||bn(c?{pathname:c}:h1.location);Lt(t,_,y=>n(5,i=y));const m=f?f.routerBase:bn({path:l,uri:l});Lt(t,m,y=>n(7,r=y));const v=eL([m,d],([y,w])=>{if(w===null)return y;const{path:x}=y,{route:S,uri:T}=w;return{path:S.default?x:S.path.replace(/\*.*$/,""),uri:T}});function g(y){const{path:w}=r;let{path:x}=y;if(y._path=x,y.path=ty(w,x),typeof window>"u"){if(p)return;const S=hL(y,i.pathname);S&&(d.set(S),p=!0)}else h.update(S=>(S.push(y),S))}function b(y){h.update(w=>{const x=w.indexOf(y);return w.splice(x,1),w})}return u||(gs(()=>h1.listen(w=>{_.set(w.location)})),l1(Gp,_)),l1(Df,{activeRoute:d,base:m,routerBase:v,registerRoute:g,unregisterRoute:b}),t.$$set=y=>{"basepath"in y&&n(3,l=y.basepath),"url"in y&&n(4,c=y.url),"$$scope"in y&&n(8,a=y.$$scope)},t.$$.update=()=>{if(t.$$.dirty&128){const{path:y}=r;h.update(w=>(w.forEach(x=>x.path=ty(y,x._path)),w))}if(t.$$.dirty&96){const y=vE(s,i.pathname);d.set(y)}},[h,_,m,l,c,i,s,r,a,o]}class _L extends dt{constructor(e){super(),ht(this,e,gL,mL,ft,{basepath:3,url:4})}}const vL=t=>({params:t&4,location:t&16}),ny=t=>({params:t[2],location:t[4]});function iy(t){let e,n,i,s;const r=[yL,bL],o=[];function a(l,c){return l[0]!==null?0:1}return e=a(t),n=o[e]=r[e](t),{c(){n.c(),i=ms()},m(l,c){o[e].m(l,c),I(l,i,c),s=!0},p(l,c){let u=e;e=a(l),e===u?o[e].p(l,c):(at(),H(o[u],1,1,()=>{o[u]=null}),lt(),n=o[e],n?n.p(l,c):(n=o[e]=r[e](l),n.c()),P(n,1),n.m(i.parentNode,i))},i(l){s||(P(n),s=!0)},o(l){H(n),s=!1},d(l){o[e].d(l),l&&O(i)}}}function bL(t){let e;const n=t[10].default,i=Ca(n,t,t[9],ny);return{c(){i&&i.c()},m(s,r){i&&i.m(s,r),e=!0},p(s,r){i&&i.p&&(!e||r&532)&&Pa(i,n,s,s[9],e?La(n,s[9],r,vL):Ra(s[9]),ny)},i(s){e||(P(i,s),e=!0)},o(s){H(i,s),e=!1},d(s){i&&i.d(s)}}}function yL(t){let e,n,i;const s=[{location:t[4]},t[2],t[3]];var r=t[0];function o(a){let l={};for(let c=0;c<s.length;c+=1)l=ya(l,s[c]);return{props:l}}return r&&(e=jr(r,o())),{c(){e&&ce(e.$$.fragment),n=ms()},m(a,l){e&&ae(e,a,l),I(a,n,l),i=!0},p(a,l){const c=l&28?mv(s,[l&16&&{location:a[4]},l&4&&f1(a[2]),l&8&&f1(a[3])]):{};if(r!==(r=a[0])){if(e){at();const u=e;H(u.$$.fragment,1,0,()=>{le(u,1)}),lt()}r?(e=jr(r,o()),ce(e.$$.fragment),P(e.$$.fragment,1),ae(e,n.parentNode,n)):e=null}else r&&e.$set(c)},i(a){i||(e&&P(e.$$.fragment,a),i=!0)},o(a){e&&H(e.$$.fragment,a),i=!1},d(a){a&&O(n),e&&le(e,a)}}}function wL(t){let e,n,i=t[1]!==null&&t[1].route===t[7]&&iy(t);return{c(){i&&i.c(),e=ms()},m(s,r){i&&i.m(s,r),I(s,e,r),n=!0},p(s,[r]){s[1]!==null&&s[1].route===s[7]?i?(i.p(s,r),r&2&&P(i,1)):(i=iy(s),i.c(),P(i,1),i.m(e.parentNode,e)):i&&(at(),H(i,1,1,()=>{i=null}),lt())},i(s){n||(P(i),n=!0)},o(s){H(i),n=!1},d(s){i&&i.d(s),s&&O(e)}}}function xL(t,e,n){let i,s,{$$slots:r={},$$scope:o}=e,{path:a=""}=e,{component:l=null}=e;const{registerRoute:c,unregisterRoute:u,activeRoute:f}=xa(Df);Lt(t,f,m=>n(1,i=m));const h=xa(Gp);Lt(t,h,m=>n(4,s=m));const d={path:a,default:a===""};let p={},_={};return c(d),typeof window<"u"&&er(()=>{u(d)}),t.$$set=m=>{n(13,e=ya(ya({},e),a1(m))),"path"in m&&n(8,a=m.path),"component"in m&&n(0,l=m.component),"$$scope"in m&&n(9,o=m.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&i&&i.route===d&&n(2,p=i.params);{const{path:m,component:v,...g}=e;n(3,_=g)}},e=a1(e),[l,i,p,_,s,f,h,d,a,o,r]}class rr extends dt{constructor(e){super(),ht(this,e,xL,wL,ft,{path:8,component:0})}}function ML(t){let e,n,i,s;const r=t[16].default,o=Ca(r,t,t[15],null);let a=[{href:t[0]},{"aria-current":t[2]},t[1],t[6]],l={};for(let c=0;c<a.length;c+=1)l=ya(l,a[c]);return{c(){e=D("a"),o&&o.c(),$b(e,l)},m(c,u){I(c,e,u),o&&o.m(e,null),n=!0,i||(s=tt(e,"click",t[5]),i=!0)},p(c,[u]){o&&o.p&&(!n||u&32768)&&Pa(o,r,c,c[15],n?La(r,c[15],u,null):Ra(c[15]),null),$b(e,l=mv(a,[(!n||u&1)&&{href:c[0]},(!n||u&4)&&{"aria-current":c[2]},u&2&&c[1],u&64&&c[6]]))},i(c){n||(P(o,c),n=!0)},o(c){H(o,c),n=!1},d(c){c&&O(e),o&&o.d(c),i=!1,s()}}}function SL(t,e,n){let i;const s=["to","replace","state","getProps"];let r=Kb(e,s),o,a,{$$slots:l={},$$scope:c}=e,{to:u="#"}=e,{replace:f=!1}=e,{state:h={}}=e,{getProps:d=()=>({})}=e;const{base:p}=xa(Df);Lt(t,p,x=>n(14,a=x));const _=xa(Gp);Lt(t,_,x=>n(13,o=x));const m=Da();let v,g,b,y;function w(x){if(m("click",x),pL(x)){x.preventDefault();const S=o.pathname===v||f;Wp(v,{state:h,replace:S})}}return t.$$set=x=>{e=ya(ya({},e),a1(x)),n(6,r=Kb(e,s)),"to"in x&&n(7,u=x.to),"replace"in x&&n(8,f=x.replace),"state"in x&&n(9,h=x.state),"getProps"in x&&n(10,d=x.getProps),"$$scope"in x&&n(15,c=x.$$scope)},t.$$.update=()=>{t.$$.dirty&16512&&n(0,v=u==="/"?a.uri:dL(u,a.uri)),t.$$.dirty&8193&&n(11,g=d1(o.pathname,v)),t.$$.dirty&8193&&n(12,b=v===o.pathname),t.$$.dirty&4096&&n(2,i=b?"page":void 0),t.$$.dirty&15361&&n(1,y=d({location:o,href:v,isPartiallyCurrent:g,isCurrent:b}))},[v,y,i,p,_,w,r,u,f,h,d,g,b,o,a,c,l]}class Qm extends dt{constructor(e){super(),ht(this,e,SL,ML,ft,{to:7,replace:8,state:9,getProps:10})}}//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var bE;function rt(){return bE.apply(null,arguments)}function EL(t){bE=t}function Tr(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function rl(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function Sn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gv(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(Sn(t,e))return!1;return!0}function os(t){return t===void 0}function Co(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function kh(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function yE(t,e){var n=[],i,s=t.length;for(i=0;i<s;++i)n.push(e(t[i],i));return n}function ra(t,e){for(var n in e)Sn(e,n)&&(t[n]=e[n]);return Sn(e,"toString")&&(t.toString=e.toString),Sn(e,"valueOf")&&(t.valueOf=e.valueOf),t}function to(t,e,n,i){return WE(t,e,n,i,!0).utc()}function TL(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Xt(t){return t._pf==null&&(t._pf=TL()),t._pf}var p1;Array.prototype.some?p1=Array.prototype.some:p1=function(t){var e=Object(this),n=e.length>>>0,i;for(i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};function _v(t){if(t._isValid==null){var e=Xt(t),n=p1.call(e.parsedDateParts,function(s){return s!=null}),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=i;else return i}return t._isValid}function eg(t){var e=to(NaN);return t!=null?ra(Xt(e),t):Xt(e).userInvalidated=!0,e}var sy=rt.momentProperties=[],Zg=!1;function vv(t,e){var n,i,s,r=sy.length;if(os(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),os(e._i)||(t._i=e._i),os(e._f)||(t._f=e._f),os(e._l)||(t._l=e._l),os(e._strict)||(t._strict=e._strict),os(e._tzm)||(t._tzm=e._tzm),os(e._isUTC)||(t._isUTC=e._isUTC),os(e._offset)||(t._offset=e._offset),os(e._pf)||(t._pf=Xt(e)),os(e._locale)||(t._locale=e._locale),r>0)for(n=0;n<r;n++)i=sy[n],s=e[i],os(s)||(t[i]=s);return t}function Ch(t){vv(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Zg===!1&&(Zg=!0,rt.updateOffset(this),Zg=!1)}function Ar(t){return t instanceof Ch||t!=null&&t._isAMomentObject!=null}function wE(t){rt.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function tr(t,e){var n=!0;return ra(function(){if(rt.deprecationHandler!=null&&rt.deprecationHandler(null,t),n){var i=[],s,r,o,a=arguments.length;for(r=0;r<a;r++){if(s="",typeof arguments[r]=="object"){s+=`
[`+r+"] ";for(o in arguments[0])Sn(arguments[0],o)&&(s+=o+": "+arguments[0][o]+", ");s=s.slice(0,-2)}else s=arguments[r];i.push(s)}wE(t+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var ry={};function xE(t,e){rt.deprecationHandler!=null&&rt.deprecationHandler(t,e),ry[t]||(wE(e),ry[t]=!0)}rt.suppressDeprecationWarnings=!1;rt.deprecationHandler=null;function no(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function AL(t){var e,n;for(n in t)Sn(t,n)&&(e=t[n],no(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function m1(t,e){var n=ra({},t),i;for(i in e)Sn(e,i)&&(rl(t[i])&&rl(e[i])?(n[i]={},ra(n[i],t[i]),ra(n[i],e[i])):e[i]!=null?n[i]=e[i]:delete n[i]);for(i in t)Sn(t,i)&&!Sn(e,i)&&rl(t[i])&&(n[i]=ra({},n[i]));return n}function bv(t){t!=null&&this.set(t)}var g1;Object.keys?g1=Object.keys:g1=function(t){var e,n=[];for(e in t)Sn(t,e)&&n.push(e);return n};var kL={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function CL(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return no(i)?i.call(e,n):i}function Yr(t,e,n){var i=""+Math.abs(t),s=e-i.length,r=t>=0;return(r?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+i}var yv=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Zh=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Jg={},Oc={};function Et(t,e,n,i){var s=i;typeof i=="string"&&(s=function(){return this[i]()}),t&&(Oc[t]=s),e&&(Oc[e[0]]=function(){return Yr(s.apply(this,arguments),e[1],e[2])}),n&&(Oc[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function LL(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function PL(t){var e=t.match(yv),n,i;for(n=0,i=e.length;n<i;n++)Oc[e[n]]?e[n]=Oc[e[n]]:e[n]=LL(e[n]);return function(s){var r="",o;for(o=0;o<i;o++)r+=no(e[o])?e[o].call(s,t):e[o];return r}}function op(t,e){return t.isValid()?(e=ME(e,t.localeData()),Jg[e]=Jg[e]||PL(e),Jg[e](t)):t.localeData().invalidDate()}function ME(t,e){var n=5;function i(s){return e.longDateFormat(s)||s}for(Zh.lastIndex=0;n>=0&&Zh.test(t);)t=t.replace(Zh,i),Zh.lastIndex=0,n-=1;return t}var RL={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function DL(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(yv).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[t])}var OL="Invalid date";function IL(){return this._invalidDate}var NL="%d",BL=/\d{1,2}/;function FL(t){return this._ordinal.replace("%d",t)}var zL={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function UL(t,e,n,i){var s=this._relativeTime[n];return no(s)?s(t,e,n,i):s.replace(/%d/i,t)}function HL(t,e){var n=this._relativeTime[t>0?"future":"past"];return no(n)?n(e):n.replace(/%s/i,e)}var cf={};function ji(t,e){var n=t.toLowerCase();cf[n]=cf[n+"s"]=cf[e]=t}function nr(t){return typeof t=="string"?cf[t]||cf[t.toLowerCase()]:void 0}function wv(t){var e={},n,i;for(i in t)Sn(t,i)&&(n=nr(i),n&&(e[n]=t[i]));return e}var SE={};function Yi(t,e){SE[t]=e}function VL(t){var e=[],n;for(n in t)Sn(t,n)&&e.push({unit:n,priority:SE[n]});return e.sort(function(i,s){return i.priority-s.priority}),e}function tg(t){return t%4===0&&t%100!==0||t%400===0}function Vs(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function rn(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=Vs(e)),n}function vu(t,e){return function(n){return n!=null?(EE(this,t,n),rt.updateOffset(this,e),this):jp(this,t)}}function jp(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function EE(t,e,n){t.isValid()&&!isNaN(n)&&(e==="FullYear"&&tg(t.year())&&t.month()===1&&t.date()===29?(n=rn(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),ag(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function GL(t){return t=nr(t),no(this[t])?this[t]():this}function WL(t,e){if(typeof t=="object"){t=wv(t);var n=VL(t),i,s=n.length;for(i=0;i<s;i++)this[n[i].unit](t[n[i].unit])}else if(t=nr(t),no(this[t]))return this[t](e);return this}var TE=/\d/,Rs=/\d\d/,AE=/\d{3}/,xv=/\d{4}/,ng=/[+-]?\d{6}/,Wn=/\d\d?/,kE=/\d\d\d\d?/,CE=/\d\d\d\d\d\d?/,ig=/\d{1,3}/,Mv=/\d{1,4}/,sg=/[+-]?\d{1,6}/,bu=/\d+/,rg=/[+-]?\d+/,jL=/Z|[+-]\d\d:?\d\d/gi,og=/Z|[+-]\d\d(?::?\d\d)?/gi,YL=/[+-]?\d+(\.\d{1,3})?/,Lh=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Yp;Yp={};function _t(t,e,n){Yp[t]=no(e)?e:function(i,s){return i&&n?n:e}}function qL(t,e){return Sn(Yp,t)?Yp[t](e._strict,e._locale):new RegExp(XL(t))}function XL(t){return Ts(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,i,s,r){return n||i||s||r}))}function Ts(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var _1={};function Rn(t,e){var n,i=e,s;for(typeof t=="string"&&(t=[t]),Co(e)&&(i=function(r,o){o[e]=rn(r)}),s=t.length,n=0;n<s;n++)_1[t[n]]=i}function Ph(t,e){Rn(t,function(n,i,s,r){s._w=s._w||{},e(n,s._w,s,r)})}function ZL(t,e,n){e!=null&&Sn(_1,t)&&_1[t](e,n._a,n,t)}var Ui=0,bo=1,Hr=2,yi=3,vr=4,yo=5,Qa=6,JL=7,KL=8;function $L(t,e){return(t%e+e)%e}var ci;Array.prototype.indexOf?ci=Array.prototype.indexOf:ci=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function ag(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=$L(e,12);return t+=(e-n)/12,n===1?tg(t)?29:28:31-n%7%2}Et("M",["MM",2],"Mo",function(){return this.month()+1});Et("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});Et("MMMM",0,0,function(t){return this.localeData().months(this,t)});ji("month","M");Yi("month",8);_t("M",Wn);_t("MM",Wn,Rs);_t("MMM",function(t,e){return e.monthsShortRegex(t)});_t("MMMM",function(t,e){return e.monthsRegex(t)});Rn(["M","MM"],function(t,e){e[bo]=rn(t)-1});Rn(["MMM","MMMM"],function(t,e,n,i){var s=n._locale.monthsParse(t,i,n._strict);s!=null?e[bo]=s:Xt(n).invalidMonth=t});var QL="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),LE="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),PE=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,eP=Lh,tP=Lh;function nP(t,e){return t?Tr(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||PE).test(e)?"format":"standalone"][t.month()]:Tr(this._months)?this._months:this._months.standalone}function iP(t,e){return t?Tr(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[PE.test(e)?"format":"standalone"][t.month()]:Tr(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function sP(t,e,n){var i,s,r,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=to([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return n?e==="MMM"?(s=ci.call(this._shortMonthsParse,o),s!==-1?s:null):(s=ci.call(this._longMonthsParse,o),s!==-1?s:null):e==="MMM"?(s=ci.call(this._shortMonthsParse,o),s!==-1?s:(s=ci.call(this._longMonthsParse,o),s!==-1?s:null)):(s=ci.call(this._longMonthsParse,o),s!==-1?s:(s=ci.call(this._shortMonthsParse,o),s!==-1?s:null))}function rP(t,e,n){var i,s,r;if(this._monthsParseExact)return sP.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(s=to([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!n&&!this._monthsParse[i]&&(r="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[i].test(t))return i;if(n&&e==="MMM"&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function RE(t,e){var n;if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=rn(e);else if(e=t.localeData().monthsParse(e),!Co(e))return t}return n=Math.min(t.date(),ag(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function DE(t){return t!=null?(RE(this,t),rt.updateOffset(this,!0),this):jp(this,"Month")}function oP(){return ag(this.year(),this.month())}function aP(t){return this._monthsParseExact?(Sn(this,"_monthsRegex")||OE.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(Sn(this,"_monthsShortRegex")||(this._monthsShortRegex=eP),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function lP(t){return this._monthsParseExact?(Sn(this,"_monthsRegex")||OE.call(this),t?this._monthsStrictRegex:this._monthsRegex):(Sn(this,"_monthsRegex")||(this._monthsRegex=tP),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function OE(){function t(o,a){return a.length-o.length}var e=[],n=[],i=[],s,r;for(s=0;s<12;s++)r=to([2e3,s]),e.push(this.monthsShort(r,"")),n.push(this.months(r,"")),i.push(this.months(r,"")),i.push(this.monthsShort(r,""));for(e.sort(t),n.sort(t),i.sort(t),s=0;s<12;s++)e[s]=Ts(e[s]),n[s]=Ts(n[s]);for(s=0;s<24;s++)i[s]=Ts(i[s]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}Et("Y",0,0,function(){var t=this.year();return t<=9999?Yr(t,4):"+"+t});Et(0,["YY",2],0,function(){return this.year()%100});Et(0,["YYYY",4],0,"year");Et(0,["YYYYY",5],0,"year");Et(0,["YYYYYY",6,!0],0,"year");ji("year","y");Yi("year",1);_t("Y",rg);_t("YY",Wn,Rs);_t("YYYY",Mv,xv);_t("YYYYY",sg,ng);_t("YYYYYY",sg,ng);Rn(["YYYYY","YYYYYY"],Ui);Rn("YYYY",function(t,e){e[Ui]=t.length===2?rt.parseTwoDigitYear(t):rn(t)});Rn("YY",function(t,e){e[Ui]=rt.parseTwoDigitYear(t)});Rn("Y",function(t,e){e[Ui]=parseInt(t,10)});function uf(t){return tg(t)?366:365}rt.parseTwoDigitYear=function(t){return rn(t)+(rn(t)>68?1900:2e3)};var IE=vu("FullYear",!0);function cP(){return tg(this.year())}function uP(t,e,n,i,s,r,o){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,i,s,r,o),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,i,s,r,o),a}function If(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function qp(t,e,n){var i=7+e-n,s=(7+If(t,0,i).getUTCDay()-e)%7;return-s+i-1}function NE(t,e,n,i,s){var r=(7+n-i)%7,o=qp(t,i,s),a=1+7*(e-1)+r+o,l,c;return a<=0?(l=t-1,c=uf(l)+a):a>uf(t)?(l=t+1,c=a-uf(t)):(l=t,c=a),{year:l,dayOfYear:c}}function Nf(t,e,n){var i=qp(t.year(),e,n),s=Math.floor((t.dayOfYear()-i-1)/7)+1,r,o;return s<1?(o=t.year()-1,r=s+To(o,e,n)):s>To(t.year(),e,n)?(r=s-To(t.year(),e,n),o=t.year()+1):(o=t.year(),r=s),{week:r,year:o}}function To(t,e,n){var i=qp(t,e,n),s=qp(t+1,e,n);return(uf(t)-i+s)/7}Et("w",["ww",2],"wo","week");Et("W",["WW",2],"Wo","isoWeek");ji("week","w");ji("isoWeek","W");Yi("week",5);Yi("isoWeek",5);_t("w",Wn);_t("ww",Wn,Rs);_t("W",Wn);_t("WW",Wn,Rs);Ph(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=rn(t)});function fP(t){return Nf(t,this._week.dow,this._week.doy).week}var hP={dow:0,doy:6};function dP(){return this._week.dow}function pP(){return this._week.doy}function mP(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function gP(t){var e=Nf(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}Et("d",0,"do","day");Et("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});Et("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});Et("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});Et("e",0,0,"weekday");Et("E",0,0,"isoWeekday");ji("day","d");ji("weekday","e");ji("isoWeekday","E");Yi("day",11);Yi("weekday",11);Yi("isoWeekday",11);_t("d",Wn);_t("e",Wn);_t("E",Wn);_t("dd",function(t,e){return e.weekdaysMinRegex(t)});_t("ddd",function(t,e){return e.weekdaysShortRegex(t)});_t("dddd",function(t,e){return e.weekdaysRegex(t)});Ph(["dd","ddd","dddd"],function(t,e,n,i){var s=n._locale.weekdaysParse(t,i,n._strict);s!=null?e.d=s:Xt(n).invalidWeekday=t});Ph(["d","e","E"],function(t,e,n,i){e[i]=rn(t)});function _P(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function vP(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Sv(t,e){return t.slice(e,7).concat(t.slice(0,e))}var bP="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),BE="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),yP="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),wP=Lh,xP=Lh,MP=Lh;function SP(t,e){var n=Tr(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?Sv(n,this._week.dow):t?n[t.day()]:n}function EP(t){return t===!0?Sv(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function TP(t){return t===!0?Sv(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function AP(t,e,n){var i,s,r,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=to([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return n?e==="dddd"?(s=ci.call(this._weekdaysParse,o),s!==-1?s:null):e==="ddd"?(s=ci.call(this._shortWeekdaysParse,o),s!==-1?s:null):(s=ci.call(this._minWeekdaysParse,o),s!==-1?s:null):e==="dddd"?(s=ci.call(this._weekdaysParse,o),s!==-1||(s=ci.call(this._shortWeekdaysParse,o),s!==-1)?s:(s=ci.call(this._minWeekdaysParse,o),s!==-1?s:null)):e==="ddd"?(s=ci.call(this._shortWeekdaysParse,o),s!==-1||(s=ci.call(this._weekdaysParse,o),s!==-1)?s:(s=ci.call(this._minWeekdaysParse,o),s!==-1?s:null)):(s=ci.call(this._minWeekdaysParse,o),s!==-1||(s=ci.call(this._weekdaysParse,o),s!==-1)?s:(s=ci.call(this._shortWeekdaysParse,o),s!==-1?s:null))}function kP(t,e,n){var i,s,r;if(this._weekdaysParseExact)return AP.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(s=to([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[i].test(t))return i;if(n&&e==="ddd"&&this._shortWeekdaysParse[i].test(t))return i;if(n&&e==="dd"&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function CP(t){if(!this.isValid())return t!=null?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return t!=null?(t=_P(t,this.localeData()),this.add(t-e,"d")):e}function LP(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function PP(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=vP(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function RP(t){return this._weekdaysParseExact?(Sn(this,"_weekdaysRegex")||Ev.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(Sn(this,"_weekdaysRegex")||(this._weekdaysRegex=wP),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function DP(t){return this._weekdaysParseExact?(Sn(this,"_weekdaysRegex")||Ev.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Sn(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=xP),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function OP(t){return this._weekdaysParseExact?(Sn(this,"_weekdaysRegex")||Ev.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Sn(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=MP),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ev(){function t(u,f){return f.length-u.length}var e=[],n=[],i=[],s=[],r,o,a,l,c;for(r=0;r<7;r++)o=to([2e3,1]).day(r),a=Ts(this.weekdaysMin(o,"")),l=Ts(this.weekdaysShort(o,"")),c=Ts(this.weekdays(o,"")),e.push(a),n.push(l),i.push(c),s.push(a),s.push(l),s.push(c);e.sort(t),n.sort(t),i.sort(t),s.sort(t),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Tv(){return this.hours()%12||12}function IP(){return this.hours()||24}Et("H",["HH",2],0,"hour");Et("h",["hh",2],0,Tv);Et("k",["kk",2],0,IP);Et("hmm",0,0,function(){return""+Tv.apply(this)+Yr(this.minutes(),2)});Et("hmmss",0,0,function(){return""+Tv.apply(this)+Yr(this.minutes(),2)+Yr(this.seconds(),2)});Et("Hmm",0,0,function(){return""+this.hours()+Yr(this.minutes(),2)});Et("Hmmss",0,0,function(){return""+this.hours()+Yr(this.minutes(),2)+Yr(this.seconds(),2)});function FE(t,e){Et(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}FE("a",!0);FE("A",!1);ji("hour","h");Yi("hour",13);function zE(t,e){return e._meridiemParse}_t("a",zE);_t("A",zE);_t("H",Wn);_t("h",Wn);_t("k",Wn);_t("HH",Wn,Rs);_t("hh",Wn,Rs);_t("kk",Wn,Rs);_t("hmm",kE);_t("hmmss",CE);_t("Hmm",kE);_t("Hmmss",CE);Rn(["H","HH"],yi);Rn(["k","kk"],function(t,e,n){var i=rn(t);e[yi]=i===24?0:i});Rn(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});Rn(["h","hh"],function(t,e,n){e[yi]=rn(t),Xt(n).bigHour=!0});Rn("hmm",function(t,e,n){var i=t.length-2;e[yi]=rn(t.substr(0,i)),e[vr]=rn(t.substr(i)),Xt(n).bigHour=!0});Rn("hmmss",function(t,e,n){var i=t.length-4,s=t.length-2;e[yi]=rn(t.substr(0,i)),e[vr]=rn(t.substr(i,2)),e[yo]=rn(t.substr(s)),Xt(n).bigHour=!0});Rn("Hmm",function(t,e,n){var i=t.length-2;e[yi]=rn(t.substr(0,i)),e[vr]=rn(t.substr(i))});Rn("Hmmss",function(t,e,n){var i=t.length-4,s=t.length-2;e[yi]=rn(t.substr(0,i)),e[vr]=rn(t.substr(i,2)),e[yo]=rn(t.substr(s))});function NP(t){return(t+"").toLowerCase().charAt(0)==="p"}var BP=/[ap]\.?m?\.?/i,FP=vu("Hours",!0);function zP(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var UE={calendar:kL,longDateFormat:RL,invalidDate:OL,ordinal:NL,dayOfMonthOrdinalParse:BL,relativeTime:zL,months:QL,monthsShort:LE,week:hP,weekdays:bP,weekdaysMin:yP,weekdaysShort:BE,meridiemParse:BP},qn={},Pu={},Bf;function UP(t,e){var n,i=Math.min(t.length,e.length);for(n=0;n<i;n+=1)if(t[n]!==e[n])return n;return i}function oy(t){return t&&t.toLowerCase().replace("_","-")}function HP(t){for(var e=0,n,i,s,r;e<t.length;){for(r=oy(t[e]).split("-"),n=r.length,i=oy(t[e+1]),i=i?i.split("-"):null;n>0;){if(s=lg(r.slice(0,n).join("-")),s)return s;if(i&&i.length>=n&&UP(r,i)>=n-1)break;n--}e++}return Bf}function VP(t){return t.match("^[^/\\\\]*$")!=null}function lg(t){var e=null,n;if(qn[t]===void 0&&typeof module<"u"&&module&&module.exports&&VP(t))try{e=Bf._abbr,n=require,n("./locale/"+t),ga(e)}catch{qn[t]=null}return qn[t]}function ga(t,e){var n;return t&&(os(e)?n=No(t):n=Av(t,e),n?Bf=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Bf._abbr}function Av(t,e){if(e!==null){var n,i=UE;if(e.abbr=t,qn[t]!=null)xE("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=qn[t]._config;else if(e.parentLocale!=null)if(qn[e.parentLocale]!=null)i=qn[e.parentLocale]._config;else if(n=lg(e.parentLocale),n!=null)i=n._config;else return Pu[e.parentLocale]||(Pu[e.parentLocale]=[]),Pu[e.parentLocale].push({name:t,config:e}),null;return qn[t]=new bv(m1(i,e)),Pu[t]&&Pu[t].forEach(function(s){Av(s.name,s.config)}),ga(t),qn[t]}else return delete qn[t],null}function GP(t,e){if(e!=null){var n,i,s=UE;qn[t]!=null&&qn[t].parentLocale!=null?qn[t].set(m1(qn[t]._config,e)):(i=lg(t),i!=null&&(s=i._config),e=m1(s,e),i==null&&(e.abbr=t),n=new bv(e),n.parentLocale=qn[t],qn[t]=n),ga(t)}else qn[t]!=null&&(qn[t].parentLocale!=null?(qn[t]=qn[t].parentLocale,t===ga()&&ga(t)):qn[t]!=null&&delete qn[t]);return qn[t]}function No(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Bf;if(!Tr(t)){if(e=lg(t),e)return e;t=[t]}return HP(t)}function WP(){return g1(qn)}function kv(t){var e,n=t._a;return n&&Xt(t).overflow===-2&&(e=n[bo]<0||n[bo]>11?bo:n[Hr]<1||n[Hr]>ag(n[Ui],n[bo])?Hr:n[yi]<0||n[yi]>24||n[yi]===24&&(n[vr]!==0||n[yo]!==0||n[Qa]!==0)?yi:n[vr]<0||n[vr]>59?vr:n[yo]<0||n[yo]>59?yo:n[Qa]<0||n[Qa]>999?Qa:-1,Xt(t)._overflowDayOfYear&&(e<Ui||e>Hr)&&(e=Hr),Xt(t)._overflowWeeks&&e===-1&&(e=JL),Xt(t)._overflowWeekday&&e===-1&&(e=KL),Xt(t).overflow=e),t}var jP=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,YP=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qP=/Z|[+-]\d\d(?::?\d\d)?/,Jh=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Kg=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],XP=/^\/?Date\((-?\d+)/i,ZP=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,JP={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function HE(t){var e,n,i=t._i,s=jP.exec(i)||YP.exec(i),r,o,a,l,c=Jh.length,u=Kg.length;if(s){for(Xt(t).iso=!0,e=0,n=c;e<n;e++)if(Jh[e][1].exec(s[1])){o=Jh[e][0],r=Jh[e][2]!==!1;break}if(o==null){t._isValid=!1;return}if(s[3]){for(e=0,n=u;e<n;e++)if(Kg[e][1].exec(s[3])){a=(s[2]||" ")+Kg[e][0];break}if(a==null){t._isValid=!1;return}}if(!r&&a!=null){t._isValid=!1;return}if(s[4])if(qP.exec(s[4]))l="Z";else{t._isValid=!1;return}t._f=o+(a||"")+(l||""),Lv(t)}else t._isValid=!1}function KP(t,e,n,i,s,r){var o=[$P(t),LE.indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(s,10)];return r&&o.push(parseInt(r,10)),o}function $P(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function QP(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function e5(t,e,n){if(t){var i=BE.indexOf(t),s=new Date(e[0],e[1],e[2]).getDay();if(i!==s)return Xt(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function t5(t,e,n){if(t)return JP[t];if(e)return 0;var i=parseInt(n,10),s=i%100,r=(i-s)/100;return r*60+s}function VE(t){var e=ZP.exec(QP(t._i)),n;if(e){if(n=KP(e[4],e[3],e[2],e[5],e[6],e[7]),!e5(e[1],n,t))return;t._a=n,t._tzm=t5(e[8],e[9],e[10]),t._d=If.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),Xt(t).rfc2822=!0}else t._isValid=!1}function n5(t){var e=XP.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(HE(t),t._isValid===!1)delete t._isValid;else return;if(VE(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:rt.createFromInputFallback(t)}rt.createFromInputFallback=tr("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function _c(t,e,n){return t!=null?t:e!=null?e:n}function i5(t){var e=new Date(rt.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Cv(t){var e,n,i=[],s,r,o;if(!t._d){for(s=i5(t),t._w&&t._a[Hr]==null&&t._a[bo]==null&&s5(t),t._dayOfYear!=null&&(o=_c(t._a[Ui],s[Ui]),(t._dayOfYear>uf(o)||t._dayOfYear===0)&&(Xt(t)._overflowDayOfYear=!0),n=If(o,0,t._dayOfYear),t._a[bo]=n.getUTCMonth(),t._a[Hr]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=i[e]=s[e];for(;e<7;e++)t._a[e]=i[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[yi]===24&&t._a[vr]===0&&t._a[yo]===0&&t._a[Qa]===0&&(t._nextDay=!0,t._a[yi]=0),t._d=(t._useUTC?If:uP).apply(null,i),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[yi]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==r&&(Xt(t).weekdayMismatch=!0)}}function s5(t){var e,n,i,s,r,o,a,l,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(r=1,o=4,n=_c(e.GG,t._a[Ui],Nf(Gn(),1,4).year),i=_c(e.W,1),s=_c(e.E,1),(s<1||s>7)&&(l=!0)):(r=t._locale._week.dow,o=t._locale._week.doy,c=Nf(Gn(),r,o),n=_c(e.gg,t._a[Ui],c.year),i=_c(e.w,c.week),e.d!=null?(s=e.d,(s<0||s>6)&&(l=!0)):e.e!=null?(s=e.e+r,(e.e<0||e.e>6)&&(l=!0)):s=r),i<1||i>To(n,r,o)?Xt(t)._overflowWeeks=!0:l!=null?Xt(t)._overflowWeekday=!0:(a=NE(n,i,s,r,o),t._a[Ui]=a.year,t._dayOfYear=a.dayOfYear)}rt.ISO_8601=function(){};rt.RFC_2822=function(){};function Lv(t){if(t._f===rt.ISO_8601){HE(t);return}if(t._f===rt.RFC_2822){VE(t);return}t._a=[],Xt(t).empty=!0;var e=""+t._i,n,i,s,r,o,a=e.length,l=0,c,u;for(s=ME(t._f,t._locale).match(yv)||[],u=s.length,n=0;n<u;n++)r=s[n],i=(e.match(qL(r,t))||[])[0],i&&(o=e.substr(0,e.indexOf(i)),o.length>0&&Xt(t).unusedInput.push(o),e=e.slice(e.indexOf(i)+i.length),l+=i.length),Oc[r]?(i?Xt(t).empty=!1:Xt(t).unusedTokens.push(r),ZL(r,i,t)):t._strict&&!i&&Xt(t).unusedTokens.push(r);Xt(t).charsLeftOver=a-l,e.length>0&&Xt(t).unusedInput.push(e),t._a[yi]<=12&&Xt(t).bigHour===!0&&t._a[yi]>0&&(Xt(t).bigHour=void 0),Xt(t).parsedDateParts=t._a.slice(0),Xt(t).meridiem=t._meridiem,t._a[yi]=r5(t._locale,t._a[yi],t._meridiem),c=Xt(t).era,c!==null&&(t._a[Ui]=t._locale.erasConvertYear(c,t._a[Ui])),Cv(t),kv(t)}function r5(t,e,n){var i;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(i=t.isPM(n),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function o5(t){var e,n,i,s,r,o,a=!1,l=t._f.length;if(l===0){Xt(t).invalidFormat=!0,t._d=new Date(NaN);return}for(s=0;s<l;s++)r=0,o=!1,e=vv({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[s],Lv(e),_v(e)&&(o=!0),r+=Xt(e).charsLeftOver,r+=Xt(e).unusedTokens.length*10,Xt(e).score=r,a?r<i&&(i=r,n=e):(i==null||r<i||o)&&(i=r,n=e,o&&(a=!0));ra(t,n||e)}function a5(t){if(!t._d){var e=wv(t._i),n=e.day===void 0?e.date:e.day;t._a=yE([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),Cv(t)}}function l5(t){var e=new Ch(kv(GE(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function GE(t){var e=t._i,n=t._f;return t._locale=t._locale||No(t._l),e===null||n===void 0&&e===""?eg({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),Ar(e)?new Ch(kv(e)):(kh(e)?t._d=e:Tr(n)?o5(t):n?Lv(t):c5(t),_v(t)||(t._d=null),t))}function c5(t){var e=t._i;os(e)?t._d=new Date(rt.now()):kh(e)?t._d=new Date(e.valueOf()):typeof e=="string"?n5(t):Tr(e)?(t._a=yE(e.slice(0),function(n){return parseInt(n,10)}),Cv(t)):rl(e)?a5(t):Co(e)?t._d=new Date(e):rt.createFromInputFallback(t)}function WE(t,e,n,i,s){var r={};return(e===!0||e===!1)&&(i=e,e=void 0),(n===!0||n===!1)&&(i=n,n=void 0),(rl(t)&&gv(t)||Tr(t)&&t.length===0)&&(t=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=s,r._l=n,r._i=t,r._f=e,r._strict=i,l5(r)}function Gn(t,e,n,i){return WE(t,e,n,i,!1)}var u5=tr("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Gn.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:eg()}),f5=tr("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Gn.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:eg()});function jE(t,e){var n,i;if(e.length===1&&Tr(e[0])&&(e=e[0]),!e.length)return Gn();for(n=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][t](n))&&(n=e[i]);return n}function h5(){var t=[].slice.call(arguments,0);return jE("isBefore",t)}function d5(){var t=[].slice.call(arguments,0);return jE("isAfter",t)}var p5=function(){return Date.now?Date.now():+new Date},Ru=["year","quarter","month","week","day","hour","minute","second","millisecond"];function m5(t){var e,n=!1,i,s=Ru.length;for(e in t)if(Sn(t,e)&&!(ci.call(Ru,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(i=0;i<s;++i)if(t[Ru[i]]){if(n)return!1;parseFloat(t[Ru[i]])!==rn(t[Ru[i]])&&(n=!0)}return!0}function g5(){return this._isValid}function _5(){return Lr(NaN)}function cg(t){var e=wv(t),n=e.year||0,i=e.quarter||0,s=e.month||0,r=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=m5(e),this._milliseconds=+u+c*1e3+l*6e4+a*1e3*60*60,this._days=+o+r*7,this._months=+s+i*3+n*12,this._data={},this._locale=No(),this._bubble()}function ap(t){return t instanceof cg}function v1(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function v5(t,e,n){var i=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),r=0,o;for(o=0;o<i;o++)(n&&t[o]!==e[o]||!n&&rn(t[o])!==rn(e[o]))&&r++;return r+s}function YE(t,e){Et(t,0,0,function(){var n=this.utcOffset(),i="+";return n<0&&(n=-n,i="-"),i+Yr(~~(n/60),2)+e+Yr(~~n%60,2)})}YE("Z",":");YE("ZZ","");_t("Z",og);_t("ZZ",og);Rn(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Pv(og,t)});var b5=/([\+\-]|\d\d)/gi;function Pv(t,e){var n=(e||"").match(t),i,s,r;return n===null?null:(i=n[n.length-1]||[],s=(i+"").match(b5)||["-",0,0],r=+(s[1]*60)+rn(s[2]),r===0?0:s[0]==="+"?r:-r)}function Rv(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(Ar(t)||kh(t)?t.valueOf():Gn(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),rt.updateOffset(n,!1),n):Gn(t).local()}function b1(t){return-Math.round(t._d.getTimezoneOffset())}rt.updateOffset=function(){};function y5(t,e,n){var i=this._offset||0,s;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=Pv(og,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(s=b1(this)),this._offset=t,this._isUTC=!0,s!=null&&this.add(s,"m"),i!==t&&(!e||this._changeInProgress?ZE(this,Lr(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,rt.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:b1(this)}function w5(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function x5(t){return this.utcOffset(0,t)}function M5(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(b1(this),"m")),this}function S5(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=Pv(jL,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function E5(t){return this.isValid()?(t=t?Gn(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function T5(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function A5(){if(!os(this._isDSTShifted))return this._isDSTShifted;var t={},e;return vv(t,this),t=GE(t),t._a?(e=t._isUTC?to(t._a):Gn(t._a),this._isDSTShifted=this.isValid()&&v5(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function k5(){return this.isValid()?!this._isUTC:!1}function C5(){return this.isValid()?this._isUTC:!1}function qE(){return this.isValid()?this._isUTC&&this._offset===0:!1}var L5=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,P5=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Lr(t,e){var n=t,i=null,s,r,o;return ap(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:Co(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(i=L5.exec(t))?(s=i[1]==="-"?-1:1,n={y:0,d:rn(i[Hr])*s,h:rn(i[yi])*s,m:rn(i[vr])*s,s:rn(i[yo])*s,ms:rn(v1(i[Qa]*1e3))*s}):(i=P5.exec(t))?(s=i[1]==="-"?-1:1,n={y:Fa(i[2],s),M:Fa(i[3],s),w:Fa(i[4],s),d:Fa(i[5],s),h:Fa(i[6],s),m:Fa(i[7],s),s:Fa(i[8],s)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=R5(Gn(n.from),Gn(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),r=new cg(n),ap(t)&&Sn(t,"_locale")&&(r._locale=t._locale),ap(t)&&Sn(t,"_isValid")&&(r._isValid=t._isValid),r}Lr.fn=cg.prototype;Lr.invalid=_5;function Fa(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function ay(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function R5(t,e){var n;return t.isValid()&&e.isValid()?(e=Rv(e,t),t.isBefore(e)?n=ay(t,e):(n=ay(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function XE(t,e){return function(n,i){var s,r;return i!==null&&!isNaN(+i)&&(xE(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),s=Lr(n,i),ZE(this,s,t),this}}function ZE(t,e,n,i){var s=e._milliseconds,r=v1(e._days),o=v1(e._months);!t.isValid()||(i=i==null?!0:i,o&&RE(t,jp(t,"Month")+o*n),r&&EE(t,"Date",jp(t,"Date")+r*n),s&&t._d.setTime(t._d.valueOf()+s*n),i&&rt.updateOffset(t,r||o))}var D5=XE(1,"add"),O5=XE(-1,"subtract");function JE(t){return typeof t=="string"||t instanceof String}function I5(t){return Ar(t)||kh(t)||JE(t)||Co(t)||B5(t)||N5(t)||t===null||t===void 0}function N5(t){var e=rl(t)&&!gv(t),n=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,r,o=i.length;for(s=0;s<o;s+=1)r=i[s],n=n||Sn(t,r);return e&&n}function B5(t){var e=Tr(t),n=!1;return e&&(n=t.filter(function(i){return!Co(i)&&JE(t)}).length===0),e&&n}function F5(t){var e=rl(t)&&!gv(t),n=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,r;for(s=0;s<i.length;s+=1)r=i[s],n=n||Sn(t,r);return e&&n}function z5(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function U5(t,e){arguments.length===1&&(arguments[0]?I5(arguments[0])?(t=arguments[0],e=void 0):F5(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||Gn(),i=Rv(n,this).startOf("day"),s=rt.calendarFormat(this,i)||"sameElse",r=e&&(no(e[s])?e[s].call(this,n):e[s]);return this.format(r||this.localeData().calendar(s,this,Gn(n)))}function H5(){return new Ch(this)}function V5(t,e){var n=Ar(t)?t:Gn(t);return this.isValid()&&n.isValid()?(e=nr(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function G5(t,e){var n=Ar(t)?t:Gn(t);return this.isValid()&&n.isValid()?(e=nr(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function W5(t,e,n,i){var s=Ar(t)?t:Gn(t),r=Ar(e)?e:Gn(e);return this.isValid()&&s.isValid()&&r.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(s,n):!this.isBefore(s,n))&&(i[1]===")"?this.isBefore(r,n):!this.isAfter(r,n))):!1}function j5(t,e){var n=Ar(t)?t:Gn(t),i;return this.isValid()&&n.isValid()?(e=nr(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function Y5(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function q5(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function X5(t,e,n){var i,s,r;if(!this.isValid())return NaN;if(i=Rv(t,this),!i.isValid())return NaN;switch(s=(i.utcOffset()-this.utcOffset())*6e4,e=nr(e),e){case"year":r=lp(this,i)/12;break;case"month":r=lp(this,i);break;case"quarter":r=lp(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-s)/864e5;break;case"week":r=(this-i-s)/6048e5;break;default:r=this-i}return n?r:Vs(r)}function lp(t,e){if(t.date()<e.date())return-lp(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),i=t.clone().add(n,"months"),s,r;return e-i<0?(s=t.clone().add(n-1,"months"),r=(e-i)/(i-s)):(s=t.clone().add(n+1,"months"),r=(e-i)/(s-i)),-(n+r)||0}rt.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";rt.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Z5(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function J5(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?op(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):no(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",op(n,"Z")):op(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function K5(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,i,s,r;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",r=e+'[")]',this.format(n+i+s+r)}function $5(t){t||(t=this.isUtc()?rt.defaultFormatUtc:rt.defaultFormat);var e=op(this,t);return this.localeData().postformat(e)}function Q5(t,e){return this.isValid()&&(Ar(t)&&t.isValid()||Gn(t).isValid())?Lr({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function eR(t){return this.from(Gn(),t)}function tR(t,e){return this.isValid()&&(Ar(t)&&t.isValid()||Gn(t).isValid())?Lr({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function nR(t){return this.to(Gn(),t)}function KE(t){var e;return t===void 0?this._locale._abbr:(e=No(t),e!=null&&(this._locale=e),this)}var $E=tr("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function QE(){return this._locale}var Xp=1e3,Ic=60*Xp,Zp=60*Ic,e4=(365*400+97)*24*Zp;function Nc(t,e){return(t%e+e)%e}function t4(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-e4:new Date(t,e,n).valueOf()}function n4(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-e4:Date.UTC(t,e,n)}function iR(t){var e,n;if(t=nr(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?n4:t4,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Nc(e+(this._isUTC?0:this.utcOffset()*Ic),Zp);break;case"minute":e=this._d.valueOf(),e-=Nc(e,Ic);break;case"second":e=this._d.valueOf(),e-=Nc(e,Xp);break}return this._d.setTime(e),rt.updateOffset(this,!0),this}function sR(t){var e,n;if(t=nr(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?n4:t4,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Zp-Nc(e+(this._isUTC?0:this.utcOffset()*Ic),Zp)-1;break;case"minute":e=this._d.valueOf(),e+=Ic-Nc(e,Ic)-1;break;case"second":e=this._d.valueOf(),e+=Xp-Nc(e,Xp)-1;break}return this._d.setTime(e),rt.updateOffset(this,!0),this}function rR(){return this._d.valueOf()-(this._offset||0)*6e4}function oR(){return Math.floor(this.valueOf()/1e3)}function aR(){return new Date(this.valueOf())}function lR(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function cR(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function uR(){return this.isValid()?this.toISOString():null}function fR(){return _v(this)}function hR(){return ra({},Xt(this))}function dR(){return Xt(this).overflow}function pR(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Et("N",0,0,"eraAbbr");Et("NN",0,0,"eraAbbr");Et("NNN",0,0,"eraAbbr");Et("NNNN",0,0,"eraName");Et("NNNNN",0,0,"eraNarrow");Et("y",["y",1],"yo","eraYear");Et("y",["yy",2],0,"eraYear");Et("y",["yyy",3],0,"eraYear");Et("y",["yyyy",4],0,"eraYear");_t("N",Dv);_t("NN",Dv);_t("NNN",Dv);_t("NNNN",ER);_t("NNNNN",TR);Rn(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,i){var s=n._locale.erasParse(t,i,n._strict);s?Xt(n).era=s:Xt(n).invalidEra=t});_t("y",bu);_t("yy",bu);_t("yyy",bu);_t("yyyy",bu);_t("yo",AR);Rn(["y","yy","yyy","yyyy"],Ui);Rn(["yo"],function(t,e,n,i){var s;n._locale._eraYearOrdinalRegex&&(s=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[Ui]=n._locale.eraYearOrdinalParse(t,s):e[Ui]=parseInt(t,10)});function mR(t,e){var n,i,s,r=this._eras||No("en")._eras;for(n=0,i=r.length;n<i;++n){switch(typeof r[n].since){case"string":s=rt(r[n].since).startOf("day"),r[n].since=s.valueOf();break}switch(typeof r[n].until){case"undefined":r[n].until=1/0;break;case"string":s=rt(r[n].until).startOf("day").valueOf(),r[n].until=s.valueOf();break}}return r}function gR(t,e,n){var i,s,r=this.eras(),o,a,l;for(t=t.toUpperCase(),i=0,s=r.length;i<s;++i)if(o=r[i].name.toUpperCase(),a=r[i].abbr.toUpperCase(),l=r[i].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return r[i];break;case"NNNN":if(o===t)return r[i];break;case"NNNNN":if(l===t)return r[i];break}else if([o,a,l].indexOf(t)>=0)return r[i]}function _R(t,e){var n=t.since<=t.until?1:-1;return e===void 0?rt(t.since).year():rt(t.since).year()+(e-t.offset)*n}function vR(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].name;return""}function bR(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].narrow;return""}function yR(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].abbr;return""}function wR(){var t,e,n,i,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=s[t].since<=s[t].until?1:-1,i=this.clone().startOf("day").valueOf(),s[t].since<=i&&i<=s[t].until||s[t].until<=i&&i<=s[t].since)return(this.year()-rt(s[t].since).year())*n+s[t].offset;return this.year()}function xR(t){return Sn(this,"_erasNameRegex")||Ov.call(this),t?this._erasNameRegex:this._erasRegex}function MR(t){return Sn(this,"_erasAbbrRegex")||Ov.call(this),t?this._erasAbbrRegex:this._erasRegex}function SR(t){return Sn(this,"_erasNarrowRegex")||Ov.call(this),t?this._erasNarrowRegex:this._erasRegex}function Dv(t,e){return e.erasAbbrRegex(t)}function ER(t,e){return e.erasNameRegex(t)}function TR(t,e){return e.erasNarrowRegex(t)}function AR(t,e){return e._eraYearOrdinalRegex||bu}function Ov(){var t=[],e=[],n=[],i=[],s,r,o=this.eras();for(s=0,r=o.length;s<r;++s)e.push(Ts(o[s].name)),t.push(Ts(o[s].abbr)),n.push(Ts(o[s].narrow)),i.push(Ts(o[s].name)),i.push(Ts(o[s].abbr)),i.push(Ts(o[s].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}Et(0,["gg",2],0,function(){return this.weekYear()%100});Et(0,["GG",2],0,function(){return this.isoWeekYear()%100});function ug(t,e){Et(0,[t,t.length],0,e)}ug("gggg","weekYear");ug("ggggg","weekYear");ug("GGGG","isoWeekYear");ug("GGGGG","isoWeekYear");ji("weekYear","gg");ji("isoWeekYear","GG");Yi("weekYear",1);Yi("isoWeekYear",1);_t("G",rg);_t("g",rg);_t("GG",Wn,Rs);_t("gg",Wn,Rs);_t("GGGG",Mv,xv);_t("gggg",Mv,xv);_t("GGGGG",sg,ng);_t("ggggg",sg,ng);Ph(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=rn(t)});Ph(["gg","GG"],function(t,e,n,i){e[i]=rt.parseTwoDigitYear(t)});function kR(t){return i4.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function CR(t){return i4.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function LR(){return To(this.year(),1,4)}function PR(){return To(this.isoWeekYear(),1,4)}function RR(){var t=this.localeData()._week;return To(this.year(),t.dow,t.doy)}function DR(){var t=this.localeData()._week;return To(this.weekYear(),t.dow,t.doy)}function i4(t,e,n,i,s){var r;return t==null?Nf(this,i,s).year:(r=To(t,i,s),e>r&&(e=r),OR.call(this,t,e,n,i,s))}function OR(t,e,n,i,s){var r=NE(t,e,n,i,s),o=If(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Et("Q",0,"Qo","quarter");ji("quarter","Q");Yi("quarter",7);_t("Q",TE);Rn("Q",function(t,e){e[bo]=(rn(t)-1)*3});function IR(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}Et("D",["DD",2],"Do","date");ji("date","D");Yi("date",9);_t("D",Wn);_t("DD",Wn,Rs);_t("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Rn(["D","DD"],Hr);Rn("Do",function(t,e){e[Hr]=rn(t.match(Wn)[0])});var s4=vu("Date",!0);Et("DDD",["DDDD",3],"DDDo","dayOfYear");ji("dayOfYear","DDD");Yi("dayOfYear",4);_t("DDD",ig);_t("DDDD",AE);Rn(["DDD","DDDD"],function(t,e,n){n._dayOfYear=rn(t)});function NR(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}Et("m",["mm",2],0,"minute");ji("minute","m");Yi("minute",14);_t("m",Wn);_t("mm",Wn,Rs);Rn(["m","mm"],vr);var BR=vu("Minutes",!1);Et("s",["ss",2],0,"second");ji("second","s");Yi("second",15);_t("s",Wn);_t("ss",Wn,Rs);Rn(["s","ss"],yo);var FR=vu("Seconds",!1);Et("S",0,0,function(){return~~(this.millisecond()/100)});Et(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Et(0,["SSS",3],0,"millisecond");Et(0,["SSSS",4],0,function(){return this.millisecond()*10});Et(0,["SSSSS",5],0,function(){return this.millisecond()*100});Et(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Et(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Et(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Et(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});ji("millisecond","ms");Yi("millisecond",16);_t("S",ig,TE);_t("SS",ig,Rs);_t("SSS",ig,AE);var oa,r4;for(oa="SSSS";oa.length<=9;oa+="S")_t(oa,bu);function zR(t,e){e[Qa]=rn(("0."+t)*1e3)}for(oa="S";oa.length<=9;oa+="S")Rn(oa,zR);r4=vu("Milliseconds",!1);Et("z",0,0,"zoneAbbr");Et("zz",0,0,"zoneName");function UR(){return this._isUTC?"UTC":""}function HR(){return this._isUTC?"Coordinated Universal Time":""}var et=Ch.prototype;et.add=D5;et.calendar=U5;et.clone=H5;et.diff=X5;et.endOf=sR;et.format=$5;et.from=Q5;et.fromNow=eR;et.to=tR;et.toNow=nR;et.get=GL;et.invalidAt=dR;et.isAfter=V5;et.isBefore=G5;et.isBetween=W5;et.isSame=j5;et.isSameOrAfter=Y5;et.isSameOrBefore=q5;et.isValid=fR;et.lang=$E;et.locale=KE;et.localeData=QE;et.max=f5;et.min=u5;et.parsingFlags=hR;et.set=WL;et.startOf=iR;et.subtract=O5;et.toArray=lR;et.toObject=cR;et.toDate=aR;et.toISOString=J5;et.inspect=K5;typeof Symbol<"u"&&Symbol.for!=null&&(et[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});et.toJSON=uR;et.toString=Z5;et.unix=oR;et.valueOf=rR;et.creationData=pR;et.eraName=vR;et.eraNarrow=bR;et.eraAbbr=yR;et.eraYear=wR;et.year=IE;et.isLeapYear=cP;et.weekYear=kR;et.isoWeekYear=CR;et.quarter=et.quarters=IR;et.month=DE;et.daysInMonth=oP;et.week=et.weeks=mP;et.isoWeek=et.isoWeeks=gP;et.weeksInYear=RR;et.weeksInWeekYear=DR;et.isoWeeksInYear=LR;et.isoWeeksInISOWeekYear=PR;et.date=s4;et.day=et.days=CP;et.weekday=LP;et.isoWeekday=PP;et.dayOfYear=NR;et.hour=et.hours=FP;et.minute=et.minutes=BR;et.second=et.seconds=FR;et.millisecond=et.milliseconds=r4;et.utcOffset=y5;et.utc=x5;et.local=M5;et.parseZone=S5;et.hasAlignedHourOffset=E5;et.isDST=T5;et.isLocal=k5;et.isUtcOffset=C5;et.isUtc=qE;et.isUTC=qE;et.zoneAbbr=UR;et.zoneName=HR;et.dates=tr("dates accessor is deprecated. Use date instead.",s4);et.months=tr("months accessor is deprecated. Use month instead",DE);et.years=tr("years accessor is deprecated. Use year instead",IE);et.zone=tr("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",w5);et.isDSTShifted=tr("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",A5);function VR(t){return Gn(t*1e3)}function GR(){return Gn.apply(null,arguments).parseZone()}function o4(t){return t}var En=bv.prototype;En.calendar=CL;En.longDateFormat=DL;En.invalidDate=IL;En.ordinal=FL;En.preparse=o4;En.postformat=o4;En.relativeTime=UL;En.pastFuture=HL;En.set=AL;En.eras=mR;En.erasParse=gR;En.erasConvertYear=_R;En.erasAbbrRegex=MR;En.erasNameRegex=xR;En.erasNarrowRegex=SR;En.months=nP;En.monthsShort=iP;En.monthsParse=rP;En.monthsRegex=lP;En.monthsShortRegex=aP;En.week=fP;En.firstDayOfYear=pP;En.firstDayOfWeek=dP;En.weekdays=SP;En.weekdaysMin=TP;En.weekdaysShort=EP;En.weekdaysParse=kP;En.weekdaysRegex=RP;En.weekdaysShortRegex=DP;En.weekdaysMinRegex=OP;En.isPM=NP;En.meridiem=zP;function Jp(t,e,n,i){var s=No(),r=to().set(i,e);return s[n](r,t)}function a4(t,e,n){if(Co(t)&&(e=t,t=void 0),t=t||"",e!=null)return Jp(t,e,n,"month");var i,s=[];for(i=0;i<12;i++)s[i]=Jp(t,i,n,"month");return s}function Iv(t,e,n,i){typeof t=="boolean"?(Co(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,Co(e)&&(n=e,e=void 0),e=e||"");var s=No(),r=t?s._week.dow:0,o,a=[];if(n!=null)return Jp(e,(n+r)%7,i,"day");for(o=0;o<7;o++)a[o]=Jp(e,(o+r)%7,i,"day");return a}function WR(t,e){return a4(t,e,"months")}function jR(t,e){return a4(t,e,"monthsShort")}function YR(t,e,n){return Iv(t,e,n,"weekdays")}function qR(t,e,n){return Iv(t,e,n,"weekdaysShort")}function XR(t,e,n){return Iv(t,e,n,"weekdaysMin")}ga("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=rn(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});rt.lang=tr("moment.lang is deprecated. Use moment.locale instead.",ga);rt.langData=tr("moment.langData is deprecated. Use moment.localeData instead.",No);var so=Math.abs;function ZR(){var t=this._data;return this._milliseconds=so(this._milliseconds),this._days=so(this._days),this._months=so(this._months),t.milliseconds=so(t.milliseconds),t.seconds=so(t.seconds),t.minutes=so(t.minutes),t.hours=so(t.hours),t.months=so(t.months),t.years=so(t.years),this}function l4(t,e,n,i){var s=Lr(e,n);return t._milliseconds+=i*s._milliseconds,t._days+=i*s._days,t._months+=i*s._months,t._bubble()}function JR(t,e){return l4(this,t,e,1)}function KR(t,e){return l4(this,t,e,-1)}function ly(t){return t<0?Math.floor(t):Math.ceil(t)}function $R(){var t=this._milliseconds,e=this._days,n=this._months,i=this._data,s,r,o,a,l;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=ly(y1(n)+e)*864e5,e=0,n=0),i.milliseconds=t%1e3,s=Vs(t/1e3),i.seconds=s%60,r=Vs(s/60),i.minutes=r%60,o=Vs(r/60),i.hours=o%24,e+=Vs(o/24),l=Vs(c4(e)),n+=l,e-=ly(y1(l)),a=Vs(n/12),n%=12,i.days=e,i.months=n,i.years=a,this}function c4(t){return t*4800/146097}function y1(t){return t*146097/4800}function QR(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if(t=nr(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+i/864e5,n=this._months+c4(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(y1(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+t)}}function eD(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+rn(this._months/12)*31536e6:NaN}function Bo(t){return function(){return this.as(t)}}var tD=Bo("ms"),nD=Bo("s"),iD=Bo("m"),sD=Bo("h"),rD=Bo("d"),oD=Bo("w"),aD=Bo("M"),lD=Bo("Q"),cD=Bo("y");function uD(){return Lr(this)}function fD(t){return t=nr(t),this.isValid()?this[t+"s"]():NaN}function Rl(t){return function(){return this.isValid()?this._data[t]:NaN}}var hD=Rl("milliseconds"),dD=Rl("seconds"),pD=Rl("minutes"),mD=Rl("hours"),gD=Rl("days"),_D=Rl("months"),vD=Rl("years");function bD(){return Vs(this.days()/7)}var mo=Math.round,yc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function yD(t,e,n,i,s){return s.relativeTime(e||1,!!n,t,i)}function wD(t,e,n,i){var s=Lr(t).abs(),r=mo(s.as("s")),o=mo(s.as("m")),a=mo(s.as("h")),l=mo(s.as("d")),c=mo(s.as("M")),u=mo(s.as("w")),f=mo(s.as("y")),h=r<=n.ss&&["s",r]||r<n.s&&["ss",r]||o<=1&&["m"]||o<n.m&&["mm",o]||a<=1&&["h"]||a<n.h&&["hh",a]||l<=1&&["d"]||l<n.d&&["dd",l];return n.w!=null&&(h=h||u<=1&&["w"]||u<n.w&&["ww",u]),h=h||c<=1&&["M"]||c<n.M&&["MM",c]||f<=1&&["y"]||["yy",f],h[2]=e,h[3]=+t>0,h[4]=i,yD.apply(null,h)}function xD(t){return t===void 0?mo:typeof t=="function"?(mo=t,!0):!1}function MD(t,e){return yc[t]===void 0?!1:e===void 0?yc[t]:(yc[t]=e,t==="s"&&(yc.ss=e-1),!0)}function SD(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,i=yc,s,r;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(i=Object.assign({},yc,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),s=this.localeData(),r=wD(this,!n,i,s),n&&(r=s.pastFuture(+this,r)),s.postformat(r)}var $g=Math.abs;function Hl(t){return(t>0)-(t<0)||+t}function fg(){if(!this.isValid())return this.localeData().invalidDate();var t=$g(this._milliseconds)/1e3,e=$g(this._days),n=$g(this._months),i,s,r,o,a=this.asSeconds(),l,c,u,f;return a?(i=Vs(t/60),s=Vs(i/60),t%=60,i%=60,r=Vs(n/12),n%=12,o=t?t.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",c=Hl(this._months)!==Hl(a)?"-":"",u=Hl(this._days)!==Hl(a)?"-":"",f=Hl(this._milliseconds)!==Hl(a)?"-":"",l+"P"+(r?c+r+"Y":"")+(n?c+n+"M":"")+(e?u+e+"D":"")+(s||i||t?"T":"")+(s?f+s+"H":"")+(i?f+i+"M":"")+(t?f+o+"S":"")):"P0D"}var _n=cg.prototype;_n.isValid=g5;_n.abs=ZR;_n.add=JR;_n.subtract=KR;_n.as=QR;_n.asMilliseconds=tD;_n.asSeconds=nD;_n.asMinutes=iD;_n.asHours=sD;_n.asDays=rD;_n.asWeeks=oD;_n.asMonths=aD;_n.asQuarters=lD;_n.asYears=cD;_n.valueOf=eD;_n._bubble=$R;_n.clone=uD;_n.get=fD;_n.milliseconds=hD;_n.seconds=dD;_n.minutes=pD;_n.hours=mD;_n.days=gD;_n.weeks=bD;_n.months=_D;_n.years=vD;_n.humanize=SD;_n.toISOString=fg;_n.toString=fg;_n.toJSON=fg;_n.locale=KE;_n.localeData=QE;_n.toIsoString=tr("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",fg);_n.lang=$E;Et("X",0,0,"unix");Et("x",0,0,"valueOf");_t("x",rg);_t("X",YL);Rn("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});Rn("x",function(t,e,n){n._d=new Date(rn(t))});//! moment.js
rt.version="2.29.4";EL(Gn);rt.fn=et;rt.min=h5;rt.max=d5;rt.now=p5;rt.utc=to;rt.unix=VR;rt.months=WR;rt.isDate=kh;rt.locale=ga;rt.invalid=eg;rt.duration=Lr;rt.isMoment=Ar;rt.weekdays=YR;rt.parseZone=GR;rt.localeData=No;rt.isDuration=ap;rt.monthsShort=jR;rt.weekdaysMin=XR;rt.defineLocale=Av;rt.updateLocale=GP;rt.locales=WP;rt.weekdaysShort=qR;rt.normalizeUnits=nr;rt.relativeTimeRounding=xD;rt.relativeTimeThreshold=MD;rt.calendarFormat=z5;rt.prototype=et;rt.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function ED(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M19,13H5V11H19V13Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function TD(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class Nv extends dt{constructor(e){super(),ht(this,e,TD,ED,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function AD(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function kD(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class Oa extends dt{constructor(e){super(),ht(this,e,kD,AD,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}const Dc=class{constructor(){ke(this,"ipc");ke(this,"window");ke(this,"algSub");ke(this,"cardSub");ke(this,"tutSub");ke(this,"solveSub");ke(this,"contestSub");ke(this,"sessSub");ke(this,"anySub");ke(this,"isElectron");this.algSub=bn([]),this.cardSub=bn([]),this.solveSub=bn(),this.tutSub=bn(),this.sessSub=bn(),this.contestSub=bn(),this.anySub=bn(),navigator.userAgent.indexOf("Electron")>-1?(this.ipc=window.electronAPI,this.isElectron=!0,this.setIpc()):this.isElectron=!1}static getInstance(){return Dc._instance?Dc._instance:Dc._instance=new Dc}setIpc(){this.ipc.handleTutorials((e,n)=>{this.tutSub.set(n)}),this.ipc.handleAlgorithms((e,n)=>{this.algSub.set(n)}),this.ipc.handleCards((e,n)=>{this.cardSub.set(n)}),this.ipc.handleSolves((e,n)=>{this.solveSub.set({type:n[0],data:n[1]})}),this.ipc.handleContests((e,n)=>{this.contestSub.set({type:n[0],data:n[1]})}),this.ipc.handleSessions((e,n)=>{this.sessSub.set({type:n[0],data:n[1]})}),this.ipc.handleAny((e,n)=>{this.anySub.set({type:n[0],data:n[1]})})}getAlgorithms(e){this.isElectron&&this.ipc.getAlgorithms(e)}getCards(){this.isElectron&&this.ipc.getCards()}getTutorials(){this.isElectron&&this.ipc.getTutorials()}addTutorial(e){this.isElectron&&this.ipc.addTutorial(e)}updateTutorial(e){this.isElectron&&this.ipc.updateTutorial(e)}getSolves(){this.isElectron&&this.ipc.getSolves()}addSolve(e){this.isElectron&&this.ipc.addSolve(e)}updateSolve(e){this.isElectron&&this.ipc.updateSolve(e)}removeSolves(e){this.isElectron&&this.ipc.removeSolves(e.map(n=>n._id))}getSessions(){this.isElectron&&this.ipc.getSessions()}addSession(e){this.isElectron&&this.ipc.addSession(e)}removeSession(e){this.isElectron&&this.ipc.removeSession(e)}renameSession(e){this.isElectron&&this.ipc.renameSession(e)}updateSession(e){this.isElectron&&this.ipc.updateSession(e)}addContest(e){this.isElectron&&this.ipc.addContest(e)}getContests(){this.isElectron&&this.ipc.getContests()}updateContest(e){this.isElectron&&this.ipc.updateContest(e)}removeContests(e){this.isElectron&&this.ipc.removeContests(e)}minimize(){this.isElectron&&this.ipc.minimize()}maximize(){this.isElectron&&this.ipc.maximize()}close(){this.isElectron&&this.ipc.close()}generatePDF(e){this.isElectron&&this.ipc.generatePDF(e)}zipPDF(e){this.isElectron&&this.ipc.zipPDF(e)}openFile(e){this.isElectron&&this.ipc.openFile(e)}revealFile(e){this.isElectron&&this.ipc.revealFile(e)}};let Ys=Dc;ke(Ys,"_instance");function CD(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g;return h=new Nv({}),_=new Oa({props:{height:"100%"}}),{c(){e=D("section"),n=D("img"),s=z(),r=D("h4"),r.textContent="CubeDB",o=z(),a=D("div"),l=D("span"),c=ye(t[0]),u=z(),f=D("span"),ce(h.$$.fragment),d=z(),p=D("span"),ce(_.$$.fragment),M(n,"draggable","false"),gi(n.src,i="/assets/logo.png")||M(n,"src",i),M(n,"alt",""),M(n,"class","ml-1 w-8 flex my-auto"),M(r,"class","ml-1"),M(f,"class","ml-2 cursor-pointer"),M(p,"class","ml-2 mr-1 cursor-pointer"),M(a,"class","absolute right-0 top-0 flex h-8 items-center"),M(e,"class","w-full h-8 shadow-sm bg-white bg-opacity-10 text-gray-400 fixed z-10 mb-3 select-none flex items-center")},m(b,y){I(b,e,y),E(e,n),E(e,s),E(e,r),E(e,o),E(e,a),E(a,l),E(l,c),E(a,u),E(a,f),ae(h,f,null),E(a,d),E(a,p),ae(_,p,null),m=!0,v||(g=[tt(f,"click",t[1]),tt(p,"click",t[2])],v=!0)},p(b,[y]){(!m||y&1)&&nt(c,b[0])},i(b){m||(P(h.$$.fragment,b),P(_.$$.fragment,b),m=!0)},o(b){H(h.$$.fragment,b),H(_.$$.fragment,b),m=!1},d(b){b&&O(e),le(h),le(_),v=!1,Jn(g)}}}function LD(t,e,n){const i=Ys.getInstance();let s,r;gs(()=>{n(0,s=rt().format("hh:mm a")),r=setInterval(()=>{n(0,s=rt().format("hh:mm a"))},1e3)}),er(()=>{clearInterval(r)});function o(){i.minimize()}function a(){i.close()}return[s,o,a]}class PD extends dt{constructor(e){super(),ht(this,e,LD,CD,ft,{})}}function cy(t,e,n){const i=t.slice();return i[4]=e[n],i}function RD(t){let e=t[4].name+"",n,i;return{c(){n=ye(e),i=z()},m(s,r){I(s,n,r),I(s,i,r)},p(s,r){r&1&&e!==(e=s[4].name+"")&&nt(n,e)},d(s){s&&O(n),s&&O(i)}}}function uy(t){let e,n;return e=new Qm({props:{class:"mr-1 rounded-sm shadow-md uppercase p-2 bg-white bg-opacity-10 text-gray-400",to:t[4].link,$$slots:{default:[RD]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s&1&&(r.to=i[4].link),s&129&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function DD(t){let e,n,i=t[0],s=[];for(let o=0;o<i.length;o+=1)s[o]=uy(cy(t,i,o));const r=o=>H(s[o],1,1,()=>{s[o]=null});return{c(){e=D("nav");for(let o=0;o<s.length;o+=1)s[o].c();M(e,"class","w-full px-5 inline-flex mt-10 select-none fixed z-10")},m(o,a){I(o,e,a);for(let l=0;l<s.length;l+=1)s[l].m(e,null);n=!0},p(o,[a]){if(a&1){i=o[0];let l;for(l=0;l<i.length;l+=1){const c=cy(o,i,l);s[l]?(s[l].p(c,a),P(s[l],1)):(s[l]=uy(c),s[l].c(),P(s[l],1),s[l].m(e,null))}for(at(),l=i.length;l<s.length;l+=1)r(l);lt()}},i(o){if(!n){for(let a=0;a<i.length;a+=1)P(s[a]);n=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)H(s[a]);n=!1},d(o){o&&O(e),en(s,o)}}}function OD(t,e,n){let i;const{activeRoute:s}=xa(Df);Lt(t,s,a=>n(2,i=a));let r=[];function o(a){if(n(0,r.length=0,r),n(0,r=[{link:"/",name:"Home"}]),!a){Wp("/");return}let l=a.route._path.replace("*",a.params["*"]||"").split("?")[0].split("/").filter(c=>c);n(0,r=[...r,...l.map((c,u)=>({link:"/"+l.slice(0,u+1).join("/"),name:c}))])}return t.$$.update=()=>{t.$$.dirty&4&&o(i)},[r,s,i]}class ID extends dt{constructor(e){super(),ht(this,e,OD,DD,ft,{})}}const ND="modulepreload",BD=function(t,e){return new URL(t,e).href},fy={},u4=function(e,n,i){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=BD(r,i),r in fy)return;fy[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=s.length-1;u>=0;u--){const f=s[u];if(f.href===r&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":ND,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};async function Dl(t,e,n,i,s){let r=bn("__initial__");const o=await u4(()=>import("./imageWorker.b8ac3f9d.js"),[],import.meta.url),a=new o.default;let l=0;return a.onmessage=c=>{if(c.data||(console.log("!e.data terminate"),r.update(()=>null),a.terminate()),!n&&!i)r.update(()=>c.data);else if(!n&&i)t[l++].img=c.data,l>=t.length&&(r.update(()=>null),a.terminate());else{if(i)if(!n)t[l++].img=c.data;else for(let u=0,f=t.length;u<f;u+=1)t[u].img=c.data[u];console.log("ALL_INCUBE: ",n,i),r.update(()=>c.data),(l>=t.length||n)&&(console.log("ENDING"),r.update(()=>null),a.terminate())}},a.postMessage([t.map(c=>c.options),e,n,s]),r}function hy(t,e,n){const i=t.slice();return i[2]=e[n],i}function FD(t){let e,n,i,s,r,o,a=t[2].title+"",l,c;return{c(){e=D("li"),n=D("img"),r=z(),o=D("h2"),l=ye(a),c=z(),M(n,"class","w-32 h-32"),gi(n.src,i=t[2].puzzle?t[2].puzzle.img:t[2].cube)||M(n,"src",i),M(n,"alt",s=t[2].title),M(e,"class","w-40 h-48 text-center shadow-md rounded-md select-none cursor-pointer transition-all duration-200 flex flex-col items-center justify-between py-3 bg-white bg-opacity-10 text-gray-400 hover:rotate-3 hover:shadow-lg")},m(u,f){I(u,e,f),E(e,n),E(e,r),E(e,o),E(o,l),I(u,c,f)},p(u,f){f&1&&!gi(n.src,i=u[2].puzzle?u[2].puzzle.img:u[2].cube)&&M(n,"src",i),f&1&&s!==(s=u[2].title)&&M(n,"alt",s),f&1&&a!==(a=u[2].title+"")&&nt(l,a)},d(u){u&&O(e),u&&O(c)}}}function dy(t){let e,n;return e=new Qm({props:{to:t[2].route,$$slots:{default:[FD]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s&1&&(r.to=i[2].route),s&33&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function zD(t){let e,n,i,s=t[0],r=[];for(let a=0;a<s.length;a+=1)r[a]=dy(hy(t,s,a));const o=a=>H(r[a],1,1,()=>{r[a]=null});return{c(){e=D("main"),n=D("ul");for(let a=0;a<r.length;a+=1)r[a].c();M(n,"class","w-full grid gap-4 place-items-center svelte-ukzwim"),M(e,"class","container-mini")},m(a,l){I(a,e,l),E(e,n);for(let c=0;c<r.length;c+=1)r[c].m(n,null);i=!0},p(a,[l]){if(l&1){s=a[0];let c;for(c=0;c<s.length;c+=1){const u=hy(a,s,c);r[c]?(r[c].p(u,l),P(r[c],1)):(r[c]=dy(u),r[c].c(),P(r[c],1),r[c].m(n,null))}for(at(),c=s.length;c<r.length;c+=1)o(c);lt()}},i(a){if(!i){for(let l=0;l<s.length;l+=1)P(r[l]);i=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)H(r[l]);i=!1},d(a){a&&O(e),en(r,a)}}}function UD(t,e,n){let i=[{title:"Tutorials",route:"/tutorials",ready:!1,timer:!1,cube:"/assets/cube.png"},{title:"Algorithms",route:"/algorithms",timer:!1,ready:!1,cube:"/assets/pll.png"},{title:"Timer",route:"/timer",timer:!0,ready:!1,cube:"/assets/cube.png"},{title:"PLL Recognition",route:"/pll-trainer",timer:!0,ready:!1,cube:"/assets/pll.png"},{title:"Puzzle simulator",route:"/simulator",timer:!0,ready:!1,cube:"/assets/megaminx.png"}],s=i.reduce((r,o)=>(o.puzzle&&r.push(o.puzzle),r),[]);return Dl(s,void 0,!1,!0).then(r=>{let o=r.subscribe(a=>{a===null&&(o(),n(0,i))})}),[i]}class HD extends dt{constructor(e){super(),ht(this,e,UD,zD,ft,{})}}function VD(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function GD(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class Bv extends dt{constructor(e){super(),ht(this,e,GD,VD,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function WD(t,e){let n,i,s;const r=document.createElement("span");t.appendChild(r);let o=p=>{n=(p||{}).position||"cursor",i=Math.abs((p||{}).duration||400),s=(p||{}).background||"#fff"};o(e);let a=0,l=0,c=0,u=!1,f=p=>{u&&(performance.now()<=l?(c=(performance.now()-a)*1.2/(l-a),p.style.transform=`translate(-50%, -50%) scale(${c})`,p.style.opacity=""+(.5-.5*c/1.2),window.requestAnimationFrame(()=>f(p))):(c=0,p.style.transform=`translate(-50%, -50%) scale(${c})`,p.style.opacity=0,u=!1,t.style.overflow=null))};const h=p=>{let _=t.getBoundingClientRect(),m=_.width,v=_.height;return n==="center"?{x:m/2,y:v/2,rad:((m/2)**2+(v/2)**2)**.5}:{x:p.clientX-t.offsetLeft,y:p.clientY-t.offsetTop,rad:2*(m**2+v**2)**.5}},d=p=>{let _=h(p);r.style.left=`${_.x}px`,r.style.top=`${_.y}px`,r.style.position="absolute",r.style.background=s,r.style.pointerEvents="none",r.style.width=_.rad+"px",r.style.height=_.rad+"px",r.style.borderRadius="50%",r.style.opacity="0.5",r.style.borderRadius="50%",t.style.overflow="hidden",a=performance.now(),l=a+i,!u&&(u=!0)&&f(r)};return t.addEventListener("click",d),{update(p){o(p)},destroy(){t.removeEventListener("click",d),r.remove()}}}function jD(t){let e,n,i,s,r,o;const a=t[6].default,l=Ca(a,t,t[5],null);return{c(){e=D("button"),l&&l.c(),M(e,"class",n=is(`
  border px-4 py-2 rounded-md shadow-md flex items-center justify-center border-none
  relative uppercase font-bold text-gray-400 transition-all duration-200

  hover:shadow-lg
`+(t[0]?" shadow-none px-2 py-1 ":"")+(t[2]||" hover:bg-white hover:bg-opacity-10 "))+" svelte-4qqy4c")},m(c,u){I(c,e,u),l&&l.m(e,null),s=!0,r||(o=[tt(e,"click",t[3]),YC(i=WD.call(null,e,t[1]))],r=!0)},p(c,[u]){l&&l.p&&(!s||u&32)&&Pa(l,a,c,c[5],s?La(a,c[5],u,null):Ra(c[5]),null),(!s||u&5&&n!==(n=is(`
  border px-4 py-2 rounded-md shadow-md flex items-center justify-center border-none
  relative uppercase font-bold text-gray-400 transition-all duration-200

  hover:shadow-lg
`+(c[0]?" shadow-none px-2 py-1 ":"")+(c[2]||" hover:bg-white hover:bg-opacity-10 "))+" svelte-4qqy4c"))&&M(e,"class",n),i&&Pl(i.update)&&u&2&&i.update.call(null,c[1])},i(c){s||(P(l,c),s=!0)},o(c){H(l,c),s=!1},d(c){c&&O(e),l&&l.d(c),r=!1,Jn(o)}}}function YD(t,e,n){let{$$slots:i={},$$scope:s}=e;const r=Da();let{flat:o=!1}=e,{rp:a={}}=e,{file:l=!1}=e,{class:c=""}=e;function u(f){if(r("click",f),l){let h=document.createElement("input");h.type="file",h.style.display="none",h.addEventListener("change",d=>{r("files",h.files),h.remove()}),document.body.appendChild(h),h.click()}}return t.$$set=f=>{"flat"in f&&n(0,o=f.flat),"rp"in f&&n(1,a=f.rp),"file"in f&&n(4,l=f.file),"class"in f&&n(2,c=f.class),"$$scope"in f&&n(5,s=f.$$scope)},[o,a,c,u,l,s,i]}class At extends dt{constructor(e){super(),ht(this,e,YD,jD,ft,{flat:0,rp:1,file:4,class:2})}}function py(t,e,n){const i=t.slice();return i[5]=e[n],i}function my(t,e,n){const i=t.slice();return i[8]=e[n],i}function qD(t){let e=t[8].title+"",n,i;return{c(){n=ye(e),i=z()},m(s,r){I(s,n,r),I(s,i,r)},p(s,r){r&6&&e!==(e=s[8].title+"")&&nt(n,e)},d(s){s&&O(n),s&&O(i)}}}function gy(t){let e,n;return e=new Qm({props:{to:t[0].pathname+"/"+t[8].puzzle+"/"+t[8].titleLower+"?id="+t[8]._id,class:"m-1.5 text-gray-400 p-2.5 shadow-md bg-purple-900 rounded-md",$$slots:{default:[qD]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s&7&&(r.to=i[0].pathname+"/"+i[8].puzzle+"/"+i[8].titleLower+"?id="+i[8]._id),s&2054&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function _y(t){let e,n,i=t[5]+"",s,r,o,a,l,c=t[1][t[5]],u=[];for(let h=0;h<c.length;h+=1)u[h]=gy(my(t,c,h));const f=h=>H(u[h],1,1,()=>{u[h]=null});return{c(){e=D("section"),n=D("h2"),s=ye(i),r=z(),o=D("div");for(let h=0;h<u.length;h+=1)u[h].c();a=z(),M(n,"class","text-gray-400 font-bold svelte-ghky7i"),M(o,"class","flex"),M(e,"class","container-mini grid grid-cols-1")},m(h,d){I(h,e,d),E(e,n),E(n,s),E(e,r),E(e,o);for(let p=0;p<u.length;p+=1)u[p].m(o,null);E(e,a),l=!0},p(h,d){if((!l||d&4)&&i!==(i=h[5]+"")&&nt(s,i),d&7){c=h[1][h[5]];let p;for(p=0;p<c.length;p+=1){const _=my(h,c,p);u[p]?(u[p].p(_,d),P(u[p],1)):(u[p]=gy(_),u[p].c(),P(u[p],1),u[p].m(o,null))}for(at(),p=c.length;p<u.length;p+=1)f(p);lt()}},i(h){if(!l){for(let d=0;d<c.length;d+=1)P(u[d]);l=!0}},o(h){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)H(u[d]);l=!1},d(h){h&&O(e),en(u,h)}}}function XD(t){let e,n,i,s=ZD,r=t[2],o=[];for(let l=0;l<r.length;l+=1)o[l]=_y(py(t,r,l));const a=l=>H(o[l],1,1,()=>{o[l]=null});return{c(){e=z();for(let l=0;l<o.length;l+=1)o[l].c();n=ms()},m(l,c){I(l,e,c);for(let u=0;u<o.length;u+=1)o[u].m(l,c);I(l,n,c),i=!0},p(l,[c]){if(c&7){r=l[2];let u;for(u=0;u<r.length;u+=1){const f=py(l,r,u);o[u]?(o[u].p(f,c),P(o[u],1)):(o[u]=_y(f),o[u].c(),P(o[u],1),o[u].m(n.parentNode,n))}for(at(),u=r.length;u<o.length;u+=1)a(u);lt()}},i(l){if(!i){P(s);for(let c=0;c<r.length;c+=1)P(o[c]);i=!0}},o(l){H(s),o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)H(o[c]);i=!1},d(l){l&&O(e),en(o,l),l&&O(n)}}}let ZD=!1;function JD(t,e,n){let{location:i}=e,s=Ys.getInstance(),r={},o=[],a=s.tutSub.subscribe(l=>{if(!!l)switch(l[0]){case"get-tutorials":{let c=l[1];n(1,r=c.reduce((u,f)=>(!u[f.puzzle]&&(u[f.puzzle]=[]),u[f.puzzle].push(f),u),{})),n(2,o=Object.keys(r)),o.forEach(u=>r[u].sort((f,h)=>f.level<h.level?-1:1));break}case"update-tutorial":{let c=l[1],u=r[c.puzzle].reduce((f,h,d)=>h._id===c._id?d:f,-1);n(1,r[c.puzzle][u]=c,r);break}}});return gs(()=>{s.getTutorials()}),er(()=>{a()}),t.$$set=l=>{"location"in l&&n(0,i=l.location)},[i,r,o]}class vy extends dt{constructor(e){super(),ht(this,e,JD,XD,ft,{location:0})}}class KD{constructor(e,n){ke(this,"N");ke(this,"mask");ke(this,"mt",[]);ke(this,"mti");ke(this,"m01");ke(this,"M");ke(this,"N1");ke(this,"NM");ke(this,"MN");ke(this,"U");ke(this,"L");ke(this,"R");this.N=624,this.mask=4294967295,this.mt=[],this.mti=NaN,this.m01=[0,2567483615],this.M=397,this.N1=this.N-1,this.NM=this.N-this.M,this.MN=this.M-this.N,this.U=2147483648,this.L=2147483647,this.R=4294967296,arguments.length>1?this.initByArray(n,e):arguments.length>0?this.init(e):this.init()}dmul0(e,n){var i=4294901760,s=65535,r=4294967296,o=e&s,a=(e&i)>>>16,l=n&s,c=(n&i)>>>16,u,f,h;return u=o*l,f=u>>>16,u&=s,f+=o*c,f&=s,f+=a*l,f&=s,h=f<<16|u,h<0?h+r:h}init0(e){let n=arguments.length>0&&isFinite(e)?e&this.mask:4357,i;for(this.mt=[n],this.mti=this.N,i=1;i<this.N;this.mt[i++]=n=69069*n&this.mask);}init(e){let n=arguments.length>0&&isFinite(e)?e&this.mask:5489,i;for(this.mt=[n],this.mti=this.N,i=1;i<this.N;this.mt[i]=n=this.dmul0(n^n>>>30,1812433253)+i++);}initByArray(e,n){var i=this.N-1;let s=e.length,r,o,a,l;for(this.init(arguments.length>1&&isFinite(n)?n:19650218),r=this.mt[0],o=1,a=0,l=Math.max(this.N,s);l;a%=s,l--)this.mt[o]=r=(this.mt[o++]^this.dmul0(r^r>>>30,1664525))+e[a]+a++&this.mask,o>i&&(this.mt[0]=r=this.mt[i],o=1);for(l=this.N-1;l;l--)this.mt[o]=r=(this.mt[o]^this.dmul0(r^r>>>30,1566083941))-o++&this.mask,o>i&&(this.mt[0]=r=this.mt[i],o=1);this.mt[0]=2147483648}skip(e){this.mti=e<=0?-1:this.mti+e}randomInt32(){for(var e,n;this.mti>=this.N||this.mti<0;){for(this.mti=Math.max(0,this.mti-this.N),n=0;n<this.NM;e=this.mt[n]&this.U|this.mt[n+1]&this.L,this.mt[n]=this.mt[n+this.M]^e>>>1^this.m01[e&1],n++);for(;n<this.N1;e=this.mt[n]&this.U|this.mt[n+1]&this.L,this.mt[n]=this.mt[n+this.MN]^e>>>1^this.m01[e&1],n++);e=this.mt[this.N1]&this.U|this.mt[0]&this.L,this.mt[this.N1]=this.mt[this.M-1]^e>>>1^this.m01[e&1]}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^=e>>>18,e<0?e+this.R:e}randomInt53(){var e=67108864;return(this.randomInt32()>>>5)*e+(this.randomInt32()>>>6)}randomReal32(){var e=4294967296;return this.randomInt32()/e}randomReal53(){var e=9007199254740992;return this.randomInt53()/e}randomString(e){var n,i,s="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(n=0;n<e;s+=r.charAt((n++%5>0?i:i=this.randomInt32())&63),i>>>=6);return s}}const yn=[],w1=[1];for(let t=0;t<32;++t){yn[t]=[];for(let e=0;e<32;++e)yn[t][e]=0}for(let t=0;t<32;++t){yn[t][0]=yn[t][t]=1,w1[t+1]=w1[t]*(t+1);for(let e=1;e<t;++e)yn[t][e]=yn[t-1][e-1]+yn[t-1][e]}function Vl(t,e,n,i,s,r){let o=t[e];t[e]=t[s]^r,t[s]=t[i]^r,t[i]=t[n]^r,t[n]=o^r}function tn(t,...e){let n=e.length-1,i=t[e[n]];for(let s=n;s>0;s-=1)t[e[s]]=t[e[s-1]];return t[e[0]]=i,tn}function ds(t,e,n,i){n=n||1;let s=e.length,r=[];for(let o=0;o<s;o++)r[o]=t[e[o]];for(let o=0;o<s;o++){let a=(o+n)%s;t[e[a]]=r[o],i&&(t[e[a]]+=i[a]-i[o]+i[i.length-1])}return ds}function As(t,e){return t[e>>3]>>((e&7)<<2)&15}function Kp(t,e,n){let i,s;for(t[n-1]=0,i=n-2;i>=0;--i)for(t[i]=e%(n-i),e=~~(e/(n-i)),s=i+1;s<n;++s)t[s]>=t[i]&&++t[s]}function wo(t,e){let n,i,s;for(i=0,n=0;n<e;++n)for(i*=e-n,s=n+1;s<e;++s)t[s]<t[n]&&++i;return i}function Bc(t,e){let n,i;for(i=0,n=e-2;n>=0;--n)i^=t%(e-n),t=~~(t/(e-n));return i&1}function es(t,e,n){e=e||8;let i=0,s=1985229328;for(let r=0;r<e-1;++r){let o=t[r]<<2;i=(e-r)*i+(s>>o&7),s-=286331152<<o}return n<0?i>>1:i}function hs(t,e,n,i){n=(n||8)-1;let s=1985229328,r=0;i<0&&(e<<=1);for(let o=0;o<n;++o){let a=w1[n-o],l=~~(e/a);r^=l,e%=a,l<<=2,t[o]=s>>l&7;let c=(1<<l)-1;s=(s&c)+(s>>4&~c)}return i<0&&(r&1)!=0?(t[n]=t[n-1],t[n-1]=s&7):t[n]=s&7,t}function $D(t,e,n){let i=Math.abs(n),s=n<0?0:t[0]%i;for(let r=e-1;r>0;r--)s=s*i+t[r]%i;return s}function QD(t,e,n,i){let s=Math.abs(i),r=s*n;for(let o=1;o<n;o++)t[o]=e%s,r-=t[o],e=~~(e/s);return t[0]=(i<0?r:e)%s,t}function Fo(t,e,n){this.length=e,this.evenbase=n,this.get=t=="p"?function(i){return es(i,this.length,this.evenbase)}:function(i){return $D(i,this.length,this.evenbase)},this.set=t=="p"?function(i,s){return hs(i,s,this.length,this.evenbase)}:function(i,s){return QD(i,s,this.length,this.evenbase)}}function Ff(t,e,n,i,s){for(let r=0;r<t.length;r++)for(let o=0;o<t[r].length;o++)e[t[r][(o+i[r])%t[r].length]]=~~(t[n[r]][o]/s)}function $p(t,e,n,i){if(i=i||6,Array.isArray(n)){let s=new Fo(n[1],n[2],n[3]);n=n[0];for(let r=0;r<i;r++){t[r]=[];for(let o=0;o<e;o++){let a=s.set([],o);n(a,r),t[r][o]=s.get(a)}}}else for(let s=0;s<i;s++){t[s]=[];for(let r=0;r<e;r++)t[s][r]=n(r,s)}}function f4(t,e){e==0?Vl(t,0,7,8,4,1):e==1?Vl(t,3,6,11,7,0):e==2?Vl(t,0,1,2,3,0):e==3?Vl(t,2,5,10,6,1):e==4?Vl(t,1,4,9,5,0):e==5&&Vl(t,11,10,9,8,0)}function ts(){this.ca=[0,1,2,3,4,5,6,7],this.ea=[0,2,4,6,8,10,12,14,16,18,20,22]}ts.EdgeMult=function(t,e,n){for(let i=0;i<12;i++)n.ea[i]=t.ea[e.ea[i]>>1]^e.ea[i]&1};ts.CornMult=function(t,e,n){for(let i=0;i<8;i++){let s=((t.ca[e.ca[i]&7]>>3)+(e.ca[i]>>3))%3;n.ca[i]=t.ca[e.ca[i]&7]&7|s<<3}};ts.CubeMult=function(t,e,n){ts.CornMult(t,e,n),ts.EdgeMult(t,e,n)};ts.prototype.init=function(t,e){return this.ca=t.slice(),this.ea=e.slice(),this};ts.prototype.isEqual=function(t){for(let e=0;e<8;e++)if(this.ca[e]!=t.ca[e])return!1;for(let e=0;e<12;e++)if(this.ea[e]!=t.ea[e])return!1;return!0};let h4=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],d4=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]];ts.prototype.toFaceCube=function(t,e){t=t||h4,e=e||d4;let n="URFDLB",i=[];for(let s=0;s<54;s++)i[s]=n[~~(s/9)];for(let s=0;s<8;s++){let r=this.ca[s]&7,o=this.ca[s]>>3;for(let a=0;a<3;a++)i[t[s][(a+o)%3]]=n[~~(t[r][a]/9)]}for(let s=0;s<12;s++){let r=this.ea[s]>>1,o=this.ea[s]&1;for(let a=0;a<2;a++)i[e[s][(a+o)%2]]=n[~~(e[r][a]/9)]}return i.join("")};ts.prototype.invFrom=function(t){for(let e=0;e<12;e++)this.ea[t.ea[e]>>1]=e<<1|t.ea[e]&1;for(let e=0;e<8;e++)this.ca[t.ca[e]&7]=e|32>>(t.ca[e]>>3)&24;return this};ts.prototype.fromFacelet=function(t,e,n){e=e||h4,n=n||d4;let i=0,s=[],r=t[4]+t[13]+t[22]+t[31]+t[40]+t[49];for(let f=0;f<54;++f){if(s[f]=r.indexOf(t[f]),s[f]==-1)return-1;i+=1<<(s[f]<<2)}if(i!=10066329)return-1;let o,a,l,c,u;for(l=0;l<8;++l){for(u=0;u<3&&!(s[e[l][u]]==0||s[e[l][u]]==3);++u);for(o=s[e[l][(u+1)%3]],a=s[e[l][(u+2)%3]],c=0;c<8;++c)if(o==~~(e[c][1]/9)&&a==~~(e[c][2]/9)){this.ca[l]=c|u%3<<3;break}}for(l=0;l<12;++l)for(c=0;c<12;++c){if(s[n[l][0]]==~~(n[c][0]/9)&&s[n[l][1]]==~~(n[c][1]/9)){this.ea[l]=c<<1;break}if(s[n[l][0]]==~~(n[c][1]/9)&&s[n[l][1]]==~~(n[c][0]/9)){this.ea[l]=c<<1|1;break}}return this};let as=[];for(let t=0;t<18;t++)as[t]=new ts;as[0].init([3,0,1,2,4,5,6,7],[6,0,2,4,8,10,12,14,16,18,20,22]);as[3].init([20,1,2,8,15,5,6,19],[16,2,4,6,22,10,12,14,8,18,20,0]);as[6].init([9,21,2,3,16,12,6,7],[0,19,4,6,8,17,12,14,3,11,20,22]);as[9].init([0,1,2,3,5,6,7,4],[0,2,4,6,10,12,14,8,16,18,20,22]);as[12].init([0,10,22,3,4,17,13,7],[0,2,20,6,8,10,18,14,16,4,12,22]);as[15].init([0,1,11,23,4,5,18,14],[0,2,4,23,8,10,12,21,16,18,7,15]);for(let t=0;t<18;t+=3)for(let e=0;e<2;e++)ts.EdgeMult(as[t+e],as[t],as[t+e+1]),ts.CornMult(as[t+e],as[t],as[t+e+1]);ts.moveCube=as;ts.prototype.edgeCycles=function(){let t=[],e=[0,0,0],n=0,i=!1;for(let s=0;s<12;++s){if(t[s])continue;let r=-1,o=0,a=s;do t[a]=!0,++r,o^=this.ea[a]&1,a=this.ea[a]>>1;while(a!=s);n+=r>>1,r&1&&(i=!i,++n),o&&(r==0?++e[0]:r&1?e[2]^=1:++e[1])}if(e[1]+=e[2],e[0]<e[1])n+=e[0]+e[1]>>1;else{let s=[0,2,3,5,6,8,9];n+=e[1]+s[e[0]-e[1]>>1]}return n-~~i};function dl(t,e,n,i,s,r,o,a){let l=Array.isArray(s);r=r||6,o=o||3,a=a||256,i=i||256;for(let u=0,f=n+7>>>3;u<f;u++)t[u]=-1;t[e>>3]^=15<<((e&7)<<2);let c=0;for(let u=0;u<=i;u++){let f=0,h=u>=a,d=u+1^15,p=h?15:u,_=h?u:15;e:for(let m=0;m<n;m++,c>>=4){if((m&7)==0&&(c=t[m>>3],!h&&c==-1)){m+=7;continue}if((c&15)==p)for(let v=0;v<r;v++){let g=m;for(let b=0;b<o;b++)if(g=l?s[v][g]:s(g,v),As(t,g)==_){if(++f,h){t[m>>3]^=d<<((m&7)<<2);continue e}t[g>>3]^=d<<((g&7)<<2)}}}if(f==0)break}}function Ol(t,e,n){this.N_STATES=n.length,this.N_MOVES=t,this.N_POWER=e,this.state_params=n,this.inited=!1}let Pr=Ol.prototype;Pr.search=function(t,e,n){if(n=(n||99)+1,!this.inited){this.move=[],this.prun=[];for(let s=0;s<this.N_STATES;s++){let r=this.state_params[s],o=r[0],a=r[1],l=r[2],c=r[3],u=r[4];this.move[s]=[],this.prun[s]=[],$p(this.move[s],l,a,this.N_MOVES),dl(this.prun[s],o,l,c,this.move[s],this.N_MOVES,this.N_POWER,u)}this.inited=!0}this.sol=[];let i;for(i=e;i<n&&!this.idaSearch(t,i,-1);i++);return i==n?null:this.sol.reverse()};Pr.toStr=function(t,e,n){let i=[];for(let s=0;s<t.length;s++)i.push(e[t[s][0]]+n[t[s][1]]);return i.join(" ").replace(/ +/g," ")};Pr.idaSearch=function(t,e,n){let i=this.N_STATES;for(let r=0;r<i;r++)if(As(this.prun[r],t[r])>e)return!1;if(e==0)return!0;let s=t[0]+e+n+1;for(let r=0;r<this.N_MOVES;r++){let o=(r+s)%this.N_MOVES;if(o==n)continue;let a=t.slice();for(let l=0;l<this.N_POWER;l++){for(let c=0;c<i;c++)a[c]=this.move[c][o][a[c]];if(this.idaSearch(a,e-1,o))return this.sol.push([o,l]),!0}}return!1};function eO(t){return t}function tO(t,e,n,i){this.solvedStates=t,this.doMove=e,this.movesList=[];for(let s in n)this.movesList.push([s,n[s]]);this.prunHash=i||eO,this.prunTable={},this.toUpdateArr=null,this.prunTableSize=0,this.prunDepth=-1,this.cost=0}Pr=tO.prototype;Pr.updatePrun=function(t){t=t===void 0?this.prunDepth+1:t;for(let e=this.prunDepth+1;e<=t;e++){if(e<1){this.prevSize=0;for(let n=0;n<this.solvedStates.length;n++){let i=this.prunHash(this.solvedStates[n]);i in this.prunTable||(this.prunTable[i]=e,this.prunTableSize++)}}else this.updatePrunBFS(e-1);if(this.cost==0)return;this.prunDepth=e,this.prevSize=this.prunTableSize}};Pr.updatePrunBFS=function(t){if(this.toUpdateArr==null){this.toUpdateArr=[];for(let e in this.prunTable)this.prunTable[e]==t&&this.toUpdateArr.push(e)}for(;this.toUpdateArr.length!=0;){let e=this.toUpdateArr.pop();for(let n=0;n<this.movesList.length;n++){let i=this.doMove(e,this.movesList[n][0]);!i||i in this.prunTable||(this.prunTable[i]=t+1,this.prunTableSize++)}if(this.cost>=0){if(this.cost==0)return;this.cost--}}this.toUpdateArr=null};Pr.search=function(t,e,n){return this.sol=[],this.subOpt=!1,this.state=t,this.visited={},this.maxl=e=e||0,this.searchNext(n)};Pr.searchNext=function(t,e){for(t=t+1||99,this.prevSolStr=this.solArr?this.solArr.join(","):null,this.solArr=null,this.cost=e||-1;this.maxl<t;this.maxl++){if(this.updatePrun(Math.ceil(this.maxl/2)),this.cost==0)return null;if(this.idaSearch(this.state,this.maxl,null,0))break}return this.solArr};Pr.getPruning=function(t){let e=this.prunTable[this.prunHash(t)];return e===void 0?this.prunDepth+1:e};Pr.idaSearch=function(t,e,n,i){if(this.getPruning(t)>e)return!1;if(e==0){if(this.solvedStates.indexOf(t)==-1)return!1;let o=this.getSolArr();return this.subOpt=!0,o.join(",")==this.prevSolStr?!1:(this.solArr=o,!0)}if(!this.subOpt){if(t in this.visited&&this.visited[t]<i)return!1;this.visited[t]=i}if(this.cost>=0){if(this.cost==0)return!0;this.cost--}let s=n==null?"":this.movesList[n][0],r=n==null?-1:this.movesList[n][1];for(let o=this.sol[i]||0;o<this.movesList.length;o++){let a=this.movesList[o],l=a[1]^r,c=a[0];if(l==0||(l&15)==0&&c<=s)continue;let u=this.doMove(t,c);if(!(!u||u==t)){if(this.sol[i]=o,this.idaSearch(u,e-1,o,i+1))return!0;this.sol.pop()}}return!1};Pr.getSolArr=function(){let t=[];for(let e=0;e<this.sol.length;e++)t.push(this.movesList[this.sol[e]][0]);return t};let Fv=function(){let t,e,n;function i(){return e++,t.randomReal53()}function s(){return[e,n]}function r(o,a){if(a&&(a!=n||e>o)){let l=[];for(let c=0;c<a.length;c++)l[c]=a.charCodeAt(c);t=new KD(l[0],l),e=0,n=a}for(;e<o;)t.randomReal53(),e++}return r(0,""+new Date().getTime()),{random:i,getSeed:s,setSeed:r}}();function ni(t){return t[~~(Fv.random()*t.length)]}function vt(t){return~~(Fv.random()*t)}function nO(t){let e=0,n=0;for(let i=0;i<t.length;i++)t[i]!=0&&(Fv.random()<t[i]/(e+t[i])&&(n=i),e+=t[i]);return n}function Ao(t,e,n){t=t||[[""]],e=e||[""],n=n||0;for(var i=0,s=-1,r=[],o,a,l=0;l<n;l++){do o=vt(t.length),a=vt(t[o].length),o!=s&&(i=0,s=o);while((i>>a&1)!=0);i|=1<<a,t[o][a].constructor==Array?r.push(ni(t[o][a])+ni(e)):r.push(t[o][a]+ni(e))}return r.join(" ")}let zf=new Map,x1=new Map,by=new Map,Kc=new Map;function _i(t,e,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)zf.set(t[i],e),x1.set(t[i],[]),by.set(t[i],[]);else zf.set(t,e),n!=null&&(x1.set(t,n[0]),by.set(t,n[1]));return _i}function M1(t){var e=function(i,s){if(i[0]=="$"){var r=[s];return s[0]=="["&&(r=JSON.parse(s)),zf.get(r[0]).apply(this,r)}else return i[0]=="#"?Ao.apply(this,JSON.parse("["+s+"]")):""},n=/[$#]\{([^\}]+)\}/g;return t.replace(n,e)}function yu(t,e){return t==null?nO(e):t}let yy=new Ol(4,1,[[0,sO,384]]),iO=[[0,1],[2,3],[0,3],[1,2]];function sO(t,e){let n=hs([],t>>4,4);return ds(n,iO[e]),(es(n,4)<<4)+(t&15^1<<e)}function rO(){let t=1+vt(191);return t=t*2+((Bc(t>>3,4)^t>>1^t>>2^t)&1),yy.toStr(yy.search([t],0),"RLFB",[""])}_i("133",rO);let Qg=new Ol(3,3,[[0,[aO,"p",7],5040],[0,[m4,"o",7,-3],729]]),p4=[[0,2,3,1],[0,1,5,4],[0,4,6,2]],oO=[null,[0,1,0,1,3],[1,0,1,0,3]],S1=new Fo("o",7,-3);function aO(t,e){ds(t,p4[e])}function m4(t,e){ds(t,p4[e],1,oO[e])}let lO=[[3,4,9],[1,20,5],[2,8,17],[0,16,21],[13,11,6],[15,7,22],[12,19,10]];function cO(t,e){let n=hs([],t,7),i=S1.set([],e),s=[];for(let r=0;r<24;r++)s[r]=r>>2;Ff(lO,s,n,i,4);for(let r=0;r<24;r+=4)if((1<<s[r]|1<<s[r+3])&(1<<s[r+1]|1<<s[r+2]))return!1;return!0}let Kh=[1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4],uO=[0,17,5,14,8,1,2,4],$h=["EG0-O","EG0-H","EG0-L","EG0-Pi","EG0-S","EG0-T","EG0-U","EG0-aS","EG1B-O","EG1B-H","EG1B-L","EG1B-Pi","EG1B-S","EG1B-T","EG1B-U","EG1B-aS","EG1L-O","EG1L-H","EG1L-L","EG1L-Pi","EG1L-S","EG1L-T","EG1L-U","EG1L-aS","EG1F-O","EG1F-H","EG1F-L","EG1F-Pi","EG1F-S","EG1F-T","EG1F-U","EG1F-aS","EG1R-O","EG1R-H","EG1R-L","EG1R-Pi","EG1R-S","EG1R-T","EG1R-U","EG1R-aS","EG2-O","EG2-H","EG2-L","EG2-Pi","EG2-S","EG2-T","EG2-U","EG2-aS"],fO=[[4,5,6],[4,6,5],[6,5,4],[5,4,6],[5,6,4],[6,4,5]];function vc(t,e,n){let i,s,r,o=t=="222o"?0:9;do if(r=2,t=="222o"||t=="222so")s=vt(5040),i=vt(729),r=3;else if(t=="222eg"){i=uO[n&7],s=[0,2,3,4,5,1][n>>3];let a=hs([0,0,0,0].concat(fO[s]),vt(24),4);s=es(a,7);let l=vt(4);for(i=S1.set([],i);l-- >0;)m4(i,0);i=S1.get(i)}else{if(/^222eg[012]$/.exec(t))return vc("222eg",e,[0,8,40][~~t[5]]+n);if(t=="222nb")do s=vt(5040),i=vt(729);while(!cO(s,i))}while(s==0&&i==0||Qg.search([s,i],0,r)!=null);return Qg.toStr(Qg.search([s,i],o).reverse(),"URF","'2 ")}_i(["222o","222so","222nb"],vc)("222eg0",vc,[$h.slice(0,8),Kh.slice(0,8)])("222eg1",vc,[$h.slice(8,40),Kh.slice(8,40)])("222eg2",vc,[$h.slice(40,48),Kh.slice(40,48)])("222eg",vc,[$h,Kh]);let Ja=[],g4=[];function hO(){let t=[],e;for(let n=0;n<40320;n++)Ja[n]=[];for(let n=0;n<40320;n++)hs(t,n),tn(t,0,1,2,3),e=Ja[0][n]=es(t),tn(t,4,5,6,7),e=Ja[1][e]=es(t),tn(t,2,5)(t,3,6),e=Ja[2][e]=es(t),tn(t,0,5)(t,3,4),Ja[3][e]=es(t)}function dO(t,e){if(e<2)return t;let n=hs([],t,3);return e==2?tn(n,0,1):e==3&&tn(n,0,2),es(n,3)}let wy=!1;function pO(){wy||(wy=!0,hO(),dl(g4,0,40320,12,Ja,4,3))}function _4(t,e,n,i,s){if(n==0)return t+e==0;if(As(g4,t)>n)return!1;let r,o,a,l;for(l=0;l<4;l++)if(l!=i){for(r=t,o=e,a=0;a<(l<2?3:1);a++)if(r=Ja[l][r],o=dO(o,l),_4(r,o,n-1,l,s))return s.push(["U","D","R2","F2"][l]+(l<2?" 2'".charAt(a):"")),!0}}function mO(){pO();let t,e;do e=vt(40320),t=vt(6);while(t+e==0);let n=[];for(let i=0;i<99&&!_4(e,t,i,-1,n);i++);return n.reverse().join(" ")}_i("223",mO);let v4=[[0,1,2,3],[0,2,5,4]],gO=[[0,0,0,0,2],[0,1,0,1,2]];function _O(t,e){let n=t>>3,i=t,s=t<<1|Bc(n,6)^i>>1&1,r=hs([],n,6);return ds(r,v4[e]),e==0&&(i=i+2),e==1&&(s=s+1),wo(r,6)<<3|i&6|s>>1&1}function vO(t,e){ds(t,v4[e],1,gO[e])}let xy=new Ol(2,3,[[0,_O,5760],[0,[vO,"o",6,-2],32]]);function bO(){let t,e;do e=vt(5760),t=vt(32);while(t+e==0);return xy.toStr(xy.search([e,t],0),"UM"," 2'").replace(/ +/g," ")}_i("lsemu",bO);let yO=[[0,1,1,0,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,1,1,0,0,0,0,0],[0,0,0,1,1,0,1,1,0,0,0,0,0,0],[1,1,0,1,1,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,1,1,0,1,1,0,1,1,0,0,0,0,0],[0,0,0,1,1,1,1,1,1,0,0,0,0,0],[1,1,0,1,1,0,1,1,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,0,0,0,0,0],[11,0,0,0,0,0,0,0,0,1,0,1,1,0],[0,0,0,0,0,0,11,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,11,0,1,1,0,1],[0,0,11,0,0,0,0,0,0,1,1,1,0,0],[11,0,11,0,0,0,0,0,0,1,1,1,1,0],[11,0,0,0,0,0,11,0,0,1,0,1,1,1],[0,0,0,0,0,0,11,0,11,0,1,1,1,1],[0,0,11,0,0,0,0,0,11,1,1,1,0,1],[11,0,11,0,0,0,11,0,11,1,1,1,1,1]];function wO(t,e,n){let i=e,s=0;for(let r=t-1;r>=0;r--)n>=yn[r][i]&&(n-=yn[r][i--],s|=1<<r);return s}let Qh=[-1,1,-1,-1,-1,5,-1,7,-1,-1,-1,11];function xO(){let t=[];for(let e=0;e<14;e++)t[e]=vt(12);return t}function MO(t,e){return t.length!=14||e.length!=18?-1:EO(14,t,e)}function SO(t,e,n){let i=t[e];t[e]=t[n],t[n]=i}function E1(t,e,n,i,s){let r=t[0].length;for(let o=i;o<r;o++)t[n][o]=(t[n][o]+t[e][o]*s)%12}let e0=[7695,42588,47187,85158,86697,156568,181700,209201,231778];function EO(t,e,n){let i=18,s=t+1;for(let r=0;r<yn[i][t];r++){let o=wO(i,t,r),a=!1;for(let p=0;p<e0.length;p++)if((o&e0[p])==e0[p]){a=!0;break}if(a)continue;let l=[],c=0;for(let p=0;p<i;p++)(o>>p&1)==1&&(l[c++]=p);let u=[];for(let p=0;p<14;p++){u[p]=[];for(let _=0;_<t;_++)u[p][_]=yO[l[_]][p];u[p][t]=e[p]}if(TO(u)!=0)continue;let h=!0;for(let p=t;p<14;p++)if(u[p][t]!=0){h=!1;break}if(!h)continue;AO(u);let d=0;for(let p=0;p<t;p++)u[p][t]!=0&&d++;if(d<s){for(let p=0;p<18;p++)n[p]=0;for(let p=0;p<t;p++)n[l[p]]=u[p][t];s=d}}return s==t+1?-1:s}function TO(t){let e=14,n=t[0].length;for(let i=0;i<n-1;i++){if(Qh[t[i][i]]==-1){let r=-1;for(let o=i+1;o<e;o++)if(Qh[t[o][i]]!=-1){r=o;break}if(r==-1){e:for(let o=i;o<e-1;o++)for(let a=o+1;a<e;a++)if(Qh[(t[o][i]+t[a][i])%12]!=-1){E1(t,a,o,i,1),r=o;break e}}if(r==-1){for(let o=i+1;o<e;o++)if(t[o][i]!=0)return-1;return i+1}SO(t,i,r)}let s=Qh[t[i][i]];for(let r=i;r<n;r++)t[i][r]=t[i][r]*s%12;for(let r=i+1;r<e;r++)E1(t,i,r,i,12-t[r][i])}return 0}function AO(t){let e=t[0].length;for(let n=e-2;n>0;n--)for(let i=n-1;i>=0;i--)t[i][n]!=0&&E1(t,n,i,n,12-t[i][n])}let t0=["UR","DR","DL","UL","U","R","D","L","ALL"];function kO(t){let e=xO(),n=[];n.length=18,MO(e,n);let i="";for(let r=0;r<9;r++){let o=n[r];if(o==0)continue;let a=o<=6;o>6&&(o=12-o),i+=t0[r]+o+(a?"+":"-")+" "}i+="y2 ";for(let r=0;r<9;r++){let o=n[r+9];if(o==0)continue;let a=o<=6;o>6&&(o=12-o),i+=t0[r]+o+(a?"+":"-")+" "}let s=!0;for(let r=0;r<4;r++)vt(2)==1&&(i+=(s?"":" ")+t0[r],s=!1);return i}_i("clko",kO);let zv=[],Uv=[],ff=[[],[],[]],CO=[[0,3,2,1],[0,1],[0,3]];function LO(t,e){ds(t,[0,e+1])}function PO(t,e){let n=hs([],~~(t/3),4);return ds(n,CO[e]),es(n,4)*3+(t%3+(e==0?1:0))%3}function RO(t,e,n){let i=e%72,s=~~(e/72);return s=zv[n][s],i=Uv[(n+t)%3][i],s*72+i}function DO(t){return Math.max(As(ff[0],t[0]*72+t[1]),As(ff[1],t[0]*72+t[2]),As(ff[2],t[0]*72+t[3]))}function b4(t,e,n,i){if(e==0)return t[0]==0&&t[1]==0&&t[2]==0&&t[3]==0;if(DO(t)>e)return!1;for(let s=0;s<3;s++){if(s==n)continue;let r=t.slice();for(let o=0;o<11;o++){r[0]=zv[s][r[0]];for(let a=1;a<4;a++)r[a]=Uv[(s+a-1)%3][r[a]];if(b4(r,e-1,s,i))return i.push("URF".charAt(s)+["'","2'","3'","4'","5'","6","5","4","3","2",""][o]),!0}}}let My=!1;function OO(){if(!My){My=!0,$p(Uv,72,PO,3),$p(zv,24,[LO,"p",4],3);for(let t=0;t<3;t++)dl(ff[t],0,24*72,5,RO.bind(null,t),3,12,0)}}function IO(){let t=[vt(24)];for(let e=0;e<3;e++)do t[e+1]=vt(72);while(As(ff[e],t[0]*72+t[e+1])==15);return t}function NO(t){OO();let e;do e=IO();while(e==0);let n=t=="gearso"?4:0,i=[];for(;!b4(e,n,-1,i);)n++;return i.reverse().join(" ")}_i(["gearo","gearso"],NO);let pn=["","2","'"],Sy=["","2","'","2'"],y4={111:[[["x"],["y"],["z"]],pn],2223:[[["U"],["R"],["F"]],pn],2226:[[[["U","D"]],[["R","L"]],[["F","B"]]],pn],"333o":[[["U","D"],["R","L"],["F","B"]],pn],334:[[[["U","U'","U2"],["u","u'","u2"]],[["R2","L2","M2"]],[["F2","B2","S2"]]]],336:[[[["U","U'","U2"],["u","u'","u2"],["3u","3u2","3u'"]],[["R2","L2","M2"]],[["F2","B2","S2"]]]],888:[[["U","D","u","d","3u","3d","4u"],["R","L","r","l","3r","3l","4r"],["F","B","f","b","3f","3b","4f"]],pn],999:[[["U","D","u","d","3u","3d","4u","4d"],["R","L","r","l","3r","3l","4r","4l"],["F","B","f","b","3f","3b","4f","4b"]],pn],101010:[[["U","D","u","d","3u","3d","4u","4d","5u"],["R","L","r","l","3r","3l","4r","4l","5r"],["F","B","f","b","3f","3b","4f","4b","5f"]],pn],111111:[[["U","D","u","d","3u","3d","4u","4d","5u","5d"],["R","L","r","l","3r","3l","4r","4l","5r","5l"],["F","B","f","b","3f","3b","4f","4b","5f","5b"]],pn],444:[[["U","D","u"],["R","L","r"],["F","B","f"]],pn],"444m":[[["U","D","Uw"],["R","L","Rw"],["F","B","Fw"]],pn],555:[[["U","D","u","d"],["R","L","r","l"],["F","B","f","b"]],pn],"555wca":[[["U","D","Uw","Dw"],["R","L","Rw","Lw"],["F","B","Fw","Bw"]],pn],"666p":[[["U","D","2U","2D","3U"],["R","L","2R","2L","3R"],["F","B","2F","2B","3F"]],pn],"666wca":[[["U","D","Uw","Dw","3Uw"],["R","L","Rw","Lw","3Rw"],["F","B","Fw","Bw","3Fw"]],pn],"666s":[[["U","D","U&sup2;","D&sup2;","U&sup3;"],["R","L","R&sup2;","L&sup2;","R&sup3;"],["F","B","F&sup2;","B&sup2;","F&sup3;"]],pn],"666si":[[["U","D","u","d","3u"],["R","L","r","l","3r"],["F","B","f","b","3f"]],pn],"777p":[[["U","D","2U","2D","3U","3D"],["R","L","2R","2L","3R","3L"],["F","B","2F","2B","3F","3B"]],pn],"777wca":[[["U","D","Uw","Dw","3Uw","3Dw"],["R","L","Rw","Lw","3Rw","3Lw"],["F","B","Fw","Bw","3Fw","3Bw"]],pn],"777s":[[["U","D","U&sup2;","D&sup2;","U&sup3;","D&sup3;"],["R","L","R&sup2;","L&sup2;","R&sup3;","L&sup3;"],["F","B","F&sup2;","B&sup2;","F&sup3;","B&sup3;"]],pn],"777si":[[["U","D","u","d","3u","3d"],["R","L","r","l","3r","3l"],["F","B","f","b","3f","3b"]],pn],cm3:[[[["U<","U>","U2"],["E<","E>","E2"],["D<","D>","D2"]],[["R^","Rv","R2"],["M^","Mv","M2"],["L^","Lv","L2"]]]],cm2:[[[["U<","U>","U2"],["D<","D>","D2"]],[["R^","Rv","R2"],["L^","Lv","L2"]]]],233:[[[["U","U'","U2"]],["R2","L2"],["F2","B2"]]],fto:[[["U","D"],["F","B"],["L","BR"],["R","BL"]],["","'"]],gear:[[["U"],["R"],["F"]],["","2","3","4","5","6","'","2'","3'","4'","5'"]],sfl:[[["R","L"],["U","D"]],pn],ufo:[[["A"],["B"],["C"],[["U","U'","U2'","U2","U3"]]]],"2gen":[[["U"],["R"]],pn],"2genl":[[["U"],["L"]],pn],roux:[[["U"],["M"]],pn],"3gen_F":[[["U"],["R"],["F"]],pn],"3gen_L":[[["U"],["R","L"]],pn],RrU:[[["U"],["R","r"]],pn],RrUu:[[["U","u"],["R","r"]],pn],minx2g:[[["U"],["R"]],Sy],mlsll:[[[["R U R'","R U2 R'","R U' R'","R U2' R'"]],[["F' U F","F' U2 F","F' U' F","F' U2' F"]],[["U","U2","U'","U2'"]]]],half:[[["U","D"],["R","L"],["F","B"]],["2"]],lsll:[[[["R U R'","R U2 R'","R U' R'"]],[["F' U F","F' U2 F","F' U' F"]],[["U","U2","U'"]]]],prco:[[["F","B"],["U","D"],["L","DBR"],["R","DBL"],["BL","DR"],["BR","DL"]],Sy],skb:[[["R"],["L"],["B"],["U"]],["","'"]],ivy:[[["R"],["L"],["D"],["B"]],["","'"]],112:[[["R"],["R"]],pn],eide:[[["OMG"],["WOW"],["WTF"],[["WOO-HOO","WOO-HOO","MATYAS","YES","YES","YAY","YEEEEEEEEEEEES"]],["HAHA"],["XD"],[":D"],["LOL"]],["","","","!!!"]]},w4={sia113:'#{[["U","u"],["R","r"]],%c,%l} z2 #{[["U","u"],["R","r"]],%c,%l}',sia123:'#{[["U"],["R","r"]],%c,%l} z2 #{[["U"],["R","r"]],%c,%l}',sia222:'#{[["U"],["R"],["F"]],%c,%l} z2 y #{[["U"],["R"],["F"]],%c,%l}',335:`#{[[["U","U'","U2"],["D","D'","D2"]],["R2","L2"],["F2","B2"]],0,%l} / \${333}`,337:`#{[[["U","U'","U2","u","u'","u2","U u","U u'","U u2","U' u","U' u'","U' u2","U2 u","U2 u'","U2 u2"],["D","D'","D2","d","d'","d2","D d","D d'","D d2","D' d","D' d'","D' d2","D2 d","D2 d'","D2 d2"]],["R2","L2"],["F2","B2"]],0,%l} / \${333}`,r234:"2) ${222so}\\n3) ${333}\\n4) ${[444,40]}",r2345:'${r234}\\n5) ${["555",60]}',r23456:'${r2345}\\n6) ${["666p",80]}',r234567:'${r23456}\\n7) ${["777p",100]}',r234w:'2) ${222so}\\n3) ${333}\\n4) ${["444m",40]}',r2345w:'${r234w}\\n5) ${["555wca",60]}',r23456w:'${r2345w}\\n6) ${["666wca",80]}',r234567w:'${r23456w}\\n7) ${["777wca",100]}',"333ni":`\${333}#{[[""]],["","Rw ","Rw2 ","Rw' ","Fw ","Fw' "],1}#{[[""]],["","Uw","Uw2","Uw'"],1}`,"444bld":`\${444wca}#{[[""]],[""," x"," x2"," x'"," z"," z'"],1}#{[[""]],[""," y"," y2"," y'"],1}`,"555bld":`\${["555wca",%l]}#{[[""]],[""," 3Rw"," 3Rw2"," 3Rw'"," 3Fw"," 3Fw'"],1}#{[[""]],[""," 3Uw"," 3Uw2"," 3Uw'"],1}`},x4={"4edge":["r b2",["b2 r'","b2 U2 r U2 r U2 r U2 r"],["u"]],"5edge":["r R b B",["B' b' R' r'","B' b' R' U2 r U2 r U2 r U2 r"],["u","d"]],"6edge":["3r r 3b b",["3b' b' 3r' r'","3b' b' 3r' U2 r U2 r U2 r U2 r","3b' b' r' U2 3r U2 3r U2 3r U2 3r","3b' b' r2 U2 3r U2 3r U2 3r U2 3r U2 r"],["u","3u","d"]],"7edge":["3r r 3b b",["3b' b' 3r' r'","3b' b' 3r' U2 r U2 r U2 r U2 r","3b' b' r' U2 3r U2 3r U2 3r U2 3r","3b' b' r2 U2 3r U2 3r U2 3r U2 3r U2 r"],["u","3u","3d","d"]]};function BO(t,e){let n=y4[t];switch(n.length){case 1:return Ao(n[0],[""],e);case 2:return Ao(n[0],n[1],e);case 3:return Ao(n[0],n[1],n[2])}}function FO(t,e){let n=x4[t];return HO(n[0],n[1],n[2],e)}function zO(t,e){let n=w4[t].replace(/%l/g,e).replace(/%c/g,`["","2","'"]`);return M1(n)}for(let t in y4)_i(t,BO);for(let t in w4)_i(t,zO);for(let t in x4)_i(t,FO);function UO(t,e){let n=e;if(n<=1)return"N/A";let i=[[],[],[]];for(let s=0;s<e-1;s++)s%2==0?(i[0].push((s<4?"":~~(s/2+1))+(s<2?"U":"u")),i[1].push((s<4?"":~~(s/2+1))+(s<2?"R":"r")),i[2].push((s<4?"":~~(s/2+1))+(s<2?"F":"f"))):(i[0].push((s<4?"":~~(s/2+1))+(s<2?"D":"d")),i[1].push((s<4?"":~~(s/2+1))+(s<2?"L":"l")),i[2].push((s<4?"":~~(s/2+1))+(s<2?"B":"b")));return Ao(i,pn,n*10)}_i("cubennn",UO);function HO(t,e,n,i){let s=0,r=0,o=[],a=[["R","R'"],["R'","R"],["L","L'"],["L'","L"],["F'","F"],["F","F'"],["B","B'"],["B'","B"]],l=["U","D"],c=t;for(let f=0;f<n.length;f++)o[f]=0;for(let f=0;f<i;f++){let h=!1;for(;!h;){var u="";for(let m=0;m<n.length;m++){let v=vt(4);o[m]+=v,v!=0&&(h=!0,u+=" "+n[m]+pn[v-1])}}let d=vt(8),p=vt(2),_=vt(3);c+=u+" "+a[d][0]+" "+l[p]+pn[_]+" "+a[d][1],p==0&&(s+=_+1),p==1&&(r+=_+1)}for(let f=0;f<n.length;f++){let h=4-o[f]%4;h<4&&(c+=" "+n[f]+pn[h-1])}return s=4-s%4,r=4-r%4,s<4&&(c+=" U"+pn[s-1]),r<4&&(c+=" D"+pn[r-1]),c+=" "+ni(e),c}let VO=[[3,16,11],[4,23,15],[5,9,22],[10,17,21]],n0=[[1,7],[2,14],[0,18],[6,12],[8,20],[13,19]];function GO(t,e){let n=T1.set([],e&31),i=A1.set([],e>>5),s=YO.set([],t),r=[];Ff(VO,r,[0,1,2,3],i,6),Ff(n0,r,s,n,6);let o=[4,2,3,1,5,0];for(let a=0;a<6;a++)for(let l=0;l<2;l++){let c=n0[a][0^l],u=n0[a][1^l],f=~~(c/6)*6+o[(o.indexOf(c%6)+5)%6],h=~~(u/6)*6+o[(o.indexOf(u%6)+1)%6];if(r[f]==r[c]&&r[h]==r[u])return!1}return!0}let i0=new Ol(4,2,[[0,[jO,"p",6,-1],360],[0,qO,2592]]),M4=[[0,1,3],[1,2,5],[0,4,2],[3,5,4]],WO=[[0,1,0,2],[0,1,0,2],[0,0,1,2],[0,0,1,2]];function jO(t,e){ds(t,M4[e])}let T1=new Fo("o",6,-2),YO=new Fo("p",6,-1),A1=new Fo("o",4,3);function qO(t,e){let n=T1.set([],t&31),i=A1.set([],t>>5);return i[e]++,ds(n,M4[e],1,WO[e]),A1.get(i)<<5|T1.get(n)}function XO(t){let e=t=="pyro"?0:8,n=t=="pyrl4e"?2:7,i=0,s,r,o;do{if(t=="pyro"||t=="pyrso"||t=="pyr4c")r=vt(360),o=vt(2592);else if(t=="pyrl4e")r=es(hs([],vt(12),4,-1).concat([4,5]),6,-1),o=vt(3)*864+vt(8);else if(t=="pyrnb")do r=vt(360),o=vt(2592);while(!GO(r,o));i=i0.search([r,o],0).length,s=i0.toStr(i0.search([r,o],e).reverse(),"ULRB",["'",""])+" ";for(let a=0;a<4;a++){let l=vt(t=="pyr4c"?2:3);l<2&&(s+="lrbu".charAt(a)+[" ","' "][l],i++)}}while(i<n);return s}_i(["pyro","pyrso","pyrl4e","pyrnb","pyr4c"],XO);let S4=20,s0=7,ZO=13,JO=2;function _s(){this.move=[],this.moveSol=[],this.nodeUD=[],this.valid1=0,this.allowShorter=!1,this.cc=new Xe,this.urfCubieCube=[],this.urfCoordCube=[],this.phase1Cubie=[],this.preMoveCubes=[],this.preMoves=[],this.preMoveLen=0,this.maxPreMoves=0,this.isRec=!1;for(let t=0;t<21;t++)this.nodeUD[t]=new ml,this.phase1Cubie[t]=new Xe;for(let t=0;t<6;t++)this.urfCubieCube[t]=new Xe,this.urfCoordCube[t]=new ml;for(let t=0;t<S4;t++)this.preMoveCubes[t+1]=new Xe}let KO=0,$O=1,QO=2,eI=3,tI=4,nI=5,iI=6,sI=7,rI=8,oI=9,aI=10,lI=11,cI=12,uI=13,fI=14,hI=15,dI=16,pI=17,r0=18,ed=10,mI=2048,gI=336,_I=2187,vI=324,bI=40320,o0=2768,Hv=24,pl=495,Uf=140,yI=165,wI=14540032,go=[],k1=[1],Ey=["U ","U2","U'","R ","R2","R'","F ","F2","F'","D ","D2","D'","L ","L2","L'","B ","B2","B'"],aa=[KO,$O,QO,tI,sI,oI,aI,lI,uI,dI,eI,nI,iI,rI,cI,fI,hI,pI],C1=[],cp=[],Ty=[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],[6,7,8,0,1,2,3,4,5,15,16,17,9,10,11,12,13,14],[3,4,5,6,7,8,0,1,2,12,13,14,15,16,17,9,10,11],[2,1,0,5,4,3,8,7,6,11,10,9,14,13,12,17,16,15],[8,7,6,2,1,0,5,4,3,17,16,15,11,10,9,14,13,12],[5,4,3,8,7,6,2,1,0,14,13,12,17,16,15,11,10,9]];{for(let t=0;t<18;t++)C1[aa[t]]=t;for(let t=0;t<10;t++){let e=~~(aa[t]/3);cp[t]=0;for(let n=0;n<10;n++){let i=~~(aa[n]/3);cp[t]|=(e==i||e%3==i%3&&e>=i?1:0)<<n}}cp[10]=0;for(let t=0;t<13;t++){go[t]=[],k1[t+1]=k1[t]*(t+1),go[t][0]=go[t][t]=1;for(let e=1;e<13;e++)go[t][e]=e<=t?go[t-1][e-1]+go[t-1][e]:0}}function ol(t,e,n){return n?e<<1|t&1:e|t&248}function al(t,e){return e?t>>1:t&7}function Gl(t,e,n){t[e>>3]^=n<<(e<<2)}function a0(t,e){return t[e>>3]>>(e<<2)&15}function Oi(t,e,n){return Math.min(t,e[n>>3]>>(n<<2)&15)}function xI(t){return(t-286331153&~t&2290649224)!=0}function E4(t){return t^wI>>((t&15)<<1)&3}function Ay(t,e,n){let i=D4[t];return n&&(i=E4(i)),i&65520|Fc[i&15][e]}function Xe(){this.ca=[0,1,2,3,4,5,6,7],this.ea=[0,2,4,6,8,10,12,14,16,18,20,22]}function hg(t,e,n,i){n--;let s=1985229328;for(let r=0;r<n;++r){let o=k1[n-r],a=~~(e/o);e%=o,a<<=2,t[r]=ol(t[r],s>>a&15,i);let l=(1<<a)-1;s=(s&l)+(s>>4&~l)}t[n]=ol(t[n],s&15,i)}function dg(t,e,n){let i=0,s=1985229328;for(let r=0;r<e-1;++r){let o=al(t[r],n)<<2;i=(e-r)*i+(s>>o&15),s-=286331152<<o}return i}function T4(t,e,n,i){t[n-1]=ol(t[n-1],0,i);for(let s=n-2;s>=0;--s){t[s]=ol(t[s],e%(n-s),i),e=~~(e/(n-s));for(let r=s+1;r<n;++r)al(t[r],i)>=al(t[s],i)&&(t[r]=ol(t[r],al(t[r],i)+1,i))}}function A4(t,e,n){let i=0;for(let s=0;s<e;++s){i*=e-s;for(let r=s+1;r<e;++r)al(t[r],n)<al(t[s],n)&&++i}return i}function Vv(t,e,n){let i=t.length-1,s=0,r=4;for(let o=i;o>=0;o--)(al(t[o],n)&12)==e&&(s+=go[o][r--]);return s}function k4(t,e,n,i){let s=t.length-1,r=4,o=s;for(let a=s;a>=0;a--)e>=go[a][r]?(e-=go[a][r--],t[a]=ol(t[a],r|n,i)):((o&12)==n&&(o-=4),t[a]=ol(t[a],o--,i))}function L1(t,e){let n=0;for(let i=e-2;i>=0;i--)n^=t%(e-i),t=~~(t/(e-i));return n&1}Xe.EdgeMult=function(t,e,n){for(let i=0;i<12;i++)n.ea[i]=t.ea[e.ea[i]>>1]^e.ea[i]&1};Xe.CornMult=function(t,e,n){for(let i=0;i<8;i++){let s=((t.ca[e.ca[i]&7]>>3)+(e.ca[i]>>3))%3;n.ca[i]=t.ca[e.ca[i]&7]&7|s<<3}};Xe.CornMultFull=function(t,e,n){for(let i=0;i<8;i++){let s=t.ca[e.ca[i]&7]>>3,r=e.ca[i]>>3,o=s+(s<3?r:6-r);o=o%3+(s<3==r<3?0:3),n.ca[i]=t.ca[e.ca[i]&7]&7|o<<3}};Xe.CornConjugate=function(t,e,n){let i=Hf[pr[0][e]],s=Hf[e];for(let r=0;r<8;r++){let o=i.ca[t.ca[s.ca[r]&7]&7]>>3,a=t.ca[s.ca[r]&7]>>3,l=o<3?a:(3-a)%3;n.ca[r]=i.ca[t.ca[s.ca[r]&7]&7]&7|l<<3}};Xe.EdgeConjugate=function(t,e,n){let i=Hf[pr[0][e]],s=Hf[e];for(let r=0;r<12;r++)n.ea[r]=i.ea[t.ea[s.ea[r]>>1]>>1]^t.ea[s.ea[r]>>1]&1^s.ea[r]&1};Xe.prototype.init=function(t,e){return this.ca=t.slice(),this.ea=e.slice(),this};Xe.prototype.initCoord=function(t,e,n,i){return hg(this.ca,t,8,!1),this.setTwist(e),T4(this.ea,n,12,!0),this.setFlip(i),this};Xe.prototype.isEqual=function(t){for(let e=0;e<8;e++)if(this.ca[e]!=t.ca[e])return!1;for(let e=0;e<12;e++)if(this.ea[e]!=t.ea[e])return!1;return!0};Xe.prototype.setFlip=function(t){let e=0,n;for(let i=10;i>=0;i--,t>>=1)e^=n=t&1,this.ea[i]=this.ea[i]&254|n;this.ea[11]=this.ea[11]&254|e};Xe.prototype.getFlip=function(){let t=0;for(let e=0;e<11;e++)t=t<<1|this.ea[e]&1;return t};Xe.prototype.getFlipSym=function(){return em[this.getFlip()]};Xe.prototype.setTwist=function(t){let e=15,n;for(let i=6;i>=0;i--,t=~~(t/3))e-=n=t%3,this.ca[i]=this.ca[i]&7|n<<3;this.ca[7]=this.ca[7]&7|e%3<<3};Xe.prototype.getTwist=function(){let t=0;for(let e=0;e<7;e++)t+=(t<<1)+(this.ca[e]>>3);return t};Xe.prototype.getTwistSym=function(){return P4[this.getTwist()]};Xe.prototype.setCPerm=function(t){hg(this.ca,t,8,!1)};Xe.prototype.getCPerm=function(){return dg(this.ca,8,!1)};Xe.prototype.getCPermSym=function(){return E4(tm[dg(this.ca,8,!1)])};Xe.prototype.setEPerm=function(t){hg(this.ea,t,8,!0)};Xe.prototype.getEPerm=function(){return dg(this.ea,8,!0)};Xe.prototype.getEPermSym=function(){return tm[dg(this.ea,8,!0)]};Xe.prototype.getUDSlice=function(){return 494-Vv(this.ea,8,!0)};Xe.prototype.setUDSlice=function(t){k4(this.ea,494-t,8,!0)};Xe.prototype.getMPerm=function(){return A4(this.ea,12,!0)%24};Xe.prototype.setMPerm=function(t){T4(this.ea,t,12,!0)};Xe.prototype.getCComb=function(){return Vv(this.ca,0,!1)};Xe.prototype.setCComb=function(t){k4(this.ca,t,0,!1)};Xe.prototype.URFConjugate=function(){let t=new Xe;Xe.CornMult(Xe.urf2,this,t),Xe.CornMult(t,Xe.urf1,this),Xe.EdgeMult(Xe.urf2,this,t),Xe.EdgeMult(t,Xe.urf1,this)};let C4=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],L4=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]];Xe.prototype.toFaceCube=function(t,e){t=t||C4,e=e||L4;let n="URFDLB",i=[];for(let s=0;s<54;s++)i[s]=n[~~(s/9)];for(let s=0;s<8;s++){let r=this.ca[s]&7,o=this.ca[s]>>3;for(let a=0;a<3;a++)i[t[s][(a+o)%3]]=n[~~(t[r][a]/9)]}for(let s=0;s<12;s++){let r=this.ea[s]>>1,o=this.ea[s]&1;for(let a=0;a<2;a++)i[e[s][(a+o)%2]]=n[~~(e[r][a]/9)]}return i.join("")};Xe.prototype.invFrom=function(t){for(let e=0;e<12;e++)this.ea[t.ea[e]>>1]=e<<1|t.ea[e]&1;for(let e=0;e<8;e++)this.ca[t.ca[e]&7]=e|32>>(t.ca[e]>>3)&24;return this};Xe.prototype.fromFacelet=function(t,e,n){e=e||C4,n=n||L4;let i=0,s=[],r=t[4]+t[13]+t[22]+t[31]+t[40]+t[49];for(let f=0;f<54;++f){if(s[f]=r.indexOf(t[f]),s[f]==-1)return-1;i+=1<<(s[f]<<2)}if(i!=10066329)return-1;let o,a,l,c,u;for(l=0;l<8;++l){for(u=0;u<3&&!(s[e[l][u]]==0||s[e[l][u]]==3);++u);for(o=s[e[l][(u+1)%3]],a=s[e[l][(u+2)%3]],c=0;c<8;++c)if(o==~~(e[c][1]/9)&&a==~~(e[c][2]/9)){this.ca[l]=c|u%3<<3;break}}for(l=0;l<12;++l)for(c=0;c<12;++c){if(s[n[l][0]]==~~(n[c][0]/9)&&s[n[l][1]]==~~(n[c][1]/9)){this.ea[l]=c<<1;break}if(s[n[l][0]]==~~(n[c][1]/9)&&s[n[l][1]]==~~(n[c][0]/9)){this.ea[l]=c<<1|1;break}}};function ml(){this.twist=0,this.tsym=0,this.flip=0,this.fsym=0,this.slice=0,this.prun=0,this.twistc=0,this.flipc=0}ml.prototype.set=function(t){this.twist=t.twist,this.tsym=t.tsym,this.flip=t.flip,this.fsym=t.fsym,this.slice=t.slice,this.prun=t.prun,this.twistc=t.twistc,this.flipc=t.flipc};ml.prototype.calcPruning=function(t){this.prun=Math.max(Math.max(Oi(gg,pg,this.twist*pl+qr[this.slice][this.tsym]),Oi(_g,mg,this.flip*pl+qr[this.slice][this.fsym])),Math.max(Oi(vl,_l,this.twistc>>3<<11|Lo[this.flipc^this.twistc&7]),Oi(vl,_l,this.twist<<11|Lo[this.flip<<3|this.fsym^this.tsym])))};ml.prototype.setWithPrun=function(t,e){if(this.twist=t.getTwistSym(),this.flip=t.getFlipSym(),this.tsym=this.twist&7,this.twist=this.twist>>3,this.prun=Oi(vl,_l,this.twist<<11|Lo[this.flip^this.tsym]),this.prun>e||(this.fsym=this.flip&7,this.flip=this.flip>>3,this.slice=t.getUDSlice(),this.prun=Math.max(this.prun,Math.max(Oi(gg,pg,this.twist*pl+qr[this.slice][this.tsym]),Oi(_g,mg,this.flip*pl+qr[this.slice][this.fsym]))),this.prun>e))return!1;{let n=new Xe;Xe.CornConjugate(t,1,n),Xe.EdgeConjugate(t,1,n),this.twistc=n.getTwistSym(),this.flipc=n.getFlipSym(),this.prun=Math.max(this.prun,Oi(vl,_l,this.twistc>>3<<11|Lo[this.flipc^this.twistc&7]))}return this.prun<=e};ml.prototype.doMovePrun=function(t,e,n){return this.slice=Vf[t.slice][e],this.flip=Rh[t.flip][gl[e<<3|t.fsym]],this.fsym=this.flip&7^t.fsym,this.flip>>=3,this.twist=Gf[t.twist][gl[e<<3|t.tsym]],this.tsym=this.twist&7^t.tsym,this.twist>>=3,this.prun=Math.max(Math.max(Oi(gg,pg,this.twist*pl+qr[this.slice][this.tsym]),Oi(_g,mg,this.flip*pl+qr[this.slice][this.fsym])),Oi(vl,_l,this.twist<<11|Lo[this.flip<<3|this.fsym^this.tsym])),this.prun};ml.prototype.doMovePrunConj=function(t,e){return e=up[3][e],this.flipc=Rh[t.flipc>>3][gl[e<<3|t.flipc&7]]^t.flipc&7,this.twistc=Gf[t.twistc>>3][gl[e<<3|t.twistc&7]]^t.twistc&7,Oi(vl,_l,this.twistc>>3<<11|Lo[this.flipc^this.twistc&7])};_s.prototype.solution=function(t,e,n,i,s){SI();let r=this.verify(t);return r!=0?"Error "+Math.abs(r):(e===void 0&&(e=21),n===void 0&&(n=1e9),i===void 0&&(i=0),s===void 0&&(s=0),this.sol=e+1,this.probe=0,this.probeMax=n,this.probeMin=Math.min(i,n),this.verbose=s,this.moveSol=null,this.isRec=!1,this.initSearch(),this.search())};_s.prototype.initSearch=function(){this.conjMask=0,this.maxPreMoves=this.conjMask>7?0:S4;for(let t=0;t<6;t++)if(this.urfCubieCube[t].init(this.cc.ca,this.cc.ea),this.urfCoordCube[t].setWithPrun(this.urfCubieCube[t],20),this.cc.URFConjugate(),t%3==2){let e=new Xe().invFrom(this.cc);this.cc.init(e.ca,e.ea)}};_s.prototype.next=function(t,e,n){return this.probe=0,this.probeMax=t,this.probeMin=Math.min(e,t),this.moveSol=null,this.isRec=!0,this.verbose=n,this.search()};_s.prototype.verify=function(t){if(this.cc.fromFacelet(t)==-1)return-1;let e=0,n=0;for(let s=0;s<12;s++)n|=1<<(this.cc.ea[s]>>1),e^=this.cc.ea[s]&1;if(n!=4095)return-2;if(e!=0)return-3;let i=0;e=0;for(let s=0;s<8;s++)i|=1<<(this.cc.ca[s]&7),e+=this.cc.ca[s]>>3;return i!=255?-4:e%3!=0?-5:(L1(A4(this.cc.ea,12,!0),12)^L1(this.cc.getCPerm(),8))!=0?-6:0};_s.prototype.phase1PreMoves=function(t,e,n){if(this.preMoveLen=this.maxPreMoves-t,(this.isRec?this.depth1==this.length1-this.preMoveLen:this.preMoveLen==0||(225207>>e&1)==0)&&(this.depth1=this.length1-this.preMoveLen,this.phase1Cubie[0].init(n.ca,n.ea),this.allowShorter=this.depth1==s0&&this.preMoveLen!=0,this.nodeUD[this.depth1+1].setWithPrun(n,this.depth1)&&this.phase1(this.nodeUD[this.depth1+1],this.depth1,-1)==0))return 0;if(t==0||this.preMoveLen+s0>=this.length1)return 1;let i=0;(t==1||this.preMoveLen+1+s0>=this.length1)&&(i|=225207),e=~~(e/3)*3;for(let s=0;s<18;s++){if(s==e||s==e-9||s==e+9){s+=2;continue}if(this.isRec&&s!=this.preMoves[this.maxPreMoves-t]||(i&1<<s)!=0)continue;if(Xe.CornMult(zn[s],n,this.preMoveCubes[t]),Xe.EdgeMult(zn[s],n,this.preMoveCubes[t]),this.preMoves[this.maxPreMoves-t]=s,this.phase1PreMoves(t-1,s,this.preMoveCubes[t])==0)return 0}return 1};_s.prototype.search=function(){for(this.length1=this.isRec?this.length1:0;this.length1<this.sol;this.length1++)for(this.urfIdx=this.isRec?this.urfIdx:0;this.urfIdx<6;this.urfIdx++)if((this.conjMask&1<<this.urfIdx)==0&&this.phase1PreMoves(this.maxPreMoves,-30,this.urfCubieCube[this.urfIdx],0)==0)return this.moveSol==null?"Error 8":this.moveSol;return this.moveSol==null?"Error 7":this.moveSol};_s.prototype.initPhase2Pre=function(){if(this.isRec=!1,this.probe>=(this.moveSol==null?this.probeMax:this.probeMin))return 0;++this.probe;for(let n=this.valid1;n<this.depth1;n++)Xe.CornMult(this.phase1Cubie[n],zn[this.move[n]],this.phase1Cubie[n+1]),Xe.EdgeMult(this.phase1Cubie[n],zn[this.move[n]],this.phase1Cubie[n+1]);this.valid1=this.depth1;let t=this.initPhase2(this.phase1Cubie[this.depth1]);if(t==0||this.preMoveLen==0||t==2)return t;let e=~~(this.preMoves[this.preMoveLen-1]/3)*3+1;return Xe.CornMult(zn[e],this.phase1Cubie[this.depth1],this.phase1Cubie[this.depth1+1]),Xe.EdgeMult(zn[e],this.phase1Cubie[this.depth1],this.phase1Cubie[this.depth1+1]),this.preMoves[this.preMoveLen-1]+=2-this.preMoves[this.preMoveLen-1]%3*2,t=this.initPhase2(this.phase1Cubie[this.depth1+1]),this.preMoves[this.preMoveLen-1]+=2-this.preMoves[this.preMoveLen-1]%3*2,t};_s.prototype.initPhase2=function(t){let e=t.getCPermSym(),n=e&15;e>>=4;let i=t.getEPermSym(),s=i&15;i>>=4;let r=t.getMPerm(),o=Math.max(Oi(rm,sm,i*Uf+$c[nm[e]&255][pr[s][n]]),Oi(Yv,jv,e*Hv+Wf[r][n])),a=Math.min(ZO,this.sol-this.length1);if(o>=a)return o>a?2:1;let l;for(l=a-1;l>=o;l--){let c=this.phase2(i,s,e,n,r,l,this.depth1,10);if(c<0)break;l-=c,this.moveSol=[];for(let u=0;u<this.depth1+l;u++)this.appendSolMove(this.move[u]);for(let u=this.preMoveLen-1;u>=0;u--)this.appendSolMove(this.preMoves[u]);this.sol=this.moveSol.length,this.moveSol=this.solutionToString()}return l!=a-1&&this.probe>=this.probeMin?0:1};_s.prototype.phase1=function(t,e,n){if(t.prun==0&&e<5)if(this.allowShorter||e==0){this.depth1-=e;let i=this.initPhase2Pre();return this.depth1+=e,i}else return 1;for(let i=0;i<18;i+=3)if(!(i==n||i==n-9))for(let s=0;s<3;s++){let r=i+s;if(this.isRec&&r!=this.move[this.depth1-e])continue;let o=this.nodeUD[e].doMovePrun(t,r,!0);if(o>e)break;if(o==e)continue;{if(o=this.nodeUD[e].doMovePrunConj(t,r),o>e)break;if(o==e)continue}this.move[this.depth1-e]=r,this.valid1=Math.min(this.valid1,this.depth1-e);let a=this.phase1(this.nodeUD[e],e-1,i);if(a==0)return 0;if(a==2)break}return 1};_s.prototype.appendSolMove=function(t){if(this.moveSol.length==0){this.moveSol.push(t);return}let e=~~(t/3),n=~~(this.moveSol[this.moveSol.length-1]/3);if(e==n){let i=(t%3+this.moveSol[this.moveSol.length-1]%3+1)%4;i==3?this.moveSol.pop():this.moveSol[this.moveSol.length-1]=e*3+i;return}if(this.moveSol.length>1&&e%3==n%3&&e==~~(this.moveSol[this.moveSol.length-2]/3)){let i=(t%3+this.moveSol[this.moveSol.length-2]%3+1)%4;i==3?(this.moveSol[this.moveSol.length-2]=this.moveSol[this.moveSol.length-1],this.moveSol.pop()):this.moveSol[this.moveSol.length-2]=e*3+i;return}this.moveSol.push(t)};_s.prototype.phase2=function(t,e,n,i,s,r,o,a){if(t==0&&n==0&&s==0)return r;let l=cp[a];for(let c=0;c<10;c++){if((l>>c&1)!=0){c+=66>>c&3;continue}let u=im[s][c],f=Gv[n][Qp[i][c]],h=Fc[f&15][i];if(f>>=4,Oi(Yv,jv,f*Hv+Wf[u][h])>=r)continue;let d=Wv[t][Qp[e][c]],p=Fc[d&15][e];if(d>>=4,Oi(rm,sm,d*Uf+$c[nm[f]&255][pr[p][h]])>=r)continue;let _=Ay(d,p,!1),m=Ay(f,h,!0);if(Oi(rm,sm,(_>>4)*Uf+$c[nm[m>>4]&255][pr[_&15][m&15]])>=r)continue;let v=this.phase2(d,p,f,h,u,r-1,o+1,c);if(v>=0)return this.move[o]=aa[c],v}return-1};_s.prototype.solutionToString=function(){let t="",e=(this.verbose&JO)!=0?(this.urfIdx+3)%6:this.urfIdx;if(e<3)for(let n=0;n<this.moveSol.length;++n)t+=Ey[Ty[e][this.moveSol[n]]]+" ";else for(let n=this.moveSol.length-1;n>=0;--n)t+=Ey[Ty[e][this.moveSol[n]]]+" ";return t};let zn=[],Hf=[],Fc=[],pr=[],up=[],Qp=[],gl=[],ky=[],em=[],Cy=[],P4=[],Du=[],tm=[],R4=[],P1=[],R1=[],Lo=[],nm=[],D4=[],Vf=[],Gf=[],Rh=[],qr=[],pg=[],mg=[],_l=[],Gv=[],Wv=[],im=[],Wf=[],D1=[],$c=[],jv=[],sm=[],vl=15,gg=15,_g=15,Yv=15,rm=15;{for(let t=0;t<18;t++)zn[t]=new Xe;zn[0].initCoord(15120,0,119750400,0),zn[3].initCoord(21021,1494,323403417,0),zn[6].initCoord(8064,1236,29441808,550),zn[9].initCoord(9,0,5880,0),zn[12].initCoord(1230,412,2949660,0),zn[15].initCoord(224,137,328552,137);for(let t=0;t<18;t+=3)for(let e=0;e<2;e++)Xe.EdgeMult(zn[t+e],zn[t],zn[t+e+1]),Xe.CornMult(zn[t+e],zn[t],zn[t+e+1]);Xe.urf1=new Xe().initCoord(2531,1373,67026819,1367),Xe.urf2=new Xe().initCoord(2089,1906,322752913,2040)}function MI(){{var t=new Xe;let e=new Xe,n=new Xe().initCoord(28783,0,259268407,0),i=new Xe().initCoord(15138,0,119765538,7),s=new Xe().initCoord(5167,0,83473207,0);for(let r=0;r<8;r++)s.ca[r]|=3<<3;for(let r=0;r<16;r++)Hf[r]=new Xe().init(t.ca,t.ea),Xe.CornMultFull(t,i,e),Xe.EdgeMult(t,i,e),t.init(e.ca,e.ea),r%4==3&&(Xe.CornMultFull(t,s,e),Xe.EdgeMult(t,s,e),t.init(e.ca,e.ea)),r%8==7&&(Xe.CornMultFull(t,n,e),Xe.EdgeMult(t,n,e),t.init(e.ca,e.ea))}{for(let n=0;n<16;n++)Fc[n]=[],pr[n]=[],up[n]=[],gl[n]=[],Qp[n]=[];for(let n=0;n<16;n++)for(let i=0;i<16;i++)Fc[n][i]=n^i^84660>>i&n<<1&2,pr[Fc[n][i]][i]=n;var t=new Xe;for(let n=0;n<16;n++)for(let i=0;i<18;i++){Xe.CornConjugate(zn[i],pr[0][n],t);e:for(let s=0;s<18;s++){for(let r=0;r<8;r++)if(zn[s].ca[r]!=t.ca[r])continue e;up[n][i]=s,Qp[n][C1[i]]=C1[s];break}n%2==0&&(gl[i<<3|n>>1]=up[n][i])}}{let e=function(i,s,r,o,a,l,c){let u=new Xe,f=new Xe,h=0,d=a>=2?1:2,p=a!=1?Xe.EdgeConjugate:Xe.CornConjugate;for(let _=0;_<i;_++)if(r[_]===void 0){l.call(u,_);for(let m=0;m<16;m+=d){p(u,m,f);let v=c.call(f);a==0&&(Lo[h<<3|m>>1]=v),v==_&&(o[h]|=1<<m/d),r[v]=(h<<4|m)/d}s[h++]=_}return h};e(mI,ky,em,R4,0,Xe.prototype.setFlip,Xe.prototype.getFlip),e(_I,Cy,P4,P1,1,Xe.prototype.setTwist,Xe.prototype.getTwist),e(bI,Du,tm,R1,2,Xe.prototype.setEPerm,Xe.prototype.getEPerm);let n=new Xe;for(let i=0;i<o0;i++)hg(n.ea,Du[i],8,!0),nm[i]=Vv(n.ea,0,!0)+L1(Du[i],8)*70,t.invFrom(n),D4[i]=tm[t.getEPerm()]}{let e=function(s,r,o,a,l,c,u,f){for(let h=0;h<o;h++){s[h]=[],l.call(t,r[h]);for(let d=0;d<a;d++)u(t,zn[f?f[d]:d],i),s[h][d]=c.call(i)}};var t=new Xe;let i=new Xe;e(Rh,ky,gI,r0,Xe.prototype.setFlip,Xe.prototype.getFlipSym,Xe.EdgeMult),e(Gf,Cy,vI,r0,Xe.prototype.setTwist,Xe.prototype.getTwistSym,Xe.CornMult),e(Wv,Du,o0,ed,Xe.prototype.setEPerm,Xe.prototype.getEPermSym,Xe.EdgeMult,aa),e(Gv,Du,o0,ed,Xe.prototype.setCPerm,Xe.prototype.getCPermSym,Xe.CornMult,aa);for(let s=0;s<pl;s++){Vf[s]=[],qr[s]=[],t.setUDSlice(s);for(let r=0;r<r0;r++)Xe.EdgeMult(t,zn[r],i),Vf[s][r]=i.getUDSlice();for(let r=0;r<16;r+=2)Xe.EdgeConjugate(t,pr[0][r],i),qr[s][r>>1]=i.getUDSlice()}for(let s=0;s<Hv;s++){im[s]=[],Wf[s]=[],t.setMPerm(s);for(let r=0;r<ed;r++)Xe.EdgeMult(t,zn[aa[r]],i),im[s][r]=i.getMPerm();for(let r=0;r<16;r++)Xe.EdgeConjugate(t,pr[0][r],i),Wf[s][r]=i.getMPerm()}for(let s=0;s<Uf;s++){D1[s]=[],$c[s]=[],t.setCComb(s%70);for(let r=0;r<ed;r++)Xe.CornMult(t,zn[aa[r]],i),D1[s][r]=i.getCComb()+70*(yI>>r&1^~~(s/70));for(let r=0;r<16;r++)Xe.CornConjugate(t,pr[0][r],i),$c[s][r]=i.getCComb()+70*~~(s/70)}}}let Vr=-1;function Ou(t,e,n,i,s,r,o,a){let l=a&15,c=(a>>4&1)==1?14540032:0,u=(a>>5&1)==1,f=a>>8&15,h=a>>12&15,d=a>>16&15,p=(1<<l)-1,_=i==null,m=e*n,v=u?10:18,g=v==10?66:599186,b=a0(t,m)-1;if(b==-1){for(let w=0;w<(m>>3)+1;w++)t[w]=4294967295;Gl(t,0,15),b=0}else Gl(t,m,15^b+1);let y=Math.min(Math.max(b+1,d),h);for(;b<y;){let w=b>f,x=w?15:b,S=x*286331153,T=w?b:15;b++,Vr++;let A=b^15,C=0;for(let k=0;k<m;k++,C>>=4){if((k&7)==0&&(C=t[k>>3],!xI(C^S))){k+=7;continue}if((C&15)!=x)continue;let L=k%e,F=~~(k/e),U=0,N=0;_&&(U=em[L],N=U&7,U>>=3);for(let B=0;B<v;B++){let W=r[F][B],ee;_?ee=Lo[Rh[U][gl[B<<3|N]]^N^W&p]:ee=s[i[L][B]][W&p],W>>=l;let K=W*e+ee,ge=a0(t,K);if(ge!=T){ge<b-1&&(B+=g>>B&3);continue}if(w){Gl(t,k,A);break}Gl(t,K,A);for(let se=1,X=o[W];(X>>=1)!=0;se++){if((X&1)!=1)continue;let q=W*e;_?q+=Lo[em[ee]^se]:q+=s[ee][se^c>>(se<<1)&3],a0(t,q)==T&&Gl(t,q,A)}}}}return Gl(t,m,b+1^15),b+1}function Ly(t){vl=Ou(_l,2048,324,null,null,Gf,P1,103939),!(Vr>t)&&(gg=Ou(pg,495,324,Vf,qr,Gf,P1,431619),!(Vr>t)&&(_g=Ou(mg,495,336,Vf,qr,Rh,R4,431619),!(Vr>t)&&(Yv=Ou(jv,24,2768,im,Wf,Gv,R1,584244),!(Vr>t)&&(rm=Ou(sm,Uf,2768,D1,$c,Wv,R1,514084)))))}function SI(){if(Vr<0&&(MI(),Vr=0),Vr==0)Ly(99);else if(Vr<54)Ly(Vr);else return!0;return!1}let om,am,O1,I1,vg=[],lm=[],cm=[],hf=[],df=[];function Dh(t,e){let n=vg[e][~~(t/24)];return 24*~~(n/384)+lm[t%24][(n>>4)%24]}function Oh(t,e){let n=vg[e][t>>4];return~~(n/384)<<4|cm[t&15][(n>>4)%24]^n&15}function O4(t,e){for(let n=3;0<=n;n--)e[n]=t&1,t>>=1}function EI(t){let e,n;for(e=0,n=0;4>n;n++)e<<=1,e|=t[n];return e}function TI(t,e){let n=vg[e][~~(t/384)],i=cm[t&15][(n>>4)%24]^n&15,s=lm[(t>>4)%24][(n>>4)%24];return~~(n/384)*384+16*s+i}let Py=!1;function qv(){if(Py)return;Py=!0;for(let s=0;s<24;s++)lm[s]=[];for(let s=0;s<16;s++)cm[s]=[];let t=[],e=[],n=[];for(let s=0;s<24;s++)for(let r=0;r<24;r++){Kp(t,s,4),Kp(e,r,4);for(let o=0;o<4;o++)n[o]=t[e[o]];if(lm[s][r]=wo(n,4),s<16){O4(s,t);for(let o=0;o<4;o++)n[o]=t[e[o]];cm[s][r]=EI(n)}}$p(vg,495,i),om=[],am=[],dl(om,0,11880,5,Dh),dl(am,0,7920,6,Oh);function i(s,r){let o=[0,0,0,0,0,0,0,0,0,0,0,0],a=4;for(let u=0;u<12;u++)s>=yn[11-u][a]?(s-=yn[11-u][a--],o[u]=a<<1):o[u]=-1;f4(o,r),s=0,a=4;let l=0,c=[];for(let u=0;u<12;u++)o[u]>=0&&(s+=yn[11-u][a--],c[a]=o[u]>>1,l|=(o[u]&1)<<3-a);return s*24+wo(c,4)<<4|l}}let Ry=!1;function AI(){if(Ry)return;Ry=!0,qv();for(let e=0;e<24;e++){df[e]=[],hf[e]=[];for(let n=0;n<6;n++){df[e][n]=t(e,n);let i=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];i[e>>1]=e&1,f4(i,n);for(let s=0;s<12;s++)if(i[s]>=0){hf[e][n]=s<<1|i[s];break}}}O1=[];for(let e=0;e<4;e++){let n=[];dl(n,(e+4)*3*24+(e+4)*2,576,5,function(i,s){return df[~~(i/24)][s]*24+hf[i%24][s]}),O1[e]=n}function t(e,n){let i=~~(e/3),s=e%3,r=[[3,1,2,7,0,5,6,4],[0,1,6,2,4,5,7,3],[1,2,3,0,4,5,6,7],[0,5,1,3,4,6,2,7],[4,0,2,3,5,1,6,7],[0,1,2,3,7,4,5,6]];return s=(s+[[2,0,0,1,1,0,0,2],[0,0,1,2,0,0,2,1],[0,0,0,0,0,0,0,0],[0,1,2,0,0,2,1,0],[1,2,0,0,2,1,0,0],[0,0,0,0,0,0,0,0]][n][i])%3,r[n][i]*3+s}}function I4(t,e,n,i,s,r,o,a){if(r==0)return t==0&&e==0&&n==(s+4)*2&&i==(s+4)*3;{if(As(om,t)>r||As(am,e)>r||As(O1[s],i*24+n)>r)return!1;let l,c,u,f,h,d;for(d=0;d<6;d++)if(d!=o&&d!=o-3){for(l=t,c=e,u=n,f=i,h=0;h<3;h++)if(l=Dh(l,d),c=Oh(c,d),u=hf[u][d],f=df[f][d],I4(l,c,u,f,s,r-1,d,a))return a.push("FRUBLD".charAt(d)+" 2'".charAt(h)),!0}}return!1}function N4(t,e,n,i,s){if(n==0)return t==0&&e==0;{if(As(om,t)>n||As(am,e)>n)return!1;let r,o,a,l;for(l=0;l<6;l++)if(l!=i&&l!=i-3){for(r=t,o=e,a=0;a<3;a++)if(r=Dh(r,l),o=Oh(o,l),N4(r,o,n-1,l,s))return s.push("FRUBLD".charAt(l)+" 2'".charAt(a)),!0}}return!1}let B4=["FRUBLD","FLDBRU","FDRBUL","FULBDR","URBDLF","DRFULB"];const kI=/^([\d]+)?([FRUBLDfrubldzxySME])(?:([w])|&sup([\d]);)?([2'])?$/;function F4(t,e){for(var n=[],i=t.split(" "),s,r,o,a,l=0;l<i.length;l++)if(s=kI.exec(i[l]),s!=null){if(o="FRUBLDfrubldzxySME".indexOf(s[2]),o>14){a="2'".indexOf(s[5]||"X")+2,o=[0,4,5][o%3],n.push([e.indexOf("FRUBLD".charAt(o)),2,a]),n.push([e.indexOf("FRUBLD".charAt(o)),1,4-a]);continue}r=o<12?~~s[1]||~~s[4]||(s[3]=="w"||o>5)&&2||1:-1,a=(o<12?1:-1)*("2'".indexOf(s[5]||"X")+2),n.push([e.indexOf("FRUBLD".charAt(o%6)),r,a])}return n}function CI(t){qv();let e=F4(t,"FRUBLD"),n=[];for(let i=0;i<6;i++){let s=0,r=0;for(let a=0;a<e.length;a++){let l=B4[i].indexOf("FRUBLD".charAt(e[a][0])),c=e[a][2];for(let u=0;u<c;u++)s=Oh(s,l),r=Dh(r,l)}let o=[];for(let a=0;a<100&&!N4(r,s,a,-1,o);a++);o.reverse(),n.push(o)}return n}function LI(t,e){AI();let n=0,i=0,s=[8,10,12,14],r=[12,15,18,21],o=F4(t,"FRUBLD");for(let u=0;u<o.length;u++){let f=B4[e].indexOf("FRUBLD".charAt(o[u][0])),h=o[u][2];for(let d=0;d<h;d++){n=Oh(n,f),i=Dh(i,f);for(let p=0;p<4;p++)s[p]=hf[s[p]][f],r[p]=df[r[p]][f]}}let a=[],l=!1,c=0;for(;!l;){for(let u=0;u<4;u++)if(I4(i,n,s[u],r[u],u,c,-1,a)){l=!0;break}c++}return a.reverse(),a}let Dy=!1;function PI(){Dy||(Dy=!0,qv(),I1=[],dl(I1,0,190080,7,TI,6,3,6))}function RI(t){PI(),t>8&&(t=8);let e=vt([1,16,174,1568,11377,57758,155012,189978,190080][t])+1,n;for(n=0;n<190080&&!(As(I1,n)<=t&&--e==0);n++);let i=~~(n/384),s=(n>>4)%24,r=n&15,o=[],a=[],l=[],c=[];O4(r,c),Kp(l,s,4);let u=4,f=[7,6,5,4,10,9,8,11,3,2,1,0];for(n=0;n<12;n++)i>=yn[11-n][u]?(i-=yn[11-n][u--],o[f[n]]=l[u],a[f[n]]=c[u]):o[f[n]]=a[f[n]]=-1;return[o,a]}const DI=0,OI=1,II=2,NI=3,BI=4,FI=5,zI=12,UI=13,HI=14;function z4(t){t.cp=[0,1,2,3,4,5,6,7],t.co=[0,0,0,0,0,0,0,0],t.ep=[0,1,2,3,4,5,6,7,8,9,10,11],t.eo=[0,0,0,0,0,0,0,0,0,0,0,0]}function VI(t,e){var n,i;for(i=0,n=10;n>=0;--n)i^=t.eo[n]=e&1,e>>=1;t.eo[11]=i}function GI(t,e){var n,i;for(i=0,n=6;n>=0;--n)i+=t.co[n]=e%3,e=~~(e/3);t.co[7]=(15-i)%3}function N1(t,e,n){var i,s,r,o;for(i=0;i<8;++i)n.cp[i]=t.cp[e.cp[i]],r=t.co[e.cp[i]],o=e.co[i],s=r,s+=r<3?o:6-o,s%=3,r>=3!=o>=3&&(s+=3),n.co[i]=s}function Xv(){z4(this)}function Ko(t,e,n,i){z4(this),hs(this.cp,t),GI(this,e),Kp(this.ep,n,12),VI(this,i)}function B1(t,e,n){var i;for(i=0;i<12;++i)n.ep[i]=t.ep[e.ep[i]],n.eo[i]=e.eo[i]^t.eo[e.ep[i]]}let Oy=!1;function WI(){if(!Oy){Oy=!0;var t,e;for(Ri[0]=new Ko(15120,0,119750400,0),Ri[3]=new Ko(21021,1494,323403417,0),Ri[6]=new Ko(8064,1236,29441808,550),Ri[9]=new Ko(9,0,5880,0),Ri[12]=new Ko(1230,412,2949660,0),Ri[15]=new Ko(224,137,328552,137),t=0;t<18;t+=3)for(e=0;e<2;++e)Ri[t+e+1]=new Xv,B1(Ri[t+e],Ri[t],Ri[t+e+1]),N1(Ri[t+e],Ri[t],Ri[t+e+1])}}Ko.prototype=Xv.prototype;var Ri=[],Iy=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],Ny=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]];function jI(t){var e,n,i,s,r,o,a,l;for(i=[],l=[85,82,70,68,76,66],s=0;s<54;++s)i[s]=l[~~(s/9)];for(e=0;e<8;++e)for(r=t.cp[e],a=t.co[e],o=0;o<3;++o)i[Iy[e][(o+a)%3]]=l[~~(Iy[r][o]/9)];for(n=0;n<12;++n)for(r=t.ep[n],a=t.eo[n],o=0;o<2;++o)i[Ny[n][(o+a)%2]]=l[~~(Ny[r][o]/9)];return String.fromCharCode.apply(null,i)}new _s;function pf(){return Ci(0xffffffffffff,0xffffffffffff,4294967295,4294967295)}function YI(){var t="",e,n,i,s;do{t=pf();var r=t.split(" ");r.length<3||(e=r[0][0],n=r[1][0],i=r[r.length-2][0],s=r[r.length-3][0])}while(e=="F"||e=="B"&&n=="F"||i=="R"||i=="L"&&s=="R");return"R' U' F "+t+"R' U' F"}function td(t){for(var e=0,n=0;n<t.length;n++)t[n]==-1&&e++;return e}function By(t,e,n){for(var i=0,s=0,r=0;r<t.length;r++)t[r]!=-1&&(i+=t[r]);i%=n;for(var r=0;r<t.length-1;r++)t[r]==-1&&(e--==1?t[r]=((n<<4)-i)%n:(t[r]=vt(n),i+=t[r])),s*=n,s+=t[r];return s}function nd(t,e,n){for(var i=[0,1,2,3,4,5,6,7,8,9,10,11],s=0;s<t.length;s++)t[s]!=-1&&(i[t[s]]=-1);for(var s=0,r=0;s<i.length;s++)i[s]!=-1&&(i[r++]=i[s]);for(var o,s=0;s<t.length&&e>0;s++)if(t[s]==-1){var a=vt(e);t[s]=i[a];for(var r=a;r<11;r++)i[r]=i[r+1];e--==2&&(o=s)}if(Bc(wo(t,t.length),t.length)==1-n){var l=t[s-1];t[s-1]=t[o],t[o]=l}return wo(t,t.length)}function id(t,e){if(typeof t!="number")return t;for(var n=[],i=0;i<e;i++){var s=t&15;n[i]=s==15?-1:s,t/=16}return n}var qs=[[],[DI],[OI],[II]],U4=[[],[NI,HI],[BI,UI],[FI,zI]],H4=["","x'","x2","x"],Fy=[[]];function Ci(t,e,n,i,s,r){WI(),s=s||Fy,r=r||Fy,t=id(t,12),e=id(e,12),n=id(n,8),i=id(i,8);var o="";do{var a=e.slice(),l=t.slice(),c=i.slice(),u=n.slice(),f=By(a,td(a),2),h=By(c,td(c),3),d,p,_=td(l),m=td(u);if(_==0&&m==0?(d=wo(l,12),p=wo(u,8)):_!=0&&m==0?(p=wo(u,8),d=nd(l,_,Bc(p,8))):_==0&&m!=0?(d=wo(l,12),p=nd(u,m,Bc(d,12))):(d=nd(l,_,-1),p=nd(u,m,Bc(d,12))),p+h+d+f!=0){for(var v=new Ko(p,h,d,f),g=new Xv,b=ni(r),y=ni(s),w=0;w<b.length;w++){N1(Ri[b[w]],v,g),B1(Ri[b[w]],v,g);var x=g;g=v,v=x}for(var w=0;w<y.length;w++){N1(v,Ri[y[w]],g),B1(v,Ri[y[w]],g);var x=g;g=v,v=x}var S=jI(v),T=new _s;o=T.solution(S,21,1e9,50,2)}}while(o.length<=3);return o.replace(/ +/g," ")}function qI(){return Ci(0xffffffffffff,0xffffffffffff,1985229328,0)}function XI(){return Ci(0xba9876543210,0,4294967295,4294967295)}function ZI(){return Ci(0xba987654ffff,65535,1985282047,65535)}var JI=[8192,4113,8210,4099,8195,4114,8194,4115,8211,4098,8208,4097,8209,4096,8193,4112,0,17,3,18,2,19,1,16,1024,1041,5120,9233,5137,9216,24,8,8200,4104,8216,4120,1048,5128,9224,5144,9240,1032],V4=[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1],KI=["Easy-01","Easy-02","Easy-03","Easy-04","RE-05","RE-06","RE-07","RE-08","REFC-09","REFC-10","REFC-11","REFC-12","REFC-13","REFC-14","SPGO-15","SPGO-16","SPGO-17","SPGO-18","PMS-19","PMS-20","PMS-21","PMS-22","Weird-23","Weird-24","CPEU-25","CPEU-26","CPEU-27","CPEU-28","CPEU-29","CPEU-30","EPCU-31","EPCU-32","EPCU-33","EPCU-34","EPCU-35","EPCU-36","ECP-37","ECP-38","ECP-39","ECP-40","ECP-41","Solved-42"];function $I(t,e,n){var i=JI[yu(n,V4)],s=Math.pow(16,i&15),r=15^i>>4&1,o=Math.pow(16,i>>8&15),a=15^i>>12&3;return Ci(0xba9f7654ffff-7*s,64424574975-r*s,1986002943-11*o,1048575-a*o)}function QI(){return Ci(0xffff7654ffff,0xffff0000ffff,4294967295,4294967295)}var e6=[[12816,8481],[12306,8481],[12576,8481],[12801,8481],[12306,4128],[12321,4128],[12801,4128],[12546,4128],[12816,4128],[12576,4128],[12546,4386],[12576,4386],[12306,4386],[12321,4386],[12816,4386],[12801,4386],[12576,8736],[12546,8736],[12816,8736],[12801,8736],[12321,8736],[12306,8736],[12816,8448],[12306,8448],[12801,8448],[12576,8448],[12546,8448],[12321,8448],[12321,4608],[12801,4608],[12306,4608],[12576,4608],[12546,4608],[12816,4608],[12546,4353],[12576,4353],[12306,4353],[12321,4353],[12816,4353],[12801,4353],[65535,0]],G4=[1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3],t6=["H-BBFF","H-FBFB","H-RFLF","H-RLFF","L-FBRL","L-LBFF","L-LFFB","L-LFFR","L-LRFF","L-RFBL","Pi-BFFB","Pi-FBFB","Pi-FRFL","Pi-FRLF","Pi-LFRF","Pi-RFFL","S-FBBF","S-FBFB","S-FLFR","S-FLRF","S-LFFR","S-LFRF","T-BBFF","T-FBFB","T-FFLR","T-FLFR","T-RFLF","T-RLFF","U-BBFF","U-BFFB","U-FFLR","U-FRLF","U-LFFR","U-LRFF","aS-FBBF","aS-FBFB","aS-FRFL","aS-FRLF","aS-LFRF","aS-RFFL","PLL"];function n6(t,e,n){var i=e6[yu(n,G4)];return Ci(0xba987654ffff,0,i[0]+1985216512,i[1],qs,qs)}function i6(){return Ci(0xba9876543f1f,0,1985282047,65535,qs)}function s6(){return Ci(0xba9f7654ffff,0,1986002943,1048575)}function r6(){var t=vt(4);return Ci(0xba98f6f4ffff,4042326015,1985229328,0,[U4[t]],qs)+H4[t]}var o6=[0,4626,258,4386,546,33,18,273],W4=[6,12,24,24,24,24,24,24],a6=["O","H","L","Pi","S","T","U","aS"];function l6(t,e,n){for(var i=vt(4),s=[],r=0;r<qs.length;r++)s.push(qs[r].concat(U4[i]));return Ci(0xba98f6f4ffff,4042326015,1985282047,o6[yu(n,W4)],s,qs)+H4[i]}function c6(){return Ci(0xba9876543210,0,1985282047,65535)}function u6(){return Ci(0xba987654ffff,65535,1985229328,0)}function f6(){return Ci(0xba987654ffff,0,1985229328,65535,qs)}var h6=[[4146,12816],[12546,12816],[12321,12816],[8961,12816],[12816,12321],[12816,12546],[12816,8961],[12306,12801],[8496,12321],[4896,12546],[12321,12546],[12546,12321],[12801,12801],[12576,12801],[4656,12306],[12306,12306],[531,12801],[8976,12801],[4656,12801],[12576,12306],[12801,12306]],j4=[1,4,4,2,4,4,2,4,4,4,4,4,4,4,1,1,4,4,4,4,4],fp=["H","Ua","Ub","Z","Aa","Ab","E","F","Ga","Gb","Gc","Gd","Ja","Jb","Na","Nb","Ra","Rb","T","V","Y"];function Y4(t,e,n){var i=h6[yu(n,j4)];return Ci(i[0]+0xba9876540000,0,i[1]+1985216512,0,qs,qs)}var d6=[[0,0],[4369,4626],[4369,4386],[4369,546],[4369,273],[17,8226],[17,4113],[17,8706],[17,273],[17,4368],[17,8736],[17,546],[17,4353],[257,8226],[257,273],[257,546],[257,4113],[4369,258],[4369,18],[4369,33],[4369,0],[0,4626],[0,4386],[0,18],[0,33],[0,258],[0,273],[0,546],[17,0],[17,528],[17,8448],[17,33],[17,4098],[257,33],[257,528],[17,4128],[17,258],[17,8208],[17,513],[257,4128],[257,258],[17,4608],[17,288],[17,18],[17,8193],[257,18],[257,288],[17,4641],[17,4386],[17,8466],[17,8721],[257,4641],[257,4386],[17,8481],[17,4626],[257,8481],[257,4626],[257,0]],q4=[1,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,2,2],p6=["PLL","Point-1","Point-2","Point-3","Point-4","Square-5","Square-6","SLBS-7","SLBS-8","Fish-9","Fish-10","SLBS-11","SLBS-12","Knight-13","Knight-14","Knight-15","Knight-16","Point-17","Point-18","Point-19","CO-20","OCLL-21","OCLL-22","OCLL-23","OCLL-24","OCLL-25","OCLL-26","OCLL-27","CO-28","Awkward-29","Awkward-30","P-31","P-32","T-33","C-34","Fish-35","W-36","Fish-37","W-38","BLBS-39","BLBS-40","Awkward-41","Awkward-42","P-43","P-44","T-45","C-46","L-47","L-48","L-49","L-50","I-51","I-52","L-53","L-54","I-55","I-56","CO-57"];function m6(t,e,n){var i=d6[yu(n,q4)];return Ci(0xba987654ffff,i[0],1985282047,i[1],qs,qs)}function g6(){return Ci(0xffff7f5fffff,0,4294967295,4294967295)}function _6(t,e){var n=RI(e);return Ci(n[0],n[1],4294967295,4294967295)}_i("333",pf)("333oh",pf)("333ft",pf)("333fm",YI)("edges",qI)("corners",XI)("ll",ZI)("lsll2",$I,[KI,V4])("f2l",QI)("zbll",n6,[t6,G4])("zzll",i6)("zbls",s6)("lse",r6)("cmll",l6,[a6,W4])("cll",c6)("ell",u6)("pll",Y4,[fp,j4])("oll",m6,[p6,q4])("2gll",f6)("easyc",_6)("eoline",g6);function Pt(t,e){let n,i;if(n=new Array(t),e!=null)for(i=0;i<t;i++)n[i]=new Array(e);return n}let on,jf={},v6={},X4=0,Zv=30,Z4=21,b6=22,y6=23,J4=24,w6=25,x6=34,M6=26,Jv=40;function S6(t){return new jf[t]}function Ds(t,e,n,...i){let s=jf[t];s&&!s.___clazz$?on=s.prototype:(!s&&(s=jf[t]=function(){}),on=s.prototype=e<0?{}:S6(e),on.castableTypeMap$=n);for(let r=0,o=i.length;r<o;r+=1)i[r].prototype=on;s.___clazz$&&(on.___clazz$=s.___clazz$,s.___clazz$=null)}function Ia(t){let e={};for(let n=0,i=t.length;n<i;++n)e[t[n]]=1;return e}Ds(1,-1,v6);on.value=null;function K4(){}function E6(t,e){let n,i;return n=t,i=$4(0,e),Q4(n.___clazz$,n.castableTypeMap$,n.queryId$,i),i}function $4(t,e){let n=new Array(e);if(t==3)for(let i=0;i<e;++i)n[i]={h:0,m:0,l:0};else if(t>0)for(let i=0;i<e;++i)n[i]=[null,0,!1][t];return n}function Kv(t,e,n,i,s){let r;return r=$4(s,i),Q4(t,e,n,r),r}function Q4(t,e,n,i){return eT(),A6(i,F1,z1),i.___clazz$=t,i.castableTypeMap$=e,i.queryId$=n,i}function um(t,e,n){return t[e]=n}Ds(73,1,{},K4);on.queryId$=0;let zy=!1;function eT(){zy||(zy=!0,F1=[],z1=[],T6(new K4,F1,z1))}function T6(t,e,n){let i=0,s;for(let r in t)(s=t[r])&&(e[i]=r,n[i]=s,++i)}function A6(t,e,n){eT();for(let i=0,s=e.length;i<s;++i)t[e[i]]=n[i]}let F1,z1;function k6(t,e){return t.castableTypeMap$&&!!t.castableTypeMap$[e]}function C6(t,e){return t!=null&&k6(t,e)}let Uy=!1;function L6(){Uy||(Uy=!0,bg=Pt(15582,36),yg=Pt(15582),mr=Pt(15582),Uc=Pt(48,48),fr=Pt(48,36),zc=Pt(48),eb=Pt(48))}function $v(t){t.ct=Pt(24)}function Hy(t,e){let n,i;if(C6(e,Z4)){for(n=e,i=0;i<24;++i)if(t.ct[i]!=n.ct[i])return!1;return!0}return!1}function fm(t){let e,n,i;for(n=0,i=8,e=23;e>=0;--e)t.ct[e]==1&&(n+=yn[e][i--]);return n}function hp(t){let e,n;if(Qc!=null)return Qc[fm(t)];for(n=0;n<48;++n){if(e=N6(fm(t)),e!=-1)return e*64+n;Mn(t,0),n%2==1&&Mn(t,1),n%8==7&&Mn(t,2),n%16==15&&Mn(t,3)}}function ur(t,e){let n;switch(n=e%3,e=~~(e/3),e){case 0:Ie(t.ct,0,1,2,3,n);break;case 1:Ie(t.ct,16,17,18,19,n);break;case 2:Ie(t.ct,8,9,10,11,n);break;case 3:Ie(t.ct,4,5,6,7,n);break;case 4:Ie(t.ct,20,21,22,23,n);break;case 5:Ie(t.ct,12,13,14,15,n);break;case 6:Ie(t.ct,0,1,2,3,n),Ie(t.ct,8,20,12,16,n),Ie(t.ct,9,21,13,17,n);break;case 7:Ie(t.ct,16,17,18,19,n),Ie(t.ct,1,15,5,9,n),Ie(t.ct,2,12,6,10,n);break;case 8:Ie(t.ct,8,9,10,11,n),Ie(t.ct,2,19,4,21,n),Ie(t.ct,3,16,5,22,n);break;case 9:Ie(t.ct,4,5,6,7,n),Ie(t.ct,10,18,14,22,n),Ie(t.ct,11,19,15,23,n);break;case 10:Ie(t.ct,20,21,22,23,n),Ie(t.ct,0,8,4,14,n),Ie(t.ct,3,11,7,13,n);break;case 11:Ie(t.ct,12,13,14,15,n),Ie(t.ct,1,20,7,18,n),Ie(t.ct,0,23,6,17,n)}}function Mn(t,e){switch(e){case 0:ur(t,19),ur(t,28);break;case 1:ur(t,21),ur(t,32);break;case 2:Ie(t.ct,0,3,1,2,1),Ie(t.ct,8,11,9,10,1),Ie(t.ct,4,7,5,6,1),Ie(t.ct,12,15,13,14,1),Ie(t.ct,16,19,21,22,1),Ie(t.ct,17,18,20,23,1);break;case 3:ur(t,18),ur(t,29),ur(t,24),ur(t,35)}}function Vy(t,e){let n;for(n=0;n<e;++n)Mn(t,0),n%2==1&&Mn(t,1),n%8==7&&Mn(t,2),n%16==15&&Mn(t,3)}function Qv(t,e){let n,i;for(i=8,n=23;n>=0;--n)t.ct[n]=0,e>=yn[n][i]&&(e-=yn[n][i--],t.ct[n]=1)}function dp(t,e){let n;for(n=0;n<24;++n)t.ct[n]=e.ct[n]}function Yf(){let t;for($v(this),t=0;t<8;++t)this.ct[t]=1;for(t=8;t<24;++t)this.ct[t]=0}function pp(t,e){let n;for($v(this),n=0;n<24;++n)this.ct[n]=~~(t.ct[n]/2)==e?1:0}function mf(t){let e;for($v(this),e=0;e<24;++e)this.ct[e]=t[e]}function P6(){let t,e,n,i;for(t=new Yf,e=new Yf,n=0;n<15582;++n)for(Qv(e,yg[n]),i=0;i<36;++i)dp(t,e),ur(t,i),bg[n][i]=hp(t)}function R6(){let t,e,n,i,s,r,o,a;for(Sg(mr),mr[0]=0,e=0,n=1;n!=15582;)for(r=e>4,a=r?-1:e,t=r?e:-1,++e,i=0;i<15582;++i)if(mr[i]==a){for(o=0;o<27;++o)if(s=~~bg[i][o]>>>6,mr[s]==t)if(++n,r){mr[i]=e;break}else mr[s]=e}}function D6(t){let e,n,i,s;for(e=new mf(t.ct),s=0;s<48;++s){for(n=!0,i=0;i<24;++i)if(e.ct[i]!=~~(i/4)){n=!1;break}if(n)return s;Mn(e,0),s%2==1&&Mn(e,1),s%8==7&&Mn(e,2),s%16==15&&Mn(e,3)}return-1}function O6(){let t,e,n,i,s,r,o;for(t=new Yf,s=0;s<24;++s)t.ct[s]=s;for(e=new mf(t.ct),n=new mf(t.ct),i=new mf(t.ct),s=0;s<48;++s){for(r=0;r<48;++r){for(o=0;o<48;++o)Hy(t,e)&&(Uc[s][r]=o,o==0&&(zc[s]=r)),Mn(e,0),o%2==1&&Mn(e,1),o%8==7&&Mn(e,2),o%16==15&&Mn(e,3);Mn(t,0),r%2==1&&Mn(t,1),r%8==7&&Mn(t,2),r%16==15&&Mn(t,3)}Mn(t,0),s%2==1&&Mn(t,1),s%8==7&&Mn(t,2),s%16==15&&Mn(t,3)}for(s=0;s<48;++s)for(dp(t,n),Vy(t,zc[s]),r=0;r<36;++r)for(dp(e,t),ur(e,r),Vy(e,s),o=0;o<36;++o)if(dp(i,n),ur(i,o),Hy(i,e)){fr[s][r]=o;break}for(Qv(t,0),s=0;s<48;++s)eb[zc[s]]=fm(t),Mn(t,0),s%2==1&&Mn(t,1),s%8==7&&Mn(t,2),s%16==15&&Mn(t,3)}function I6(){let t,e,n,i,s,r;for(t=new Yf,r=Pt(22984),n=0;n<22984;n++)r[n]=0;for(e=0,n=0;n<735471;++n)if((r[~~n>>>5]&1<<(n&31))==0){for(Qv(t,n),s=0;s<48;++s)i=fm(t),r[~~i>>>5]|=1<<(i&31),Qc!=null&&(Qc[i]=e<<6|zc[s]),Mn(t,0),s%2==1&&Mn(t,1),s%8==7&&Mn(t,2),s%16==15&&Mn(t,3);yg[e++]=n}}function N6(t){let e;return e=xN(yg,t),e>=0?e:-1}Ds(153,1,Ia([Z4]),Yf,pp,mf);let mr,bg,eb,Qc=null,yg,zc,fr,Uc,Gy=!1;function B6(){Gy||(Gy=!0,mm=Pt(70,28),pm=Pt(6435,28),sT=Pt(70,16),nT=Pt(6435,16),Ji=Pt(450450),iT=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0,1,0,0,0])}function hm(t){let e,n,i;for(n=0,i=8,e=14;e>=0;--e)t.ct[e]!=t.ct[15]&&(n+=yn[e][i--]);return n}function dm(t){let e,n,i;for(n=0,i=4,e=6;e>=0;--e)t.rl[e]!=t.rl[7]&&(n+=yn[e][i--]);return n*2+t.parity}function wc(t,e){let n;switch(t.parity^=iT[e],n=e%3,e=~~(e/3),e){case 0:Ie(t.ct,0,1,2,3,n);break;case 1:Ie(t.rl,0,1,2,3,n);break;case 2:Ie(t.ct,8,9,10,11,n);break;case 3:Ie(t.ct,4,5,6,7,n);break;case 4:Ie(t.rl,4,5,6,7,n);break;case 5:Ie(t.ct,12,13,14,15,n);break;case 6:Ie(t.ct,0,1,2,3,n),Ie(t.rl,0,5,4,1,n),Ie(t.ct,8,9,12,13,n);break;case 7:Ie(t.rl,0,1,2,3,n),Ie(t.ct,1,15,5,9,n),Ie(t.ct,2,12,6,10,n);break;case 8:Ie(t.ct,8,9,10,11,n),Ie(t.rl,0,3,6,5,n),Ie(t.ct,3,2,5,4,n);break;case 9:Ie(t.ct,4,5,6,7,n),Ie(t.rl,3,2,7,6,n),Ie(t.ct,11,10,15,14,n);break;case 10:Ie(t.rl,4,5,6,7,n),Ie(t.ct,0,8,4,14,n),Ie(t.ct,3,11,7,13,n);break;case 11:Ie(t.ct,12,13,14,15,n),Ie(t.rl,1,4,7,2,n),Ie(t.ct,1,0,7,6,n)}}function Wl(t,e){switch(e){case 0:wc(t,19),wc(t,28);break;case 1:wc(t,21),wc(t,32);break;case 2:Ie(t.ct,0,3,1,2,1),Ie(t.ct,8,11,9,10,1),Ie(t.ct,4,7,5,6,1),Ie(t.ct,12,15,13,14,1),Ie(t.rl,0,3,5,6,1),Ie(t.rl,1,2,4,7,1)}}function tT(t,e,n){let i;for(i=0;i<16;++i)t.ct[i]=~~(e.ct[i]/2);for(i=0;i<8;++i)t.rl[i]=e.ct[i+16];t.parity=n}function Wy(t,e){let n,i;for(i=8,t.ct[15]=0,n=14;n>=0;--n)e>=yn[n][i]?(e-=yn[n][i--],t.ct[n]=1):t.ct[n]=0}function jy(t,e){let n,i;for(t.parity=e&1,e>>>=1,i=4,t.rl[7]=0,n=6;n>=0;--n)e>=yn[n][i]?(e-=yn[n][i--],t.rl[n]=1):t.rl[n]=0}function tb(){this.rl=Pt(8),this.ct=Pt(16)}function F6(){let t,e,n,i,s,r,o,a,l,c,u;for(t=new tb,r=0;r<70;++r)for(l=0;l<28;++l)jy(t,r),wc(t,el[l]),mm[r][l]=dm(t);for(r=0;r<70;++r)for(jy(t,r),a=0;a<16;++a)sT[r][a]=dm(t),Wl(t,0),a%2==1&&Wl(t,1),a%8==7&&Wl(t,2);for(r=0;r<6435;++r)for(Wy(t,r),a=0;a<16;++a)nT[r][a]=hm(t)&65535,Wl(t,0),a%2==1&&Wl(t,1),a%8==7&&Wl(t,2);for(r=0;r<6435;++r)for(l=0;l<28;++l)Wy(t,r),wc(t,el[l]),pm[r][l]=hm(t)&65535;for(Sg(Ji),Ji[0]=Ji[18]=Ji[28]=Ji[46]=Ji[54]=Ji[56]=0,i=0,s=6;s!=450450;){let f=i>6,h=f?-1:i,d=f?i:-1;for(++i,r=0;r<450450;++r)if(Ji[r]==h){for(e=~~(r/70),c=r%70,l=0;l<23;++l)if(n=pm[e][l],u=mm[c][l],o=n*70+u,Ji[o]==d)if(++s,f){Ji[r]=i;break}else Ji[o]=i}}}Ds(154,1,{},tb);on.parity=0;let pm,Ji,nT,iT,mm,sT,Yy=!1;function z6(){Yy||(Yy=!0,gf=Pt(29400,20),oT=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],ea=Pt(29400),sb=[0,9,14,23,27,28,41,42,46,55,60,69],rb=Pt(70))}function nb(t){let e,n,i,s,r;for(i=0,r=4,n=6;n>=0;--n)t.ud[n]!=t.ud[7]&&(i+=yn[n][r--]);for(i*=35,r=4,n=6;n>=0;--n)t.fb[n]!=t.fb[7]&&(i+=yn[n][r--]);for(i*=12,e=t.fb[7]^t.ud[7],s=0,r=4,n=7;n>=0;--n)t.rl[n]!=e&&(s+=yn[n][r--]);return t.parity+2*(i+rb[s])}function U6(t,e){switch(t.parity^=oT[e],e){case 0:case 1:case 2:Ie(t.ud,0,1,2,3,e%3);break;case 3:Ie(t.rl,0,1,2,3,1);break;case 4:case 5:case 6:Ie(t.fb,0,1,2,3,(e-1)%3);break;case 7:case 8:case 9:Ie(t.ud,4,5,6,7,(e-1)%3);break;case 10:Ie(t.rl,4,5,6,7,1);break;case 11:case 12:case 13:Ie(t.fb,4,5,6,7,(e+1)%3);break;case 14:Ie(t.ud,0,1,2,3,1),Ie(t.rl,0,5,4,1,1),Ie(t.fb,0,5,4,1,1);break;case 15:Ie(t.rl,0,1,2,3,1),Ie(t.fb,1,4,7,2,1),Ie(t.ud,1,6,5,2,1);break;case 16:Ie(t.fb,0,1,2,3,1),Ie(t.ud,3,2,5,4,1),Ie(t.rl,0,3,6,5,1);break;case 17:Ie(t.ud,4,5,6,7,1),Ie(t.rl,3,2,7,6,1),Ie(t.fb,3,2,7,6,1);break;case 18:Ie(t.rl,4,5,6,7,1),Ie(t.fb,0,3,6,5,1),Ie(t.ud,0,3,4,7,1);break;case 19:Ie(t.fb,4,5,6,7,1),Ie(t.ud,0,7,6,1,1),Ie(t.rl,1,4,7,2,1)}}function rT(t,e,n){let i,s;for(s=+(e.ct[0]>e.ct[8])^+(e.ct[8]>e.ct[16])^+(e.ct[0]>e.ct[16])?1:0,i=0;i<8;++i)t.ud[i]=e.ct[i]&1^1,t.fb[i]=e.ct[i+8]&1^1,t.rl[i]=e.ct[i+16]&1^1^s;t.parity=s^n}function H6(t,e){let n,i,s,r;for(t.parity=e&1,e>>>=1,s=sb[e%12],e=~~(e/12),r=4,n=7;n>=0;--n)t.rl[n]=0,s>=yn[n][r]&&(s-=yn[n][r--],t.rl[n]=1);for(i=e%35,e=~~(e/35),r=4,t.fb[7]=0,n=6;n>=0;--n)i>=yn[n][r]?(i-=yn[n][r--],t.fb[n]=1):t.fb[n]=0;for(r=4,t.ud[7]=0,n=6;n>=0;--n)e>=yn[n][r]?(e-=yn[n][r--],t.ud[n]=1):t.ud[n]=0}function ib(){this.ud=Pt(8),this.rl=Pt(8),this.fb=Pt(8)}function V6(){let t,e,n,i,s;for(i=0;i<12;++i)rb[sb[i]]=i;for(t=new ib,i=0;i<29400;++i)for(s=0;s<20;++s)H6(t,i),U6(t,s),gf[i][s]=nb(t)&65535;for(Sg(ea),ea[0]=0,e=0,n=1;n!=29400;){for(i=0;i<29400;++i)if(ea[i]==e)for(s=0;s<17;++s)ea[gf[i][s]]==-1&&(ea[gf[i][s]]=e+1,++n);++e}}Ds(155,1,{},ib);on.parity=0;let gf,oT,ea,sb,rb;function G6(t,e){let n;for(n=0;n<24;++n)t.ct[n]=e.ct[n]}function W6(t,e){let n;switch(n=e%3,e=~~(e/3),e){case 0:Ie(t.ct,0,1,2,3,n);break;case 1:Ie(t.ct,16,17,18,19,n);break;case 2:Ie(t.ct,8,9,10,11,n);break;case 3:Ie(t.ct,4,5,6,7,n);break;case 4:Ie(t.ct,20,21,22,23,n);break;case 5:Ie(t.ct,12,13,14,15,n);break;case 6:Ie(t.ct,0,1,2,3,n),Ie(t.ct,8,20,12,16,n),Ie(t.ct,9,21,13,17,n);break;case 7:Ie(t.ct,16,17,18,19,n),Ie(t.ct,1,15,5,9,n),Ie(t.ct,2,12,6,10,n);break;case 8:Ie(t.ct,8,9,10,11,n),Ie(t.ct,2,19,4,21,n),Ie(t.ct,3,16,5,22,n);break;case 9:Ie(t.ct,4,5,6,7,n),Ie(t.ct,10,18,14,22,n),Ie(t.ct,11,19,15,23,n);break;case 10:Ie(t.ct,20,21,22,23,n),Ie(t.ct,0,8,4,14,n),Ie(t.ct,3,11,7,13,n);break;case 11:Ie(t.ct,12,13,14,15,n),Ie(t.ct,1,20,7,18,n),Ie(t.ct,0,23,6,17,n)}}function ob(){let t;for(this.ct=Pt(24),t=0;t<24;++t)this.ct[t]=~~(t/4)}function aT(t){let e,n,i;for(ob.call(this),e=0;e<23;++e)i=e+vt(24-e),this.ct[i]!=this.ct[e]&&(n=this.ct[e],this.ct[e]=this.ct[i],this.ct[i]=n)}Ds(156,1,{},ob,aT);let qy=!1;function j6(){qy||(qy=!0,zs=Pt(18),X6())}function lT(t){t.cp=[0,1,2,3,4,5,6,7],t.co=[0,0,0,0,0,0,0,0]}function cT(t,e){let n;for(n=0;n<8;++n)t.cp[n]=e.cp[n],t.co[n]=e.co[n]}function Y6(t,e){!t.temps&&(t.temps=new wg),uT(t,zs[e],t.temps),cT(t,t.temps)}function q6(t,e){let n,i;for(i=0,n=6;n>=0;--n)i+=t.co[n]=e%3,e=~~(e/3);t.co[7]=(15-i)%3}function uT(t,e,n){let i,s,r,o;for(i=0;i<8;++i)n.cp[i]=t.cp[e.cp[i]],r=t.co[e.cp[i]],o=e.co[i],s=r,s=s+(r<3?o:6-o),s=s%3,+(r>=3)^+(o>=3)&&(s=s+3),n.co[i]=s}function wg(){lT(this)}function $o(t,e){lT(this),hs(this.cp,t),q6(this,e)}function fT(t){$o.call(this,vt(40320),vt(2187))}function X6(){let t,e;for(zs[0]=new $o(15120,0),zs[3]=new $o(21021,1494),zs[6]=new $o(8064,1236),zs[9]=new $o(9,0),zs[12]=new $o(1230,412),zs[15]=new $o(224,137),t=0;t<18;t+=3)for(e=0;e<2;++e)zs[t+e+1]=new wg,uT(zs[t+e],zs[t],zs[t+e+1])}Ds(157,1,Ia([b6]),wg,$o,fT);on.temps=null;let zs,Xy=!1;function Z6(){Xy||(Xy=!0,hr=Pt(1937880),xg=Pt(1538),vm=Pt(1538),wu=Pt(11880),gT=[0,1,6,3,4,5,2,7],lb=Pt(160,12),cb=Pt(160,12),ab=[1,1,1,3,12,60,360,2520,20160,181440,1814400,19958400,239500800],U1=[0,2,4,6,1,3,7,5,8,9,10,11])}function jl(t,e,n,i,s){let r;r=t.edgeo[s],t.edgeo[s]=t.edge[i],t.edge[i]=t.edgeo[n],t.edgeo[n]=t.edge[e],t.edge[e]=r}function eu(t,e){let n,i,s,r,o;for(t.isStd||pT(t),i=0,o=1985229328,r=47768,n=0;n<e;++n)s=t.edge[n]<<2,i*=12-n,s>=32?(i+=r>>s-32&15,r-=4368<<s-32):(i+=o>>s&15,r-=4369,o-=286331152<<s);return i}function hT(t){let e,n,i,s;return e=eu(t,4),i=wu[e],s=i&7,i>>=3,_m(t,s),n=eu(t,10)%20160,i*20160+n}function gm(t,e){switch(t.isStd=!1,e){case 0:tn(t.edge,0,4,1,5),tn(t.edgeo,0,4,1,5);break;case 1:Yn(t.edge,0,4,1,5),Yn(t.edgeo,0,4,1,5);break;case 2:tn(t.edge,0,5,1,4),tn(t.edgeo,0,5,1,4);break;case 3:Yn(t.edge,5,10,6,11),Yn(t.edgeo,5,10,6,11);break;case 4:tn(t.edge,0,11,3,8),tn(t.edgeo,0,11,3,8);break;case 5:Yn(t.edge,0,11,3,8),Yn(t.edgeo,0,11,3,8);break;case 6:tn(t.edge,0,8,3,11),tn(t.edgeo,0,8,3,11);break;case 7:tn(t.edge,2,7,3,6),tn(t.edgeo,2,7,3,6);break;case 8:Yn(t.edge,2,7,3,6),Yn(t.edgeo,2,7,3,6);break;case 9:tn(t.edge,2,6,3,7),tn(t.edgeo,2,6,3,7);break;case 10:Yn(t.edge,4,8,7,9),Yn(t.edgeo,4,8,7,9);break;case 11:tn(t.edge,1,9,2,10),tn(t.edgeo,1,9,2,10);break;case 12:Yn(t.edge,1,9,2,10),Yn(t.edgeo,1,9,2,10);break;case 13:tn(t.edge,1,10,2,9),tn(t.edgeo,1,10,2,9);break;case 14:Yn(t.edge,0,4,1,5),Yn(t.edgeo,0,4,1,5),tn(t.edge,9,11),tn(t.edgeo,8,10);break;case 15:Yn(t.edge,5,10,6,11),Yn(t.edgeo,5,10,6,11),tn(t.edge,1,3),tn(t.edgeo,0,2);break;case 16:Yn(t.edge,0,11,3,8),Yn(t.edgeo,0,11,3,8),tn(t.edge,5,7),tn(t.edgeo,4,6);break;case 17:Yn(t.edge,2,7,3,6),Yn(t.edgeo,2,7,3,6),tn(t.edge,8,10),tn(t.edgeo,9,11);break;case 18:Yn(t.edge,4,8,7,9),Yn(t.edgeo,4,8,7,9),tn(t.edge,0,2),tn(t.edgeo,1,3);break;case 19:Yn(t.edge,1,9,2,10),Yn(t.edgeo,1,9,2,10),tn(t.edge,4,6),tn(t.edgeo,5,7)}}function Hc(t,e){switch(t.isStd=!1,e){case 0:gm(t,14),gm(t,17);break;case 1:jl(t,11,5,10,6),jl(t,5,10,6,11),jl(t,1,2,3,0),jl(t,4,9,7,8),jl(t,8,4,9,7),jl(t,0,1,2,3);break;case 2:Ns(t,4,5),Ns(t,5,4),Ns(t,11,8),Ns(t,8,11),Ns(t,7,6),Ns(t,6,7),Ns(t,9,10),Ns(t,10,9),Ns(t,1,1),Ns(t,0,0),Ns(t,3,3),Ns(t,2,2)}}function _m(t,e){for(;e>=2;)e-=2,Hc(t,1),Hc(t,2);e!=0&&Hc(t,0)}function Ih(t,e){let n,i,s,r,o,a;for(o=1985229328,a=47768,s=0,n=0;n<11;++n)if(i=ab[11-n],r=~~(e/i),e=e%i,s^=r,r<<=2,r>=32){r=r-32,t.edge[n]=a>>r&15;let l=(1<<r)-1;a=(a&l)+(a>>4&~l)}else{t.edge[n]=o>>r&15;let l=(1<<r)-1;o=(o&l)+(o>>>4&~l)+(a<<28),a=a>>4}for((s&1)==0?t.edge[11]=o:(t.edge[11]=t.edge[10],t.edge[10]=o),n=0;n<12;++n)t.edgeo[n]=n;t.isStd=!0}function Zy(t,e){let n;for(n=0;n<12;++n)t.edge[n]=e.edge[n],t.edgeo[n]=e.edgeo[n];t.isStd=e.isStd}function dT(t,e){let n,i,s,r;for(t.temp==null&&(t.temp=Pt(12)),n=0;n<12;++n)t.temp[n]=n,t.edge[n]=e.ep[U1[n]+12]%12;for(i=1,n=0;n<12;++n)for(;t.edge[n]!=n;)r=t.edge[n],t.edge[n]=t.edge[r],t.edge[r]=r,s=t.temp[n],t.temp[n]=t.temp[r],t.temp[r]=s,i^=1;for(n=0;n<12;++n)t.edge[n]=t.temp[e.ep[U1[n]]%12];return i}function pT(t){let e;for(t.temp==null&&(t.temp=Pt(12)),e=0;e<12;++e)t.temp[t.edgeo[e]]=e;for(e=0;e<12;++e)t.edge[e]=t.temp[t.edge[e]],t.edgeo[e]=e;t.isStd=!0}function Yn(t,e,n,i,s){let r;r=t[e],t[e]=t[i],t[i]=r,r=t[n],t[n]=t[s],t[s]=r}function Ns(t,e,n){let i;i=t.edge[e],t.edge[e]=t.edgeo[n],t.edgeo[n]=i}function ko(){this.edge=Pt(12),this.edgeo=Pt(12)}function J6(){let t,e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w,x,S,T;for(l=new ko,u=new ko,h=new ko,Sg(hr),a=0,sd=1,l0(hr,0,0);sd!=31006080&&(v=a>9,o=a%3,r=(a+1)%3,f=v?3:o,t=v?o:3,!(a>=9));){for(p=0;p<31006080;p+=16)if(T=hr[~~p>>4],!(!v&&T==-1)){for(d=p,c=p+16;d<c;++d,T>>=2)if((T&3)==f){for(w=~~(d/20160),e=xg[w],i=d%20160,Ih(l,e*20160+i),b=0;b<17;++b)if(n=tu(l.edge,b<<3,4),x=wu[n],S=x&7,x>>=3,s=tu(l.edge,b<<3|S,10)%20160,_=x*20160+s,qf(hr,_)==t){if(l0(hr,v?d:_,r),++sd,v)break;if(y=vm[x],y!=1)for(Zy(u,l),gm(u,b),_m(u,S),g=1;(y=~~y>>1&65535)!=0;++g)(y&1)==1&&(Zy(h,u),_m(h,g),m=x*20160+eu(h,10)%20160,qf(hr,m)==t&&(l0(hr,m,r),++sd))}}}++a}}function qf(t,e){return t[e>>4]>>((e&15)<<1)&3}function tu(t,e,n){let i,s,r,o,a,l,c;for(o=cb[e],r=lb[e],s=0,c=1985229328,l=47768,i=0;i<n;++i)a=o[t[r[i]]]<<2,s*=12-i,a>=32?(s+=l>>a-32&15,l-=4368<<a-32):(s+=c>>a&15,l-=4369,c-=286331152<<a);return s}function mT(t){let e,n,i,s,r,o,a,l,c,u,f,h;if(a=new ko,o=0,r=qf(hr,t),r==3)return 10;for(;t!=0;)for(r==0?r=2:--r,u=~~(t/20160),e=xg[u],i=t%20160,Ih(a,e*20160+i),c=0;c<17;++c)if(n=tu(a.edge,c<<3,4),f=wu[n],h=f&7,f>>=3,s=tu(a.edge,c<<3|h,10)%20160,l=f*20160+s,qf(hr,l)==r){++o,t=l;break}return o}function K6(t,e){let n;return n=qf(hr,t),n==3?10:(1227133513<<n>>e&3)+e-1}function $6(){let t,e,n,i;for(t=new ko,n=0;n<20;++n)for(i=0;i<8;++i){for(Ih(t,0),gm(t,n),_m(t,i),e=0;e<12;++e)lb[n<<3|i][e]=t.edge[e];for(pT(t),e=0;e<12;++e)cb[n<<3|i][e]=t.temp[e]}}function Q6(){let t,e,n,i,s,r;for(e=new ko,r=Pt(1485),n=0;n<1485;n++)r[n]=0;for(t=0,n=0;n<11880;++n)if((r[~~n>>>3]&1<<(n&7))==0){for(Ih(e,n*ab[8]),s=0;s<8;++s)i=eu(e,4),i==n&&(vm[t]=(vm[t]|1<<s)&65535),r[~~i>>3]=r[~~i>>3]|1<<(i&7),wu[i]=t<<3|gT[s],Hc(e,0),s%2==1&&(Hc(e,1),Hc(e,2));xg[t++]=n}}function l0(t,e,n){t[e>>4]^=(3^n)<<((e&15)<<1)}Ds(158,1,Ia([y6]),ko);on.isStd=!0;on.temp=null;let U1,sd=0,hr,ab,lb,cb,wu,xg,gT,vm;function eN(t){let e,n,i;for(e=0,i=!1,n=0;n<12;++n)e|=1<<t.ep[n],i=i!=t.ep[n]>=12;return e&=~~e>>12,e==0&&!i}function tN(t,e){let n;for(n=0;n<24;++n)t.ep[n]=e.ep[n]}function nN(t,e){let n;switch(n=e%3,e=~~(e/3),e){case 0:Ie(t.ep,0,1,2,3,n),Ie(t.ep,12,13,14,15,n);break;case 1:Ie(t.ep,11,15,10,19,n),Ie(t.ep,23,3,22,7,n);break;case 2:Ie(t.ep,0,11,6,8,n),Ie(t.ep,12,23,18,20,n);break;case 3:Ie(t.ep,4,5,6,7,n),Ie(t.ep,16,17,18,19,n);break;case 4:Ie(t.ep,1,20,5,21,n),Ie(t.ep,13,8,17,9,n);break;case 5:Ie(t.ep,2,9,4,10,n),Ie(t.ep,14,21,16,22,n);break;case 6:Ie(t.ep,0,1,2,3,n),Ie(t.ep,12,13,14,15,n),Ie(t.ep,9,22,11,20,n);break;case 7:Ie(t.ep,11,15,10,19,n),Ie(t.ep,23,3,22,7,n),Ie(t.ep,2,16,6,12,n);break;case 8:Ie(t.ep,0,11,6,8,n),Ie(t.ep,12,23,18,20,n),Ie(t.ep,3,19,5,13,n);break;case 9:Ie(t.ep,4,5,6,7,n),Ie(t.ep,16,17,18,19,n),Ie(t.ep,8,23,10,21,n);break;case 10:Ie(t.ep,1,20,5,21,n),Ie(t.ep,13,8,17,9,n),Ie(t.ep,14,0,18,4,n);break;case 11:Ie(t.ep,2,9,4,10,n),Ie(t.ep,14,21,16,22,n),Ie(t.ep,7,15,1,17,n)}}function ub(){let t;for(this.ep=Pt(24),t=0;t<24;++t)this.ep[t]=t}function _T(t){let e,n,i;for(ub.call(this),e=0;e<23;++e)i=e+vt(24-e),i!=e&&(n=this.ep[e],this.ep[e]=this.ep[i],this.ep[i]=n)}Ds(159,1,{},ub,_T);let Jy=!1;function iN(){Jy||(Jy=!0,H1=[35,1,34,2,4,6,22,5,19])}function vT(t){t.moveBuffer=Pt(60)}function sN(t,e){return t.value-e.value}function nu(t,e){let n;for(tN(t.edge,e.edge),G6(t.center,e.center),cT(t.corner,e.corner),t.value=e.value,t.add1=e.add1,t.length1=e.length1,t.length2=e.length2,t.length3=e.length3,t.sym=e.sym,n=0;n<60;++n)t.moveBuffer[n]=e.moveBuffer[n];t.moveLength=e.moveLength,t.edgeAvail=e.edgeAvail,t.centerAvail=e.centerAvail,t.cornerAvail=e.cornerAvail}function ta(t){for(;t.centerAvail<t.moveLength;)W6(t.center,t.moveBuffer[t.centerAvail++]);return t.center}function bT(t){for(;t.cornerAvail<t.moveLength;)Y6(t.corner,t.moveBuffer[t.cornerAvail++]%18);return t.corner}function Xf(t){for(;t.edgeAvail<t.moveLength;)nN(t.edge,t.moveBuffer[t.edgeAvail++]);return t.edge}function rN(t){let e,n,i,s,r,o,a,l;for(n=new Array(t.moveLength-(t.add1?2:0)),s=0,i=0;i<t.length1;++i)n[s++]=t.moveBuffer[i];for(l=t.sym,i=t.length1+(t.add1?2:0);i<t.moveLength;++i)fr[l][t.moveBuffer[i]]>=27?(n[s++]=fr[l][t.moveBuffer[i]]-9,o=H1[fr[l][t.moveBuffer[i]]-27],l=Uc[l][o]):n[s++]=fr[l][t.moveBuffer[i]];for(e=Uc[zc[l]][D6(ta(t))],a="",l=e,i=s-1;i>=0;--i)r=n[i],r=~~(r/3)*3+(2-r%3),fr[l][r]>=27?(a=a+V1[fr[l][r]-9]+" ",o=H1[fr[l][r]-27],l=Uc[l][o]):a=a+V1[fr[l][r]]+" ";return a}function Ka(t,e){t.moveBuffer[t.moveLength++]=e}function bm(){vT(this),this.edge=new ub,this.center=new ob,this.corner=new wg}function Mg(t){bm.call(this),nu(this,t)}function yT(t){vT(this),this.edge=new _T,this.center=new aT,this.corner=new fT}Ds(160,1,Ia([J4,x6]),bm,Mg,yT);on.compareTo$=function(e){return sN(this,e)};on.add1=!1;on.center=null;on.centerAvail=0;on.corner=null;on.cornerAvail=0;on.edge=null;on.edgeAvail=0;on.length1=0;on.length2=0;on.length3=0;on.moveLength=0;on.sym=0;on.value=0;let H1;function oN(t,e){return e.value-t.value}function ym(t,e){return oN(t,e)}function wT(){}Ds(161,1,{},wT);on.compare=function(e,n){return ym(e,n)};let Ky=!1;function aN(){if(Ky)return;Ky=!0;let t,e;for(V1=["U  ","U2 ","U' ","R  ","R2 ","R' ","F  ","F2 ","F' ","D  ","D2 ","D' ","L  ","L2 ","L' ","B  ","B2 ","B' ","Uw ","Uw2","Uw'","Rw ","Rw2","Rw'","Fw ","Fw2","Fw'","Dw ","Dw2","Dw'","Lw ","Lw2","Lw'","Bw ","Bw2","Bw'"],el=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19,21,22,23,25,28,30,31,32,34,36],Ju=[0,1,2,4,6,7,8,9,10,11,13,15,16,17,19,22,25,28,31,34,36],$y=Pt(37),Qy=Pt(37),Yl=Pt(37,36),mp=Pt(29,28),gp=Pt(21,20),c0=Pt(36),_f=Pt(28),Vc=Pt(20),t=0;t<29;++t)$y[el[t]]=t;for(t=0;t<21;++t)Qy[Ju[t]]=t;for(t=0;t<36;++t){for(e=0;e<36;++e)Yl[t][e]=~~(t/3)==~~(e/3)||~~(t/3)%3==~~(e/3)%3&&t>e;Yl[36][t]=!1}for(t=0;t<29;++t)for(e=0;e<28;++e)mp[t][e]=Yl[el[t]][el[e]];for(t=0;t<21;++t)for(e=0;e<20;++e)gp[t][e]=Yl[Ju[t]][Ju[e]];for(t=0;t<36;++t)for(c0[t]=36,e=t;e<36;++e)if(!Yl[t][e]){c0[t]=e-1;break}for(t=0;t<28;++t)for(_f[t]=28,e=t;e<28;++e)if(!mp[t][e]){_f[t]=e-1;break}for(t=0;t<20;++t)for(Vc[t]=20,e=t;e<20;++e)if(!gp[t][e]){Vc[t]=e-1;break}}let Yl,mp,gp,el,V1,Ju,c0,_f,Vc,$y,Qy;function lN(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w;for(t.solution="",y=hp(new pp(ta(t.c),0)),o=hp(new pp(ta(t.c),1)),_=hp(new pp(ta(t.c),2)),w=mr[~~y>>6],a=mr[~~o>>6],m=mr[~~_>>6],t.p1SolsCnt=0,t.arr2idx=0,_N(t.p1sols.heap),t.length1=(w<a?w:a)<m?w<a?w:a:m;t.length1<100&&!(m<=t.length1&&_p(t,~~_>>>6,_&63,t.length1,-1,0)||w<=t.length1&&_p(t,~~y>>>6,y&63,t.length1,-1,0)||a<=t.length1&&_p(t,~~o>>>6,o&63,t.length1,-1,0));++t.length1);d=kN(t.p1sols,Kv(LN,Ia([w6,Zv,Jv]),J4,0,0)),d.sort(function(x,S){return x.value-S.value}),e=9;do{e:for(f=d[0].value;f<100;++f)for(l=0;l<d.length&&!(d[l].value>f);++l)if(!(f-d[l].length1>e)&&(nu(t.c1,d[l]),tT(t.ct2,ta(t.c1),wm(Xf(t.c1).ep)),v=hm(t.ct2),g=dm(t.ct2),t.length1=d[l].length1,t.length2=f-d[l].length1,xT(t,v,g,t.length2,28,0)))break e;++e}while(f==100);t.arr2.sort(function(x,S){return x.value-S.value}),c=0,n=13;do{e:for(h=t.arr2[0].value;h<100;++h)for(l=0;l<Math.min(t.arr2idx,100)&&!(t.arr2[l].value>h);++l)if(!(h-t.arr2[l].length1-t.arr2[l].length2>n)&&(r=dT(t.e12,Xf(t.arr2[l])),rT(t.ct3,ta(t.arr2[l]),r^wm(bT(t.arr2[l]).cp)),i=nb(t.ct3),s=eu(t.e12,10),p=mT(hT(t.e12)),p<=h-t.arr2[l].length1-t.arr2[l].length2&&MT(t,s,i,p,h-t.arr2[l].length1-t.arr2[l].length2,20,0))){c=l;break e}++n}while(h==100);for(b=new Mg(t.arr2[c]),t.length1=b.length1,t.length2=b.length2,u=h-t.length1-t.length2,l=0;l<u;++l)Ka(b,Ju[t.move3[l]]);t.solution=rN(b)}function cN(t,e){let n,i,s,r,o;for(nu(t.c1,t.c),i=0;i<t.length1;++i)Ka(t.c1,t.move1[i]);switch(eb[e]){case 0:Ka(t.c1,24),Ka(t.c1,35),t.move1[t.length1]=24,t.move1[t.length1+1]=35,t.add1=!0,e=19;break;case 12869:Ka(t.c1,18),Ka(t.c1,29),t.move1[t.length1]=18,t.move1[t.length1+1]=29,t.add1=!0,e=34;break;case 735470:t.add1=!1,e=0}return tT(t.ct2,ta(t.c1),wm(Xf(t.c1).ep)),r=hm(t.ct2),o=dm(t.ct2),n=Ji[r*70+o],t.c1.value=n+t.length1,t.c1.length1=t.length1,t.c1.add1=t.add1,t.c1.sym=e,++t.p1SolsCnt,t.p1sols.heap.size<500?s=new Mg(t.c1):(s=TN(t.p1sols),s.value>t.c1.value&&nu(s,t.c1)),pN(t.p1sols,s),t.p1SolsCnt==1e4}function uN(t){let e,n,i,s;for(nu(t.c2,t.c1),i=0;i<t.length2;++i)Ka(t.c2,t.move2[i]);return eN(Xf(t.c2))?(n=dT(t.e12,Xf(t.c2)),rT(t.ct3,ta(t.c2),n^wm(bT(t.c2).cp)),e=nb(t.ct3),eu(t.e12,10),s=mT(hT(t.e12)),t.arr2[t.arr2idx]?nu(t.arr2[t.arr2idx],t.c2):t.arr2[t.arr2idx]=new Mg(t.c2),t.arr2[t.arr2idx].value=t.length1+t.length2+Math.max(s,ea[e]),t.arr2[t.arr2idx].length2=t.length2,++t.arr2idx,t.arr2idx==t.arr2.length):!1}function fN(t,e){return hN(),t.c=new yT,lN(t),t.solution}function _p(t,e,n,i,s,r){let o,a,l,c,u,f;if(e==0)return i==0&&cN(t,n);for(o=0;o<27;o+=3)if(!(o==s||o==s-9||o==s-18))for(c=0;c<3;++c){if(l=o+c,a=bg[e][fr[n][l]],u=mr[~~a>>>6],u>=i){if(u>i)break;continue}if(f=Uc[n][a&63],a>>>=6,t.move1[r]=l,_p(t,a,f,i-1,o,r+1))return!0}return!1}function xT(t,e,n,i,s,r){let o,a,l,c;if(e==0&&Ji[n]==0)return i==0&&uN(t);for(a=0;a<23;++a){if(mp[s][a]){a=_f[a];continue}if(o=pm[e][a],c=mm[n][a],l=Ji[o*70+c],l>=i){l>i&&(a=_f[a]);continue}if(t.move2[r]=el[a],xT(t,o,c,i-1,a,r+1))return!0}return!1}function MT(t,e,n,i,s,r,o){let a,l,c,u,f,h,d,p,_;if(s==0)return e==0&&n==0;for(Ih(t.tempe[o],e),f=0;f<17;++f){if(gp[r][f]){f=Vc[f];continue}if(c=gf[n][f],h=ea[c],h>=s){h>s&&f<14&&(f=Vc[f]);continue}if(u=tu(t.tempe[o].edge,f<<3,10),a=~~(u/20160),p=wu[a],_=p&7,p>>=3,l=tu(t.tempe[o].edge,f<<3|_,10)%20160,d=K6(p*20160+l,i),d>=s){d>s&&f<14&&(f=Vc[f]);continue}if(MT(t,u,c,d,s-1,f,o+1))return t.move3[o]=f,!0}return!1}function ST(){let t;for(this.p1sols=new LT(new wT),this.move1=Pt(15),this.move2=Pt(20),this.move3=Pt(20),this.c1=new bm,this.c2=new bm,this.ct2=new tb,this.ct3=new ib,this.e12=new ko,this.tempe=Pt(20),this.arr2=Pt(100),t=0;t<20;++t)this.tempe[t]=new ko}function hN(){e2||(O6(),Qc=Pt(735471),I6(),P6(),Qc=null,R6(),F6(),V6(),$6(),Q6(),J6(),e2=!0)}Ds(163,1,Ia([M6]),ST);on.add1=!1;on.arr2idx=0;on.c=null;on.length1=0;on.length2=0;on.p1SolsCnt=0;on.solution="";let e2=!1;function wm(t){let e,n,i,s;for(s=0,e=0,i=t.length;e<i;++e)for(n=e;n<i;++n)t[e]>t[n]&&(s^=1);return s}function Ie(t,e,n,i,s,r){let o;switch(r){case 0:o=t[s],t[s]=t[i],t[i]=t[n],t[n]=t[e],t[e]=o;return;case 1:o=t[e],t[e]=t[i],t[i]=o,o=t[n],t[n]=t[s],t[s]=o;return;case 2:o=t[e],t[e]=t[n],t[n]=t[i],t[i]=t[s],t[s]=o;return}}function ET(){}function TT(t,e,n,i){let s;return s=new ET,s.typeName=t+e,kT(n!=0?-n:0)&&CT(n!=0?-n:0,s),s.modifiers=4,s.superclass=fb,s.componentType=i,s}function AT(t,e,n,i){let s;return s=new ET,s.typeName=t+e,kT(n)&&CT(n,s),s.superclass=i,s}function dN(t){let e=jf[t.seedId];return t=null,e}function kT(t){return typeof t=="number"&&t>0}function CT(t,e){let n;if(e.seedId=t,t==2)n=String.prototype;else if(t>0){let i=dN(e);if(i)n=i.prototype;else{i=jf[t]=function(){},i.___clazz$=e;return}}else return;n.___clazz$=e}on.val$outerIter=null;function pN(t,e){if(EN(t,e))return!0}function mN(t){t.array=Kv(PT,Ia([Zv,Jv]),X4,0,0)}function gN(t,e){return um(t.array,t.size++,e),!0}function _N(t){t.array=Kv(PT,Ia([Zv,Jv]),X4,0,0),t.size=0}function na(t,e){return t.array[e]}function vN(t,e){let n;return n=t.array[e],wN(t.array,e,1),--t.size,n}function Gc(t,e,n){let i;return i=t.array[e],um(t.array,e,n),i}function bN(t,e){let n;for(e.length<t.size&&(e=E6(e,t.size)),n=0;n<t.size;++n)um(e,n,t.array[n]);return e.length>t.size&&um(e,t.size,null),e}function yN(){mN(this),this.array.length=500}function wN(t,e,n){t.splice(e,n)}on.size=0;function xN(t,e){let n,i,s,r;for(i=0,n=t.length-1;i<=n;)if(s=i+(~~(n-i)>>1),r=t[s],r<e)i=s+1;else if(r>e)n=s-1;else return s;return-i-1}function Sg(t){MN(t,t.length)}function MN(t,e){let n;for(n=0;n<e;++n)t[n]=-1}function SN(t,e){let n,i,s,r,o,a;for(n=t.heap.size,s=na(t.heap,e);e*2+1<n&&(i=(r=2*e+1,o=r+1,a=r,o<n&&ym(na(t.heap,o),na(t.heap,r))<0&&(a=o),a),!(ym(s,na(t.heap,i))<0));)Gc(t.heap,e,na(t.heap,i)),e=i;Gc(t.heap,e,s)}function EN(t,e){let n,i;for(i=t.heap.size,gN(t.heap,e);i>0;){if(n=i,i=~~((i-1)/2),ym(na(t.heap,i),e)<=0)return Gc(t.heap,n,e),!0;Gc(t.heap,n,na(t.heap,i))}return Gc(t.heap,i,e),!0}function TN(t){let e;return t.heap.size==0?null:(e=na(t.heap,0),AN(t),e)}function AN(t){let e;e=vN(t.heap,t.heap.size-1),0<t.heap.size&&(Gc(t.heap,0,e),SN(t,0))}function kN(t,e){return bN(t.heap,e)}function LT(t){this.heap=new yN,this.cmp=t}Ds(239,1,{},LT);on.cmp=null;on.heap=null;let fb=AT("java.lang.","Object",1,null),PT=TT("[Ljava.lang.","Object;",356,fb),CN=AT("cs.threephase.","FullCube",160,fb),LN=TT("[Lcs.threephase.","FullCube;",381,CN),RT,t2=!1;function PN(){t2||(t2=!0,aN(),L6(),B6(),z6(),Z6(),j6(),iN(),RT=new ST)}function RN(){return PN(),(pf()+fN(RT)).replace(/\s+/g," ")}_i("444wca",RN);function DN(t,e){t.ul=e.ul,t.ur=e.ur,t.dl=e.dl,t.dr=e.dr,t.ml=e.ml}function n2(t,e){let n;e<<=2,e>24?(e=48-e,n=t.ul,t.ul=(t.ul>>e|t.ur<<24-e)&16777215,t.ur=(t.ur>>e|n<<24-e)&16777215):e>0?(n=t.ul,t.ul=(t.ul<<e|t.ur>>24-e)&16777215,t.ur=(t.ur<<e|n>>24-e)&16777215):e==0?(n=t.ur,t.ur=t.dl,t.dl=n,t.ml=1-t.ml):e>=-24?(e=-e,n=t.dl,t.dl=(t.dl<<e|t.dr>>24-e)&16777215,t.dr=(t.dr<<e|n>>24-e)&16777215):e<-24&&(e=48+e,n=t.dl,t.dl=(t.dl>>e|t.dr<<24-e)&16777215,t.dr=(t.dr>>e|n<<24-e)&16777215)}function ON(t){let e,n,i,s,r;for(i=0,t.arr[0]=zr(t,0),s=1;s<24;++s)zr(t,s)!=t.arr[i]&&(t.arr[++i]=zr(t,s));for(r=0,e=0;e<16;++e)for(n=e+1;n<16;++n)t.arr[e]>t.arr[n]&&(r^=1);return r}function IN(t){let e,n,i,s;return s=t.ur&1118481,s|=s>>3,s|=s>>6,s=s&15|s>>12&48,i=t.ul&1118481,i|=i>>3,i|=i>>6,i=i&15|i>>12&48,n=t.dr&1118481,n|=n>>3,n|=n>>6,n=n&15|n>>12&48,e=t.dl&1118481,e|=e>>3,e|=e>>6,e=e&15|e>>12&48,Ku(ON(t)<<24|i<<18|s<<12|e<<6|n)}function NN(t,e){let n,i;for(n=0;n<8;++n)t.prm[n]=zr(t,n*3+1)>>1;for(e.cornperm=es(t.prm),e.topEdgeFirst=zr(t,0)==zr(t,1),n=e.topEdgeFirst?2:0,i=0;i<4;n+=3,++i)t.prm[i]=zr(t,n)>>1;for(e.botEdgeFirst=zr(t,12)==zr(t,13),n=e.botEdgeFirst?14:12;i<8;n+=3,++i)t.prm[i]=zr(t,n)>>1;e.edgeperm=es(t.prm),e.ml=t.ml}function zr(t,e){let n;return e<6?n=t.ul>>(5-e<<2):e<12?n=t.ur>>(11-e<<2):e<18?n=t.dl>>(17-e<<2):n=t.dr>>(23-e<<2),n&15}function u0(t,e,n){e<6?(t.ul&=~(15<<(5-e<<2)),t.ul|=n<<(5-e<<2)):e<12?(t.ur&=~(15<<(11-e<<2)),t.ur|=n<<(11-e<<2)):e<18?(t.dl&=~(15<<(17-e<<2)),t.dl|=n<<(17-e<<2)):(t.dr&=~(15<<(23-e<<2)),t.dr|=n<<(23-e<<2))}function hb(){this.arr=[],this.prm=[]}function DT(t){let e,n,i,s,r,o,a,l,c;for(t===void 0&&(t=vt(3678)),e=new hb,i=xu[t],r=19088743<<1|286331153,s=19088743<<1,a=o=8,n=0;n<24;n++)(i>>n&1)==0?(l=vt(o)<<2,u0(e,23-n,s>>l&15),c=(1<<l)-1,s=(s&c)+(s>>4&~c),--o):(l=vt(a)<<2,u0(e,23-n,r>>l&15),u0(e,22-n,r>>l&15),c=(1<<l)-1,r=(r&c)+(r>>4&~c),--a,++n);return e.ml=vt(2),e}function BN(){}let vi=hb.prototype=BN.prototype;vi.dl=10062778;vi.dr=14536702;vi.ml=0;vi.ul=70195;vi.ur=4544119;function FN(t){let e,n,i,s,r,o;for(DN(t.Search_d,t.Search_c),i=0;i<t.Search_length1;++i)n2(t.Search_d,t.Search_move[i]);for(NN(t.Search_d,t.Search_sq),n=t.Search_sq.edgeperm,e=t.Search_sq.cornperm,r=t.Search_sq.ml,o=Math.max(ri[t.Search_sq.edgeperm<<1|r],ri[t.Search_sq.cornperm<<1|r]),i=o;i<t.Search_maxlen2;++i)if(bp(t,n,e,t.Search_sq.topEdgeFirst,t.Search_sq.botEdgeFirst,r,i,t.Search_length1,0)){for(s=0;s<i;++s)n2(t.Search_d,t.Search_move[t.Search_length1+s]);return t.Search_sol_string=zN(t,i+t.Search_length1),!0}return!1}function zN(t,e){let n="",i=0,s=0;for(let r=e-1;r>=0;r--){let o=t.Search_move[r];if(o>0)o=12-o,i=o>6?o-12:o;else if(o<0)o=12+o,s=o>6?o-12:o;else{let a=" /";i==0&&s==0?n+=a:n+=" ("+i+","+s+")"+a,i=s=0}}return i==0&&s==0||(n+=" ("+i+","+s+") "),n}function vp(t,e,n,i,s,r){let o,a,l;if(n==0&&i<4)return i==0&&FN(t);if(r!=0&&(l=xm[e],a=Ti[l],a<i&&(t.Search_move[s]=0,vp(t,l,a,i-1,s+1,0))))return!0;if(l=e,r<=0){for(o=0;o+=jc[l],l=o>>4,o&=15,!(o>=12||(a=Ti[l],a>i));)if(a<i&&(t.Search_move[s]=o,vp(t,l,a,i-1,s+1,1)))return!0}if(l=e,r<=1){for(o=0;o+=Wc[l],l=o>>4,o&=15,!(o>=6||(a=Ti[l],a>i));)if(a<i&&(t.Search_move[s]=-o,vp(t,l,a,i-1,s+1,2)))return!0}return!1}function bp(t,e,n,i,s,r,o,a,l){let c,u,f,h,d,p,_;if(o==0&&!i&&s||l!=0&&i==s&&(f=Zf[e],u=Zf[n],ri[f<<1|1-r]<o&&ri[u<<1|1-r]<o&&(t.Search_move[a]=0,bp(t,f,u,i,s,1-r,o-1,a+1,0))))return!0;if(l<=0)for(_=!i,f=_?nl[e]:e,u=_?n:nl[n],h=_?1:2,d=ri[f<<1|r],p=ri[u<<1|r];h<12&&d<=o&&d<=o;){if(d<o&&p<o&&(t.Search_move[a]=h,bp(t,f,u,_,s,r,o-1,a+1,1)))return!0;_=!_,_?(f=nl[f],d=ri[f<<1|r],h+=1):(u=nl[u],p=ri[u<<1|r],h+=2)}if(l<=1)for(c=!s,f=c?tl[e]:e,u=c?n:tl[n],h=c?1:2,d=ri[f<<1|r],p=ri[u<<1|r];h<(o>6?6:12)&&d<=o&&d<=o;){if(d<o&&p<o&&(t.Search_move[a]=-h,bp(t,f,u,i,c,r,o-1,a+1,2)))return!0;c=!c,c?(f=tl[f],d=ri[f<<1|r],h+=1):(u=tl[u],p=ri[u<<1|r],h+=2)}return!1}function OT(t,e){let n;for(t.Search_c=e,n=IN(e),t.Search_length1=Ti[n];t.Search_length1<100&&(t.Search_maxlen2=Math.min(32-t.Search_length1,17),!vp(t,n,Ti[n],t.Search_length1,0,-1));++t.Search_length1);return t.Search_sol_string}function IT(){this.Search_move=[],this.Search_d=new hb,this.Search_sq=new FT}function UN(){}vi=IT.prototype=UN.prototype;vi.Search_c=null;vi.Search_length1=0;vi.Search_maxlen2=0;vi.Search_sol_string=null;let i2=!1;function NT(){i2||(i2=!0,$u=[0,3,6,12,15,24,27,30,48,51,54,60,63],xu=[],Ti=[],jc=[],Wc=[],xm=[],GN())}function HN(t){let e,n;e=0,n=0;do(t.bottom&2048)==0?(e+=1,t.bottom=t.bottom<<1):(e+=2,t.bottom=t.bottom<<2^12291),n=1-n;while((ll(t.bottom&63)&1)!=0);return(ll(t.bottom)&2)==0&&(t.Shape_parity^=n),e}function yp(t){let e;return e=zT(xu,t.top<<12|t.bottom)<<1|t.Shape_parity,e}function wp(t,e){t.Shape_parity=e&1,t.top=xu[e>>1],t.bottom=t.top&4095,t.top>>=12}function VN(t){let e,n;e=0,n=0;do(t.top&2048)==0?(e+=1,t.top=t.top<<1):(e+=2,t.top=t.top<<2^12291),n=1-n;while((ll(t.top&63)&1)!=0);return(ll(t.top)&2)==0&&(t.Shape_parity^=n),e}function db(){}function Ku(t){let e;return e=zT(xu,t&16777215)<<1|t>>24,e}function GN(){let t,e,n,i,s,r,o,a,l,c,u,f,h,d,p,_;for(t=0,o=0;o<28561;++o)r=$u[o%13],n=$u[~~(o/13)%13],f=$u[~~(~~(o/13)/13)%13],u=$u[~~(~~(~~(o/13)/13)/13)],h=u<<18|f<<12|n<<6|r,ll(h)==16&&(xu[t++]=h);for(c=new db,o=0;o<7356;++o)wp(c,o),jc[o]=VN(c),jc[o]|=yp(c)<<4,wp(c,o),Wc[o]=HN(c),Wc[o]|=yp(c)<<4,wp(c,o),_=c.top&63,d=ll(_),p=ll(c.bottom&4032),c.Shape_parity^=1&(d&p)>>1,c.top=c.top&4032|c.bottom>>6&63,c.bottom=c.bottom&63|_<<6,xm[o]=yp(c);for(o=0;o<7536;++o)Ti[o]=-1;for(Ti[Ku(14378715)]=0,Ti[Ku(31157686)]=0,Ti[Ku(23967451)]=0,Ti[Ku(7191990)]=0,i=4,s=0,e=-1;i!=s;)for(s=i,++e,o=0;o<7536;++o)if(Ti[o]==e){l=0,a=o;do a=jc[a],l+=a&15,a>>=4,Ti[a]==-1&&(++i,Ti[a]=e+1);while(l!=12);l=0,a=o;do a=Wc[a],l+=a&15,a>>=4,Ti[a]==-1&&(++i,Ti[a]=e+1);while(l!=12);a=xm[o],Ti[a]==-1&&(++i,Ti[a]=e+1)}}function WN(){}vi=db.prototype=WN.prototype;vi.bottom=0;vi.Shape_parity=0;vi.top=0;let Wc,xu,Ti,jc,xm,$u,s2=!1;function BT(){s2||(s2=!0,ri=[],Zf=[],nl=[],tl=[],jN())}function FT(){}function jN(){let t,e,n,i,s,r,o,a,l,c,u;for(u=[],s=0;s<40320;++s)hs(u,s),tn(u,2,4)(u,3,5),Zf[s]=es(u),hs(u,s),tn(u,0,3,2,1),nl[s]=es(u),hs(u,s),tn(u,4,7,6,5),tl[s]=es(u);for(s=0;s<80640;++s)ri[s]=-1;for(ri[0]=0,e=0,n=1;n<80640;){a=e>=11,i=a?-1:e,t=a?e:-1,++e;e:for(s=0;s<80640;++s)if(ri[s]==i){if(r=s>>1,c=s&1,o=Zf[r]<<1|1-c,ri[o]==t&&(++n,ri[a?s:o]=e,a))continue e;for(o=r,l=0;l<4;++l)if(o=nl[o],ri[o<<1|c]==t&&(++n,ri[a?s:o<<1|c]=e,a))continue e;for(l=0;l<4;++l)if(o=tl[o],ri[o<<1|c]==t&&(++n,ri[a?s:o<<1|c]=e,a))continue e}}}function YN(){}vi=FT.prototype=YN.prototype;vi.botEdgeFirst=!1;vi.cornperm=0;vi.edgeperm=0;vi.ml=0;vi.topEdgeFirst=!1;let tl,ri,nl,Zf;function ll(t){return t-=t>>1&1431655765,t=(t>>2&858993459)+(t&858993459),t=(t>>4)+t&252645135,t+=t>>8,t+=t>>16,t&63}function zT(t,e){let n,i,s,r;for(i=0,n=t.length-1;i<=n;)if(s=i+(n-i>>1),r=t[s],r<e)i=s+1;else if(r>e)n=s-1;else return s;return-i-1}let xp=[0,1,3,18,19,1004,1005,1006,1007,1008,1009,1011,1015,1016,1018,1154,1155,1156,1157,1158,1159,1161,1166,1168,424,425,426,427,428,429,431,436,95,218,341,482,528,632,1050,342,343,345,346,348,353,223,487,533,535,1055,219,225,483,489,639,1051,1057,486,1054,1062,6,21,34,46,59,71,144,157,182,305,7,22,35,47,60,72,145,158,183,306,8,23,36,48,61,73,146,159,184,307],r2=!1;function qN(){if(r2)return;r2=!0;let t=new db;for(let e=0;e<xp.length;e++){let n=[xp[e]];for(let i=0;i<n.length;i++){let s=n[i];do s=jc[s<<1]>>5,n.indexOf(s)==-1&&n.push(s);while(s!=n[i]);do s=Wc[s<<1]>>5,n.indexOf(s)==-1&&n.push(s);while(s!=n[i]);wp(t,s<<1);let r=t.top;t.top=t.bottom,t.bottom=r,s=yp(t)>>1,n.indexOf(s)==-1&&n.push(s)}xp[e]=n}}let XN=["Star-x8","Star-x71","Star-x62","Star-x44","Star-x53","Square-Scallop","Square-rPawn","Square-Shield","Square-Barrel","Square-rFist","Square-Mushroom","Square-lPawn","Square-Square","Square-lFist","Square-Kite","Kite-Scallop","Kite-rPawn","Kite-Shield","Kite-Barrel","Kite-rFist","Kite-Mushroom","Kite-lPawn","Kite-lFist","Kite-Kite","Barrel-Scallop","Barrel-rPawn","Barrel-Shield","Barrel-Barrel","Barrel-rFist","Barrel-Mushroom","Barrel-lPawn","Barrel-lFist","Scallop-Scallop","Scallop-rPawn","Scallop-Shield","Scallop-rFist","Scallop-Mushroom","Scallop-lPawn","Scallop-lFist","Shield-rPawn","Shield-Shield","Shield-rFist","Shield-Mushroom","Shield-lPawn","Shield-lFist","Mushroom-rPawn","Mushroom-rFist","Mushroom-Mushroom","Mushroom-lPawn","Mushroom-lFist","Pawn-rPawn-rPawn","Pawn-rPawn-lPawn","Pawn-rPawn-rFist","Pawn-lPawn-rFist","Pawn-lPawn-lPawn","Pawn-rPawn-lFist","Pawn-lPawn-lFist","Fist-rFist-rFist","Fist-lFist-rFist","Fist-lFist-lFist","Pair-x6","Pair-r42","Pair-x411","Pair-r51","Pair-l42","Pair-l51","Pair-x33","Pair-x312","Pair-x321","Pair-x222","L-x6","L-r42","L-x411","L-r51","L-l42","L-l51","L-x33","L-x312","L-x321","L-x222","Line-x6","Line-r42","Line-x411","Line-r51","Line-l42","Line-l51","Line-x33","Line-x312","Line-x321","Line-x222"],UT=[16,16,16,10,16,24,16,24,16,24,16,16,4,24,16,48,32,48,32,48,32,32,48,16,48,32,48,16,48,32,32,48,36,48,72,72,48,48,72,48,36,72,48,48,72,32,48,16,32,48,16,32,48,48,16,48,48,36,72,36,72,96,96,72,96,72,72,72,72,24,48,64,64,48,64,48,48,48,48,16,24,32,32,24,32,24,24,24,24,8],HT=new IT;function ZN(t,e,n){return NT(),BT(),OT(HT,DT())}function JN(t,e,n){NT(),BT(),qN();let i=ni(xp[yu(n,UT)]);return OT(HT,DT(i))}_i("sqrs",ZN);_i("sqrcsp",JN,[XN,UT]);let KN=[[4,16,7],[1,11,22],[26,14,8],[29,19,23]],$N=[[3,6,12],[2,21,17],[27,9,18],[28,24,13]];function QN(t,e){let n=W1.set([],t%12),i=G1.set([],~~(t/12)),s=j1.set([],e%81),r=Y1.set([],~~(e/81)),o=[];for(let a=0;a<6;a++)o[a*5]=i[a];Ff(KN,o,[0,1,2,3],s,5),Ff($N,o,n,r,5);for(let a=0;a<30;a+=5)for(let l=1;l<5;l++)if(o[a]==o[a+l])return!1;return!0}let eB=[[0,3,1],[0,2,4],[1,5,2],[3,4,5]],VT=[[0,1,2],[0,3,1],[0,2,3],[1,3,2]],G1=new Fo("p",6,-1),W1=new Fo("p",4,-1),j1=new Fo("o",4,3),Y1=new Fo("o",4,-3);function GT(t,e){let n=W1.set([],t%12),i=G1.set([],~~(t/12));return ds(i,eB[e]),ds(n,VT[e]),G1.get(i)*12+W1.get(n)}function WT(t,e){let n=j1.set([],t%81),i=Y1.set([],~~(t/81));return n[e]++,ds(i,VT[e],1,[0,2,1,3]),Y1.get(i)*81+j1.get(n)}let o2=new Ol(4,2,[[0,GT,4320],[0,WT,2187]]),f0=new Ol(4,2,[[0,function(t,e){return~~(GT(t*12,e)/12)},360],[0,function(t,e){return WT(t,e)%81},81]]);function tB(t){let e=[],n=["L","R","B","U"];for(let i=0;i<t.length;i++){let s=t[i][0],r=1-t[i][1];s==2&&ds(n,[0,3,1],r+1),e.push(n[s]+(r==1?"'":""))}return e.join(" ")}let nB=[0,1,2,0,2,1,1,2,0,2,1,0];function iB(t){let e,n,i=t=="skbso"?6:2,s=t=="skbo"?0:8;do e=vt(4320),n=vt(2187);while(e==0&&n==0||nB[e%12]!=(n+~~(n/3)+~~(n/9)+~~(n/27))%3||o2.search([e,n],0,i)!=null||t=="skbnb"&&!QN(e,n));return tB(o2.search([e,n],s).reverse())}function sB(t){let e,n,i=1,s=t=="ivyso"?6:0;do e=vt(360),n=vt(81);while(e==0&&n==0||f0.search([e,n],0,i)!=null);return f0.toStr(f0.search([e,n],s).reverse(),"RLDB","' ")}_i(["skbo","skbso","skbnb"],iB)(["ivyo","ivyso"],sB);let xs=["","2","'"],rB=["","2","'","2'"],gr=[],Nr=[];function rd(t,e,n,i){i==null&&(i=[""]);let s=0,r,o=[];for(let a=0;a<n;a++){do r=vt(t.length);while(s>>r&1);o.push(t[r]+ni(i)),s&=~e[r],s|=1<<r}return o.join(" ")}function oB(t,e){let n=[["U","D"],["R","L","r"],["F","B","f"]],i=[],s,r=0,o,a,l="";for(s=-1,o=0;o<e;o++){let c=0;do{let u=vt(n.length),f=vt(n[u].length);if(u!=s||i[f]==0){if(u==s){i[f]=1;let h=vt(xs.length);u==0&&f==0&&(r=(r+4+h)%4),u==1&&f==2?r==0||r==3?l+="l"+xs[h]+" ":l+="r"+xs[h]+" ":u==2&&f==2?r==0||r==1?l+="b"+xs[h]+" ":l+="f"+xs[h]+" ":l+=n[u][f]+xs[h]+" "}else{for(a=0;a<n[u].length;a++)i[a]=0;s=u,i[f]=1;let h=vt(xs.length);u==0&&f==0&&(r=(r+4+h)%4),u==1&&f==2?r==0||r==3?l+="l"+xs[h]+" ":l+="r"+xs[h]+" ":u==2&&f==2?r==0||r==1?l+="b"+xs[h]+" ":l+="f"+xs[h]+" ":l+=n[u][f]+xs[h]+" "}c=1}}while(c==0)}return l}_i("444yj",oB);function aB(t,e){function n(_){let m=[],v,g,b,y=0;for(v=0;v<9;v++){for(b=0,g=0;g<m.length;g++)m[g]==r[s[_][v]]&&(b=1);b==0&&(m[m.length]=r[s[_][v]],r[s[_][v]]==0&&(y=1))}return m.length==5&&y==1}function i(_,m){for(let v=0;v<m;v++){let g=r[s[_][0]];r[s[_][0]]=r[s[_][6]],r[s[_][6]]=r[s[_][4]],r[s[_][4]]=r[s[_][2]],r[s[_][2]]=g,g=r[s[_][7]],r[s[_][7]]=r[s[_][5]],r[s[_][5]]=r[s[_][3]],r[s[_][3]]=r[s[_][1]],r[s[_][1]]=g}}let s=[[0,1,2,5,8,7,6,3,4],[6,7,8,13,20,19,18,11,12],[0,3,6,11,18,17,16,9,10],[8,5,2,15,22,21,20,13,14]],r=[1,1,2,3,3,2,4,4,0,5,6,7,8,9,10,10,5,6,7,8,9,11,11],o="UFLR",a="",l=[],c,u,f,h,d,p;for(;l.length<e;){for(c=[1,1,1,1],h=0;h<4;h++)c[h]==1&&!n(h)&&(c[h]=0);for(u=0;u==0;)d=vt(4),c[d]==1&&(p=vt(3)+1,i(d,p),u=1);l[l.length]=[d,p],l.length>=2&&l[l.length-1][0]==l[l.length-2][0]&&(l[l.length-2][1]=(l[l.length-2][1]+l[l.length-1][1])%4,l=l.slice(0,l.length-1)),l.length>=1&&l[l.length-1][1]==0&&(l=l.slice(0,l.length-1))}for(f=0;f<e;f++)a+=o[l[f][0]]+xs[l[f][1]-1]+" ";return a}_i("bic",aB);function Pn(t){let e=[t+"=0",t+"+1",t+"+2",t+"+3",t+"+4",t+"+5",t+"+6",t+"-5",t+"-4",t+"-3",t+"-2",t+"-1"];return" "+ni(e)+" "}function od(){return ni(["U","d"])+ni(["U","d"])}function Bs(){return"     "}function h0(t,e,n,i){let s=[[0,-1],[1,0],[-1,0],[0,1]],r=0,o=3,a,l=5,c=[];for(let f=0;f<e;f++){do a=vt(4);while(r+s[a][0]<0||r+s[a][0]>3||o+s[a][1]<0||o+s[a][1]>3||a+l==3);r+=s[a][0],o+=s[a][1],c.length>0&&c[c.length-1][0]==a?c[c.length-1][1]++:c.push([a,1]),l=a}let u="";for(let f=0;f<c.length;f++){let h=t?c[f][0]:3-c[f][0];if(h=(n?"\uFFEA\uFFE9\uFFEB\uFFEC":"ULRD").charAt(h),i)u+=h+(c[f][1]==1?"":c[f][1])+" ";else for(let d=0;d<c[f][1];d++)u+=h+" "}return u}function a2(t,e){let n="",i,s;for(i=0;i<e;i++){for(n+="  ",s=0;s<t;s++)n+=(s%2==0?"R":"D")+ni(["++","--"])+" ";n+="U"+(n.endsWith("-- ")?"'\\n":"\\n")}return n}function lB(t,e){let n="",i,s;for(i=0;i<e;i++){for(n+=" ",s=0;s<t/2;s++)n+=ni(["+","-"])+ni(["+","-"])+" ";n+="U"+ni(["'\\n","\\n"])}return n}function cB(t){let e="",n,i;for(n=0;n<Math.ceil(t/10);n++){for(e+="  ",i=0;i<10;i++)e+=(i%2==0?"Rr".charAt(vt(2)):"Dd".charAt(vt(2)))+ni(["+ ","++","- ","--"])+" ";e+="y"+ni(rB)+`
`}return e}function d0(t,e){gr=[];let n,i;jT(1,t,e);let s="";for(n=0;n<gr[0].length;n++)i=gr[0][n],i[0]==7?s+="/":s+=" ("+i[0]+","+i[1]+") ";return s}function uB(t){gr=[];let e;jT(2,0,t);let n=gr[0],i=gr[1],s="";for(n[0][0]==7&&(n=[[0,0]].concat(n)),i[0][0]==7&&(i=[[0,0]].concat(i)),e=0;e<t;e++)s+="("+n[2*e][0]+","+i[2*e][0]+","+i[2*e][1]+","+n[2*e][1]+") / ";return s}function jT(t,e,n){for(let i=0;i<t;i++){Nr=[1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0],gr[i]=[];let s=0;for(;s<n;){let r=vt(12)-5,o=e==2?0:vt(12)-5,a=(r==0?0:1)+(o==0?0:1);(s+a<=n||e!=1)&&(a>0||s==0)&&l2(r,o)&&(e==1&&(s+=a),a>0&&(gr[i][gr[i].length]=[r,o]),(s<n||e!=1)&&(s++,gr[i][gr[i].length]=[7,0],l2(7,0)))}}}function l2(t,e){let n,i,s;if(t==7){for(n=0;n<6;n++)tn(Nr,n+6,n+12);return!0}else{if(Nr[(17-t)%12]||Nr[(11-t)%12]||Nr[12+(17-e)%12]||Nr[12+(11-e)%12])return!1;for(i=Nr.slice(0,12),s=Nr.slice(12,24),n=0;n<12;n++)Nr[n]=i[(12+n-t)%12],Nr[n+12]=s[(12+n-e)%12];return!0}}function fB(t){let e=[];for(let n=0;n<t;n++)e.push(Ao([["R"],["L"]],["","'"],3+vt(3)));return e.join(" x ")}function c2(t,e){let n=0,i=[];for(let s=0;s<4;s++)i[s]=vt(3),i[s]>0?(i[s]="ulrb".charAt(s)+["! ","' "][i[s]-1],n++):i[s]="";return t.substr(0,t.length-e*n)+" "+i.join("")}function hB(t,e){let n="";switch(t){case"15p":return h0(!1,e);case"15pm":return h0(!0,e);case"15pat":return h0(!1,e,!0,!0);case"clkwca":let i=["0+","1+","2+","3+","4+","5+","6+","1-","2-","3-","4-","5-"];n="UR? DR? DL? UL? U? R? D? L? ALL? y2 U? R? D? L? ALL?????";for(let r=0;r<14;r++)n=n.replace("?",ni(i));return n.replace("?",ni([""," UR"])).replace("?",ni([""," DR"])).replace("?",ni([""," DL"])).replace("?",ni([""," UL"]));case"clk":return"UU"+Pn("u")+"dU"+Pn("u")+"dd"+Pn("u")+"Ud"+Pn("u")+"dU"+Pn("u")+"Ud"+Pn("u")+"UU"+Pn("u")+"UU"+Pn("u")+"UU"+Pn("u")+"dd"+Bs()+od()+"\\ndd"+Pn("d")+"dU"+Pn("d")+"UU"+Pn("d")+"Ud"+Pn("d")+"UU"+Bs()+"UU"+Bs()+"Ud"+Bs()+"dU"+Bs()+"UU"+Bs()+"dd"+Pn("d")+od();case"clkc":n="";for(let r=0;r<4;r++)n+="("+(vt(12)-5)+", "+(vt(12)-5)+") / ";for(let r=0;r<6;r++)n+="("+(vt(12)-5)+") / ";for(let r=0;r<4;r++)n+=ni(["d","U"]);return n;case"clke":return"UU"+Pn("u")+"dU"+Pn("u")+"dU"+Pn("u")+"UU"+Pn("u")+"UU"+Pn("u")+"UU"+Pn("u")+"Ud"+Pn("u")+"Ud"+Pn("u")+"dd"+Pn("u")+"dd"+Bs()+od()+"\\nUU"+Bs()+"UU"+Bs()+"dU"+Pn("d")+"dU"+Bs()+"dd"+Pn("d")+"Ud"+Bs()+"Ud"+Pn("d")+"UU"+Bs()+"UU"+Pn("d")+"dd"+Pn("d")+od();case"giga":return cB(e);case"mgmo":return rd(["F","B","U","D","L","DBR","DL","BR","DR","BL","R","DBL"],[1364,2728,1681,2402,2629,1418,2329,1574,1129,2198,421,602],e);case"mgmp":return a2(10,Math.ceil(e/10));case"mgmc":return lB(10,Math.ceil(e/10));case"heli":return rd(["UF","UR","UB","UL","FR","BR","BL","FL","DF","DR","DB","DL"],[154,53,106,197,771,1542,3084,2313,2704,1328,2656,1472],e);case"redi":return rd(["L","R","F","B","l","r","f","b"],[28,44,67,131,193,194,52,56],e,["","'"]);case"redim":return fB(e);case"pyrm":return n=Ao([["U"],["L"],["R"],["B"]],["!","'"],e),c2(n,3).replace(/!/g,"");case"prcp":return a2(10,Math.ceil(e/10));case"mpyr":return n=rd(["U!","L!","R!","B!","Uw","Lw","Rw","Bw"],[224,208,176,112,238,221,187,119],e,["!","'"]),c2(n,4).replace(/!/g,"");case"r3":for(let r=0;r<e;r++)n+=(r==0?"":"\\n")+(r+1)+") ${333}";return M1(n);case"r3ni":for(let r=0;r<e;r++)n+=(r==0?"":"\\n")+(r+1)+") ${333ni}";return M1(n);case"sq1h":return d0(1,e);case"sq1t":return d0(0,e);case"sq2":let s=0;for(;s<e;){let r=vt(12)-5,o=vt(12)-5;(r!=0||o!=0)&&(s++,n+="("+r+","+o+") / ")}return n;case"ssq1t":return uB(e);case"bsq":return d0(2,e);case"-1":for(let r=0;r<e;r++)n+=String.fromCharCode(32+vt(224));return n+="Error: subscript out of range",n;case"333noob":return n=Ao([["turn the top face","turn the bottom face"],["turn the right face","turn the left face"],["turn the front face","turn the back face"]]," clockwise by 90 degrees,| counterclockwise by 90 degrees,| by 180 degrees,".split("|"),e).replace(/t/,"T"),n.substr(0,n.length-2)+".";case"lol":return n=Ao([["L"],["O"]],0,e),n.replace(/ /g,"")}}_i(["15p","15pm","15pat","clkwca","clk","clkc","clke","giga","mgmo","mgmp","mgmc","heli","redi","redim","pyrm","prcp","mpyr","r3","r3ni","sq1h","sq1t","sq2","ssq1t","bsq","-1","333noob","lol"],hB);var si=(t=>(t[t.NORMAL=0]="NORMAL",t[t.OLL=1]="OLL",t[t.PLL=2]="PLL",t[t.CMLL=3]="CMLL",t[t.F2L=4]="F2L",t[t.COLL=5]="COLL",t[t.WV=6]="WV",t[t.ELL=7]="ELL",t[t.VLS=8]="VLS",t[t.ZBLL=9]="ZBLL",t[t.OLLCP=10]="OLLCP",t[t.GRAY=11]="GRAY",t[t.CENTERS=12]="CENTERS",t[t.CROSS=13]="CROSS",t[t.FL=14]="FL",t[t.YCROSS=15]="YCROSS",t))(si||{});const dB={green:"rgb(0, 157, 84)",red:"rgb(220,66,47)",blue:"rgb(61, 129, 246)",orange:"rgb(232, 112, 0)",yellow:"rgb(255,235,59)",white:"rgb(230, 230, 230)",black:"rgb(0, 0, 0)",gray:"rgb(80, 80, 80)",lightGray:"rgb(232, 232, 232)",violet:"rgb(138, 27, 255)",pink:"rgb(237, 150, 161)",lgreen:"rgb(74, 217, 49)",lyellow:"rgb(220, 211, 165)",lblue:"rgb(83, 177, 243)",pgreen:"rgb(16, 162, 4)",pred:"rgb(213, 0, 0)",pblue:"rgb(43, 43, 255)",porange:"rgb(255, 108, 11)",pyellow:"rgb(255, 242, 0)",pwhite:"rgb(255, 255, 255)",pblack:"rgb(0, 0, 0)",pgray:"rgb(200, 200, 200)",pviolet:"rgb(185, 104, 251)",ppink:"rgb(249, 187, 204)",plgreen:"rgb(74, 217, 49)",plyellow:"rgb(255, 255, 183)",plblue:"rgb(83, 177, 243)"};function ei(t){return dB[t]||"rgb(150, 150, 150)"}function pB(t){let e=t.split("(")[1].split(")")[0].split(",").map(Number);return e[0]<<16|e[1]<<8|e[2]}const Kn={y:ei("yellow"),r:ei("red"),o:ei("orange"),b:ei("blue"),g:ei("green"),w:ei("white"),x:ei("gray"),d:ei("black"),v:ei("violet"),yellow:ei("yellow"),red:ei("red"),orange:ei("orange"),blue:ei("blue"),green:ei("green"),white:ei("white"),gray:ei("gray"),lightGray:ei("lightGray"),black:ei("black"),violet:ei("violet"),pink:ei("pink"),lblue:ei("lblue"),lyellow:ei("lyellow"),lgreen:ei("lgreen")},pb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NgAAIAAAUAAR4f7BQAAAAASUVORK5CYII=",YT=["222so","222o","2223","222eg","222eg0","222eg1","222eg2","222nb"],qT=["333","333ni","333fm","333oh","333o","edges","corners","ll","zbll","cll","ell","lse","lsemu","cmll","f2l","lsll2","2gll","zbls","zzll","oll","pll","eoline","easyc","333ft","2gen","2genl","roux","3gen_F","3gen_L","RrU","half","lsll"],XT=["444wca","444bld","444m","444","444yj","4edge","RrUu"],ZT=["555wca","555bld","555","5edge"],JT=["666wca","666si","666p","666s","6edge"],KT=["777wca","777si","777p","777s","7edge"],mB=["pyrso","pyro","pyrm","pyrl4e","pyr4c","pyrnb"],gB=["skbso","skbo","skb","skbnb"],_B=["sqrs","sqrcsp","sq1h","sq1t"],vB=["clkwca","clk","clkwca","clko","clkc","clke"],bB=["mgmp","mgmc","mgmo"],u2=[{type:"rubik",order:[2]},{type:"rubik",order:[3]},{type:"rubik",order:[4]},{type:"rubik",order:[5]},{type:"rubik",order:[6]},{type:"rubik",order:[7]},{type:"pyraminx",order:[3]},{type:"skewb"},{type:"square1"},{type:"clock"},{type:"megaminx"}],p0=[YT,qT,XT,ZT,JT,KT,mB,gB,_B,vB,bB];for(let t=0,e=p0.length;t<e;t+=1){u2[t].view="2d";for(let n=0,i=p0[t].length;n<i;n+=1)Kc.set(p0[t][n],u2[t])}const la=[["WCA",[["3x3x3","333",0,30,[3]],["2x2x2","222so",0,30,[3]],["4x4x4","444wca",-40,40,[4]],["5x5x5","555wca",-60,48,[4]],["6x6x6","666wca",-80,54,[6]],["7x7x7","777wca",-100,60,[6]],["3x3x3 BLD","333ni",0,30,[3]],["3x3 FM","333fm",0,30,[3]],["3x3 OH","333oh",0,30,[3]],["Clock","clkwca",0,30,[6]],["Megaminx","mgmp",-70,55,[5]],["Pyraminx","pyrso",-10,36,[3]],["Skewb","skbso",0,33,[3]],["Sq-1","sqrs",0,50,[8,2]],["4x4 BLD","444bld",-40,40,[4]],["5x5 BLD","555bld",-60,48,[4]]]],["3x3x3",[["WCA","333",0],["Random Move","333o",25],["Edges only","edges",0],["Corners only","corners",0],["Last Layer (LL)","ll",0],["ZBLL","zbll",0],["LL Corners","cll",0],["LL Edges","ell",0],["Last six edges","lse",0],["Last six edges <M,U>","lsemu",0],["Roux L10P","cmll",0],["F2L","f2l",0],["LL and LE","lsll2",0],["2GLL","2gll",0],["ZBLS","zbls",0],["ZZLL","zzll",0],["OLL","oll",0],["PLL","pll",0],["EOLine","eoline",0],["Easy Cross","easyc",3],["3x3 FT","333ft",0]]],["3x3x3 subsets",[["2-generator R,U","2gen",25],["2-generator L,U","2genl",25],["Roux-generator M,U","roux",25],["3-generator F,R,U","3gen_F",25],["3-generator R,U,L","3gen_L",25],["3-generator R,r,U","RrU",25],["half turns only","half",25],["last slot + last layer (old)","lsll",15]]],["2x2x2",[["WCA","222so",0],["Optimal","222o",0],["3-gen","2223",25],["EG","222eg",0],["EG0","222eg0",0],["EG1","222eg1",0],["EG2","222eg2",0],["No Bar","222nb",0]]],["4x4x4",[["WCA","444wca",-40],["Random State","444m",40],["SiGN","444",40],["YJ","444yj",40],["Edges","4edge",8],["R,r,U,u","RrUu",40]]],["5x5x5",[["WCA","555wca",60],["SiGN","555",60],["Edges","5edge",8]]],["6x6x6",[["WCA","666wca",80],["SiGN","666si",80],["Prefix","666p",80],["Suffix","666s",80],["Edges","6edge",8]]],["7x7x7",[["WCA","777wca",100],["SiGN","777si",100],["Prefix","777p",100],["Suffix","777s",100],["Edges","7edge",8]]],["Clock",[["WCA","clkwca",0],["JAAP","clk",0],["Optimal","clko",0],["Conciso","clkc",0],["Efficient Pin Order","clke",0]]],["Megaminx",[["WCA","mgmp",70],["Carrot","mgmc",70],["Old Style","mgmo",70]]],["Pyraminx",[["WCA","pyrso",10],["Optimal","pyro",0],["Random Move","pyrm",25],["L4E","pyrl4e",0],["4 tips","pyr4c",0],["No bar","pyrnb",0]]],["Skewb",[["WCA","skbso",0],["Optimal","skbo",0],["Random Move","skb",25],["No bar","skbnb",0]]],["Square-1",[["WCA","sqrs",0],["CSP","sqrcsp",0],["Face Turn Metric","sq1h",40],["Twist Metric","sq1t",20]]]];function yB(t){return[YT,qT,XT,ZT,JT,KT].some(e=>e.some(n=>n===t))}const f2=new Map(la.reduce((t,e)=>[...t,...e[1].map(n=>[n[1],n[0]==="WCA"?e[0]:n[0]])],[]));function h2(t,e,n){const i=t.slice();return i[11]=e[n],i}function d2(t){let e,n,i;var s=t[11].icon;function r(o){return{}}return s&&(e=jr(s,r())),{c(){e&&ce(e.$$.fragment),n=ms()},m(o,a){e&&ae(e,o,a),I(o,n,a),i=!0},p(o,a){if(s!==(s=o[11].icon)){if(e){at();const l=e;H(l.$$.fragment,1,0,()=>{le(l,1)}),lt()}s?(e=jr(s,r()),ce(e.$$.fragment),P(e.$$.fragment,1),ae(e,n.parentNode,n)):e=null}},i(o){i||(e&&P(e.$$.fragment,o),i=!0)},o(o){e&&H(e.$$.fragment,o),i=!1},d(o){o&&O(n),e&&le(e,o)}}}function wB(t){let e,n=t[11].name+"",i,s,r,o=t[11].icon&&d2(t);return{c(){o&&o.c(),e=z(),i=ye(n),s=z()},m(a,l){o&&o.m(a,l),I(a,e,l),I(a,i,l),I(a,s,l),r=!0},p(a,l){a[11].icon?o?(o.p(a,l),l&2&&P(o,1)):(o=d2(a),o.c(),P(o,1),o.m(e.parentNode,e)):o&&(at(),H(o,1,1,()=>{o=null}),lt()),(!r||l&2)&&n!==(n=a[11].name+"")&&nt(i,n)},i(a){r||(P(o),r=!0)},o(a){H(o),r=!1},d(a){o&&o.d(a),a&&O(e),a&&O(i),a&&O(s)}}}function p2(t){let e,n;function i(){return t[9](t[11])}return e=new At({props:{class:`rounded-none w-full\r
        `+(t[11].index===t[2]?"bg-blue-400 text-black hover:bg-blue-500 hover:bg-opacity-100":""),$$slots:{default:[wB]},$$scope:{ctx:t}}}),e.$on("click",i),{c(){ce(e.$$.fragment)},m(s,r){ae(e,s,r),n=!0},p(s,r){t=s;const o={};r&6&&(o.class=`rounded-none w-full\r
        `+(t[11].index===t[2]?"bg-blue-400 text-black hover:bg-blue-500 hover:bg-opacity-100":"")),r&1026&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){le(e,s)}}}function xB(t){let e,n,i,s,r,o;const a=t[8].default,l=Ca(a,t,t[10],null);let c=t[1],u=[];for(let h=0;h<c.length;h+=1)u[h]=p2(h2(t,c,h));const f=h=>H(u[h],1,1,()=>{u[h]=null});return{c(){e=D("main"),n=D("section"),l&&l.c(),i=z(),s=D("footer");for(let h=0;h<u.length;h+=1)u[h].c();M(n,"class","flex relative"),$i(n,"--len",t[1].length),M(s,"class","flex mt-auto border-t-2 border-t-gray-700"),M(e,"class",r=is("w-full "+(t[0]||""))+" svelte-ue8wrd")},m(h,d){I(h,e,d),E(e,n),l&&l.m(n,null),E(e,i),E(e,s);for(let p=0;p<u.length;p+=1)u[p].m(s,null);o=!0},p(h,[d]){if(l&&l.p&&(!o||d&1024)&&Pa(l,a,h,h[10],o?La(a,h[10],d,null):Ra(h[10]),null),(!o||d&2)&&$i(n,"--len",h[1].length),d&22){c=h[1];let p;for(p=0;p<c.length;p+=1){const _=h2(h,c,p);u[p]?(u[p].p(_,d),P(u[p],1)):(u[p]=p2(_),u[p].c(),P(u[p],1),u[p].m(s,null))}for(at(),p=c.length;p<u.length;p+=1)f(p);lt()}(!o||d&1&&r!==(r=is("w-full "+(h[0]||""))+" svelte-ue8wrd"))&&M(e,"class",r)},i(h){if(!o){P(l,h);for(let d=0;d<c.length;d+=1)P(u[d]);o=!0}},o(h){H(l,h),u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)H(u[d]);o=!1},d(h){h&&O(e),l&&l.d(h),en(u,h)}}}const $T={};function MB(t,e,n){let i,{$$slots:s={},$$scope:r}=e;const o=bn(0);Lt(t,o,p=>n(2,i=p));let a=[],{class:l=""}=e,{onChange:c=p=>{}}=e;l1($T,{registerTab(p){a.push(p),a.forEach((_,m)=>_.index=m),n(1,a)},unregisterTab(p){let _=a.indexOf(p);a.splice(_,1),gt(o,i=i===p.index?0:i,i),a.forEach((m,v)=>m.index=v),n(1,a)},selectedTab:o});function u(p){gt(o,i=p.index,i),c(p.index)}function f(){let p=Math.max(0,i-1);u(a[p])}function h(){let p=Math.min(a.length-1,i+1);u(a[p])}const d=p=>u(p);return t.$$set=p=>{"class"in p&&n(0,l=p.class),"onChange"in p&&n(5,c=p.onChange),"$$scope"in p&&n(10,r=p.$$scope)},[l,a,i,o,u,c,f,h,s,d,r]}class QT extends dt{constructor(e){super(),ht(this,e,MB,xB,ft,{class:0,onChange:5,prevTab:6,nextTab:7})}get prevTab(){return this.$$.ctx[6]}get nextTab(){return this.$$.ctx[7]}}function SB(t){let e,n;const i=t[6].default,s=Ca(i,t,t[5],null);return{c(){e=D("section"),s&&s.c(),M(e,"class","absolute w-full h-full inset-0 flex svelte-i8ipqm"),$i(e,"--index",t[0].index),$i(e,"--selected-tab",t[1])},m(r,o){I(r,e,o),s&&s.m(e,null),n=!0},p(r,[o]){s&&s.p&&(!n||o&32)&&Pa(s,i,r,r[5],n?La(i,r[5],o,null):Ra(r[5]),null),(!n||o&1)&&$i(e,"--index",r[0].index),(!n||o&2)&&$i(e,"--selected-tab",r[1])},i(r){n||(P(s,r),n=!0)},o(r){H(s,r),n=!1},d(r){r&&O(e),s&&s.d(r)}}}function EB(t,e,n){let i,{$$slots:s={},$$scope:r}=e,{name:o}=e,{icon:a=null}=e;const l=Math.random().toString(),{registerTab:c,unregisterTab:u,selectedTab:f}=xa($T);Lt(t,f,d=>n(1,i=d));let h={name:"",id:"",index:0,icon:null};return gs(()=>{n(0,h={name:o,id:l,index:0,icon:a}),c(h)}),er(()=>{u(h)}),t.$$set=d=>{"name"in d&&n(3,o=d.name),"icon"in d&&n(4,a=d.icon),"$$scope"in d&&n(5,r=d.$$scope)},[h,i,f,o,a,r,s]}class il extends dt{constructor(e){super(),ht(this,e,EB,SB,ft,{name:3,icon:4})}}var $t=(t=>(t[t.CLEAN=0]="CLEAN",t[t.STOPPED=1]="STOPPED",t[t.PREVENTION=2]="PREVENTION",t[t.INSPECTION=3]="INSPECTION",t[t.RUNNING=4]="RUNNING",t))($t||{}),kr=(t=>(t[t.SEQUENTIAL=0]="SEQUENTIAL",t[t.GROUP=1]="GROUP",t))(kr||{}),ct=(t=>(t[t.NONE=0]="NONE",t[t.P2=1]="P2",t[t.DNF=2]="DNF",t[t.DNS=3]="DNS",t))(ct||{});const TB=["Keyboard","Manual","StackMat"],AB={CONTESTANT:1<<0,JUDGE:1<<1,SCRAMBLER:1<<2,ORGANIZER:1<<3,DELEGATE:1<<4,SPONSOR:1<<5,GUEST:1<<6},m2=["Competidor","Juez","Scrambler","Organizador","Delegado","Patrocinador","Invitado"];function kB(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M19,15H23V3H19M15,3H6C5.17,3 4.46,3.5 4.16,4.22L1.14,11.27C1.05,11.5 1,11.74 1,12V14A2,2 0 0,0 3,16H9.31L8.36,20.57C8.34,20.67 8.33,20.77 8.33,20.88C8.33,21.3 8.5,21.67 8.77,21.94L9.83,23L16.41,16.41C16.78,16.05 17,15.55 17,15V5C17,3.89 16.1,3 15,3Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function CB(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class LB extends dt{constructor(e){super(),ht(this,e,CB,kB,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function PB(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M12.36,6L12.76,8H18V14H14.64L14.24,12H7V6H12.36M14,4H5V21H7V14H12.6L13,16H20V6H14.4"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function RB(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class DB extends dt{constructor(e){super(),ht(this,e,RB,PB,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function OB(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function IB(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class NB extends dt{constructor(e){super(),ht(this,e,IB,OB,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function BB(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function FB(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class zB extends dt{constructor(e){super(),ht(this,e,FB,BB,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function UB(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M19,4H18V2H16V4H8V2H6V4H5A2,2 0 0,0 3,6V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V6A2,2 0 0,0 19,4M19,20H5V10H19V20M5,8V6H19V8H5M7,12H17V14H7V12M7,16H14V18H7V16Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function HB(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class VB extends dt{constructor(e){super(),ht(this,e,HB,UB,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function GB(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function WB(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class jB extends dt{constructor(e){super(),ht(this,e,WB,GB,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function YB(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function qB(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class eA extends dt{constructor(e){super(),ht(this,e,qB,YB,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function XB(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M12,6A6,6 0 0,1 18,12C18,14.22 16.79,16.16 15,17.2V19A1,1 0 0,1 14,20H10A1,1 0 0,1 9,19V17.2C7.21,16.16 6,14.22 6,12A6,6 0 0,1 12,6M14,21V22A1,1 0 0,1 13,23H11A1,1 0 0,1 10,22V21H14M20,11H23V13H20V11M1,11H4V13H1V11M13,1V4H11V1H13M4.92,3.5L7.05,5.64L5.63,7.05L3.5,4.93L4.92,3.5M16.95,5.63L19.07,3.5L20.5,4.93L18.37,7.05L16.95,5.63Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function ZB(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class JB extends dt{constructor(e){super(),ht(this,e,ZB,XB,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function KB(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M21 10V9L15 3H5C3.89 3 3 3.89 3 5V19C3 20.11 3.9 21 5 21H11V19.13L19.39 10.74C19.83 10.3 20.39 10.06 21 10M14 4.5L19.5 10H14V4.5M22.85 14.19L21.87 15.17L19.83 13.13L20.81 12.15C21 11.95 21.33 11.95 21.53 12.15L22.85 13.47C23.05 13.67 23.05 14 22.85 14.19M19.13 13.83L21.17 15.87L15.04 22H13V19.96L19.13 13.83Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function $B(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class QB extends dt{constructor(e){super(),ht(this,e,$B,KB,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function e8(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function t8(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class g2 extends dt{constructor(e){super(),ht(this,e,t8,e8,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function n8(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M2.28,3L1,4.27L2.47,5.74C2.04,6 1.61,6.29 1.2,6.6L3,9C3.53,8.6 4.08,8.25 4.66,7.93L6.89,10.16C6.15,10.5 5.44,10.91 4.8,11.4L6.6,13.8C7.38,13.22 8.26,12.77 9.2,12.47L11.75,15C10.5,15.07 9.34,15.5 8.4,16.2L12,21L14.46,17.73L17.74,21L19,19.72M12,3C9.85,3 7.8,3.38 5.9,4.07L8.29,6.47C9.5,6.16 10.72,6 12,6C15.38,6 18.5,7.11 21,9L22.8,6.6C19.79,4.34 16.06,3 12,3M12,9C11.62,9 11.25,9 10.88,9.05L14.07,12.25C15.29,12.53 16.43,13.07 17.4,13.8L19.2,11.4C17.2,9.89 14.7,9 12,9Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function i8(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class _2 extends dt{constructor(e){super(),ht(this,e,i8,n8,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function s8(t){let e,n,i,s,r,o,a,l,c;const u=t[17].default,f=Ca(u,t,t[16],null);return{c(){e=D("div"),f&&f.c(),n=z(),i=D("div"),s=ye(t[0]),M(i,"class","tooltip svelte-1w77aa0"),bt(i,"visible",t[4]),M(e,"style",r="--duration: "+t[1]+"ms;    --delay: "+t[2]+"ms;    --x: "+t[7]+";    --y: "+t[8]+";    --tx: "+t[9]+";    --ty: "+t[10]+";    --tr: "+t[11]+";"),M(e,"class",o=is("wrapper "+t[3])+" svelte-1w77aa0")},m(h,d){I(h,e,d),f&&f.m(e,null),E(e,n),E(e,i),E(i,s),t[19](i),t[20](e),a=!0,l||(c=[tt(window,"resize",t[14]),tt(e,"mouseenter",t[12]),tt(e,"mouseleave",t[13]),tt(e,"click",t[18])],l=!0)},p(h,[d]){f&&f.p&&(!a||d&65536)&&Pa(f,u,h,h[16],a?La(u,h[16],d,null):Ra(h[16]),null),(!a||d&1)&&nt(s,h[0]),(!a||d&16)&&bt(i,"visible",h[4]),(!a||d&3974&&r!==(r="--duration: "+h[1]+"ms;    --delay: "+h[2]+"ms;    --x: "+h[7]+";    --y: "+h[8]+";    --tx: "+h[9]+";    --ty: "+h[10]+";    --tr: "+h[11]+";"))&&M(e,"style",r),(!a||d&8&&o!==(o=is("wrapper "+h[3])+" svelte-1w77aa0"))&&M(e,"class",o)},i(h){a||(P(f,h),a=!0)},o(h){H(f,h),a=!1},d(h){h&&O(e),f&&f.d(h),t[19](null),t[20](null),l=!1,Jn(c)}}}function r8(t){return t.computedStyleMap().get("transform").constructor.name==="CSSTransformValue"}function o8(t,e,n){let{$$slots:i={},$$scope:s}=e,{text:r="tooltip"}=e,{position:o="right"}=e,{duration:a=200}=e,{delay:l=200}=e,{class:c=""}=e,u=!1,f,h,d,p,_,m,v;function g(){y(),n(4,u=!0)}function b(){n(4,u=!1)}function y(){let T=f.getBoundingClientRect(),A=h.getBoundingClientRect();n(7,d=T.x),n(8,p=T.y);let C=f;do if(C=C.parentElement,r8(C)){let k=C.getBoundingClientRect();n(7,d-=k.x),n(8,p-=k.y);break}while(C.parentElement);o==="right"||o==="left"?(n(7,d=o==="left"?`calc(${d-A.width}px - 0.5rem)`:`calc(${d+T.width}px + 0.5rem)`),n(8,p=`${p+(T.height-A.height)/2}px`),n(9,_=o==="right"?"-.29rem":"calc(100% - .25rem)"),n(10,m="calc(50% - .25rem)"),n(11,v=o==="right"?"-45deg":"135deg")):(n(7,d=`${d+(T.width-A.width)/2}px`),n(8,p=o==="top"?`calc(${p-A.height}px - 0.5rem)`:`calc(${p+T.height}px + 0.5rem)`),n(9,_="calc(50% - .25rem)"),n(10,m=o==="top"?"calc(100% - .21rem)":"-.28rem"),n(11,v=o==="top"?"-135deg":"45deg"))}gs(()=>{y()});function w(T){hE.call(this,t,T)}function x(T){wt[T?"unshift":"push"](()=>{h=T,n(6,h)})}function S(T){wt[T?"unshift":"push"](()=>{f=T,n(5,f)})}return t.$$set=T=>{"text"in T&&n(0,r=T.text),"position"in T&&n(15,o=T.position),"duration"in T&&n(1,a=T.duration),"delay"in T&&n(2,l=T.delay),"class"in T&&n(3,c=T.class),"$$scope"in T&&n(16,s=T.$$scope)},[r,a,l,c,u,f,h,d,p,_,m,v,g,b,y,o,s,i,w,x,S]}class Vi extends dt{constructor(e){super(),ht(this,e,o8,s8,ft,{text:0,position:15,duration:1,delay:2,class:3})}}function v2(t){let e,n,i,s,r;const o=t[7].default,a=Ca(o,t,t[6],null);return{c(){e=D("div"),n=D("div"),a&&a.c(),M(n,"class","bg-gray-800 rounded-md show p-4 pt-3 svelte-hxp9wt"),M(e,"id","wrapper"),M(e,"class","fixed bg-black bg-opacity-80 top-0 left-0 w-full h-full flex items-center justify-center transition-all z-50 svelte-hxp9wt")},m(l,c){I(l,e,c),E(e,n),a&&a.m(n,null),i=!0,s||(r=tt(e,"mousedown",pv(uE(t[8]))),s=!0)},p(l,c){a&&a.p&&(!i||c&64)&&Pa(a,o,l,l[6],i?La(o,l[6],c,null):Ra(l[6]),null)},i(l){i||(P(a,l),i=!0)},o(l){H(a,l),i=!1},d(l){l&&O(e),a&&a.d(l),s=!1,r()}}}function a8(t){let e,n,i,s,r=t[0]&&v2(t);return{c(){r&&r.c(),e=ms()},m(o,a){r&&r.m(o,a),I(o,e,a),n=!0,i||(s=[tt(window,"keyup",t[3]),tt(window,"keydown",t[4])],i=!0)},p(o,[a]){o[0]?r?(r.p(o,a),a&1&&P(r,1)):(r=v2(o),r.c(),P(r,1),r.m(e.parentNode,e)):r&&(at(),H(r,1,1,()=>{r=null}),lt())},i(o){n||(P(r),n=!0)},o(o){H(r),n=!1},d(o){r&&r.d(o),o&&O(e),i=!1,Jn(s)}}}function l8(t,e,n){let{$$slots:i={},$$scope:s}=e,{show:r=!1}=e,{cancel:o=!0}=e,{onClose:a=()=>{}}=e;function l(h){!r||h.key==="Escape"&&o&&(h.stopPropagation(),u(null))}function c(h){!r||h.stopPropagation()}function u(h){return a.call(null,h||null),n(0,r=!1),r}const f=()=>o&&u(null);return t.$$set=h=>{"show"in h&&n(0,r=h.show),"cancel"in h&&n(1,o=h.cancel),"onClose"in h&&n(5,a=h.onClose),"$$scope"in h&&n(6,s=h.$$scope)},[r,o,u,l,c,a,s,i,f]}class Ma extends dt{constructor(e){super(),ht(this,e,l8,a8,ft,{show:0,cancel:1,onClose:5,close:2})}get close(){return this.$$.ctx[2]}}function c8(t){let e,n,i,s,r,o,a,l;return{c(){e=D("div"),n=D("div"),i=z(),s=D("textarea"),M(n,"class","lesp bg-transparent text-transparent outline-none p-2 border-4 border-transparent svelte-1ux9168"),M(n,"contenteditable","false"),t[4]===void 0&&Jc(()=>t[7].call(n)),M(s,"placeholder",t[2]),M(s,"class",r=(t[3]||"bg-gray-600 text-gray-300")+" text-gray-400 flex m-auto p-2 rounded-md border border-solid border-gray-400 focus:text-gray-300 outline-none transition-all duration-200 absolute inset-0 w-full h-full resize-none svelte-1ux9168"),M(e,"class",o="relative "+(t[1]||"")+" svelte-1ux9168")},m(c,u){I(c,e,u),E(e,n),t[4]!==void 0&&(n.innerHTML=t[4]),E(e,i),E(e,s),wa(s,t[0]),a||(l=[tt(n,"input",t[7]),tt(s,"keyup",t[5]),tt(s,"keydown",t[6]),tt(s,"input",t[8])],a=!0)},p(c,[u]){u&16&&c[4]!==n.innerHTML&&(n.innerHTML=c[4]),u&4&&M(s,"placeholder",c[2]),u&8&&r!==(r=(c[3]||"bg-gray-600 text-gray-300")+" text-gray-400 flex m-auto p-2 rounded-md border border-solid border-gray-400 focus:text-gray-300 outline-none transition-all duration-200 absolute inset-0 w-full h-full resize-none svelte-1ux9168")&&M(s,"class",r),u&1&&wa(s,c[0]),u&2&&o!==(o="relative "+(c[1]||"")+" svelte-1ux9168")&&M(e,"class",o)},i:Ve,o:Ve,d(c){c&&O(e),a=!1,Jn(l)}}}function u8(t,e,n){let{value:i=""}=e,{cClass:s=""}=e,{placeholder:r=""}=e,{class:o=""}=e,a="<br>",l=Da();function c(d){l("keyup",d)}function u(d){l("keydown",d)}function f(){a=this.innerHTML,n(4,a),n(0,i)}function h(){i=this.value,n(0,i)}return t.$$set=d=>{"value"in d&&n(0,i=d.value),"cClass"in d&&n(1,s=d.cClass),"placeholder"in d&&n(2,r=d.placeholder),"class"in d&&n(3,o=d.class)},t.$$.update=()=>{t.$$.dirty&1&&n(4,a=i.replace(/\n/g,"<br>")+"<br>")},[i,s,r,o,a,c,u,f,h]}class Nh extends dt{constructor(e){super(),ht(this,e,u8,c8,ft,{value:0,cClass:1,placeholder:2,class:3})}}function b2(t){let e,n,i,s;return{c(){e=D("span"),n=ye(t[2]),M(e,"class","label ml-1 cursor-pointer")},m(r,o){I(r,e,o),E(e,n),i||(s=tt(e,"click",t[5]),i=!0)},p(r,o){o&4&&nt(n,r[2])},d(r){r&&O(e),i=!1,s()}}}function f8(t){let e,n,i,s,r,o,a,l=t[2]&&b2(t);return{c(){e=D("div"),n=D("div"),i=D("div"),r=z(),l&&l.c(),M(i,"class","mark svelte-1wgyrek"),M(n,"class",s="box "+t[4]+" svelte-1wgyrek"),bt(n,"checked",t[0]),bt(n,"undef",t[1]),M(e,"class","wrapper flex items-center svelte-1wgyrek"),bt(e,"disabled",t[3])},m(c,u){I(c,e,u),E(e,n),E(n,i),E(e,r),l&&l.m(e,null),o||(a=tt(n,"click",t[5]),o=!0)},p(c,[u]){u&16&&s!==(s="box "+c[4]+" svelte-1wgyrek")&&M(n,"class",s),u&17&&bt(n,"checked",c[0]),u&18&&bt(n,"undef",c[1]),c[2]?l?l.p(c,u):(l=b2(c),l.c(),l.m(e,null)):l&&(l.d(1),l=null),u&8&&bt(e,"disabled",c[3])},i:Ve,o:Ve,d(c){c&&O(e),l&&l.d(),o=!1,a()}}}function h8(t,e,n){let{checked:i=!1}=e,{undef:s=!1}=e,{label:r=""}=e,{disabled:o=!1}=e,{class:a=""}=e;const l=Da();function c(){n(0,i=!i),i&&l("checked"),!i&&l("unchecked"),l("change",{value:i})}return gs(()=>{l("change",{value:i})}),t.$$set=u=>{"checked"in u&&n(0,i=u.checked),"undef"in u&&n(1,s=u.undef),"label"in u&&n(2,r=u.label),"disabled"in u&&n(3,o=u.disabled),"class"in u&&n(4,a=u.class)},[i,s,r,o,a,c]}class xc extends dt{constructor(e){super(),ht(this,e,h8,f8,ft,{checked:0,undef:1,label:2,disabled:3,class:4})}}function y2(t){let e,n,i,s;return{c(){e=D("input"),M(e,"class",n=is(t[8]||"")+" svelte-h2xifn"),e.disabled=t[4],M(e,"type","text"),M(e,"size",t[3]),M(e,"placeholder","")},m(r,o){I(r,e,o),t[16](e),wa(e,t[1]),i||(s=[tt(e,"input",t[17]),tt(e,"keydown",t[12]),tt(e,"keyup",t[11]),tt(e,"input",t[13]),tt(e,"change",t[14])],i=!0)},p(r,o){o&256&&n!==(n=is(r[8]||"")+" svelte-h2xifn")&&M(e,"class",n),o&16&&(e.disabled=r[4]),o&8&&M(e,"size",r[3]),o&2&&e.value!==r[1]&&wa(e,r[1])},d(r){r&&O(e),t[16](null),i=!1,Jn(s)}}}function w2(t){let e,n,i,s;return{c(){e=D("input"),M(e,"class",n=is(t[8]||"")+" svelte-h2xifn"),M(e,"min",t[5]),M(e,"max",t[6]),e.disabled=t[4],M(e,"step",t[7]),M(e,"type","number"),M(e,"placeholder","")},m(r,o){I(r,e,o),wa(e,t[1]),i||(s=[tt(e,"keydown",t[12]),tt(e,"keyup",t[11]),tt(e,"input",t[13]),tt(e,"change",t[14]),tt(e,"input",t[18])],i=!0)},p(r,o){o&256&&n!==(n=is(r[8]||"")+" svelte-h2xifn")&&M(e,"class",n),o&32&&M(e,"min",r[5]),o&64&&M(e,"max",r[6]),o&16&&(e.disabled=r[4]),o&128&&M(e,"step",r[7]),o&2&&fE(e.value)!==r[1]&&wa(e,r[1])},d(r){r&&O(e),i=!1,Jn(s)}}}function x2(t){let e,n,i,s;return{c(){e=D("input"),M(e,"class",n=is(t[8]||"")+" svelte-h2xifn"),e.disabled=t[4],M(e,"type","date"),M(e,"placeholder","")},m(r,o){I(r,e,o),wa(e,t[1]),i||(s=[tt(e,"keydown",t[12]),tt(e,"keyup",t[11]),tt(e,"input",t[13]),tt(e,"change",t[14]),tt(e,"input",t[19])],i=!0)},p(r,o){o&256&&n!==(n=is(r[8]||"")+" svelte-h2xifn")&&M(e,"class",n),o&16&&(e.disabled=r[4]),o&2&&wa(e,r[1])},d(r){r&&O(e),i=!1,Jn(s)}}}function d8(t){let e,n,i,s,r,o,a,l=t[0]==="text"&&y2(t),c=t[0]==="number"&&w2(t),u=t[0]==="date"&&x2(t);return{c(){e=D("div"),l&&l.c(),n=z(),c&&c.c(),i=z(),u&&u.c(),s=z(),r=D("span"),o=ye(t[2]),M(r,"class","placeholder svelte-h2xifn"),M(e,"class",a="w-full h-10 px-2 py-2 rounded-md relative transition-all duration-200 border border-solid border-gray-400 wrapper focus-within:shadow focus-within:shadow-blue-200 "+(t[9]||"bg-gray-600 text-gray-300")+" svelte-h2xifn")},m(f,h){I(f,e,h),l&&l.m(e,null),E(e,n),c&&c.m(e,null),E(e,i),u&&u.m(e,null),E(e,s),E(e,r),E(r,o)},p(f,[h]){f[0]==="text"?l?l.p(f,h):(l=y2(f),l.c(),l.m(e,n)):l&&(l.d(1),l=null),f[0]==="number"?c?c.p(f,h):(c=w2(f),c.c(),c.m(e,i)):c&&(c.d(1),c=null),f[0]==="date"?u?u.p(f,h):(u=x2(f),u.c(),u.m(e,s)):u&&(u.d(1),u=null),h&4&&nt(o,f[2]),h&512&&a!==(a="w-full h-10 px-2 py-2 rounded-md relative transition-all duration-200 border border-solid border-gray-400 wrapper focus-within:shadow focus-within:shadow-blue-200 "+(f[9]||"bg-gray-600 text-gray-300")+" svelte-h2xifn")&&M(e,"class",a)},i:Ve,o:Ve,d(f){f&&O(e),l&&l.d(),c&&c.d(),u&&u.d()}}}function p8(t,e,n){const i=Da();let{placeholder:s=""}=e,{value:r=""}=e,{type:o="text"}=e,{size:a=void 0}=e,{disabled:l=!1}=e,{focus:c=!1}=e,{min:u=void 0}=e,{max:f=void 0}=e,{step:h=1}=e,{inpClass:d=""}=e,{class:p=""}=e,_;function m(T){i("keyup",T),T.code==="Enter"&&i("UENTER",T),T.code==="Esc"&&i("UESCAPE",T)}function v(T){i("keydown",T),T.code==="Enter"&&i("DENTER",T),T.code==="Esc"&&i("DESCAPE",T)}function g(T){i("input",T)}function b(T){i("change",T)}function y(T){wt[T?"unshift":"push"](()=>{_=T,n(10,_)})}function w(){r=this.value,n(1,r)}function x(){r=fE(this.value),n(1,r)}function S(){r=this.value,n(1,r)}return t.$$set=T=>{"placeholder"in T&&n(2,s=T.placeholder),"value"in T&&n(1,r=T.value),"type"in T&&n(0,o=T.type),"size"in T&&n(3,a=T.size),"disabled"in T&&n(4,l=T.disabled),"focus"in T&&n(15,c=T.focus),"min"in T&&n(5,u=T.min),"max"in T&&n(6,f=T.max),"step"in T&&n(7,h=T.step),"inpClass"in T&&n(8,d=T.inpClass),"class"in T&&n(9,p=T.class)},t.$$.update=()=>{t.$$.dirty&1&&n(0,o=["text","number","date"].indexOf(o)===-1?"text":o),t.$$.dirty&33792&&(c?_&&Qb().then(()=>_.focus()):_&&Qb().then(()=>_.blur()))},[o,r,s,a,l,u,f,h,d,p,_,m,v,g,b,c,y,w,x,S]}class oi extends dt{constructor(e){super(),ht(this,e,p8,d8,ft,{placeholder:2,value:1,type:0,size:3,disabled:4,focus:15,min:5,max:6,step:7,inpClass:8,class:9})}}function m8(t){let e,n,i;return{c(){e=D("div"),e.innerHTML='<div class="mark svelte-gujlnz"></div>',M(e,"class","wrapper svelte-gujlnz"),bt(e,"checked",t[0])},m(s,r){I(s,e,r),n||(i=tt(e,"click",t[1]),n=!0)},p(s,[r]){r&1&&bt(e,"checked",s[0])},i:Ve,o:Ve,d(s){s&&O(e),n=!1,i()}}}function g8(t,e,n){let{checked:i=!1}=e;const s=Da();function r(){n(0,i=!i),i&&s("checked"),!i&&s("unchecked"),s("change",{value:i})}return t.$$set=o=>{"checked"in o&&n(0,i=o.checked)},[i,r]}class _8 extends dt{constructor(e){super(),ht(this,e,g8,m8,ft,{checked:0})}}function v8(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function b8(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class y8 extends dt{constructor(e){super(),ht(this,e,b8,v8,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function M2(t,e,n){const i=t.slice();return i[13]=e[n],i[15]=n,i}function S2(t){let e,n=t[5](t[13])+"",i,s,r;function o(){return t[12](t[13],t[15])}return{c(){e=D("span"),i=ye(n),M(e,"class","option transition-all duration-200 hover:bg-gray-800 p-1 rounded-md svelte-1hdxo0o")},m(a,l){I(a,e,l),E(e,i),s||(r=tt(e,"click",o),s=!0)},p(a,l){t=a,l&40&&n!==(n=t[5](t[13])+"")&&nt(i,n)},d(a){a&&O(e),s=!1,r()}}}function w8(t){let e,n,i=(t[3].some(t[10])?t[5](t[3].find(t[11])):t[2])+"",s,r,o,a,l,c,u,f,h,d;a=new y8({props:{width:"100%",height:"100%"}});let p=t[3],_=[];for(let m=0;m<p.length;m+=1)_[m]=S2(M2(t,p,m));return{c(){e=D("main"),n=D("div"),s=ye(i),r=z(),o=D("div"),ce(a.$$.fragment),l=z(),c=D("div");for(let m=0;m<_.length;m+=1)_[m].c();M(n,"class","content bg-gray-700 p-2 h-10 rounded-md select-none pr-8 whitespace-nowrap text-ellipsis"),M(o,"class","expand w-5 h-5 absolute right-2 top-3 pointer-events-none"),M(c,"class","options bg-gray-700 bg-opacity-100 p-2 w-full rounded-md border border-solid border-gray-400 absolute z-10 grid grid-cols-1 max-h-72 overflow-x-hidden overflow-y-scroll svelte-1hdxo0o"),bt(c,"visible",t[7]),M(e,"class",u=is("select-container max-w-[13rem] relative cursor-pointer "+(t[1]||""))+" svelte-1hdxo0o")},m(m,v){I(m,e,v),E(e,n),E(n,s),E(e,r),E(e,o),ae(a,o,null),E(e,l),E(e,c);for(let g=0;g<_.length;g+=1)_[g].m(c,null);f=!0,h||(d=[tt(window,"click",t[9],!0),tt(n,"click",pv(uE(t[8])))],h=!0)},p(m,[v]){if((!f||v&109)&&i!==(i=(m[3].some(m[10])?m[5](m[3].find(m[11])):m[2])+"")&&nt(s,i),v&249){p=m[3];let g;for(g=0;g<p.length;g+=1){const b=M2(m,p,g);_[g]?_[g].p(b,v):(_[g]=S2(b),_[g].c(),_[g].m(c,null))}for(;g<_.length;g+=1)_[g].d(1);_.length=p.length}(!f||v&128)&&bt(c,"visible",m[7]),(!f||v&2&&u!==(u=is("select-container max-w-[13rem] relative cursor-pointer "+(m[1]||""))+" svelte-1hdxo0o"))&&M(e,"class",u)},i(m){f||(P(a.$$.fragment,m),f=!0)},o(m){H(a.$$.fragment,m),f=!1},d(m){m&&O(e),le(a),en(_,m),h=!1,Jn(d)}}}function x8(t,e,n){let{class:i=""}=e,{placeholder:s="Select"}=e,{value:r=s}=e,{items:o}=e,{onChange:a=(m,v,g)=>{}}=e,{label:l=m=>m||""}=e,{transform:c=(m,v,g)=>m.value}=e,u=!1;function f(m){n(7,u=!0)}const h=()=>n(7,u=!1),d=(m,v,g)=>c(m,v,g)===r,p=(m,v,g)=>c(m,v,g)===r,_=(m,v)=>{n(7,u=!1),n(0,r=c(m,v,o)),a(m,v,o)};return t.$$set=m=>{"class"in m&&n(1,i=m.class),"placeholder"in m&&n(2,s=m.placeholder),"value"in m&&n(0,r=m.value),"items"in m&&n(3,o=m.items),"onChange"in m&&n(4,a=m.onChange),"label"in m&&n(5,l=m.label),"transform"in m&&n(6,c=m.transform)},[r,i,s,o,a,l,c,u,f,h,d,p,_]}class ks extends dt{constructor(e){super(),ht(this,e,x8,w8,ft,{class:1,placeholder:2,value:0,items:3,onChange:4,label:5,transform:6})}}function xt(t,e,n,i){if(t===1/0)return"DNF";if(isNaN(t))return e?"0.00":"0";let s=~~(t/10),r=s%100;s=~~(s/100);let o=s%60;s=~~(s/60);let a=s%60;s=~~(s/60);let l=s%60;s=~~(s/60);let c=[l,a].filter(d=>d!=0);c.push(o);let u=["s","m","h"][c.length-1],f=c.map((d,p)=>p>0?["",'<span class="digit">'][~~i]+("00"+d).substr(-2,2)+["","</span>"][~~i]:["",'<span class="digit">'][~~i]+d+["","</span>"][~~i]).join(":");return(e||n&&u==="s"?f+`.${["",'<span class="digit">'][~~i]+("00"+r).substr(-2,2)+["","</span>"][~~i]}`:f)+(n?u:"")}function E2(t,e,n,i){return t.penalty===ct.DNS?"DNS":t.penalty===ct.DNF?"DNF":xt(t.time,e,n,i)}function yr(t){return t.penalty===ct.DNF||t.penalty===ct.DNS}let ca,Mm,q1,Mc,ua,Sm,T2;function M8(){let t=[],e=new Promise(function(n,i){n(t)});return navigator.mediaDevices.enumerateDevices().then(function(n){for(let i=0;i<n.length;i++){let s=n[i];s.kind==="audioinput"&&t.push([s.deviceId,s.label||"microphone "+(t.length+1)])}return e})}function S8(t,e,n){T2=t,ca=new AudioContext,T2=="m"?(ua=ca.sampleRate/8e3,Sm=R8):(ua=ca.sampleRate/1200,Sm=L8),mb=.001/ua,X1.length=Math.ceil(ua/6),Ki.length=0,Sc.length=0;let i={echoCancellation:!1,noiseSuppression:!1};return e&&(i.deviceId={exact:e}),Mm==null?navigator.mediaDevices.getUserMedia({audio:i}).then(function(s){if(ca.state=="suspended"&&!n)return Promise.reject();T8(s)},console.log):Promise.resolve()}function E8(){if(Mm!=null)try{q1.disconnect(Mc),Mc.disconnect(ca.destination),Mm=void 0}catch{}}let xo=1,mb=1e-4;function T8(t){Mm=t,q1=ca.createMediaStreamSource(t),Mc=ca.createScriptProcessor(1024,1,1),Mc.onaudioprocess=function(e){let n=e.inputBuffer.getChannelData(0);for(let i=0;i<n.length;i++){let s=n[i]*n[i];xo=Math.max(1e-4,xo+(s-xo)*mb);let r=1/Math.sqrt(xo);C8(n[i]*r)}},q1.connect(Mc),Mc.connect(ca.destination)}let X1=[],ql=0,A8=.2,k8=.7,Xl=0,Mo=0;function C8(t){if(X1.unshift(t),(X1.pop()-t)*(ql?1:-1)>k8&&Math.abs(t-(ql?1:-1))-1>A8&&Xl>ua*.6){for(let n=0;n<Math.round(Xl/ua);n++)Sm(ql);ql^=1,Xl=0}else Xl>ua*2&&(Sm(ql),Xl-=ua);Xl++,Ss<10?Mo=Math.max(1e-4,Mo+(Math.pow(t-(ql?1:-1),2)-Mo)*mb):Ss>100&&(Mo=1)}let Ki=[],Sc=[],Ec=0,vf=0,Ss=0,Mp=0;function L8(t){if(Ki.push(t),t!=vf?(vf=t,Ss=1):Ss++,Mp++,Ss>10)Ec=t,Ki.length=0,Sc.length!=0&&(Sc.length=0),Ss>100&&ti.on?(ti.on=!1,ti.noise=Math.min(1,Mo)||0,ti.power=xo,iu(ti)):Mp>700&&(Mp=100,ti.noise=Math.min(1,Mo)||0,ti.power=xo,iu(ti));else if(Ki.length==10)if(Ki[0]==Ec||Ki[9]!=Ec)Ki=Ki.slice(1);else{let e=0;for(let n=8;n>0;n--)e=e<<1|(Ki[n]==Ec?1:0);Sc.push(String.fromCharCode(e)),P8(Sc),Ki.length=0}}function P8(t){if(t.length!=9&&t.length!=10)return;let e=/[ SILRCA]/,n=/[0-9]/,i=t[0];if(!e.exec(i))return;let s=64;for(let o=1;o<t.length-3;o++){if(!n.exec(t[o]))return;s+=~~t[o]}if(s!=t[t.length-3].charCodeAt(0))return;let r=~~t[1]*6e4+~~(t[2]+t[3])*1e3+~~(t[4]+t[5]+(t.length==10?t[6]:"0"));tA(i,r,t.length==9?10:1)}function tA(t,e,n){let i={};i.time_milli=e,i.unit=n,i.on=!0;let s=n==ti.unit?i.time_milli>ti.time_milli:Math.floor(i.time_milli/10)>Math.floor(ti.time_milli/10);i.greenLight=t=="A",i.leftHand=t=="L"||t=="A"||t=="C",i.rightHand=t=="R"||t=="A"||t=="C",i.running=(t!="S"||ti.signalHeader=="S")&&(t==" "||s),i.signalHeader=t,i.unknownRunning=!ti.on,i.noise=Math.min(1,Mo)||0,i.power=xo,ti=i,Mp=0,iu(ti)}function R8(t){if(vf!=Ec&&Ss==1&&(Ki.push(t),Ki.length==24)){let e=0;for(let n=5;n>=0;n--){e*=10;for(let i=0;i<4;i++)e+=Ki[n*4+i]<<i}Ki.length=0,tA("S",e,1)}t!=vf?(vf=t,Ss=1):Ss++,Ss>10&&(Ec=t,Ki.length=0,Sc.length=0,Ss>1e3&&ti.on?(ti.on=!1,ti.noise=Math.min(1,Mo)||0,ti.power=xo,iu(ti)):Ss>4e3&&(Ss=1e3,ti.noise=Math.min(1,Mo)||0,ti.power=xo,iu(ti)))}let ti={time_milli:0,unit:10,on:!1,greenLight:!1,leftHand:!1,rightHand:!1,running:!1,unknownRunning:!0,signalHeader:"I",noise:1,power:1},iu=()=>{};const Zl={init:S8,stop:E8,updateInputDevices:M8,setCallBack:function(t){iu=t}};function A2(t,e,n){const i=t.slice();return i[120]=e[n],i}function k2(t,e,n){const i=t.slice();return i[123]=e[n],i}function C2(t,e,n){const i=t.slice();return i[126]=e[n],i}function L2(t,e,n){const i=t.slice();return i[129]=e[n],i}function P2(t){let e;return{c(){e=D("span"),e.textContent=`${G8}`,M(e,"class","svelte-1g5lvj6")},m(n,i){I(n,e,i)},p:Ve,d(n){n&&O(e)}}}function D8(t){let e,n,i,s,r,o;var a=t[129].icon;function l(c){return{props:{width:"100%",height:"100%"}}}return a&&(n=jr(a,l())),{c(){e=D("div"),n&&ce(n.$$.fragment),i=z(),M(e,"class","my-3 mx-1 w-5 h-5 "+Jf+" svelte-1g5lvj6")},m(c,u){I(c,e,u),n&&ae(n,e,null),I(c,i,u),s=!0,r||(o=tt(e,"click",function(){Pl(t[129].handler)&&t[129].handler.apply(this,arguments)}),r=!0)},p(c,u){if(t=c,a!==(a=t[129].icon)){if(n){at();const f=n;H(f.$$.fragment,1,0,()=>{le(f,1)}),lt()}a?(n=jr(a,l()),ce(n.$$.fragment),P(n.$$.fragment,1),ae(n,e,null)):n=null}},i(c){s||(n&&P(n.$$.fragment,c),s=!0)},o(c){n&&H(n.$$.fragment,c),s=!1},d(c){c&&O(e),n&&le(n),c&&O(i),r=!1,o()}}}function R2(t){let e,n;return e=new Vi({props:{class:"cursor-pointer",position:"left",text:t[129].text,$$slots:{default:[D8]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s[0]&1&&(r.text=i[129].text),s[0]&1|s[4]&256&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function D2(t){let e,n,i,s,r,o,a,l,c,u;s=new Oa({props:{width:"1.2rem",height:"1.2rem"}});function f(d){t[65](d)}let h={cClass:"w-full h-full",class:"bg-gray-600 text-gray-300 p-4"};return t[6]!==void 0&&(h.value=t[6]),o=new Nh({props:h}),wt.push(()=>Nt(o,"value",f)),{c(){e=D("div"),n=D("div"),i=D("span"),ce(s.$$.fragment),r=z(),ce(o.$$.fragment),M(i,"class","ml-auto mr-2 cursor-pointer text-gray-700"),M(n,"class","relative w-full h-6 cursor-move flex items-center"),M(e,"id","notes"),M(e,"class","fixed z-10 w-56 h-56 bg-violet-400 rounded-md svelte-1g5lvj6"),$i(e,"--left",t[4]+"px"),$i(e,"--top",t[5]+"px"),$i(e,"--width",nA+"px"),$i(e,"--height","calc("+iA+"px + 1.5rem)")},m(d,p){I(d,e,p),E(e,n),E(n,i),ae(s,i,null),E(e,r),ae(o,e,null),l=!0,c||(u=[tt(i,"click",t[64]),tt(n,"mousedown",t[53])],c=!0)},p(d,p){const _={};!a&&p[0]&64&&(a=!0,_.value=d[6],It(()=>a=!1)),o.$set(_),(!l||p[0]&16)&&$i(e,"--left",d[4]+"px"),(!l||p[0]&32)&&$i(e,"--top",d[5]+"px")},i(d){l||(P(s.$$.fragment,d),P(o.$$.fragment,d),l=!0)},o(d){H(s.$$.fragment,d),H(o.$$.fragment,d),l=!1},d(d){d&&O(e),le(s),le(o),c=!1,Jn(u)}}}function O8(t){var c,u;let e,n=xt(t[12],t[14],!1)+"",i,s,r,o,a,l=((u=(c=t[22])==null?void 0:c.settings)==null?void 0:u.input)==="StackMat"&&O2(t);return{c(){e=D("span"),i=ye(n),r=z(),l&&l.c(),o=ms(),M(e,"class","timer "+Jf+" svelte-1g5lvj6"),e.hidden=s=t[20]===$t.RUNNING&&!t[22].settings.showElapsedTime,bt(e,"prevention",t[20]===$t.PREVENTION),bt(e,"ready",t[21])},m(f,h){I(f,e,h),E(e,i),I(f,r,h),l&&l.m(f,h),I(f,o,h),a=!0},p(f,h){var d,p;(!a||h[0]&20480)&&n!==(n=xt(f[12],f[14],!1)+"")&&nt(i,n),(!a||h[0]&5242880&&s!==(s=f[20]===$t.RUNNING&&!f[22].settings.showElapsedTime))&&(e.hidden=s),(!a||h[0]&1048576)&&bt(e,"prevention",f[20]===$t.PREVENTION),(!a||h[0]&2097152)&&bt(e,"ready",f[21]),((p=(d=f[22])==null?void 0:d.settings)==null?void 0:p.input)==="StackMat"?l?(l.p(f,h),h[0]&4194304&&P(l,1)):(l=O2(f),l.c(),P(l,1),l.m(o.parentNode,o)):l&&(at(),H(l,1,1,()=>{l=null}),lt())},i(f){a||(P(l),a=!0)},o(f){H(l),a=!1},d(f){f&&O(e),f&&O(r),l&&l.d(f),f&&O(o)}}}function I8(t){let e,n,i,s;function r(a){t[66](a)}let o={class:"w-full h-36 text-center "+(ow(t[13])?"":"border-red-400 border-2")+`\r
            focus-within:shadow-black`,inpClass:"text-center"};return t[13]!==void 0&&(o.value=t[13]),n=new oi({props:o}),wt.push(()=>Nt(n,"value",r)),n.$on("UENTER",t[56]),{c(){e=D("div"),ce(n.$$.fragment),M(e,"id","manual-inp"),M(e,"class","svelte-1g5lvj6")},m(a,l){I(a,e,l),ae(n,e,null),s=!0},p(a,l){const c={};l[0]&8192&&(c.class="w-full h-36 text-center "+(ow(a[13])?"":"border-red-400 border-2")+`\r
            focus-within:shadow-black`),!i&&l[0]&8192&&(i=!0,c.value=a[13],It(()=>i=!1)),n.$set(c)},i(a){s||(P(n.$$.fragment,a),s=!0)},o(a){H(n.$$.fragment,a),s=!1},d(a){a&&O(e),le(n)}}}function O2(t){var c;let e,n,i,s,r,o;var a=(c=t[17])!=null&&c.on?g2:_2;function l(u){return{}}return a&&(s=jr(a,l())),{c(){var u;e=D("span"),n=ye(`Timer status:\r
          \r
          `),i=D("span"),s&&ce(s.$$.fragment),M(i,"class",r=(u=t[17])!=null&&u.on?"text-green-600":"text-red-600"),M(e,"class","text-2xl flex gap-2 items-center")},m(u,f){I(u,e,f),E(e,n),E(e,i),s&&ae(s,i,null),o=!0},p(u,f){var h,d;if(a!==(a=(h=u[17])!=null&&h.on?g2:_2)){if(s){at();const p=s;H(p.$$.fragment,1,0,()=>{le(p,1)}),lt()}a?(s=jr(a,l()),ce(s.$$.fragment),P(s.$$.fragment,1),ae(s,i,null)):s=null}(!o||f[0]&131072&&r!==(r=(d=u[17])!=null&&d.on?"text-green-600":"text-red-600"))&&M(i,"class",r)},i(u){o||(s&&P(s.$$.fragment,u),o=!0)},o(u){s&&H(s.$$.fragment,u),o=!1},d(u){u&&O(e),s&&le(s)}}}function I2(t){let e,n,i=t[48].slice(Number(t[0]),t[48].length),s=[];for(let o=0;o<i.length;o+=1)s[o]=N2(C2(t,i,o));const r=o=>H(s[o],1,1,()=>{s[o]=null});return{c(){e=D("div");for(let o=0;o<s.length;o+=1)s[o].c();M(e,"class","flex justify-center w-full"),bt(e,"show",t[20]===$t.STOPPED)},m(o,a){I(o,e,a);for(let l=0;l<s.length;l+=1)s[l].m(e,null);n=!0},p(o,a){if(a[0]&3|a[1]&131072){i=o[48].slice(Number(o[0]),o[48].length);let l;for(l=0;l<i.length;l+=1){const c=C2(o,i,l);s[l]?(s[l].p(c,a),P(s[l],1)):(s[l]=N2(c),s[l].c(),P(s[l],1),s[l].m(e,null))}for(at(),l=i.length;l<s.length;l+=1)r(l);lt()}(!n||a[0]&1048576)&&bt(e,"show",o[20]===$t.STOPPED)},i(o){if(!n){for(let a=0;a<i.length;a+=1)P(s[a]);n=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)H(s[a]);n=!1},d(o){o&&O(e),en(s,o)}}}function N8(t){let e,n,i,s,r,o,a;var l=t[126].icon;function c(u){return{props:{width:"100%",height:"100%"}}}return l&&(n=jr(l,c())),{c(){e=D("div"),n&&ce(n.$$.fragment),s=z(),M(e,"class",i="my-3 mx-1 w-5 h-5 "+(t[126].highlight(t[1][0]||{})?"text-red-500":""))},m(u,f){I(u,e,f),n&&ae(n,e,null),I(u,s,f),r=!0,o||(a=tt(e,"click",function(){Pl(t[126].handler)&&t[126].handler.apply(this,arguments)}),o=!0)},p(u,f){if(t=u,l!==(l=t[126].icon)){if(n){at();const h=n;H(h.$$.fragment,1,0,()=>{le(h,1)}),lt()}l?(n=jr(l,c()),ce(n.$$.fragment),P(n.$$.fragment,1),ae(n,e,null)):n=null}(!r||f[0]&3&&i!==(i="my-3 mx-1 w-5 h-5 "+(t[126].highlight(t[1][0]||{})?"text-red-500":"")))&&M(e,"class",i)},i(u){r||(n&&P(n.$$.fragment,u),r=!0)},o(u){n&&H(n.$$.fragment,u),r=!1},d(u){u&&O(e),n&&le(n),u&&O(s),o=!1,a()}}}function N2(t){let e,n;return e=new Vi({props:{class:"cursor-pointer",position:"top",text:t[126].text,$$slots:{default:[N8]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s[0]&1&&(r.text=i[126].text),s[0]&3|s[4]&256&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function B2(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w,x,S,T,A,C,k,L,F,U,N,B,W,ee,K,ge,se,X,q,Y,$,ze,_e,pe,Te,De=t[28].count.value+"",je,de,Ae,Oe,Ye,fe,R,V,ne,he,ie,ue,Re,Ue,Ee,Se,re,we=t[27]&&F2(t);v=new JB({props:{width:"100%",height:"100%"}});let Me=!t[28].best.value&&z2(),Ne=t[28].best.value&&U2(t),Ze=!t[28].worst.value&&H2(),pt=t[28].worst.value&&V2(t),sn=!t[28].avg.value&&G2(),Gt=t[28].avg.value&&W2(t),Wt=!t[28].dev.value&&j2(),gn=t[28].dev.value&&Y2(t),jt=!(t[28].Mo3.value>-1)&&q2(),Jt=t[28].Mo3.value>-1&&X2(t),Yt=!(t[28].Ao5.value>-1)&&Z2(),Kt=t[28].Ao5.value>-1&&J2(t),kn=["Ao12","Ao50","Ao100","Ao200","Ao500","Ao1k","Ao2k"],xn=[];for(let Qe=0;Qe<7;Qe+=1)xn[Qe]=Q2(k2(t,kn,Qe));return{c(){e=D("div"),n=D("table"),i=D("tr"),s=D("td"),s.textContent="Cross",r=z(),o=D("td"),a=ye(t[25]),l=z(),c=D("tr"),u=D("td"),u.textContent="XCross",f=z(),h=D("td"),d=ye(t[26]),p=z(),we&&we.c(),_=z(),m=D("div"),ce(v.$$.fragment),g=z(),b=D("div"),y=D("div"),w=D("table"),x=D("tr"),S=D("td"),S.textContent="Best:",T=z(),Me&&Me.c(),A=z(),Ne&&Ne.c(),C=z(),k=D("tr"),L=D("td"),L.textContent="Worst:",F=z(),Ze&&Ze.c(),U=z(),pt&&pt.c(),N=z(),B=D("tr"),W=D("td"),W.textContent="Average:",ee=z(),sn&&sn.c(),K=z(),Gt&&Gt.c(),ge=z(),se=D("tr"),X=D("td"),X.textContent="Deviation:",q=z(),Wt&&Wt.c(),Y=z(),gn&&gn.c(),$=z(),ze=D("tr"),_e=D("td"),_e.textContent="Count:",pe=z(),Te=D("td"),je=ye(De),de=z(),Ae=D("tr"),Oe=D("td"),Oe.textContent="Mo3:",Ye=z(),jt&&jt.c(),fe=z(),Jt&&Jt.c(),R=z(),V=D("tr"),ne=D("td"),ne.textContent="Ao5:",he=z(),Yt&&Yt.c(),ie=z(),Kt&&Kt.c(),ue=z(),Re=D("div"),Ue=D("table");for(let Qe=0;Qe<7;Qe+=1)xn[Qe].c();M(n,"class","inline-block align-middle transition-all duration-300 svelte-1g5lvj6"),bt(n,"nshow",!t[24]),M(m,"id","bulb"),M(m,"class","w-8 h-8 inline-block align-middle mx-0 my-2 cursor-pointer svelte-1g5lvj6"),bt(m,"nshow",!t[24]),M(e,"id","hints"),M(e,"class","bg-white bg-opacity-10 w-max p-2 "+Jf+" rounded-md shadow-md absolute select-none left-0 top-1/4 transition-all duration-1000 svelte-1g5lvj6"),bt(e,"isVisible",t[23]&&!t[19]),M(x,"class","svelte-1g5lvj6"),bt(x,"better",t[28].best.better&&t[28].counter.value>0&&t[28].best.value>-1),M(B,"class","svelte-1g5lvj6"),bt(B,"better",t[28].avg.better&&t[28].counter.value>0),M(Ae,"class","svelte-1g5lvj6"),bt(Ae,"better",t[28].Mo3.better&&t[28].counter.value>0&&t[28].Mo3.value>-1),M(V,"class","svelte-1g5lvj6"),bt(V,"better",t[28].Ao5.better&&t[28].counter.value>0&&t[28].Ao5.value>-1),M(w,"class","ml-3 svelte-1g5lvj6"),M(y,"class","left absolute select-none bottom-0 left-0  svelte-1g5lvj6"),M(Ue,"class","mr-3 svelte-1g5lvj6"),M(Re,"class","right absolute select-none bottom-0 right-0 svelte-1g5lvj6"),M(b,"id","statistics"),M(b,"class",Jf+" pointer-events-none transition-all duration-300 svelte-1g5lvj6"),bt(b,"isRunning",t[19])},m(Qe,qt){I(Qe,e,qt),E(e,n),E(n,i),E(i,s),E(i,r),E(i,o),E(o,a),E(n,l),E(n,c),E(c,u),E(c,f),E(c,h),E(h,d),E(n,p),we&&we.m(n,null),E(e,_),E(e,m),ae(v,m,null),I(Qe,g,qt),I(Qe,b,qt),E(b,y),E(y,w),E(w,x),E(x,S),E(x,T),Me&&Me.m(x,null),E(x,A),Ne&&Ne.m(x,null),E(w,C),E(w,k),E(k,L),E(k,F),Ze&&Ze.m(k,null),E(k,U),pt&&pt.m(k,null),E(w,N),E(w,B),E(B,W),E(B,ee),sn&&sn.m(B,null),E(B,K),Gt&&Gt.m(B,null),E(w,ge),E(w,se),E(se,X),E(se,q),Wt&&Wt.m(se,null),E(se,Y),gn&&gn.m(se,null),E(w,$),E(w,ze),E(ze,_e),E(ze,pe),E(ze,Te),E(Te,je),E(w,de),E(w,Ae),E(Ae,Oe),E(Ae,Ye),jt&&jt.m(Ae,null),E(Ae,fe),Jt&&Jt.m(Ae,null),E(w,R),E(w,V),E(V,ne),E(V,he),Yt&&Yt.m(V,null),E(V,ie),Kt&&Kt.m(V,null),E(b,ue),E(b,Re),E(Re,Ue);for(let Nn=0;Nn<7;Nn+=1)xn[Nn].m(Ue,null);Ee=!0,Se||(re=tt(m,"click",t[67]),Se=!0)},p(Qe,qt){if((!Ee||qt[0]&33554432)&&nt(a,Qe[25]),(!Ee||qt[0]&67108864)&&nt(d,Qe[26]),Qe[27]?we?we.p(Qe,qt):(we=F2(Qe),we.c(),we.m(n,null)):we&&(we.d(1),we=null),(!Ee||qt[0]&16777216)&&bt(n,"nshow",!Qe[24]),(!Ee||qt[0]&16777216)&&bt(m,"nshow",!Qe[24]),(!Ee||qt[0]&8912896)&&bt(e,"isVisible",Qe[23]&&!Qe[19]),Qe[28].best.value?Me&&(Me.d(1),Me=null):Me||(Me=z2(),Me.c(),Me.m(x,A)),Qe[28].best.value?Ne?Ne.p(Qe,qt):(Ne=U2(Qe),Ne.c(),Ne.m(x,null)):Ne&&(Ne.d(1),Ne=null),(!Ee||qt[0]&268435456)&&bt(x,"better",Qe[28].best.better&&Qe[28].counter.value>0&&Qe[28].best.value>-1),Qe[28].worst.value?Ze&&(Ze.d(1),Ze=null):Ze||(Ze=H2(),Ze.c(),Ze.m(k,U)),Qe[28].worst.value?pt?pt.p(Qe,qt):(pt=V2(Qe),pt.c(),pt.m(k,null)):pt&&(pt.d(1),pt=null),Qe[28].avg.value?sn&&(sn.d(1),sn=null):sn||(sn=G2(),sn.c(),sn.m(B,K)),Qe[28].avg.value?Gt?Gt.p(Qe,qt):(Gt=W2(Qe),Gt.c(),Gt.m(B,null)):Gt&&(Gt.d(1),Gt=null),(!Ee||qt[0]&268435456)&&bt(B,"better",Qe[28].avg.better&&Qe[28].counter.value>0),Qe[28].dev.value?Wt&&(Wt.d(1),Wt=null):Wt||(Wt=j2(),Wt.c(),Wt.m(se,Y)),Qe[28].dev.value?gn?gn.p(Qe,qt):(gn=Y2(Qe),gn.c(),gn.m(se,null)):gn&&(gn.d(1),gn=null),(!Ee||qt[0]&268435456)&&De!==(De=Qe[28].count.value+"")&&nt(je,De),Qe[28].Mo3.value>-1?jt&&(jt.d(1),jt=null):jt||(jt=q2(),jt.c(),jt.m(Ae,fe)),Qe[28].Mo3.value>-1?Jt?Jt.p(Qe,qt):(Jt=X2(Qe),Jt.c(),Jt.m(Ae,null)):Jt&&(Jt.d(1),Jt=null),(!Ee||qt[0]&268435456)&&bt(Ae,"better",Qe[28].Mo3.better&&Qe[28].counter.value>0&&Qe[28].Mo3.value>-1),Qe[28].Ao5.value>-1?Yt&&(Yt.d(1),Yt=null):Yt||(Yt=Z2(),Yt.c(),Yt.m(V,ie)),Qe[28].Ao5.value>-1?Kt?Kt.p(Qe,qt):(Kt=J2(Qe),Kt.c(),Kt.m(V,null)):Kt&&(Kt.d(1),Kt=null),(!Ee||qt[0]&268435456)&&bt(V,"better",Qe[28].Ao5.better&&Qe[28].counter.value>0&&Qe[28].Ao5.value>-1),qt[0]&268435456){kn=["Ao12","Ao50","Ao100","Ao200","Ao500","Ao1k","Ao2k"];let Nn;for(Nn=0;Nn<7;Nn+=1){const Os=k2(Qe,kn,Nn);xn[Nn]?xn[Nn].p(Os,qt):(xn[Nn]=Q2(Os),xn[Nn].c(),xn[Nn].m(Ue,null))}for(;Nn<7;Nn+=1)xn[Nn].d(1)}(!Ee||qt[0]&524288)&&bt(b,"isRunning",Qe[19])},i(Qe){Ee||(P(v.$$.fragment,Qe),Ee=!0)},o(Qe){H(v.$$.fragment,Qe),Ee=!1},d(Qe){Qe&&O(e),we&&we.d(),le(v),Qe&&O(g),Qe&&O(b),Me&&Me.d(),Ne&&Ne.d(),Ze&&Ze.d(),pt&&pt.d(),sn&&sn.d(),Gt&&Gt.d(),Wt&&Wt.d(),gn&&gn.d(),jt&&jt.d(),Jt&&Jt.d(),Yt&&Yt.d(),Kt&&Kt.d(),en(xn,Qe),Se=!1,re()}}}function F2(t){let e,n,i,s,r,o=xt(t[27][0],!1,!0)+"",a,l,c=xt(t[27][1],!1,!0)+"",u;return{c(){e=D("tr"),n=D("td"),n.textContent="Next Ao5",i=z(),s=D("td"),r=ye("Between "),a=ye(o),l=ye(" and "),u=ye(c)},m(f,h){I(f,e,h),E(e,n),E(e,i),E(e,s),E(s,r),E(s,a),E(s,l),E(s,u)},p(f,h){h[0]&134217728&&o!==(o=xt(f[27][0],!1,!0)+"")&&nt(a,o),h[0]&134217728&&c!==(c=xt(f[27][1],!1,!0)+"")&&nt(u,c)},d(f){f&&O(e)}}}function z2(t){let e;return{c(){e=D("td"),e.textContent="N/A"},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function U2(t){let e,n=xt(t[28].best.value,!1,!0)+"",i;return{c(){e=D("td"),i=ye(n)},m(s,r){I(s,e,r),E(e,i)},p(s,r){r[0]&268435456&&n!==(n=xt(s[28].best.value,!1,!0)+"")&&nt(i,n)},d(s){s&&O(e)}}}function H2(t){let e;return{c(){e=D("td"),e.textContent="N/A"},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function V2(t){let e,n=xt(t[28].worst.value,!1,!0)+"",i;return{c(){e=D("td"),i=ye(n)},m(s,r){I(s,e,r),E(e,i)},p(s,r){r[0]&268435456&&n!==(n=xt(s[28].worst.value,!1,!0)+"")&&nt(i,n)},d(s){s&&O(e)}}}function G2(t){let e;return{c(){e=D("td"),e.textContent="N/A"},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function W2(t){let e,n=xt(t[28].avg.value,!1,!0)+"",i;return{c(){e=D("td"),i=ye(n)},m(s,r){I(s,e,r),E(e,i)},p(s,r){r[0]&268435456&&n!==(n=xt(s[28].avg.value,!1,!0)+"")&&nt(i,n)},d(s){s&&O(e)}}}function j2(t){let e;return{c(){e=D("td"),e.textContent="N/A"},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function Y2(t){let e,n=xt(t[28].dev.value,!1,!0)+"",i;return{c(){e=D("td"),i=ye(n)},m(s,r){I(s,e,r),E(e,i)},p(s,r){r[0]&268435456&&n!==(n=xt(s[28].dev.value,!1,!0)+"")&&nt(i,n)},d(s){s&&O(e)}}}function q2(t){let e;return{c(){e=D("td"),e.textContent="N/A"},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function X2(t){let e,n=xt(t[28].Mo3.value,!1,!0)+"",i;return{c(){e=D("td"),i=ye(n)},m(s,r){I(s,e,r),E(e,i)},p(s,r){r[0]&268435456&&n!==(n=xt(s[28].Mo3.value,!1,!0)+"")&&nt(i,n)},d(s){s&&O(e)}}}function Z2(t){let e;return{c(){e=D("td"),e.textContent="N/A"},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function J2(t){let e,n=xt(t[28].Ao5.value,!1,!0)+"",i;return{c(){e=D("td"),i=ye(n)},m(s,r){I(s,e,r),E(e,i)},p(s,r){r[0]&268435456&&n!==(n=xt(s[28].Ao5.value,!1,!0)+"")&&nt(i,n)},d(s){s&&O(e)}}}function K2(t){let e;return{c(){e=D("td"),e.textContent="N/A"},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function $2(t){let e,n=xt(t[28][t[123]].value,!1,!0)+"",i;return{c(){e=D("td"),i=ye(n)},m(s,r){I(s,e,r),E(e,i)},p(s,r){r[0]&268435456&&n!==(n=xt(s[28][s[123]].value,!1,!0)+"")&&nt(i,n)},d(s){s&&O(e)}}}function Q2(t){let e,n,i,s,r,o,a,l=!(t[28][t[123]].value>-1)&&K2(),c=t[28][t[123]].value>-1&&$2(t);return{c(){e=D("tr"),n=D("td"),i=ye(t[123]),s=ye(":"),r=z(),l&&l.c(),o=z(),c&&c.c(),a=z(),M(e,"class","svelte-1g5lvj6"),bt(e,"better",t[28][t[123]].better&&t[28].counter.value>0&&t[28][t[123]].value>-1)},m(u,f){I(u,e,f),E(e,n),E(n,i),E(n,s),E(e,r),l&&l.m(e,null),E(e,o),c&&c.m(e,null),E(e,a)},p(u,f){u[28][u[123]].value>-1?l&&(l.d(1),l=null):l||(l=K2(),l.c(),l.m(e,o)),u[28][u[123]].value>-1?c?c.p(u,f):(c=$2(u),c.c(),c.m(e,a)):c&&(c.d(1),c=null),f[0]&268435456&&bt(e,"better",u[28][u[123]].better&&u[28].counter.value>0&&u[28][u[123]].value>-1)},d(u){u&&O(e),l&&l.d(),c&&c.d()}}}function ew(t){let e,n,i,s,r;return{c(){e=D("div"),n=D("img"),M(n,"class","bottom-2 transition-all duration-300 cursor-pointer w-full h-full object-contain"),gi(n.src,i=t[29])||M(n,"src",i),M(n,"alt",""),M(e,"id","preview-container"),M(e,"class","absolute bottom-2 flex items-center justify-center w-full transition-all duration-300 select-none bg-transparent h svelte-1g5lvj6"),bt(e,"expanded",t[2]),bt(e,"isRunning",t[19])},m(o,a){I(o,e,a),E(e,n),s||(r=[tt(n,"dragstart",qC(t[61])),tt(e,"click",t[68])],s=!0)},p(o,a){a[0]&536870912&&!gi(n.src,i=o[29])&&M(n,"src",i),a[0]&4&&bt(e,"expanded",o[2]),a[0]&524288&&bt(e,"isRunning",o[19])},d(o){o&&O(e),s=!1,Jn(r)}}}function tw(t){let e,n,i,s,r,o,a,l;function c(f){t[69](f)}let u={class:"bg-gray-600 text-gray-200"};return t[10]!==void 0&&(u.value=t[10]),e=new Nh({props:u}),wt.push(()=>Nt(e,"value",c)),e.$on("keyup",t[51]),r=new At({props:{$$slots:{default:[B8]},$$scope:{ctx:t}}}),r.$on("click",t[70]),a=new At({props:{$$slots:{default:[F8]},$$scope:{ctx:t}}}),a.$on("click",t[71]),{c(){ce(e.$$.fragment),i=z(),s=D("div"),ce(r.$$.fragment),o=z(),ce(a.$$.fragment),M(s,"class","flex w-full justify-center my-2")},m(f,h){ae(e,f,h),I(f,i,h),I(f,s,h),ae(r,s,null),E(s,o),ae(a,s,null),l=!0},p(f,h){const d={};!n&&h[0]&1024&&(n=!0,d.value=f[10],It(()=>n=!1)),e.$set(d);const p={};h[4]&256&&(p.$$scope={dirty:h,ctx:f}),r.$set(p);const _={};h[4]&256&&(_.$$scope={dirty:h,ctx:f}),a.$set(_)},i(f){l||(P(e.$$.fragment,f),P(r.$$.fragment,f),P(a.$$.fragment,f),l=!0)},o(f){H(e.$$.fragment,f),H(r.$$.fragment,f),H(a.$$.fragment,f),l=!1},d(f){le(e,f),f&&O(i),f&&O(s),le(r),le(a)}}}function B8(t){let e;return{c(){e=ye("Cancel")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function F8(t){let e;return{c(){e=ye("Save")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function nw(t){let e,n,i,s,r,o=t[1],a=[];for(let l=0;l<o.length;l+=1)a[l]=iw(A2(t,o,l));return{c(){e=D("div"),n=D("h2"),n.textContent="Scramble",i=z(),s=D("h2"),s.textContent="Time",r=z();for(let l=0;l<a.length;l+=1)a[l].c();M(n,"class","col-span-3"),M(s,"class","col-span-1"),M(e,"class","grid grid-cols-4 w-full text-center")},m(l,c){I(l,e,c),E(e,n),E(e,i),E(e,s),E(e,r);for(let u=0;u<a.length;u+=1)a[u].m(e,null)},p(l,c){if(c[0]&2|c[1]&2097152){o=l[1];let u;for(u=0;u<o.length;u+=1){const f=A2(l,o,u);a[u]?a[u].p(f,c):(a[u]=iw(f),a[u].c(),a[u].m(e,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=o.length}},d(l){l&&O(e),en(a,l)}}}function iw(t){let e,n=t[120].scramble+"",i,s,r,o=xt(t[120].time,!1,!0)+"",a,l,c;function u(){return t[72](t[120])}return{c(){e=D("span"),i=ye(n),s=z(),r=D("span"),a=ye(o),M(e,"class","col-span-3 cursor-pointer hover:text-blue-400 my-2 text-left text-ellipsis overflow-hidden whitespace-nowrap "),M(r,"class","col-span-1 flex items-center justify-center")},m(f,h){I(f,e,h),E(e,i),I(f,s,h),I(f,r,h),E(r,a),l||(c=tt(e,"click",u),l=!0)},p(f,h){t=f,h[0]&2&&n!==(n=t[120].scramble+"")&&nt(i,n),h[0]&2&&o!==(o=xt(t[120].time,!1,!0)+"")&&nt(a,o)},d(f){f&&O(e),f&&O(s),f&&O(r),l=!1,c()}}}function sw(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w,x,S,T,A,C,k,L,F,U,N,B,W,ee=["Sequential","Group of X"][~~t[10].settings.calcAoX]+"",K,ge,se,X,q,Y,$;function ze(ne){t[73](ne)}let _e={items:TB,transform:j8};t[10].settings.input!==void 0&&(_e.value=t[10].settings.input),i=new ks({props:_e}),wt.push(()=>Nt(i,"value",ze));let pe=t[10].settings.input==="StackMat"&&rw(t);function Te(ne){t[75](ne)}let De={class:"w-5 h-5",label:"Inspection"};t[10].settings.hasInspection!==void 0&&(De.checked=t[10].settings.hasInspection),l=new xc({props:De}),wt.push(()=>Nt(l,"checked",Te));function je(ne){t[76](ne)}let de={type:"number",class:"mt-2 bg-gray-700 hidden-markers "+(t[10].settings.hasInspection?"text-gray-200":""),disabled:!t[10].settings.hasInspection,min:5,max:60,step:5};t[10].settings.inspection!==void 0&&(de.value=t[10].settings.inspection),f=new oi({props:de}),wt.push(()=>Nt(f,"value",je));function Ae(ne){t[77](ne)}let Oe={class:"w-5 h-5 my-2",label:"Show time when running"};t[10].settings.showElapsedTime!==void 0&&(Oe.checked=t[10].settings.showElapsedTime),_=new xc({props:Oe}),wt.push(()=>Nt(_,"checked",Ae));function Ye(ne){t[78](ne)}let fe={class:"w-5 h-5 my-2",label:"Generate image from scramble"};t[10].settings.genImage!==void 0&&(fe.checked=t[10].settings.genImage),b=new xc({props:fe}),wt.push(()=>Nt(b,"checked",Ye));function R(ne){t[79](ne)}let V={class:"w-5 h-5 my-2",label:"Refresh scramble after cancel"};return t[10].settings.scrambleAfterCancel!==void 0&&(V.checked=t[10].settings.scrambleAfterCancel),A=new xc({props:V}),wt.push(()=>Nt(A,"checked",R)),N=new _8({props:{checked:!!t[10].settings.calcAoX}}),N.$on("change",t[80]),X=new At({props:{flat:!0,$$slots:{default:[z8]},$$scope:{ctx:t}}}),X.$on("click",t[81]),Y=new At({props:{flat:!0,$$slots:{default:[U8]},$$scope:{ctx:t}}}),Y.$on("click",t[82]),{c(){e=D("section"),n=ye("Input method: "),ce(i.$$.fragment),r=z(),pe&&pe.c(),o=z(),a=D("section"),ce(l.$$.fragment),u=z(),ce(f.$$.fragment),d=z(),p=D("section"),ce(_.$$.fragment),v=z(),g=D("section"),ce(b.$$.fragment),w=z(),x=D("i"),x.textContent="(This can hurt performance for complex cubes)",S=z(),T=D("section"),ce(A.$$.fragment),k=z(),L=D("section"),F=ye(`AoX calculation:\r
          `),U=D("div"),ce(N.$$.fragment),B=z(),W=D("span"),K=ye(ee),ge=z(),se=D("section"),ce(X.$$.fragment),q=z(),ce(Y.$$.fragment),M(e,"class","flex gap-4 items-center mb-4"),M(x,"class","text-sm"),M(W,"class","ml-3"),M(U,"class","flex gap-2 items-center"),M(L,"class","mt-4 flex gap-4"),M(se,"class","flex mt-4")},m(ne,he){I(ne,e,he),E(e,n),ae(i,e,null),I(ne,r,he),pe&&pe.m(ne,he),I(ne,o,he),I(ne,a,he),ae(l,a,null),E(a,u),ae(f,a,null),I(ne,d,he),I(ne,p,he),ae(_,p,null),I(ne,v,he),I(ne,g,he),ae(b,g,null),E(g,w),E(g,x),I(ne,S,he),I(ne,T,he),ae(A,T,null),I(ne,k,he),I(ne,L,he),E(L,F),E(L,U),ae(N,U,null),E(U,B),E(U,W),E(W,K),I(ne,ge,he),I(ne,se,he),ae(X,se,null),E(se,q),ae(Y,se,null),$=!0},p(ne,he){const ie={};!s&&he[0]&1024&&(s=!0,ie.value=ne[10].settings.input,It(()=>s=!1)),i.$set(ie),ne[10].settings.input==="StackMat"?pe?(pe.p(ne,he),he[0]&1024&&P(pe,1)):(pe=rw(ne),pe.c(),P(pe,1),pe.m(o.parentNode,o)):pe&&(at(),H(pe,1,1,()=>{pe=null}),lt());const ue={};!c&&he[0]&1024&&(c=!0,ue.checked=ne[10].settings.hasInspection,It(()=>c=!1)),l.$set(ue);const Re={};he[0]&1024&&(Re.class="mt-2 bg-gray-700 hidden-markers "+(ne[10].settings.hasInspection?"text-gray-200":"")),he[0]&1024&&(Re.disabled=!ne[10].settings.hasInspection),!h&&he[0]&1024&&(h=!0,Re.value=ne[10].settings.inspection,It(()=>h=!1)),f.$set(Re);const Ue={};!m&&he[0]&1024&&(m=!0,Ue.checked=ne[10].settings.showElapsedTime,It(()=>m=!1)),_.$set(Ue);const Ee={};!y&&he[0]&1024&&(y=!0,Ee.checked=ne[10].settings.genImage,It(()=>y=!1)),b.$set(Ee);const Se={};!C&&he[0]&1024&&(C=!0,Se.checked=ne[10].settings.scrambleAfterCancel,It(()=>C=!1)),A.$set(Se);const re={};he[0]&1024&&(re.checked=!!ne[10].settings.calcAoX),N.$set(re),(!$||he[0]&1024)&&ee!==(ee=["Sequential","Group of X"][~~ne[10].settings.calcAoX]+"")&&nt(K,ee);const we={};he[4]&256&&(we.$$scope={dirty:he,ctx:ne}),X.$set(we);const Me={};he[4]&256&&(Me.$$scope={dirty:he,ctx:ne}),Y.$set(Me)},i(ne){$||(P(i.$$.fragment,ne),P(pe),P(l.$$.fragment,ne),P(f.$$.fragment,ne),P(_.$$.fragment,ne),P(b.$$.fragment,ne),P(A.$$.fragment,ne),P(N.$$.fragment,ne),P(X.$$.fragment,ne),P(Y.$$.fragment,ne),$=!0)},o(ne){H(i.$$.fragment,ne),H(pe),H(l.$$.fragment,ne),H(f.$$.fragment,ne),H(_.$$.fragment,ne),H(b.$$.fragment,ne),H(A.$$.fragment,ne),H(N.$$.fragment,ne),H(X.$$.fragment,ne),H(Y.$$.fragment,ne),$=!1},d(ne){ne&&O(e),le(i),ne&&O(r),pe&&pe.d(ne),ne&&O(o),ne&&O(a),le(l),le(f),ne&&O(d),ne&&O(p),le(_),ne&&O(v),ne&&O(g),le(b),ne&&O(S),ne&&O(T),le(A),ne&&O(k),ne&&O(L),le(N),ne&&O(ge),ne&&O(se),le(X),le(Y)}}}function rw(t){let e,n,i,s,r;function o(l){t[74](l)}let a={class:"max-w-full",items:t[15],label:Y8,transform:q8};return t[16]!==void 0&&(a.value=t[16]),i=new ks({props:a}),wt.push(()=>Nt(i,"value",o)),{c(){e=D("section"),n=ye("Device: "),ce(i.$$.fragment),M(e,"class","mb-4")},m(l,c){I(l,e,c),E(e,n),ae(i,e,null),r=!0},p(l,c){const u={};c[0]&32768&&(u.items=l[15]),!s&&c[0]&65536&&(s=!0,u.value=l[16],It(()=>s=!1)),i.$set(u)},i(l){r||(P(i.$$.fragment,l),r=!0)},o(l){H(i.$$.fragment,l),r=!1},d(l){l&&O(e),le(i)}}}function z8(t){let e;return{c(){e=ye("Cancel")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function U8(t){let e;return{c(){e=ye("Save")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function H8(t){let e,n,i,s,r=t[9]==="edit-scramble"&&tw(t),o=t[9]==="old-scrambles"&&nw(t),a=t[9]==="settings"&&sw(t);return{c(){e=D("div"),r&&r.c(),n=z(),o&&o.c(),i=z(),a&&a.c(),M(e,"class","max-w-lg max-h-[30rem] overflow-scroll")},m(l,c){I(l,e,c),r&&r.m(e,null),E(e,n),o&&o.m(e,null),E(e,i),a&&a.m(e,null),s=!0},p(l,c){l[9]==="edit-scramble"?r?(r.p(l,c),c[0]&512&&P(r,1)):(r=tw(l),r.c(),P(r,1),r.m(e,n)):r&&(at(),H(r,1,1,()=>{r=null}),lt()),l[9]==="old-scrambles"?o?o.p(l,c):(o=nw(l),o.c(),o.m(e,i)):o&&(o.d(1),o=null),l[9]==="settings"?a?(a.p(l,c),c[0]&512&&P(a,1)):(a=sw(l),a.c(),P(a,1),a.m(e,null)):a&&(at(),H(a,1,1,()=>{a=null}),lt())},i(l){s||(P(r),P(a),s=!0)},o(l){H(r),H(a),s=!1},d(l){l&&O(e),r&&r.d(),o&&o.d(),a&&a.d()}}}function V8(t){var X,q;let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w,x,S,T,A=!t[18]&&P2(),C=t[47].filter(t[63]),k=[];for(let Y=0;Y<C.length;Y+=1)k[Y]=R2(L2(t,C,Y));const L=Y=>H(k[Y],1,1,()=>{k[Y]=null});let F=t[3]&&!t[0]&&D2(t);const U=[I8,O8],N=[];function B(Y,$){var ze,_e;return((_e=(ze=Y[22])==null?void 0:ze.settings)==null?void 0:_e.input)==="Manual"?0:1}u=B(t),f=N[u]=U[u](t);let W=t[20]===$t.STOPPED&&I2(t),ee=!t[0]&&B2(t),K=(((q=(X=t[22])==null?void 0:X.settings)==null?void 0:q.genImage)||t[0])&&ew(t);function ge(Y){t[84](Y)}let se={onClose:t[11],$$slots:{default:[H8]},$$scope:{ctx:t}};return t[8]!==void 0&&(se.show=t[8]),y=new Ma({props:se}),t[83](y),wt.push(()=>Nt(y,"show",ge)),{c(){e=D("div"),n=D("div"),A&&A.c(),i=z(),s=D("span"),r=z(),o=D("div");for(let Y=0;Y<k.length;Y+=1)k[Y].c();a=z(),F&&F.c(),l=z(),c=D("div"),f.c(),h=z(),d=D("span"),p=ye("----"),m=z(),W&&W.c(),v=z(),ee&&ee.c(),g=z(),K&&K.c(),b=z(),ce(y.$$.fragment),M(s,"contenteditable","false"),M(s,"class","svelte-1g5lvj6"),t[18]===void 0&&Jc(()=>t[62].call(s)),bt(s,"isRunning",t[19]),bt(s,"battle",t[0]),M(o,"class","absolute top-1 right-12 svelte-1g5lvj6"),bt(o,"isRunning",t[19]),M(n,"id","scramble"),M(n,"class","transition-all duration-300 svelte-1g5lvj6"),M(d,"class","timer svelte-1g5lvj6"),d.hidden=_=!(t[20]===$t.RUNNING&&!t[22].settings.showElapsedTime),M(c,"id","timer"),M(c,"class","absolute top-1/3 text-9xl h-32 flex flex-col items-center justify-center svelte-1g5lvj6"),M(e,"class","w-full h-full "+Jf+" svelte-1g5lvj6")},m(Y,$){I(Y,e,$),E(e,n),A&&A.m(n,null),E(n,i),E(n,s),t[18]!==void 0&&(s.innerHTML=t[18]),E(n,r),E(n,o);for(let ze=0;ze<k.length;ze+=1)k[ze].m(o,null);E(e,a),F&&F.m(e,null),E(e,l),E(e,c),N[u].m(c,null),E(c,h),E(c,d),E(d,p),E(c,m),W&&W.m(c,null),E(e,v),ee&&ee.m(e,null),E(e,g),K&&K.m(e,null),E(e,b),ae(y,e,null),x=!0,S||(T=[tt(window,"keyup",t[50]),tt(window,"keydown",t[49]),tt(window,"mousemove",t[54]),tt(window,"mouseup",t[55]),tt(s,"input",t[62]),tt(e,"touchstart",pv(t[57])),tt(e,"touchend",t[58])],S=!0)},p(Y,$){var pe,Te;if(Y[18]?A&&(A.d(1),A=null):A?A.p(Y,$):(A=P2(),A.c(),A.m(n,i)),$[0]&262144&&Y[18]!==s.innerHTML&&(s.innerHTML=Y[18]),(!x||$[0]&524288)&&bt(s,"isRunning",Y[19]),(!x||$[0]&1)&&bt(s,"battle",Y[0]),$[0]&1|$[1]&65536){C=Y[47].filter(Y[63]);let De;for(De=0;De<C.length;De+=1){const je=L2(Y,C,De);k[De]?(k[De].p(je,$),P(k[De],1)):(k[De]=R2(je),k[De].c(),P(k[De],1),k[De].m(o,null))}for(at(),De=C.length;De<k.length;De+=1)L(De);lt()}(!x||$[0]&524288)&&bt(o,"isRunning",Y[19]),Y[3]&&!Y[0]?F?(F.p(Y,$),$[0]&9&&P(F,1)):(F=D2(Y),F.c(),P(F,1),F.m(e,l)):F&&(at(),H(F,1,1,()=>{F=null}),lt());let ze=u;u=B(Y),u===ze?N[u].p(Y,$):(at(),H(N[ze],1,1,()=>{N[ze]=null}),lt(),f=N[u],f?f.p(Y,$):(f=N[u]=U[u](Y),f.c()),P(f,1),f.m(c,h)),(!x||$[0]&5242880&&_!==(_=!(Y[20]===$t.RUNNING&&!Y[22].settings.showElapsedTime)))&&(d.hidden=_),Y[20]===$t.STOPPED?W?(W.p(Y,$),$[0]&1048576&&P(W,1)):(W=I2(Y),W.c(),P(W,1),W.m(c,null)):W&&(at(),H(W,1,1,()=>{W=null}),lt()),Y[0]?ee&&(at(),H(ee,1,1,()=>{ee=null}),lt()):ee?(ee.p(Y,$),$[0]&1&&P(ee,1)):(ee=B2(Y),ee.c(),P(ee,1),ee.m(e,g)),((Te=(pe=Y[22])==null?void 0:pe.settings)==null?void 0:Te.genImage)||Y[0]?K?K.p(Y,$):(K=ew(Y),K.c(),K.m(e,b)):K&&(K.d(1),K=null);const _e={};$[0]&2048&&(_e.onClose=Y[11]),$[0]&99970|$[4]&256&&(_e.$$scope={dirty:$,ctx:Y}),!w&&$[0]&256&&(w=!0,_e.show=Y[8],It(()=>w=!1)),y.$set(_e)},i(Y){if(!x){for(let $=0;$<C.length;$+=1)P(k[$]);P(F),P(f),P(W),P(ee),P(y.$$.fragment,Y),x=!0}},o(Y){k=k.filter(Boolean);for(let $=0;$<k.length;$+=1)H(k[$]);H(F),H(f),H(W),H(ee),H(y.$$.fragment,Y),x=!1},d(Y){Y&&O(e),A&&A.d(),en(k,Y),F&&F.d(),N[u].d(),W&&W.d(),ee&&ee.d(),K&&K.d(),t[83](null),le(y),S=!1,Jn(T)}}}const Jf="text-gray-400";let nA=250,iA=250,G8="Scrambling...";const Z1=/^\d{1,6}$/,J1=/^\s*dnf\s*$/i;function W8(t){let e=[];return e.push(t%100),t=~~(t/100),e.push(t%100),t=~~(t/100),e.push(t),e[2]*6e4+e[1]*1e3+e[0]*10}function ow(t){return Z1.test(t)||J1.test(t)||t===""}const j8=t=>t,Y8=t=>t[1],q8=t=>t[0];function X8(t,e,n){let i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,{context:y}=e,{battle:w=!1}=e,{enableKeyboard:x=!0}=e;const{state:S,ready:T,tab:A,solves:C,allSolves:k,session:L,Ao5:F,stats:U,scramble:N,group:B,mode:W,hintDialog:ee,hint:K,cross:ge,xcross:se,preview:X,isRunning:q,sortSolves:Y,initScrambler:$,updateStatistics:ze,selectedGroup:_e,setConfigFromSolve:pe}=y;Lt(t,S,Fe=>n(20,a=Fe)),Lt(t,T,Fe=>n(21,l=Fe)),Lt(t,A,Fe=>n(98,u=Fe)),Lt(t,C,Fe=>n(1,i=Fe)),Lt(t,k,Fe=>n(99,f=Fe)),Lt(t,L,Fe=>n(22,c=Fe)),Lt(t,F,Fe=>n(27,v=Fe)),Lt(t,U,Fe=>n(28,g=Fe)),Lt(t,N,Fe=>n(18,r=Fe)),Lt(t,B,Fe=>n(97,s=Fe)),Lt(t,W,Fe=>n(100,h=Fe)),Lt(t,ee,Fe=>n(23,d=Fe)),Lt(t,K,Fe=>n(24,p=Fe)),Lt(t,ge,Fe=>n(25,_=Fe)),Lt(t,se,Fe=>n(26,m=Fe)),Lt(t,X,Fe=>n(29,b=Fe)),Lt(t,q,Fe=>n(19,o=Fe));const Te=Da();let De=!0,je=0,de=0,Ae,Oe=0,Ye=null,fe=-1,R=!1,V=!1,ne=document.body.clientWidth-nA-50,he=(document.body.clientHeight-iA)/2,ie="",ue=null,Re=!1,Ue="",Ee=null,Se=()=>{},re=(Fe,vn,dn)=>{n(9,Ue=Fe),n(10,Ee=vn),n(11,Se=dn),n(8,Re=!0)},we=[{text:"Reload scramble [Ctrl + S]",icon:NB,handler:()=>$()},{text:"Edit [Ctrl + E]",icon:zB,handler:()=>{re("edit-scramble",r,Fe=>Fe&&$(Fe))}},{text:"Use old scramble [Ctrl + O]",icon:VB,handler:()=>{re("old-scrambles",null,()=>{})}},{text:"Copy scramble [Ctrl + C]",icon:jB,handler:()=>Be()},{text:"Notes [Ctrl + N]",icon:QB,handler:()=>n(3,V=!0)},{text:"Settings",icon:eA,handler:()=>{var vn;let Fe=(vn=c==null?void 0:c.settings)==null?void 0:vn.calcAoX;c.settings.input||gt(L,c.settings.input="Keyboard",c),c.settings.input==="StackMat"?jt():(Zl.stop(),Wt&&n(17,Wt.on=!1,Wt)),re("settings",c,dn=>{dn&&(Yt.updateSession(c),Fe!=c.settings.calcAoX&&ze(!1))})}}],Me=0,Ne="",Ze=!0,pt=[{text:"Delete",icon:Oa,highlight:()=>!1,handler:()=>{Yt.removeSolves([i[0]]),xn()}},{text:"DNF",icon:LB,highlight:Fe=>Fe.penalty===ct.DNF,handler:()=>{gt(C,i[0].penalty=i[0].penalty===ct.DNF?ct.NONE:ct.DNF,i),w?Te("update",i[0]):Yt.updateSolve(i[0])}},{text:"+2",icon:DB,highlight:Fe=>Fe.penalty===ct.P2,handler:()=>{gt(C,i[0].penalty=i[0].penalty===ct.P2?ct.NONE:ct.P2,i),i[0].penalty===ct.P2?gt(C,i[0].time+=2e3,i):gt(C,i[0].time-=2e3,i),w?Te("update",i[0]):Yt.updateSolve(i[0])}}],sn=[],Gt="",Wt;function gn(Fe){if(Wt&&Wt.time_milli>Fe.time_milli&&gt(S,a=$t.CLEAN,a),n(17,Wt=Fe),Fe.on===!1&&a!=$t.CLEAN){gt(S,a=$t.CLEAN,a),n(12,Me=0);return}Fe.running?a!=$t.RUNNING&&(Os(),gt(S,a=$t.RUNNING,a)):a===$t.RUNNING&&(gt(S,a=$t.STOPPED,a),kn(),gt(T,l=!1,l),Ye.time=Me,!w&&$()),n(12,Me=Fe.time_milli)}function jt(){Zl.stop(),Zl.init("",Gt,!0),console.log("CONNECT_STACKMAT")}function Jt(){Zl.updateInputDevices().then(Fe=>{n(15,sn=Fe)})}Zl.setCallBack(gn),navigator.mediaDevices.addEventListener("devicechange",()=>{Jt()}),Jt();const Yt=Ys.getInstance();function Kt(){Oe=0,i.forEach(Fe=>Fe.selected=!1)}function kn(Fe,vn){let dn=Ye;dn.date=Date.now(),dn.time=Fe||Me,dn.group=s,dn.mode=h[1],dn.len=h[2],dn.prob=fe,dn.session=c._id,dn.penalty=vn||ct.NONE,f.push(dn),i.push(dn),w?(dn.group=-1,Te("solve",Ye)):(Yt.addSolve(dn),Y(),ze(!0))}function xn(){qt(),n(12,Me=0),gt(S,a=$t.CLEAN,a),gt(T,l=!1,l),n(14,Ze=!0),Ye=null}function Qe(Fe){const{code:vn}=Fe;if(!!x)switch(u){case 0:{if(vn==="Space"){if(!De&&a===$t.RUNNING)return;De=!1,a===$t.STOPPED||a===$t.CLEAN?(gt(S,a=$t.PREVENTION,a),n(12,Me=0),de=performance.now()):a===$t.PREVENTION?performance.now()-de>500&&gt(T,l=!0,l):a===$t.RUNNING&&(qt(),n(12,Me=~~(performance.now()-je)),kn(),gt(S,a=$t.STOPPED,a),gt(T,l=!1,l),Ye.time=Me,!w&&$())}else["KeyR","Escape","KeyS"].indexOf(vn)>-1&&!w?(vn==="KeyS"&&Fe.ctrlKey&&!o||vn==="Escape"&&o&&c.settings.scrambleAfterCancel?(xn(),$()):xn(),n(2,R=!1)):a===$t.RUNNING&&(qt(),n(12,Me=~~(performance.now()-je)),kn(),gt(S,a=$t.STOPPED,a),gt(T,l=!1,l),Ye.time=Me,!w&&$());break}case 1:{vn==="Escape"&&Oe&&Kt();break}}}function qt(){Me!=0&&n(12,Me=performance.now()-je),clearInterval(Ae)}function Nn(Fe,vn){Ae=setInterval(()=>{let dn=Fe<0?je-performance.now():performance.now()-je;if(vn&&(dn=Math.ceil(dn/1e3)*1e3),dn<-2){qt(),gt(S,a=$t.STOPPED,a),Ye.penalty=ct.DNS;return}if(dn<=0){n(12,Me=0),qt(),Ye.penalty=ct.P2;return}n(12,Me=~~dn)},47)}function Os(){Ye={date:Date.now(),penalty:ct.NONE,scramble:r,time:Me,comments:"",selected:!1,session:""}}function Q(Fe){if(u||!x)return;const{code:vn}=Fe;De=!0,vn==="Space"?a===$t.PREVENTION?l?(Os(),c.settings.hasInspection?(gt(S,a=$t.INSPECTION,a),n(14,Ze=!1),n(12,Me=0),gt(T,l=!1,l),je=performance.now()+c.settings.inspection*1e3,Nn(-1,!0)):(gt(S,a=$t.RUNNING,a),gt(T,l=!1,l),je=performance.now(),n(14,Ze=!0),qt(),Ye.penalty===ct.P2&&(je-=2e3),Nn(1))):gt(S,a=$t.CLEAN,a):a===$t.INSPECTION&&(gt(S,a=$t.RUNNING,a),je=performance.now(),n(14,Ze=!0),qt(),Ye.penalty===ct.P2&&(je-=2e3),Nn(1)):!o&&!w&&(vn==="KeyE"&&Fe.ctrlKey?(!Re||Re&&Ue!="edit-scramble")&&re("edit-scramble",r,dn=>dn&&$(dn)):vn==="KeyO"&&Fe.ctrlKey?re("old-scrambles",null,()=>{}):vn==="KeyC"&&Fe.ctrlKey?Be():vn==="KeyN"&&Fe.ctrlKey&&n(3,V=!0))}function Be(){navigator.clipboard.writeText(r).then(()=>{console.log("Copied to clipboard")})}function Le(Fe){let vn=Fe.detail;vn.stopPropagation(),n(8,Re=vn.code==="Escape"?ue.close():Re),vn.code==="Enter"&&vn.ctrlKey&&ue.close(Ee.trim())}function qe(Fe){pe(Fe),$(Fe.scramble),ue.close()}let st=0,Ht=0,Bt=ne,Vt=he,Rt=!1;function Bn(Fe){st=Fe.clientX,Ht=Fe.clientY,Bt=ne,Vt=he,Rt=!0}function Ln(Fe){Rt&&(n(4,ne=Bt+Fe.clientX-st),n(5,he=Vt+Fe.clientY-Ht))}function Ot(){Rt=!1}function xe(){if(!Z1.test(Ne)&&!J1.test(Ne)){n(13,Ne="");return}Os(),Z1.test(Ne)?kn(W8(+Ne)):J1.test(Ne)&&kn(0,ct.DNF),!w&&$(),n(13,Ne="")}let it=null;function Je(Fe){console.log("pointerDown",Fe),it==null&&(it=setInterval(()=>{Qe({code:"Space"})},4))}function Tt(Fe){console.log("pointerUp",Fe),it!=null&&(clearInterval(it),it=null),Q({code:"Space"})}gs(()=>{gt(B,s=0,s),_e(),ze(!1)}),er(()=>{Zl.stop()});function hn(Fe){hE.call(this,t,Fe)}function hi(){r=this.innerHTML,N.set(r)}const Tn=(Fe,vn)=>w?vn===3||vn===5:!0,Mi=()=>n(3,V=!1);function di(Fe){ie=Fe,n(6,ie)}function qi(Fe){Ne=Fe,n(13,Ne)}const Uo=()=>gt(K,p=!p,p),Nl=()=>n(2,R=!R);function pi(Fe){Ee=Fe,n(10,Ee)}const Dn=()=>ue.close(),ir=()=>ue.close(Ee.trim()),vs=Fe=>qe(Fe);function ss(Fe){t.$$.not_equal(Ee.settings.input,Fe)&&(Ee.settings.input=Fe,n(10,Ee))}function Rr(Fe){Gt=Fe,n(16,Gt)}function Is(Fe){t.$$.not_equal(Ee.settings.hasInspection,Fe)&&(Ee.settings.hasInspection=Fe,n(10,Ee))}function sr(Fe){t.$$.not_equal(Ee.settings.inspection,Fe)&&(Ee.settings.inspection=Fe,n(10,Ee))}function Yh(Fe){t.$$.not_equal(Ee.settings.showElapsedTime,Fe)&&(Ee.settings.showElapsedTime=Fe,n(10,Ee))}function qh(Fe){t.$$.not_equal(Ee.settings.genImage,Fe)&&(Ee.settings.genImage=Fe,n(10,Ee))}function Bl(Fe){t.$$.not_equal(Ee.settings.scrambleAfterCancel,Fe)&&(Ee.settings.scrambleAfterCancel=Fe,n(10,Ee))}const bs=Fe=>n(10,Ee.settings.calcAoX=~~Fe.detail.value,Ee),Fl=()=>ue.close(),ku=()=>ue.close(!0);function Cu(Fe){wt[Fe?"unshift":"push"](()=>{ue=Fe,n(7,ue)})}function Lu(Fe){Re=Fe,n(8,Re)}return t.$$set=Fe=>{"context"in Fe&&n(59,y=Fe.context),"battle"in Fe&&n(0,w=Fe.battle),"enableKeyboard"in Fe&&n(60,x=Fe.enableKeyboard)},t.$$.update=()=>{t.$$.dirty[0]&2&&i.length===0&&xn()},[w,i,R,V,ne,he,ie,ue,Re,Ue,Ee,Se,Me,Ne,Ze,sn,Gt,Wt,r,o,a,l,c,d,p,_,m,v,g,b,S,T,A,C,k,L,F,U,N,B,W,ee,K,ge,se,X,q,we,pt,Qe,Q,Le,qe,Bn,Ln,Ot,xe,Je,Tt,y,x,hn,hi,Tn,Mi,di,qi,Uo,Nl,pi,Dn,ir,vs,ss,Rr,Is,sr,Yh,qh,Bl,bs,Fl,ku,Cu,Lu]}class sA extends dt{constructor(e){super(),ht(this,e,X8,V8,ft,{context:59,battle:0,enableKeyboard:60},null,[-1,-1,-1,-1,-1])}}const m0=["w","x","y","z"],Z8=[[1,1,1,1],[1,-1,1,-1],[1,-1,-1,1],[1,1,-1,-1]],J8=[[0,1,2,3],[1,0,3,2],[2,3,0,1],[3,2,1,0]];class Kf{constructor(e,n,i,s){ke(this,"w");ke(this,"x");ke(this,"y");ke(this,"z");this.w=e,this.x=n,this.y=i,this.z=s}conjugate(){return new Kf(this.w,-this.x,-this.y,-this.z)}multiply(e){const n=new Kf(0,0,0,0);for(let i=0;i<4;i++)for(let s=0;s<4;s++)n[m0[J8[i][s]]]+=Z8[i][s]*this[m0[i]]*e[m0[s]];return n}}class $e{constructor(e,n,i){ke(this,"x");ke(this,"y");ke(this,"z");this.x=e||0,this.y=n||0,this.z=i||0}static cross(e,n,i){let s=n.sub(e),r=i.sub(n);return s.cross(r)}static crossValue(e,n,i){return e.x*(n.y*i.z-i.y*n.z)-e.y*(n.x*i.z-i.x*n.z)+e.x*(n.x*i.y-i.x*n.y)}static direction(e,n,i,s){return $e.direction1(e,$e.cross(e,n,i),s)}static direction1(e,n,i){let s=n.dot(i.sub(e));return Math.abs(s)<1e-6?0:Math.sign(s)}static project(e,n,i,s){return $e.project1(e,n,$e.cross(n,i,s).unit())}static project1(e,n,i){let s=e.sub(n),r=i.dot(s);return e.add(i.mul(-r))}project(e,n,i){return this.project1(e,$e.cross(e,n,i).unit())}project1(e,n){return $e.project1(this,e,n)}reflect(e,n,i,s){return this.reflect1(e,$e.cross(e,n,i).unit(),s)}reflect1(e,n,i){return this.add(n.mul(-2*this.sub(e).dot(n)),i)}cross(e){return new $e(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}add(e,n){return n?(this.x+=e.x,this.y+=e.y,this.z+=e.z,this):new $e(this.x+e.x,this.y+e.y,this.z+e.z)}sub(e,n){return n?(this.x-=e.x,this.y-=e.y,this.z-=e.z,this):new $e(this.x-e.x,this.y-e.y,this.z-e.z)}mul(e,n){return n?(this.x*=e,this.y*=e,this.z*=e,this):new $e(this.x*e,this.y*e,this.z*e)}div(e,n){return n?(this.x/=e,this.y/=e,this.z/=e,this):new $e(this.x/e,this.y/e,this.z/e)}rotate(e,n,i,s){const r=Math.cos(i/2),o=Math.sin(i/2);let a=n.unit(),l=new Kf(0,this.x-e.x,this.y-e.y,this.z-e.z),c=new Kf(r,o*a.x,o*a.y,o*a.z),u=c.multiply(l).multiply(c.conjugate());return s?(this.x=u.x+e.x,this.y=u.y+e.y,this.z=u.z+e.z,this):new $e(u.x+e.x,u.y+e.y,u.z+e.z)}clone(){return new $e(this.x,this.y,this.z)}abs(){return this.abs2()**.5}abs2(){return this.x**2+this.y**2+this.z**2}unit(){let e=this.abs();return e!=0?this.div(e):new $e(1,0,0)}proj(e){return e.setLength(this.dot(e)/e.abs())}setLength(e){return this.unit().mul(e)}toString(){return`<${this.x}; ${this.y}; ${this.z}>`}toNormal(){let e=[this.x,this.y,this.z].map(n=>Math.abs(n)<1e-6?0:Math.sign(n));return this.x=e[0],this.y=e[1],this.z=e[2],this}}const te=new $e(0,0,0),be=new $e(1,0,0),ve=new $e(-1,0,0),me=new $e(0,0,1),Ge=new $e(0,0,-1),G=new $e(0,1,0),Pe=new $e(0,-1,0);function K8(t){let e=[];for(let n=0,i=t.length;n<i;n+=1)if(Array.isArray(t[n]))e.push("a");else switch(typeof t[n]){case"number":case"string":case"object":case"undefined":case"function":{e.push((typeof t[n])[0]);break}default:{e.push("?");break}}return e.join("")}function Ho(t,e,n){let i=e||0,s=n||255;return i>s&&(i+=s,s=i-s,i=i-s),Math.min(Math.max(i,t),s)}const Hs=class{constructor(e,n,i,s,r){ke(this,"color");let o=K8([e,n,i,s,r]);switch(this.color=[0,1,2].map(a=>Math.round(Math.random()*255)),this.color[0]=Ho(this.color[0]),this.color[1]=Ho(this.color[1]),this.color[2]=Ho(this.color[2]),this.color[3]=1,o){case"nnnns":{if(r.match(/cmyk/i))this.fromCMYK(e,n,i,s);else if(r.match(/rgba/i))this.fromRGBA(e,n,i,s);else throw new TypeError(`Unknown format color ${r}`);break}case"nnnnu":{this.fromRGBA(e,n,i,s);break}case"nnnsu":{if(s.match(/cmy/i))this.fromCMY(e,n,i);else if(s.match(/ryb/i))this.fromRYB(e,n,i);else if(s.match(/hsv/i))this.fromHSV(e,n,i);else throw new TypeError(`Unknown format color ${r}`);break}case"nnnuu":{this.fromRGB(e,n,i);break}case"suuuu":{this.fromString(e);break}}}set(e,n){this.color[e]=n}fromCMY(e,n,i){throw new ReferenceError("CMY not supported yet")}fromCMYK(e,n,i,s){throw new ReferenceError("CMYK not supported yet")}fromRYB(e,n,i){throw new ReferenceError("RYB not supported yet")}fromHSV(e,n,i){throw new ReferenceError("HSV not supported yet")}fromRGB(e,n,i){this.color[0]=Ho(e),this.color[1]=Ho(n),this.color[2]=Ho(i)}fromRGBA(e,n,i,s){this.fromRGB(e,n,i),this.color[3]=Ho(s,0,1)}fromString(e){let n=/$rgba\(([0-9]*),([0-9]*),([0-9]*),([0-9]*)\)$/,i=/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)$/,s=/^\#(\w{2})(\w{2})(\w{2})$/,r=/^\#(\w{2})(\w{2})(\w{2})(\w{2})$/,o=e.replace(/\s/g,"");if(n.test(o))this.fromRGBA.apply(this,o.replace(n,"$1 $2 $3 $4").split(" "));else if(i.test(o))this.fromRGB.apply(this,o.replace(i,"$1 $2 $3").split(" "));else if(r.test(o))this.fromRGBA.apply(this,o.replace(r,"$1 $2 $3 $4").split(" ").map(a=>parseInt(a,16)));else if(s.test(o))this.fromRGB.apply(this,o.replace(s,"$1 $2 $3").split(" ").map(a=>parseInt(a,16)));else throw new TypeError("String format other than rgb() or rgba() not supported yet")}interpolate(e,n){let i=new Hs;return i.color=this.color.map((s,r)=>s*(1-n)+e.color[r]*n),i}clone(){let e=new Hs(0,0,0);return e.color=this.color.map(n=>n),e}toHex(e=!0){let n=this.color.map(i=>i);return n[3]=Ho(n[3]*255),!e&&n.pop(),"#"+n.map(i=>("00"+i.toString(16)).substr(-2,2)).join("")}toNumber(){let e=0;for(let n=0;n<3;n+=1)e*=256,e+=this.color[n];return e}toRGBStr(){return`rgb(${this.color[0]}, ${this.color[1]}, ${this.color[2]})`}toRGBAStr(){return`rgba(${this.color[0]}, ${this.color[1]}, ${this.color[2]}, ${~~(this.color[3]*255)})`}toArray(){return this.color.map(e=>e)}};let Us=Hs;ke(Us,"GREEN",new Hs(63,197,69)),ke(Us,"RED",new Hs(229,57,53)),ke(Us,"BLUE",new Hs(25,118,210)),ke(Us,"ORANGE",new Hs(225,167,38)),ke(Us,"YELLOW",new Hs(255,235,59)),ke(Us,"WHITE",new Hs(230,230,230)),ke(Us,"BLACK",new Hs(0,0,0)),ke(Us,"GRAY",new Hs(80,80,80));const $8=[[/^\s+/,null],[/^\n/,null],[/^\r/,null],[/^\./,null],[/^\/\/.*/,null],[/^,/,","],[/^\(/,"("],[/^\)([1-9]\d{0,1})?/,")"],[/^\[/,"["],[/^\]([1-9]\d{0,1})?/,"]"],[/^([\d]+)?([FRUBLDfrubldzxySME])(?:([w])|&sup([\d]);)?('|2'|2)?/,"MOVE"]];class Q8{constructor(){ke(this,"_string");ke(this,"_cursor")}init(e){this._string=e,this._cursor=0}hasMoreTokens(){return this._cursor<this._string.length}isEOF(){return this._cursor===this._string.length}getNextToken(){if(!this.hasMoreTokens())return null;const e=this._string.slice(this._cursor);for(const[n,i]of $8){let s=this._match(n,e);if(s!=null)return i==null?this.getNextToken():{type:i,value:s}}throw new SyntaxError(`Unexpected token: ${e[0]}`)}_match(e,n){const i=e.exec(n);return i==null?null:(this._cursor+=i[0].length,i[0])}}class eF{constructor(){}invert(e){let n=[];for(let i=e.length-1;i>=0;i-=1)e[i].indexOf("2")>-1||e[i].indexOf("'")>-1?n.push(e[i].replace("'","")):n.push(e[i]+"'");return n}simplify(e){let n=new Map,i=new Map;n.set(-3,""),n.set(-2,"2"),n.set(-1,"'"),n.set(1,""),n.set(2,"2"),n.set(3,"'"),i.set("2",-2),i.set("'",-1),i.set("",1),i.set("2",2);let s=e.map(r=>{let o=r.replace(/^(\d*)([a-zA-Z]+)(['2]?)$/,"$1$2 $3").split(" ");return[o[0],i.get(o[1])]});for(let r=1,o=s.length;r<o;r+=1)s[r][0]===s[r-1][0]&&(s[r-1][1]=(s[r-1][1]+s[r][1])%4,s.splice(r,1),r--,o--);return s.filter(r=>r[1]).map(r=>r[0]+n.get(r[1]))}solve(e){switch(e.type){case"Program":return this.simplify(this.solve(e.value)).join(" ");case"Expression":return e.value.map(s=>this.solve(s)).reduce((s,r)=>[...s,...r],[]);case"Sequence":return e.value.map(s=>s.value);case"ParentesizedExpression":let n=this.solve(e.value.expr),i=[];for(let s=1,r=e.value.cant;s<=r;s+=1)i=[...i,...n];return i;case"ConmutatorExpression":{let s=this.solve(e.value.expr1),r=this.solve(e.value.expr2),o=this.invert(s),a=this.invert(r),l=[...s,...r,...o,...a],c=[];for(let u=1,f=e.value.cant;u<=f;u+=1)c=[...c,...l];return c}default:throw new SyntaxError(`Unexpected type: "${e.type}"`)}}}class tF{constructor(){ke(this,"_tokenizer");ke(this,"_solver");ke(this,"_lookahead");this._tokenizer=new Q8,this._solver=new eF,this._lookahead=null}input(e){this._tokenizer.init(e.replaceAll("\u2019","'")),this._lookahead=this._tokenizer.getNextToken();let n=this.Program();if(this._lookahead)throw new SyntaxError("Missing operators");return this._solver.solve(n)}Program(){return{type:"Program",value:this.Expression()}}Expression(){if(!this._lookahead)return{type:"Expression",value:[]};let e=[];for(;this._lookahead;)switch(this._lookahead.type){case"MOVE":{e.push(this.Sequence());break}case"(":{e.push(this.ParentesizedExpression());break}case"[":{e.push(this.ConmutatorExpression());break}default:return e.length===1?e[0]:{type:"Expression",value:e}}return e.length===1?e[0]:{type:"Expression",value:e}}ParentesizedExpression(){this._eat("(");let e=this.Expression(),n=+this._eat(")").value.slice(1)||1;return{type:"ParentesizedExpression",value:{expr:e,cant:n}}}ConmutatorExpression(){this._eat("[");let e=this.Expression();this._eat(",");let n=this.Expression(),i=+this._eat("]").value.slice(1)||1;return{type:"ConmutatorExpression",value:{expr1:e,expr2:n,cant:i}}}Sequence(){let e=[];for(;this._lookahead&&this._lookahead.type==="MOVE";)e.push(this.Move());return{type:"Sequence",value:e}}Move(){return{type:"Move",value:this._eat("MOVE").value}}_eat(e,n){const i=this._lookahead;if(i==null)throw new SyntaxError(`Unexpected end of input, expected: ${e}`);if(i.type!=e)throw new SyntaxError(`Unexpected token: ${i.type}, expected: ${e}`);if(n&&i.value!=n)throw new SyntaxError(`Error, expected "${n}" but got "${i.value}"`);return this._lookahead=this._tokenizer.getNextToken(),i}}const nF=/^([\d]+)?([FRUBLDfrubldzxySME])(?:([w])|&sup([\d]);)?([2'])?$/;class Gs{constructor(){}static parseScramble(e,n){let i=[],s=e.split(/\s+/g),r,o,a,l;for(let c=0,u=s.length;c<u;c+=1)if(r=nF.exec(s[c]),r!=null){if(a="FRUBLDfrubldzxySME".indexOf(r[2]),a>14){l="2'".indexOf(r[5]||"X")+2,a=[0,4,5][a%3],i.push([n.indexOf("FRUBLD".charAt(a)),2,l]),i.push([n.indexOf("FRUBLD".charAt(a)),1,4-l]);continue}o=a<12?~~r[1]||~~r[4]||(r[3]=="w"||a>5)&&2||1:-1,l=(a<12?1:-1)*("2'".indexOf(r[5]||"X")+2),i.push([n.indexOf("FRUBLD".charAt(a%6)),o,l])}return i}static parseNNN(e,n){let i=Gs.parseNNNString(e);const s="URFDLB";let r=Gs.parseScramble(i,s),o=[];for(let a=0,l=r.length;a<l;a+=1)r[a][1]>0?o.push([r[a][1],s.charAt(r[a][0]),[1,2,-1][r[a][2]-1]]):o.push([n,s.charAt(r[a][0]),[1,2,-1][-r[a][2]-1]]);return o}static parseMegaminx(e){let n=[];if(/R|D/.test(e)){if(/(\+\+|\-\-)/.test(e)){let i=e.match(/[RD](?:\+\+|--)|U'?/g);for(let s=0,r=i.length;s<r;s+=1)switch(i[s]){case"R++":n.push([1,2,-1]);break;case"R--":n.push([1,-2,-1]);break;case"D++":n.push([0,2,-1]);break;case"D--":n.push([0,-2,-1]);break;case"U":n.push([0,-1,1]);break;case"U'":n.push([0,1,1]);break}}}else{let i=e.match(/[+-]{2}|U'?/g);if(!i)return n;for(let s=0,r=i.length;s<r;s+=1)switch(i[s]){case"U":n.push([0,-1,1]);break;case"U'":n.push([0,1,1]);break;case"++":case"+-":case"-+":case"--":n.push([1,2*(i[s][0]=="-"?-1:1),-1]),n.push([0,2*(i[s][1]=="-"?-1:1),-1]);break}}return n}static parsePyraminx(e){let n=Gs.parseScramble(e,"URLB"),i=[];for(let s=0,r=n.length;s<r;s+=1)i.push([n[s][0],n[s][2]-2,-3,n[s][1]]);return i}static parseSkewb(e){let n=Gs.parseScramble(e,"URLB"),i=[];for(let s=0,r=n.length;s<r;s++)i.push([n[s][0],n[s][2]-2]);return i}static parseSquare1(e){let n=e.replace(/\s+/g,"").split("/"),i=/\s*\(?(-?\d+), *(-?\d+)\)?\s*/,s=[];for(let r=0,o=n.length;r<o;r+=1){let a=i.exec(n[r]);if(a){let l=~~a[1],c=~~a[2];l!=0&&s.push([1,l]),c!=0&&s.push([2,c])}r!=o-1&&s.push([0,6])}return s}static parseClock(e){let n=e.replace("\\n"," ").split(/\s+/g),i=[];if(e.indexOf("/")>-1)console.info("Concise notation not implemented yet!");else if(!/(u|d)/.test(e)){let s=["UL","UR","DL","DR","ALL","U","R","D","L"],r=[8,4,2,1,15,12,5,3,10],o=1;for(let a=0,l=n.length;a<l;a+=1)if(n[a]==="y2")i.push([-1,-1,-1]);else{let c=[0,0,0];for(let u=0,f=s.length;u<f;u+=1)if(n[a].startsWith(s[u])){let h=parseInt(n[a].substr(s[u].length,1));n[a].indexOf("-")>-1&&(h=-h),c[0]=r[u],c[o]=h;break}(c[1]!=0||c[2]!=0)&&i.push(c)}}return i}static parseNNNString(e){return new tF().input(e)}}class yt{constructor(e){ke(this,"stickers");ke(this,"boundingBox");ke(this,"hasCallback");ke(this,"callback");ke(this,"anchor");ke(this,"_cached_mass_center");ke(this,"raw");ke(this,"allPointsRef");this.stickers=(e||[]).map(n=>n.clone()),this.updateMassCenter(),this.hasCallback=!1,this.callback=null,this.allPointsRef=[],this.computeBoundingBox()}updateMassCenter(e){let n=this.getAllPoints(),i=n.reduce((s,r)=>s.add(r),new $e);return this._cached_mass_center=i.div(n.length||1),e&&this.stickers.forEach(s=>s.updateMassCenter()),this._cached_mass_center}get length(){return this.stickers.length}get totalPoints(){let e=0,n=this.stickers;for(let i=0,s=n.length;i<s;i+=1)e+=n[i].points.length;return e}getAllPoints(){let e=[];for(let n=0,i=this.stickers.length;n<i;n+=1)e.push(...this.stickers[n]._generator.points);return e}getMassCenter(e=!0){return e||this.updateMassCenter(),this._cached_mass_center}setColor(e){for(let n=0,i=Math.min(e.length,this.stickers.length);n<i;n+=1)this.stickers[n].color=e[n]}add(e,n){return n?(this.stickers.forEach(i=>i.add(e,!0)),this.boundingBox.forEach(i=>i.add(e,!0)),this._cached_mass_center.add(e,!0),this.anchor&&this.anchor.add(e,!0),this):this.clone().add(e,!0)}sub(e,n){return n?(this.stickers.forEach(i=>i.sub(e,!0)),this.boundingBox.forEach(i=>i.sub(e,!0)),this._cached_mass_center.sub(e,!0),this.anchor&&this.anchor.sub(e,!0),this):this.clone().sub(e,!0)}mul(e,n){return n?(this.stickers.forEach(i=>i.mul(e,!0)),this.boundingBox.forEach(i=>i.mul(e,!0)),this._cached_mass_center.mul(e,!0),this.anchor&&this.anchor.mul(e,!0),this):this.clone().mul(e,!0)}div(e){return self?(this.stickers.forEach(n=>n.div(e,!0)),this.boundingBox.forEach(n=>n.div(e,!0)),this._cached_mass_center.div(e,!0),this.anchor&&this.anchor.div(e,!0),this):this.clone().div(e)}rotate(e,n,i,s){if(s)return this.stickers.map(o=>o.rotate(e,n,i,!0)),this._cached_mass_center.rotate(e,n,i,!0),this.anchor&&this.anchor.rotate(e,n,i,!0).toNormal(),this;let r=new yt;return r.stickers=this.stickers.map(o=>o.rotate(e,n,i)),r._cached_mass_center=this._cached_mass_center.rotate(e,n,i),this.anchor&&(r.anchor=this.anchor.rotate(e,n,i).toNormal()),r}direction(e,n,i,s,r){let o=[0,0,0],a=this.stickers,l=0,c=r||(()=>!0);for(let u=0,f=a.length;u<f;u+=1)if(c(a[u])&&(l+=1,o[a[u].direction(e,n,i,s)+1]+=1,o[0]>0&&o[2]>0))return 0;return o[1]===l?0:o[0]>0?-1:1}direction1(e,n,i){let s=[0,0,0],r=this.stickers,o=r.length;for(let a=0;a<o;a+=1)if(s[r[a].direction1(e,n,i)+1]+=1,s[0]>0&&s[2]>0||s[1]>0)return 0;return s[0]?-1:1}reflect(e,n,i,s){let r=this.clone();return r.stickers=r.stickers.map(o=>o.reflect(e,n,i)),r.anchor&&(r.anchor=r.anchor.reflect(e,n,i)),s&&r.stickers.forEach(o=>o.reverse(!0)),r}reflect1(e,n,i){let s=this.clone();return s.stickers=s.stickers.map(r=>r.reflect1(e,n)),s.anchor&&(s.anchor=s.anchor.reflect1(e,n)),i&&s.stickers.forEach(r=>r.reverse(!0)),s}reverse(){return new yt(this.stickers.map(e=>e.reverse()))}contains(e){for(let n=0,i=this.stickers.length;n<i;n+=1)if(this.stickers[n].color===e||this.stickers[n].oColor===e)return!0;return!1}clone(e){let n=new yt(this.stickers);return e&&this.hasCallback&&(n.hasCallback=this.hasCallback,n.callback=this.callback),this.anchor&&(n.anchor=this.anchor.clone()),n.allPointsRef=this.allPointsRef.map(i=>i.slice()),n}equal(e){let n=this.stickers,i=e.stickers;if(n.length!=i.length)return!1;for(let s=0,r=n.length;s<r;s+=1)if(!n[s].equal(i[s]))return!1;return!0}computeBoundingBox(){let n=this.stickers.map(i=>i.computeBoundingBox()).reduce((i,s)=>[Math.min(i[0],s[0].x),Math.min(i[1],s[0].y),Math.min(i[2],s[0].z),Math.max(i[3],s[1].x),Math.max(i[4],s[1].y),Math.max(i[5],s[1].z)],[1/0,1/0,1/0,-1/0,-1/0,-1/0]);return this.boundingBox=[new $e(n[0],n[1],n[2]),new $e(n[3],n[4],n[5])],this.boundingBox}}class He{constructor(e,n,i){ke(this,"points");ke(this,"color");ke(this,"oColor");ke(this,"_generator");ke(this,"_generated");ke(this,"vecs");ke(this,"boundingBox");ke(this,"_cached_mass_center");this.points=(e||[]).map(s=>s.clone()),this.oColor=n||"w",this.color=this.oColor,this.updateMassCenter(),this._generator=this,this._generated=this,this.vecs=(i||[]).map(s=>s.clone())}computeBoundingBox(){let e=this.points.reduce((n,i)=>[Math.min(n[0],i.x),Math.min(n[1],i.y),Math.min(n[2],i.z),Math.max(n[3],i.x),Math.max(n[4],i.y),Math.max(n[5],i.z)],[1/0,1/0,1/0,-1/0,-1/0,-1/0]);return this.boundingBox=[new $e(e[0],e[1],e[2]),new $e(e[3],e[4],e[5])]}updateMassCenter(){let e=this.points;return this._cached_mass_center=e.reduce((n,i)=>n.add(i),new $e).div(e.length||1),this._cached_mass_center}getMassCenter(){return this._cached_mass_center}add(e,n){if(n)return this.points.forEach(s=>s.add(e,!0)),this._cached_mass_center.add(e,!0),this;let i=this.clone(!0);return i.points=this.points.map(s=>s.add(e)),i._cached_mass_center=i._cached_mass_center.add(e),i}sub(e,n){if(n)return this.points.forEach(s=>s.sub(e,!0)),this._cached_mass_center.sub(e,!0),this;let i=this.clone(!0);return i.points=this.points.map(s=>s.sub(e)),i._cached_mass_center=i._cached_mass_center.sub(e),i}mul(e,n){if(n)return this.points.forEach(s=>s.mul(e,!0)),this._cached_mass_center.mul(e,!0),this;let i=this.clone(!0);return i.points=this.points.map(s=>s.mul(e)),i._cached_mass_center=i._cached_mass_center.mul(e),i}div(e,n){if(n)return this.points.forEach(s=>s.div(e,!0)),this._cached_mass_center.div(e,!0),this;let i=this.clone(!0);return i.points=this.points.map(s=>s.div(e)),i._cached_mass_center=i._cached_mass_center.div(e),i}dot(e){return this.points.map(n=>n.dot(e))}getOrientation(){let e=this.points.length,n=[0,1,2].map(i=>Math.round(i/3*e));return $e.cross(this.points[n[0]],this.points[n[1]],this.points[n[2]]).unit()}normal(){return this.getOrientation()}rotate(e,n,i,s,r){if(s)return this.points.forEach(a=>a.rotate(e,n,i,!0)),this._cached_mass_center.rotate(e,n,i,!0),this.color=r||this.color,this.vecs.forEach(a=>a.rotate(te,n,i,!0)),this;let o=this.clone(!0);return o.points=this.points.map(a=>a.rotate(e,n,i)),o._cached_mass_center=this._cached_mass_center.rotate(e,n,i),o.color=r||o.color,o.vecs.map(a=>a.rotate(te,n,i,!0)),o}clone(e){let n=new He(e?[]:this.points,this.color);return n.color=this.color,n.oColor=this.oColor,n._cached_mass_center=this._cached_mass_center.clone(),n.vecs=this.vecs.map(i=>i.clone()),n}direction1(e,n,i){let s=[0,0,0],r=i?[this.getMassCenter()]:this.points,o=r.length;for(let a=0;a<o;a+=1)if(s[$e.direction1(e,n,r[a])+1]+=1,s[0]>0&&s[2]>0)return 0;return s[1]===o?0:s[0]>0?-1:1}direction(e,n,i,s){let r=[0,0,0],o=s?[this.getMassCenter()]:this.points;for(let a=0,l=o.length;a<l;a+=1)r[$e.direction(e,n,i,o[a])+1]+=1;return r[0]>0&&r[2]>0||r[1]===o.length?0:r[0]>0?-1:1}reflect(e,n,i,s){return this.reflect1(e,$e.cross(e,n,i),s)}reflect1(e,n,i){let s=n.unit(),r=this.clone(!0),o=a=>a.sub(e).dot(s);return r.points=this.points.map(a=>a.add(s.mul(-2*o(a)))),i&&r.reverse(!0),r._cached_mass_center=r._cached_mass_center.add(s.mul(-2*o(r._cached_mass_center))),r.vecs=r.vecs.map(a=>a.add(s.mul(-2*a.dot(s)))),r}reverse(e){if(e)return this.points.reverse(),this.points.unshift(this.points[this.points.length-1]),this.points.pop(),this;let n=this.clone(!0);return n.points=this.points.map(i=>i.clone()).reverse(),n.points.unshift(n.points[n.points.length-1]),n.points.pop(),n}contains(e){let n=this.points[this.points.length-1],i=0,s;for(const r of this.points){if(s=n.sub(r).cross(n.sub(e)),i<0&&s.z>0||i>0&&s.z<0)return!1;s.z!==0&&(i=s.z),n=r}return!0}equal(e){let n=this.points,i=e.points;if(this.color!=e.color||n.length!=i.length)return!1;for(let s=0,r=n.length;s<r;s+=1)if(n[s].sub(i[s]).abs()>1e-6)return!1;return!0}}class su extends He{constructor(n,i,s,r){super(n,s,r);ke(this,"faces");this.faces=i.map(o=>o.map(a=>a))}getOrientation(){let n=this.faces.length;return this.faces.reduce((s,r)=>s.add($e.cross(this.points[r[0]],this.points[r[1]],this.points[r[2]]).unit()),new $e).div(n,!0).unit()}clone(n){let i=new su(n?[]:this.points,this.faces);return i.color=this.color,i.oColor=this.oColor,i._cached_mass_center=this._cached_mass_center.clone(),i.vecs=this.vecs.map(s=>s.clone()),i}}function $n(t,e){let n=e||["y","o","g","w","r","b"],i=t.getAllStickers(),s=t.pieces;for(let r=0,o=i.length;r<o;r+=1){let l=i[r].points;for(let c=0,u=l.length;c<u;c+=1)for(let f=-1;f<=1;f+=1)Math.abs(l[c].x-f)<1e-6&&(l[c].x=f),Math.abs(l[c].y-f)<1e-6&&(l[c].y=f),Math.abs(l[c].z-f)<1e-6&&(l[c].z=f)}for(let r=0,o=i.length;r<o;r+=1){let a=i[r],l=[0,1,2].map(p=>Math.round(p/3*a.points.length)),c=a.points[l[0]],u=a.points[l[1]],f=a.points[l[2]],h=[0,0,0],d=!1;for(let p=0,_=s.length;p<_;p+=1)if(h[s[p].direction(c,u,f,!0)+1]+=1,h[0]>0&&h[2]>0){a.color="x",a.oColor="x",d=!0;break}if(!d)if(h[0]>0){let p=a.getOrientation();for(let _=0,m=n.length;_<m;_+=1)if(p.sub(t.faceVectors[_]).abs()<1e-6){a.color=n[_],a.oColor=n[_];break}}else a.color="x",a.oColor="x"}}function Qn(){let t=[],e=this.pieces;for(let n=0,i=e.length;n<i;n+=1){let s=e[n].stickers;t.push(...s)}return t}function rA(t,e){const n=e||.925;let i=t.getOrientation(),s=t.updateMassCenter();return t.sub(s).mul(n).add(s).add(i.mul(.005))}function iF(t,e,n,i){const s=e||.11,r=i||10,o=[1,2,1],a=n||.925;let c=t.points,u=new He;for(let f=0,h=c.length;f<h;f+=1){let d=c[(f+1)%h].sub(c[f]).mul(s),p=c[(f-1+h)%h].sub(c[f]).mul(s),_=[c[f].add(p),c[f],c[f].add(d)];for(let m=0;m<=r;m+=1){let v=m/r;u.points.push(_.reduce((g,b,y)=>g.add(b.mul(o[y]*Math.pow(1-v,2-y)*Math.pow(v,y))),new $e))}}return rA(u,a)}function sF(t,e,n,i,s,r){if(t.isRounded)return;const o=s||(l=>!(l instanceof su));t.isRounded=!0;let a=t.pieces;for(let l=0,c=a.length;l<c;l+=1){let u=a[l],f=u.stickers;for(let h=0,d=f.length;h<d;h+=1){if(!o(f[h]))continue;let p=r?rA(f[h],n):iF(f[h],e,n,i);p.updateMassCenter(),p.color=f[h].color,p.oColor=f[h].oColor,p.vecs=f[h].vecs.map(_=>_.clone()),f[h].color="d",f[h].oColor="d",f[h].vecs.length=0,u.stickers.push(p),p._generator=f[h],f[h]._generated=p}}}function rF(t){let e=t.pieces;for(let n=0,i=e.length;n<i;n+=1){let s=e[n].stickers,r=e[n].stickers.reduce((o,a)=>(a.color!="x"&&a.color!="d"&&o.push(a.getOrientation()),o),[]);for(let o=0,a=s.length;o<a;o+=1)s[o].color!="x"&&s[o].color!="d"&&(s[o].vecs=r.map(l=>l.clone()))}}function Yc(t){if(Array.isArray(t)||typeof t=="string")return t[~~(Math.random()*t.length)];if(typeof t=="object"){let e=Object.keys(t);return t[e[~~(Math.random()*e.length)]]}return~~(Math.random()*t)}function oF(t,e,n){const i=[t,e,n].sort(),s=i[0],r=i[1],o=i[2],a=s==r&&r==o,l=i.reduce((y,w)=>Math.min(y,2/w),2),c={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,dims:i,faceColors:["w","r","g","y","o","b"],move:()=>!1,roundParams:[]};let u=c.faceColors;c.getAllStickers=Qn.bind(c);const f=ve.mul(s).add(Ge.mul(r)).add(G.mul(o)).mul(l/2),h=Math.PI,d=h/2,p=[be,me,G],_=[[G,d*(1+(s===1?1:(s^r)&1))],[me,d*(1+(s===1?1:(s^o)&1))],[be,d*(1+(s===1?1:(r^o)&1))]];for(let y=0;y<o;y+=1)for(let w=0;w<r;w+=1)for(let x=0;x<s;x+=1){let S=f.add(Pe.mul(y).add(me.mul(w)).add(be.mul(x)).mul(l)),T=S.add(me.add(be).add(Pe).mul(l/2)),A=new yt,C=new He([S,S.add(me.mul(l)),S.add(me.add(be).mul(l)),S.add(be.mul(l))],u[0]),k=new He([S,S.add(Pe.mul(l)),S.add(Pe.add(me).mul(l)),S.add(me.mul(l))],u[4]);C.vecs=p.map(L=>L.clone()),k.vecs=p.map(L=>L.clone()),(!a||y==0)&&A.stickers.push(C),(!a||x==s-1)&&A.stickers.push(k.rotate(T,G,h)),(!a||w==r-1)&&A.stickers.push(k.rotate(T,G,d)),(!a||y==o-1)&&A.stickers.push(C.rotate(T,be,h)),(!a||x==0)&&A.stickers.push(k),(!a||w==0)&&A.stickers.push(k.rotate(T,G,-d)),A.stickers.length&&(A.stickers.length===1&&a&&((y==0||y==o-1)&&o>1?A.stickers.push(A.stickers[0].rotate(T,be,h)):((x==0||x==s-1)&&s>1||(w==0||w==r-1)&&r>1)&&A.stickers.push(A.stickers[0].rotate(T,G,h))),A.updateMassCenter(),c.pieces.push(A))}let m=c.pieces;const v="URFDLB";let g=f.add(be.mul(s*l)).add(me.mul(r*l)).add(Pe.mul(o*l)),b=[[f,f.add(me),f.add(be)],[g,g.add(Ge),g.add(G)],[g,g.add(G),g.add(ve)],[g,g.add(ve),g.add(Ge)],[f,f.add(Pe),f.add(me)],[f,f.add(be),f.add(Pe)]];return c.move=function(y){for(let w=0,x=y.length;w<x;w+=1){let S=y[w],T=v.indexOf(S[1]),A=S[0]===s?S[0]+1:S[0],C=S[2];const k=b[T],F=$e.cross(k[0],k[1],k[2]).unit().mul(-1),U=k.map(B=>B.add(F.mul(l*A))),N=Math.PI/2*C;for(let B=0,W=m.length;B<W;B+=1){let ee=m[B].direction(U[0],U[1],U[2],!0);if(ee===0)return console.log("Invalid move. Piece intersection detected.","URFDLB"[T],C,S),console.log("Piece: ",B,m[B],U),!1;ee>0&&m[B].stickers.map(K=>K.rotate(te,F,N,!0))}}return!0},c.toMove=function(y,w,x){let S=w.updateMassCenter(),T=m.filter(C=>C.direction1(S,x)===0),A=_.map(C=>[C[0].cross(x).abs2(),C[1]]).sort((C,k)=>C[0]-k[0]);return{pieces:T,ang:A[0][1]}},c.scramble=function(){let w=[];for(let x=0;x<100;x+=1)w.push([Yc(s-1)+1,Yc(v),Yc(3)+1]);c.move(w)},c.rotation={x:h/6,y:-h/4,z:0},c.faceVectors=[G,be,me,Pe,ve,Ge],$n(c,c.faceColors),c}function aF(){let t={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,faceColors:["w","r","g","y","o","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=1,n=Math.PI,i=n/2;let s=new yt([new He([G.add(Ge).mul(e),G.add(ve).mul(e),G.add(me).mul(e),G.add(be).mul(e)])]);s.stickers[0].vecs=[G.add(Ge).add(ve).unit(),G.add(Ge).add(be).unit(),G.add(me).add(ve).unit(),G.add(me).add(be).unit()];let r=new He([G.add(be).mul(e),G.add(me).mul(e),G.add(me).add(be).mul(e)]),o=G.add(me).add(be).mul(e),a=new yt([r,r.rotate(o,G,i).rotate(o,be,i),r.rotate(o,Pe,i).rotate(o,Ge,i)]);a.stickers.forEach(f=>{f.vecs=[G.add(be).add(Ge).unit(),Pe.add(be).add(me).unit(),G.add(ve).add(me).unit()]});for(let f=0;f<4;f+=1)t.pieces.push(s.rotate(te,be,f*i));t.pieces.push(s.rotate(te,Ge,i)),t.pieces.push(s.rotate(te,me,i));for(let f=0;f<=1;f+=1)for(let h=0;h<4;h+=1)t.pieces.push(a.rotate(te,be,f*i).rotate(te,G,h*i));const l="URLB";let c=t.pieces,u=[[be.add(G).mul(e),me.add(G).mul(e),me.add(ve).mul(e)],[Ge.add(G).mul(e),be.add(me).mul(e),be.add(G).mul(e)],[be.add(me).mul(e),ve.add(G).mul(e),G.add(me).mul(e)],[ve.add(G).mul(e),be.add(Ge).mul(e),Ge.add(G).mul(e)]];return t.move=function(f){for(let h=0,d=f.length;h<d;h+=1){let p=f[h],_=p[0],m=p[1];const v=u[_],b=$e.cross(v[0],v[1],v[2]).unit().mul(-1),y=2*Math.PI/3*m;for(let w=0,x=c.length;w<x;w+=1){let S=c[w].direction(v[0],v[1],v[2]);if(S===0){console.log("Invalid move. Piece intersection detected.",l[_],m,p),console.log("Piece: ",w,c[w],v);return}S<0&&c[w].stickers.map(T=>T.rotate(te,b,y,!0))}}},t.toMove=function(f,h,d){let p=h.updateMassCenter();return{pieces:c.filter(m=>m.direction1(p,d)>=0),ang:2*n/3}},t.rotation={x:Math.PI/6,y:-Math.PI/4,z:0},t.faceVectors=[G,be,me,Pe,ve,Ge],$n(t,t.faceColors),t}function lF(){const t={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,faceColors:["w","b","r","y","g","o"],move:()=>!0,roundParams:[null,.95]};t.getAllStickers=Qn.bind(t);const e=1,n=2*e/3,i=e*Math.sqrt(2),s=Math.PI,r=s/2,o=s/6,a=i*Math.sin(o)/Math.sin(7*s/12);let l=t.pieces,c=new yt([new He([ve.add(Ge).add(G).mul(e),ve.add(Ge).add(G).mul(e).add(me.mul(a)),G.mul(e),ve.add(Ge).add(G).mul(e).add(be.mul(a))]),new He([ve.add(Ge).add(G).mul(e),ve.add(Ge).add(G).mul(e).add(Pe.mul(n)),ve.add(Ge).add(G).mul(e).add(Pe.mul(n)).add(me.mul(a)),ve.add(Ge).add(G).mul(e).add(me.mul(a))])]);c.stickers.push(c.stickers[0].add(Pe.mul(n)).reverse()),c.stickers.push(c.stickers[1].rotate(ve.add(Ge).add(G).mul(e),Pe,r).add(be.mul(a)));let u=new yt([new He([be.add(G).add(Ge).mul(e).add(ve.mul(a)),be.add(G).add(Ge).mul(e).add(ve.mul(a)).add(Pe.mul(n)),ve.add(G).add(Ge).mul(e).add(be.mul(a)).add(Pe.mul(n)),ve.add(G).add(Ge).mul(e).add(be.mul(a))]),new He([ve.add(G).add(Ge).mul(e).add(be.mul(a)),G.mul(e),be.add(G).add(Ge).mul(e).add(ve.mul(a))])]);c.stickers.forEach(p=>{p.vecs=[G.clone()]}),u.stickers.forEach(p=>{p.vecs=[G.clone()]});let f=new yt([new He([ve.add(Ge).add(G).mul(e).add(Pe.mul(n)),ve.add(Ge).add(Pe).mul(e).add(G.mul(n)),ve.add(me).add(Pe).mul(e).add(G.mul(n)),ve.add(me).add(G).mul(e).add(Pe.mul(n))]),new He([ve.add(me).add(G).mul(e).add(Pe.mul(n)),ve.add(me).add(Pe).mul(e).add(G.mul(n)),ve.add(me).add(Pe).mul(e).add(G.mul(n)).add(be.mul(a)),ve.add(me).add(G).mul(e).add(Pe.mul(n)).add(be.mul(a))]),new He([ve.add(me).add(G).mul(e).add(Pe.mul(n)).add(be.mul(a)),ve.add(me).add(Pe).mul(e).add(G.mul(n)).add(be.mul(a)),be.add(Ge).add(Pe).mul(e).add(G.mul(n)).add(ve.mul(a)),be.add(Ge).add(G).mul(e).add(Pe.mul(n)).add(ve.mul(a))]),new He([be.add(Ge).add(G).mul(e).add(Pe.mul(n)).add(ve.mul(a)),be.add(Ge).add(Pe).mul(e).add(G.mul(n)).add(ve.mul(a)),ve.add(Ge).add(Pe).mul(e).add(G.mul(n)),ve.add(Ge).add(G).mul(e).add(Pe.mul(n))]),new He([ve.add(Ge).add(G).mul(e).add(Pe.mul(n)),ve.add(me).add(G).mul(e).add(Pe.mul(n)),ve.add(me).add(G).mul(e).add(Pe.mul(n)).add(be.mul(a)),be.add(Ge).add(G).mul(e).add(Pe.mul(n)).add(ve.mul(a))]),new He([ve.add(Ge).add(Pe).mul(e).add(G.mul(n)),ve.add(me).add(Pe).mul(e).add(G.mul(n)),ve.add(me).add(Pe).mul(e).add(G.mul(n)).add(be.mul(a)),be.add(Ge).add(Pe).mul(e).add(G.mul(n)).add(ve.mul(a))]).reverse()]),h=f.stickers[2].getOrientation();f.stickers.forEach(p=>{p.vecs=[h.mul(-1),G.clone()]});for(let p=0;p<4;p+=1)l.push(u.rotate(te,G,p*r)),l.push(c.rotate(te,G,p*r));for(let p=0,_=l.length;p<_;p+=1)l.push(l[p].rotate(te,be,s));l.push(f),l.push(f.rotate(te,G,s));let d=[f.stickers[2].clone().points,c.stickers[2].clone().points.reverse(),f.stickers[5].clone().points];return t.move=function(p){for(let _=0,m=p.length;_<m;_+=1){let v=p[_],g=v[0],b=v[1];const y=d[g],x=$e.cross(y[0],y[1],y[2]).unit().mul(-1),S=o*b;let T=[];for(let A=0,C=l.length;A<C;A+=1){let k=l[A].direction(y[0],y[1],y[2],!1,L=>L.color!="x"&&L.color!="d");if(k===0)return console.log("Invalid move. Piece intersection detected.",_,"/UD"[g],b,v),console.log("Piece: ",A,l[A],y),!1;k>0&&T.push(l[A])}T.forEach(A=>A.stickers.map(C=>C.rotate(te,x,S,!0)))}return!0},t.toMove=function(p,_,m){let v=_.vecs[0].cross(G).abs()<1e-6?o:s,g=[];if(v>o&&m.cross(G).abs()>1e-6)t.move([[0,6]])&&(t.move([[0,6]]),g=l.filter(b=>b.direction1(m.mul(.06),m)===0));else{let b=_.updateMassCenter(),y=v>o;g=l.filter(w=>y?w.direction1(b,m)===0:w.direction1(b,m)>=0)}return{pieces:g,ang:v}},t.rotation={x:o,y:-o,z:0},t.faceVectors=[G,be,me,Pe,ve,Ge],$n(t,t.faceColors),t}function cF(t){let e={center:new $e(0,0,0),palette:Kn,pieces:[],rotation:{},faceVectors:[],getAllStickers:null,faceColors:["g","b","y","r"],move:()=>!0,dims:[],roundParams:[]};e.getAllStickers=Qn.bind(e);const n=Math.PI,i=n/3,s=2.6,r=s/Math.sqrt(3),o=Math.sqrt(s**2-r**2),a=Math.sqrt(6)*s/12;let l=G.mul(o-a),c=Pe.mul(a).add(me.mul(r)).rotate(te,G,i),u=c.rotate(te,G,2*i),f=u.rotate(te,G,2*i);e.pieces=[];const h=[l,c,u,f],d=[[f.sub(l).div(t),c.sub(f).div(t)],[u.sub(c).div(t),l.sub(u).div(t)],[c.sub(u).div(t),f.sub(c).div(t)],[l.sub(f).div(t),u.sub(l).div(t)]];e.faceVectors=[d[0][0].cross(d[0][1]).unit(),d[1][0].cross(d[1][1]).unit(),d[2][0].cross(d[2][1]).unit(),d[3][0].cross(d[3][1]).unit()];let p=function(b,y,w){let x=[b,y,w],S=x[2].sub(x[1]).cross(x[1].sub(x[0])).unit().mul(o/t),T=x.reduce((A,C)=>A.add(C),new $e(0,0,0)).div(3).add(S);return new yt([new He(x),new He([T,T,T])])};for(let b=0;b<4;b+=1)for(let y=0;y<t;y+=1)for(let w=0;w<=y;w+=1)e.pieces.push(p(h[b].add(d[b][0].mul(y).add(d[b][1].mul(w))),h[b].add(d[b][0].mul(y+1).add(d[b][1].mul(w))),h[b].add(d[b][0].mul(y+1).add(d[b][1].mul(w+1))))),w<y&&e.pieces.push(p(h[b].add(d[b][0].mul(y).add(d[b][1].mul(w))),h[b].add(d[b][0].mul(y+1).add(d[b][1].mul(w+1))),h[b].add(d[b][0].mul(y).add(d[b][1].mul(w+1)))));const _="URLB";let m=e.pieces,v=[[f,u,c],[f,l,u],[c,u,l],[c,l,f]],g=l.sub(f).div(t).y;return m.forEach(b=>b.stickers.forEach(y=>y.vecs=e.faceVectors.map(w=>w.clone()))),e.move=function(b){for(let y=0,w=b.length;y<w;y+=1){let x=b[y],S=x[0],T=x[3],A=x[1];const C=v[S],L=$e.cross(C[0],C[1],C[2]).unit().mul(-1),F=C.map(N=>N.add(L.mul(g*T))),U=2*Math.PI/3*A;for(let N=0,B=m.length;N<B;N+=1){let W=m[N].direction(F[0],F[1],F[2]);if(W===0)return console.log("Invalid move. Piece intersection detected.",_[S],A,x),console.log("Piece: ",N,m[N],F),!1;W<0&&m[N].stickers.map(ee=>ee.rotate(te,L,U,!0))}}return!0},e.toMove=function(b,y,w){let x=y.updateMassCenter();return{pieces:m.filter(T=>T.direction1(x,w)===0),ang:2*n/3}},$n(e,e.faceColors),e.rotation={x:Math.PI/6,y:-Math.PI/4,z:0},e}function uF(){let t={center:new $e(0,0,0),faceVectors:[],palette:Kn,pieces:[],rotation:{},getAllStickers:null,faceColors:["y","o","g","w","r","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=1,n=Math.PI,i=n/2,s=[Ge.add(G).cross(ve.add(me.div(2))).unit(),me.add(be).cross(Pe.add(Ge.div(2))).unit(),Ge.add(be.div(2)).cross(Pe.add(ve)).unit()];let r=G.add(me).mul(e),o=be.add(G).add(Ge).mul(e),a=Math.sqrt(e**2+(e/2)**2),l=n/4,c=Math.asin(e/2/a),u=l+c,f=e*Math.sin(l)/Math.sin(u),h=r.add(o.sub(r).unit().mul(f)),d=ve.add(G).add(Ge).mul(e),p=ve.add(G).add(me).mul(e),_=be.add(G).add(me).mul(e),m=d.add(p).div(2),v=m.add(o.sub(m).unit().mul(f)),g=v.rotate(te,Pe,i).rotate(te,me,i),b=new He([d,m,v]);new He([d,v,o]);let y=new He([o,v,h]),w=new He([v,m,r,h]),x=new He([o,h,_]),S=new He([m,p,r]),T=new He([h,r,_]),A=[r,o,r.rotate(p,Ge,i)],C=[o,m,m.rotate(p,ve,i)],k=d.project(A[0],A[1],A[2]),L=m.project(A[0],A[1],A[2]),F=v.project(A[0],A[1],A[2]),U=g.project(A[0],A[1],A[2]),N=h.project(C[0],C[1],C[2]),B=r.project(C[0],C[1],C[2]),W=new He([r,B,L,m]),ee=new yt([S,S.rotate(p,p,2*n/3),S.rotate(p,p,-2*n/3),new He([r,r.rotate(p,Ge,i),m]),W,W.rotate(p,p,2*n/3),W.rotate(p,p,-2*n/3)]),K=new yt([b,T.rotate(te,G,i).rotate(te,me,i),new He([d,v,F,k]),new He([v,m,L,F]),new He([m,g,U,L]),new He([g,d,k,U])]),ge=new yt([w,new He([v,m,L,F]),new He([v,h,N,F]),new He([h,r,B,N]),new He([r,m,L,B])]),se=new yt([y,new He([o,F,v]),new He([h,v,F,N]),new He([o,h,N])]),X=new yt([x,new He([h,o,N]),K.stickers[5].rotate(p,p,-n*2/3)]);X.stickers.push(...X.rotate(te,o.add(_).div(2),n).stickers);let q=t.pieces;q.push(ee),q.push(K),q.push(ge),q.push(se),q.push(X),q.push(X.reflect(p,o,te).reverse());for(let Y=1,$=q.length;Y<$;Y+=1)q.push(q[Y].rotate(p,p,-n*2/3)),q.push(q[Y].rotate(p,p,n*2/3));for(let Y=0,$=5;Y<$;Y+=1)q.push(q[Y].rotate(te,G,n).rotate(te,ve,i));for(let Y=6,$=12;Y<$;Y+=1)q.push(q[Y].rotate(te,G,n).rotate(te,ve,i));return q.forEach(Y=>Y.stickers.forEach($=>$.vecs=s.map(ze=>ze.clone()))),t.toMove=function(Y,$,ze){let _e=Y.updateMassCenter();return{pieces:q.filter(Te=>Te.direction1(_e,ze)===0),ang:i}},t.rotation={x:Math.PI/6,y:-Math.PI/4,z:0},t.faceVectors=[G,be,me,Pe,ve,Ge],$n(t,t.faceColors),t}function fF(){let t={center:new $e(0,0,0),faceVectors:[],palette:Kn,pieces:[],rotation:{},getAllStickers:null,faceColors:["y","o","g","w","r","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=Math.sqrt(2),s=i/2,r=1,o=r*2/3,a=r*i/3,l=(r-a)*2;let c=ve.add(G).add(Ge).mul(r),u=ve.add(G).add(me).mul(r),f=be.add(G).add(Ge).mul(r),h=u.sub(c).unit(),d=f.sub(c).unit(),p=h.mul(l*s).rotate(te,G,e/4),_=new yt([new He([c.clone(),c.add(h.mul(a)),c.add(h.mul(a)).add(p),c.add(d.mul(a)).add(p),c.add(d.mul(a))]),new He([c.clone(),c.add(Pe.mul(o)),c.add(Pe.mul(o)).add(me.mul(a)),c.add(me.mul(a))]),new He([c.add(me.mul(a)),c.add(me.mul(a)).add(Pe.mul(o)),c.add(me.mul(a)).add(Pe.mul(o)).add(p),c.add(me.mul(a)).add(p)])]);_.stickers.push(_.stickers[0].add(Pe.mul(o)).reverse()),_.stickers.push(_.stickers[1].rotate(c,G,-n).add(be.mul(a))),_.stickers.push(_.stickers[2].add(be.sub(me).mul(a)).reverse());let m=new yt([new He([c.add(d.mul(a)),c.add(d.mul(a)).add(p),f.sub(d.mul(a))]),_.stickers[2].add(be.sub(me).mul(a)),_.stickers[2].rotate(c.add(me.mul(a)),G,n).add(be.sub(me).mul(a).add(p)),new He([c.add(be.mul(a)),c.add(be.mul(a+l)),c.add(be.mul(a+l)).add(Pe.mul(o)),c.add(be.mul(a)).add(Pe.mul(o))])]);m.stickers.push(m.stickers[0].add(Pe.mul(o)));let v=[m,_];for(let x=1;x<=3;x+=1)v.push(v[0].rotate(te,G,x*n)),v.push(v[1].rotate(te,G,x*n));let g=new He([0,1,2,3].map(x=>v[x*2+1].stickers[0].points[2].clone()));v.push(new yt([g,g.rotate(G.mul(2/3),be,e)]));let b=v.map(x=>x.add(Pe.mul(o))),y=v.map(x=>x.rotate(te,be,e));b.pop();let w=t.pieces;return w.push(...v),w.push(...b),w.push(...y),w.forEach(x=>{x.updateMassCenter(),x.stickers.forEach(S=>{S.vecs=[be,me,G].map(T=>T.rotate(te,G,e/4))})}),t.toMove=function(x,S,T){let A=x.updateMassCenter();return{pieces:w.filter(k=>k.direction1(A,T)===0),ang:n}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,be,me,Pe,ve,Ge],$n(t,t.faceColors),t}function hF(){const t={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,faceColors:["y","o","g","w","r","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=2*e/3;let s=ve.add(G).add(Ge),r=be.add(G).add(me),o=new He([s]),a=[];for(let f=0,h=25;f<=h;f+=1){let d=f/h;a.push(r.add(ve.mul(2).rotate(te,Pe,d*n)))}o.points.push(...a.map(f=>f.clone()));let l=new yt([new He([...a.map(f=>f.clone()).reverse(),...a.map(f=>f.rotate(te,G,e)).reverse()])]);l.stickers[0].vecs=[s.unit(),r.unit()],l.stickers[0].points.pop();let c=new yt([o,o.rotate(te,s,i),o.rotate(te,s,-i)]);c.stickers.forEach(f=>f.vecs=[s.unit()]);let u=t.pieces;return u.push(c,c.rotate(te,G,e),c.rotate(te,ve,e),c.rotate(te,ve,e).rotate(te,G,e),l,l.rotate(te,G,n).rotate(te,be,n),l.rotate(te,G,n).rotate(te,ve,n),l.rotate(te,G,n).rotate(te,me,n),l.rotate(te,G,n).rotate(te,Ge,n),l.rotate(te,G,e).rotate(te,be,e)),t.toMove=function(f,h,d){let p=h.updateMassCenter();return{pieces:u.filter(m=>m.direction1(p,d)===0),ang:i}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,be,me,Pe,ve,Ge],$n(t,t.faceColors),t}function dF(){let t={center:null,faceColors:null,faceVectors:null,getAllStickers:null,move:()=>!0,palette:{black:"#181818",white:"#aaa",gray:"#7f7f7f"},pieces:null,rotation:{x:0,y:0,z:0},dims:null,roundParams:[],isRounded:!0},e=[!1,!1,!1,!1],n=[[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]]],i=function(r,o,a,l){n[r][o][a]=((n[r][o][a]+l)%12+12)%12},s=[[0,0,0],[0,0,0],[0,0,0]];return t.move=function(r){let o=!0,a=0;for(let l=0,c=r.length;l<c;l+=1){let u=r[l],f=u[0],h=u[1],d=u[2];if(u[0]===-1){a^=1;continue}for(let p=0;p<3;p+=1)for(let _=0;_<3;_+=1)s[p][_]=0;for(let p=0,_=8;p<4;p+=1,_>>=1)if(isNaN(h)||isNaN(d)?(o&&(e.length=0,e.push(!1,!1,!1,!1),o=!1),e[p]=f&_?!0:e[p]):e[p]=!!(f&_),e[p]){let m=p>>1,v=p&1;s[m][v]=s[m+1][v]=s[m][v+1]=s[m+1][v+1]=1}if(!isNaN(h)&&!isNaN(d))for(let p=0;p<3;p+=1)for(let _=0;_<3;_+=1)s[p][_]&&(i(a,p,_,h),(p&1)==0&&(_&1)==0&&i(1-a,p,2-_,-h))}},t.raw=[e,n],t}function pF(t,e){const n=Math.max(2,~~t),i=~~(n/2),s={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,dims:[],faceColors:["white","yellow","violet","green","red","blue","orange","lblue","lyellow","pink","lgreen","gray"],move:()=>!1,roundParams:[]};s.getAllStickers=Qn.bind(s);let r=s.pieces;const o=Math.PI,a=Math.sqrt,l=a((50+22*a(5))/5)/4,c=a(6)/4*a(3+a(5)),u=1,f=u/l,h=f*c,d=a(h**2-u**2),p=2/(2*n-n%2),_=o-Math.acos(Math.tan(18*o/180)*Math.tan(54*o/180)),m=2*o/5,v=o*2/3;let g=[];for(let se=0;se<5;se+=1)g.push(G.mul(u).add(Ge.mul(d).rotate(te,G,se*m)));const b=g[1].sub(g[0]).mul(p),y=b.rotate(te,g[0],-v),w=g[4].sub(g[0]).mul(p),x=g[2].sub(g[1]).mul(p),S=g[0].sub(g[1]).mul(p);let T=[],A=G.rotate(te,g[0],v),C=G.rotate(te,g[0],-v);for(let se=0;se<=i;se+=1)for(let X=0;X<i;X+=1){if(se<i){let q=new He([g[0].add(b.mul(se)).add(w.mul(X)),g[0].add(b.mul(se+1)).add(w.mul(X)),g[0].add(b.mul(se+1)).add(w.mul(X+1)),g[0].add(b.mul(se)).add(w.mul(X+1))],null,[G,A,C]);T.push(new yt([q,q.add(y)]))}if(se==i){let q=new He([g[0].add(b.mul(i)).add(w.mul(X)),g[1].add(S.mul(i)).add(x.mul(X)),g[1].add(S.mul(i)).add(x.mul(X+1)),g[0].add(b.mul(i)).add(w.mul(X+1))],null,[G,C]);T.push(new yt([q,q.sub(q.getMassCenter()).div(2).add(q.getMassCenter().add(y.proj(Pe)))]))}}let k=[g[0].add(b.add(w).mul(i))];for(let se=1;se<5;se+=1)k.push(k[0].rotate(te,G,m*se));for(let se=1;se<5;se+=1)for(let X=0,q=i*(i+1);X<q;X+=1)T.push(T[X].rotate(te,G,se*m));let L=new yt([new He(k,"b"),new He(k).add(new $e(0,y.y,0))]);T.push(L);let F=[...T];for(let se=0;se<5;se+=1){let X=g[se];for(let q=0,Y=T.length;q<Y;q+=1)F.push(T[q].rotate(X,X,v))}let U=F.map(se=>se.reflect1(te,G,!0).rotate(te,G,m/2,!0));r.push(...F),r.push(...U);let N=new He([g[0],g[0].add(b),g[0].add(b.add(w)),g[0].add(w)],"white"),B=new yt([N,N.rotate(g[0],G,3*o/5).rotate(g[0],w,_-o),N.rotate(g[0],G,-3*o/5).rotate(g[0],b,o-_)]),W=[];[0,1,2,3,4].forEach(se=>W.push(L.reflect(te,g[se],g[(se+1)%5],!0))),W.push(...W.map(se=>se.reflect(te,te.add(be),te.add(me),!0).rotate(te,G,o/5))),s.faceVectors.push(L.stickers[0].getOrientation());for(let se=0,X=W.length;se<X;se+=1)s.faceVectors.push(W[se].stickers[0].getOrientation());s.faceVectors.push(L.stickers[0].getOrientation().rotate(te,be,o));let ee=Math.abs(B.stickers[1].points[2].sub(g[0]).y),K=[L.stickers[0],W[1].stickers[0]].map(se=>{let X=se.getMassCenter();return se.points.map(q=>q.add(X.unit().mul(-ee)))});s.move=function(se){for(let X=0,q=se.length;X<q;X+=1){let Y=se[X],$=Y[0],ze=Y[1];const _e=K[$].map(De=>De.clone()),pe=$e.cross(_e[0],_e[1],_e[2]).unit(),Te=m*ze;for(let De=0,je=r.length;De<je;De+=1){let de=r[De].direction(_e[0],_e[1],_e[2],!0);if(de===0)return console.log("Invalid move. Piece intersection detected.","URFDLB"[$],ze,Y),console.log("Piece: ",De,r[De],_e),!1;if(de*Y[2]>0)for(let Ae=0,Oe=r[De].stickers.length;Ae<Oe;Ae+=1)r[De].stickers[Ae].rotate(te,pe,Te,!0)}}return!0},s.toMove=function(se,X,q){let Y=X.getMassCenter();return{pieces:r.filter($=>$.direction1(Y,q)==0),ang:m}},s.rotation={x:o/6,y:-o/4,z:0},$n(s,s.faceColors),s.raw=[g,_,p,d,f];let ge=se=>se.stickers.filter(q=>q.points.length===5).length===2;for(let se=0,X=r.length;se<X;se+=1){let q=r[se];if(!ge(q)){for(let Y=0,$=q.stickers.length;Y<$;Y+=1){let ze=q.stickers[Y];e&&(ze.color==="x"||ze.color==="d")?(q.stickers.splice(Y,1),Y-=1,$-=1):ze.color=ze.color==="x"?"d":ze.color}q.stickers.length===0&&(r.splice(se,1),se-=1,X-=1)}}return s}function mF(t){const n={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,dims:[t,t,t],faceColors:["w","r","g","y","o","b"],move:()=>!1,roundParams:[]};n.faceColors,n.getAllStickers=Qn.bind(n);const i=Math.PI,s=i/2,r=[be,me,G],o=[[22/19,1,16/19],[25/19,1,13/19],[9/19,1,29/19]];let a=function(_,m){return m<1?o[_][0]:m<t-1?o[_][1]:o[_][2]},l=function(_,m){return m==0?0:m==1?o[_][0]:o[_][0]+(m-1)*o[_][1]};for(let _=0;_<t;_+=1)for(let m=0;m<t;m+=1)for(let v=0;v<t;v+=1){if(v!=0&&m!=0&&_!=0&&v!=t-1&&m!=t-1&&_!=t-1)continue;let g=Pe.mul(l(2,_)).add(me.mul(l(1,m))).add(be.mul(l(0,v))),b=a(0,v),y=a(1,m),w=a(2,_),x=g.add(be.mul(b).add(me.mul(y)).add(Pe.mul(w)).div(2)),S=new yt,T=new He([g,g.add(me.mul(y)),g.add(me.mul(y).add(be.mul(b))),g.add(be.mul(b))]),A=new He([g,g.add(Pe.mul(w)),g.add(Pe.mul(w).add(me.mul(y))),g.add(me.mul(y))]),C=new He([g,g.add(be.mul(b)),g.add(be.mul(b).add(Pe.mul(w))),g.add(Pe.mul(w))]);T.vecs=r.map(k=>k.clone()),A.vecs=r.map(k=>k.clone()),C.vecs=r.map(k=>k.clone()),S.stickers.push(T),S.stickers.push(A.rotate(x,G,i)),S.stickers.push(C.rotate(x,G,i)),S.stickers.push(T.rotate(x,be,i)),S.stickers.push(A),S.stickers.push(C),S.stickers.length===1&&((_==0||_==t-1)&&t>1?S.stickers.push(S.stickers[0].rotate(x,be,i)):((v==0||v==t-1)&&t>1||(m==0||m==t-1)&&t>1)&&S.stickers.push(S.stickers[0].rotate(x,G,i))),S.updateMassCenter(),n.pieces.push(S)}let c=n.pieces,f=function(){let m=c.map(v=>v.computeBoundingBox()).reduce((v,g)=>[Math.min(v[0],g[0].x),Math.min(v[1],g[0].y),Math.min(v[2],g[0].z),Math.max(v[3],g[1].x),Math.max(v[4],g[1].y),Math.max(v[5],g[1].z)],[1/0,1/0,1/0,-1/0,-1/0,-1/0]);return[new $e(m[0],m[1],m[2]),new $e(m[3],m[4],m[5])]}(),h=Pe.mul(l(2,1)).add(me.mul(l(1,1))).add(be.mul(l(0,1))),d=Pe.mul(l(2,t-1)).add(me.mul(l(1,t-1))).add(be.mul(l(0,t-1)));n.center=h.add(d).div(2);let p=f[0].add(f[1]).div(2);return c.forEach(_=>_.sub(p,!0).mul(2/t,!0)),n.center.sub(p,!0).mul(2/t,!0),n.toMove=function(_,m,v){let g=_.stickers.find(w=>w.color==="x"&&w.normal().cross(v).abs()<1e-6);if(!g)return{pieces:[],ang:s};g=g._generator;let b=g.updateMassCenter().add(g.normal().mul(-.01));return{pieces:c.filter(w=>w.direction1(b,v)===0),ang:s}},n.scramble=function(){let m=[G,Pe,me,Ge,ve,be];for(let v=0;v<100;v+=1){let g=Yc(m),b=n.toMove(Yc(c),null,g),y=1+Yc(3);b.pieces.forEach(w=>w.rotate(n.center,g,b.ang*y,!0))}},n.rotation={x:i/6,y:-i/4,z:0},n.faceVectors=[G,be,me,Pe,ve,Ge],$n(n,n.faceColors),c.forEach(_=>_.stickers.forEach(m=>m.color=m.color.match(/^[xd]$/)?m.color:"lightGray")),n}function gF(){const t={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,faceColors:["y","o","g","w","r","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=2*e/3;let s=t.pieces,r=ve.add(G).add(Ge),o=new yt([new He([ve.add(G).add(Ge),ve.add(G).add(me),G]),new He([ve.add(G).add(Ge),ve,ve.add(G).add(me)])]);o.stickers.forEach(a=>a.vecs=[ve.add(G).add(Ge).unit(),ve.add(G).add(me).unit()]);for(let a=0;a<4;a+=1)s.push(o.rotate(te,G,n*a)),s.push(o.rotate(te,G,n*a).rotate(te,me,e)),s.push(o.rotate(r,r,-2*e/3).rotate(te,G,n*a));return t.toMove=function(a,l,c){let u=l.updateMassCenter();return{pieces:s.filter(h=>h.direction1(u,c)===0),ang:i}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,be,me,Pe,ve,Ge],$n(t,t.faceColors),t}function aw(t,e){return Math.acos(t.unit().dot(e.unit()))}function _F(){const t={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,faceColors:["w","r","g","y","o","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=2*e/3,s=Math.sqrt(5),r=Math.sqrt((s-1)**2+(-s-1)**2),o=Math.sqrt(r**2-s**2);let a=t.pieces,l=ve.add(Ge).add(G),c=ve.add(me).add(G),u=be.add(Ge).add(G),f=be.add(me).add(G),h=G.add(be.add(me).mul(s)),d=G.add(be.add(Ge).mul(s)),p=new $e(s-o,1,0),_=p.rotate(te,Pe,n);const m=aw(p.sub(h),c.sub(h)),v=aw(_.sub(h),p.sub(h));let g=[],b=[],y=[],w=[],x=[],S=[];const T=10,A=10;for(let W=0;W<=T;W+=1){let ee=W/T;g.push(c.rotate(h,Pe,ee*m))}for(let W=0;W<=T;W+=1){let ee=W/T;b.push(l.rotate(d,G,ee*m))}for(let W=0;W<=A;W+=1){let ee=W/A;y.push(_.rotate(h,G,ee*v))}w=g.map(W=>W.clone()).reverse(),x=b.map(W=>W.clone()).reverse(),S=y.map(W=>W.clone()).reverse();let C=new He([ve.add(G),c,...g,...x,l]),k=new He([...b,...S,...w.map(W=>W.rotate(te,Pe,n))]),L=new He([0,1,2,3].reduce((W,ee)=>(W.push(...y.map(K=>K.rotate(te,G,ee*n))),W),[])),F=new yt([C,C.rotate(l,Ge,n).reverse()]),U=new yt([k]),N=new yt([L]);F.stickers.forEach(W=>W.vecs=[l.unit(),c.unit()]),U.stickers.forEach(W=>W.vecs=[l.unit(),c.unit(),be.add(Ge).add(G).unit()]),N.stickers.forEach(W=>W.vecs=[l.unit(),c.unit(),u.unit(),f.unit()]);let B=[0,1,2,3].reduce((W,ee)=>(W.push(U.rotate(te,G,n*ee)),W.push(U.rotate(l,l,-2*e/3).rotate(te,G,n*ee)),W.push(U.rotate(l,l,2*e/3).rotate(te,G,n*ee)),W),[]);for(let W=0;W<4;W+=1)a.push(F.rotate(te,G,n*W)),a.push(F.rotate(te,G,n*W).rotate(te,me,e)),a.push(F.rotate(l,l,-2*e/3).rotate(te,G,n*W)),a.push(N.rotate(te,me,n*W));return a.push(...B),a.push(...B.map(W=>W.rotate(te,me,e))),a.push(N.rotate(te,be,n),N.rotate(te,ve,n)),t.toMove=function(W,ee,K){let ge=new $e(Math.sign(K.x)/3,Math.sign(K.y)/3,Math.sign(K.z)/3);return{pieces:a.filter(X=>X.direction1(ge,K,!0)>=0),ang:i}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,be,me,Pe,ve,Ge],$n(t,t.faceColors),t}function vF(){const t={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,faceColors:["y","o","g","w","r","b"],move:()=>!0,dims:[],roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=2*e/3;let s=t.pieces,r=ve.add(G).add(Ge),o=new He([r,r.add(me.mul(2/3)),r.add(me.mul(2/3)).add(be.mul(2/3)),r.add(be.mul(2/3))]);o.vecs=[r.unit()];let a=new yt([o,o.rotate(r,r,2*e/3),o.rotate(r,r,-2*e/3)]),l=new He([r.add(me.mul(2/3)),r.add(me.mul(4/3)),r.add(me.mul(4/3)).add(be.mul(2/3)),r.add(me.mul(4/3)).add(be).add(Ge.mul(1/3)),r.add(me.mul(4/3)).add(be.mul(2/3)).add(Ge.mul(2/3))]);l.vecs=[r.unit(),ve.add(G).add(me).unit()];let c=new yt([l,l.rotate(ve.add(G),ve.add(G),e)]);for(let u=0;u<4;u+=1)s.push(a.rotate(te,G,n*u)),s.push(a.rotate(te,G,n*u).rotate(te,me,e)),s.push(c.rotate(te,G,n*u)),s.push(c.rotate(te,ve,n).rotate(te,G,n*u)),s.push(c.rotate(te,G,n*u).rotate(te,me,e));return t.toMove=function(u,f,h){let d=new $e(Math.sign(h.x)/2,Math.sign(h.y)/2,Math.sign(h.z)/2);return{pieces:s.filter(_=>_.direction1(d,h,!0)>=0),ang:i}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,be,me,Pe,ve,Ge],$n(t,t.faceColors),t}function bF(){const e={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,dims:[3,3,3],faceColors:["w","r","g","y","o","b"],move:()=>!1,roundParams:[]};e.getAllStickers=Qn.bind(e);const n=Math.PI,i=n/2,s=[be,me,G],r=1/(1+Math.SQRT2),o=r*Math.SQRT2;let a=e.pieces,l=ve.add(G).add(Ge),c=be.add(G).add(Ge),u=ve.add(G).add(me),f=l.sub(l.mul(o/2)),h=new He([l,l.add(me.mul(o)),l.add(me.add(be).mul(o)),l.add(be.mul(o))]),d=new yt([h,h.rotate(l,l,2*n/3),h.rotate(l,l,-2*n/3),h.reflect1(f,G,!0),h.rotate(l,l,-2*n/3).reflect1(f,be,!0),h.rotate(l,l,2*n/3).reflect1(f,Ge,!0)]);d.stickers.forEach(y=>{y.vecs=[ve,G,Ge].map(w=>w.clone())});for(let y=0;y<4;y+=1)a.push(d.rotate(te,G,i*y)),a.push(d.rotate(te,me,n/2).rotate(te,G,i*y));let p=new He([l.add(me.mul(o)),u.add(Ge.mul(o)),u.add(Ge.add(be).mul(o)),l.add(me.add(be).mul(o))]),_=new He([u.add(Ge.mul(o)),u.add(Ge.add(Pe).mul(o)),u.add(Ge.add(be).mul(o))]),m=new He([l.add(me.add(be).mul(o)),u.add(Ge.add(be).mul(o)),ve.add(G).add(be.mul(o)).add(be.add(Pe).setLength(o/2))]),v=new yt([p,p.rotate(ve.add(G),ve.add(G),n),_,_.rotate(ve.add(G),ve.add(G),n),m,m.rotate(ve.add(G),ve.add(G),n)]);v.stickers.forEach(y=>{y.vecs=[...s,be.add(G).unit()].map(w=>w.clone())});for(let y=0;y<4;y+=1)a.push(v.rotate(te,G,i*y)),a.push(v.rotate(l,l,-2*n/3).rotate(te,G,i*y)),a.push(v.rotate(te,me,i).rotate(te,G,i*y));let g=new He([l.add(me.add(be).mul(o)),c.add(me.add(ve).mul(o)),c.add(Pe.add(ve).mul(o)),l.add(Pe.add(be).mul(o))]),b=new yt([g.rotate(te,be,n/4),new He([l.add(be.add(Pe).mul(o)),l.add(be.add(me).add(Pe).mul(o)),l.add(be.add(me).mul(o))]).rotate(te,be,n/4),new He([c.add(ve.add(Pe).mul(o)),c.add(ve.add(me).mul(o)),c.add(ve.add(me).add(Pe).mul(o))]).rotate(te,be,n/4),new He([l.add(be.add(Pe).mul(o)),c.add(ve.add(Pe).mul(o)),c.add(ve.add(Pe).add(me).mul(o)),l.add(be.add(Pe).add(me).mul(o))]).rotate(te,be,n/4),new He([l.add(be.add(Pe).mul(o)),c.add(ve.add(Pe).mul(o)),c.add(ve.add(Pe).add(me).mul(o)),l.add(be.add(Pe).add(me).mul(o))]).rotate(G.add(Ge).mul(r),G.add(Ge).mul(r),n).rotate(te,be,n/4)]);b.stickers.forEach(y=>{y.vecs=s.map(w=>w.clone())});for(let y=0;y<4;y+=1)a.push(b.rotate(te,me,i*y)),y<2&&a.push(b.rotate(te,be,i*Math.pow(-1,y)));return e.toMove=function(y,w,x){let S=y.stickers.filter(L=>!L.color.match(/^[xd]$/)).length,T=y.updateMassCenter(),A=y.stickers.reduce((L,F)=>(F.color==="x"&&F.getOrientation().cross(x).abs()<1e-6&&L.push([F._generator.points[0],F._generator.getOrientation()]),L),[]);A.push([y.updateMassCenter(),x.unit()]);let C=a.reduce((L,F)=>(F.stickers.filter(N=>A.reduce((B,W)=>/^[xd]$/.test(N.color)?B:B||N.direction1(W[0],W[1])===0,!1)).length&&L.push(F),L),[]);if(C.length){let L=!!C.find(F=>F.stickers.filter(U=>/^[^xd]$/.test(U.color)).length==3);if(S<3&&L)return{pieces:[],ang:0}}return{pieces:S==3?a.filter(L=>L.direction1(T,x)>=0):a.filter(L=>L.direction1(T,x)===0),ang:S<3?n/4:i}},e.rotation={x:n/6,y:-n/4,z:0},e.faceVectors=[G,be,me,Pe,ve,Ge],$n(e,e.faceColors),e}function yF(){let e={center:new $e(0,0,0),palette:Kn,pieces:[],rotation:{},faceVectors:[],getAllStickers:null,faceColors:["g","b","y","r"],move:()=>!0,dims:[],roundParams:[]};e.getAllStickers=Qn.bind(e);const n=Math.PI,i=n/2,s=n/3,r=2.6,o=r/Math.sqrt(3),a=Math.sqrt(r**2-o**2),l=Math.sqrt(6)*r/12;let c=G.mul(a-l),u=Pe.mul(l).add(me.mul(o)).rotate(te,G,s),f=u.rotate(te,G,2*s),h=f.rotate(te,G,2*s);e.pieces=[];const d=[c,u,f,h],p=[[h.sub(c).div(2),u.sub(h).div(2)],[f.sub(u).div(2),c.sub(f).div(2)],[u.sub(f).div(2),h.sub(u).div(2)],[c.sub(h).div(2),f.sub(c).div(2)]];e.faceVectors=[p[0][0].cross(p[0][1]).unit(),p[1][0].cross(p[1][1]).unit(),p[2][0].cross(p[2][1]).unit(),p[3][0].cross(p[3][1]).unit()];let _=function(g,b,y){let w=[g,b,y],x=w[2].sub(w[1]).cross(w[1].sub(w[0])).unit().mul(a/2);return w.reduce((S,T)=>S.add(T),new $e(0,0,0)).div(3).add(x),new yt([new He(w)])};for(let g=0;g<4;g+=1)for(let b=0;b<2;b+=1)for(let y=0;y<=b;y+=1)e.pieces.push(_(d[g].add(p[g][0].mul(b).add(p[g][1].mul(y))),d[g].add(p[g][0].mul(b+1).add(p[g][1].mul(y))),d[g].add(p[g][0].mul(b+1).add(p[g][1].mul(y+1))))),y<b&&e.pieces.push(_(d[g].add(p[g][0].mul(b).add(p[g][1].mul(y))),d[g].add(p[g][0].mul(b+1).add(p[g][1].mul(y+1))),d[g].add(p[g][0].mul(b).add(p[g][1].mul(y+1)))));let m=e.pieces,v=[$e.cross(c.add(h).div(2),c.add(u).div(2),u.add(f).div(2)).unit(),$e.cross(c.add(f).div(2),c.add(h).div(2),h.add(u).div(2)).unit(),$e.cross(h.add(u).div(2),c.add(u).div(2),c.add(f).div(2)).unit()];return m.forEach(g=>g.stickers.forEach(b=>b.vecs=v.map(y=>y.clone()))),e.toMove=function(g,b,y){let w=b.updateMassCenter();return{pieces:m.filter(S=>S.direction1(w,y)==0),ang:i}},$n(e,e.faceColors),e.rotation={x:Math.PI/6,y:-Math.PI/4,z:0},e}function g0(t,e,n,i,s){let r=[...t],o=[...e];for(let a=r.length-2;a>=1;a-=1){let l=new $e(r[a],o[a],0);l=l.reflect(n,i,s),r.push(l.x),o.push(l.y)}return new He(r.map((a,l)=>new $e(a,1,-o[l])))}function wF(t){return t.stickers.filter(e=>e.color!="d").length}function xF(t,e,n,i,s,r){if(s){let o=t,a=new $e(n.x,n.y,n.z),l=o.userData.anchor.rotate(e,a,i),u=new r(l.x,l.y,l.z).clone().normalize();o.rotateOnWorldAxis(n,i),o.rotateOnWorldAxis(u,-i*4/3)}else t.rotate(e,t.anchor,-i*4/3,!0).rotate(e,n,i,!0)}function MF(){const t={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,faceColors:["y","o","g","w","r","b"],move:()=>!0,roundParams:[.2,.9,null,C=>C.color!="x"]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=e*2/3;let s=ve.add(G).add(me),r=t.pieces,l=g0([-1,-.35,-.35,-.527,-.486,-.333,-.313,-.484],[-1,-1,-.9175,-.792,-.623,-.62,-.521,-.484],te,me,ve.add(Pe)),c=s.add(be.add(Ge).add(Pe).mul(.65));l.vecs=[ve,G,me];let u=[l];for(let C=0,k=l.points.length;C<k;C+=1)u.push(new He([c,l.points[(C+1)%k],l.points[C]]));for(let C=0,k=u.length;C<k;C+=1)u.push(u[C].rotate(s,s,i)),u.push(u[C].rotate(s,s,-i));let f=new yt(u);for(let C=0;C<4;C+=1)r.push(f.rotate(te,G,n*C)),r.push(f.rotate(te,me,n).rotate(te,G,n*C));let p=g0([-1,-1,-.895,-.8,-.673,-.769,-.685,-.532,-.532],[0,.32,.321,.457,.37,.233,.091,.088,0],te,me,ve).reverse(),_=G.add(ve);p.vecs=[G,ve];for(let C=0;C<2;C+=1)p.vecs.push(p.vecs[C].rotate(te,_,i)),p.vecs.push(p.vecs[C].rotate(te,_,-i));let m=ve.add(G).sub(ve.add(G).mul(.65)),v=[p];for(let C=0,k=p.points.length;C<k;C+=1)v.push(new He([m,p.points[(C+1)%k],p.points[C]]));for(let C=0,k=v.length;C<k;C+=1)v.push(v[C].rotate(ve.add(G),ve.add(G),e));let g=new yt(v);g.anchor=ve.add(G);for(let C=0;C<4;C+=1)r.push(g.rotate(te,G,n*C)),r.push(g.rotate(te,me,n).rotate(te,G,n*C)),r.push(g.rotate(te,be,n).rotate(te,G,n*C));let w=g0([.49,.49,.295,.287,.373,.373],[0,.22,.22,.149,.15,0],te,me,ve);w.vecs=[be];let x=new yt([w]);for(let C=0;C<4;C+=1)r.push(x.rotate(te,G,n*C)),r.push(x.rotate(te,me,n).rotate(te,G,n*C)),r.push(x.rotate(te,Ge,n).rotate(te,G,n*C)),r.push(x.rotate(te,be,n).rotate(te,G,n*C)),r.push(x.rotate(te,ve,n).rotate(te,G,n*C)),r.push(x.rotate(te,be,e).rotate(te,G,n*C));let S=[new He([G.add(ve.add(Ge).mul(.23)),G.add(ve.add(me).mul(.23)),G.add(be.add(me).mul(.23)),G.add(be.add(Ge).mul(.23))])],T=S[0].add(Pe).mul(2.2).add(G.mul(.5));for(let C=0;C<4;C+=1)S.push(new He([S[0].points[C],T.points[C],T.points[(C+1)%4],S[0].points[(C+1)%4]]));let A=new yt(S);for(let C=0;C<4;C+=1)r.push(A.rotate(te,me,n*C));return r.push(A.rotate(te,be,n)),r.push(A.rotate(te,ve,n)),t.toMove=function(C,k,L){if(![ve,G,me].reduce((B,W)=>B||W.cross(L).abs()<1e-6,!1))return[];let F=r.filter(B=>B.stickers.filter(ee=>ee.color!="d").reduce((ee,K)=>ee||K.direction1(te,L)>=0,!1)),U=[],N=[];return F.forEach(B=>{B.stickers.filter(K=>K.color!="d").reduce((K,ge)=>K||ge.direction1(te,L)==0,!1)?(wF(B)===2&&(B.hasCallback=!0,B.callback=xF),U.push(B)):(B.hasCallback=!1,N.push(B))}),[{pieces:U,ang:n,animationTime:600},{pieces:N,ang:e,animationTime:600}]},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,be,me,Pe,ve,Ge],$n(t,t.faceColors),r.forEach(C=>C.stickers.forEach(k=>{k.color=="x"&&(k.color="d",k.oColor="d")})),t}class Ai{constructor(e,n){ke(this,"x");ke(this,"y");this.x=e||0,this.y=n||0}add(e){return new Ai(this.x+e.x,this.y+e.y)}sub(e){return new Ai(this.x-e.x,this.y-e.y)}mul(e){return new Ai(this.x*e,this.y*e)}div(e){return new Ai(this.x/e,this.y/e)}rot(e){return new Ai(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e))}abs(){return(this.x**2+this.y**2)**.5}unit(){let e=this.abs();return new Ai(this.x/e,this.y/e)}}function lw(t,e,n){return t.add(e.sub(t).mul(n))}function K1(t,e){return new Ai(t.x*e.x-t.y*e.y,t.x*e.y+t.y*e.x)}function SF(t){const e=1/(t.x**2+t.y**2);return new Ai(e*t.x,-e*t.y)}function EF(t,e){return K1(t,SF(e))}function _0(t,e,n){const i=n.sub(e),s=e.sub(t),r=K1(t,i),o=K1(n,s);return a=>EF(lw(r,o,a),lw(i,s,a))}function Jl(t,e,n){return t*n+e}function TF(){const t={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,dims:[],faceColors:["w","r","g","y","o","b"],move:()=>!1,roundParams:[]};t.getAllStickers=Qn.bind(t);let e=t.pieces;const n=ve.add(G),i=n.add(Ge),s=n.add(me),r=be.add(G).add(me),o=r.add(Ge.mul(2)),a=ve.add(Pe).add(Ge),l=ve.add(Pe).add(me),c=be.add(Pe).add(me),u=c.add(Ge.mul(2)),f=[i,s,r,o,a,l,c,u],h=Math.PI,d=h/2,p=h/3,_=2*p;let m=new He([i,n,Ge.add(G)],null,[...[ve,G,Ge].map(K=>K.rotate(i,i,_/2)),i.unit()]),v=new yt([m,m.rotate(te,i,_),m.rotate(te,i,-_)]);for(let K=0;K<4;K+=1)e.push(v.rotate(te,G,d*K)),e.push(v.rotate(te,ve,d).rotate(te,G,d*K));let g=new He([ve.add(Ge),ve.add(me),be.add(me),be.add(Ge)]).mul(1/3,!0).add(G,!0),b=new yt([g]);for(let K=0;K<4;K+=1)e.push(b.rotate(te,me,d*K)),K<2&&e.push(b.rotate(te,be,d+K*h));let y=new He([]),w=_0(new Ai(-1,0),new Ai(-1/3,-1/3),new Ai(0,-1));for(let K=0,ge=30;K<=ge;K+=1){let se=K/ge,X=w(se);y.points.push(new $e(X.x,1,X.y))}y.vecs=[i.unit()],y.updateMassCenter(),y.computeBoundingBox();let x=new yt([y]);for(let K=0;K<4;K+=1)for(let ge=0;ge<3;ge+=1)e.push(x.rotate(te,i,_*ge).rotate(te,G,d*K)),e.push(x.rotate(te,i,_*ge).rotate(te,ve,d).rotate(te,G,d*K));let S=new He([],null,[ve,G]),T=[],A=[],C=_0(new Ai(0,-1),new Ai(-1/3,-1/3),new Ai(-1,0)),k=_0(new Ai(-1,0),new Ai(-1/3,1/3),new Ai(0,1));S.points.push(g.points[0].add(g.points[1]).div(2));for(let K=0,ge=10;K<=ge;K+=1){let se=K/ge/2,X=C(se+.5),q=k(se);T.push(new $e(X.x,1,X.y)),A.push(new $e(q.x,1,q.y))}S.points.push(...T,...A),S.updateMassCenter(),S.computeBoundingBox();let L=new yt([S,S.rotate(n,n,h)]),F=[],U=[],N=[],B=5,W=A.length;for(let K=0,ge=B-1;K<=ge;K+=1){let se=K/ge;N.push(A.map(X=>X.rotate(n,Ge,d*se)))}for(let K=0,ge=B-1;K<ge;K+=1)for(let se=0,X=W-1;se<X;se+=1)U.push([Jl(K,se,W),Jl(K+1,se,W),Jl(K,se+1,W)]),U.push([Jl(K+1,se,W),Jl(K+1,se+1,W),Jl(K,se+1,W)]);F=N.reduce((K,ge)=>(K.push(...ge),K),[]);let ee=new su(F,U,"d");L.stickers.push(ee),L.stickers.push(ee.reflect1(n,Ge)),L.updateMassCenter();for(let K=0;K<4;K+=1)e.push(L.rotate(te,G,d*K)),e.push(L.rotate(te,ve,d).rotate(te,G,d*K)),e.push(L.rotate(te,ve,h).rotate(te,G,d*K));return t.toMove=function(K,ge,se){let X=[ve,G,Ge].reduce((_e,pe)=>_e||pe.cross(se).abs()<1e-6,!1),q=f.reduce((_e,pe)=>_e||pe.cross(se).abs()<1e-6,!1);if(!X&&!q)return{pieces:[],ang:0};if(!X){let _e=ge.getMassCenter(),pe=f.reduce((De,je)=>{let de=je.sub(_e).abs();return de<De[0]?[de,je]:De},[1/0,new $e(0,0,0)])[1];return{pieces:e.filter(De=>De.getMassCenter().sub(pe).abs()<=1),ang:p}}let Y=[se.x,se.y,se.z].map(_e=>Math.abs(1-Math.abs(_e))<1e-6?Math.sign(_e):0),$=new $e(Y[0],Y[1],Y[2]),ze=e.reduce((_e,pe)=>{let Te=pe.direction1($.mul(.3333333333333333),$);return Te>=0&&_e[Te].push(pe),_e},[[],[]]);return{pieces:ze[0].length>0?[]:ze[1],ang:d}},t.rotation={x:h/6,y:-h/4,z:0},t.faceVectors=[G,be,me,Pe,ve,Ge],$n(t,t.faceColors),t.getAllStickers().forEach(K=>{K instanceof su&&(K.color="d",K.oColor="d")}),t}function AF(){const t={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,faceColors:["y","o","g","w","r","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2;let i=t.pieces,s=new yt([new He([ve.add(G).add(Ge),ve.add(G),G,G.add(Ge)]),new He([ve.add(G).add(Ge),ve.add(Ge),ve,ve.add(G)]),new He([ve.add(G).add(Ge),G.add(Ge),Ge,Ge.add(ve)])]);s.stickers.forEach(o=>o.vecs=[ve,G,Ge].map(a=>a.clone()));let r=new yt([new He([ve,ve.add(Pe),ve.add(Pe).add(me),ve.add(me)]),new He([be,be.add(me),be.add(Pe).add(me),be.add(Pe)]),new He([ve.add(me),ve.add(me).add(Pe),be.add(me).add(Pe),be.add(me)]),new He([ve.add(me),ve.add(me).add(Pe),be.add(me).add(Pe),be.add(me)]).rotate(te,me.add(Pe),e)]);return r.stickers.forEach(o=>o.vecs=[ve,me,Pe].map(a=>a.clone())),i.push(s),i.push(s.rotate(te,G,n)),i.push(s.rotate(te,ve,n)),i.push(s.rotate(te,me,e)),i.push(r),i.push(r.rotate(te,me,e).rotate(te,G,n)),t.toMove=function(o,a,l){let c=a.updateMassCenter(),u=i.filter(h=>h.direction1(te,l)===0),f=i.filter(h=>h.direction1(c,l)===0);return{pieces:u.length>0?[]:f,ang:n}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,be,me,Pe,ve,Ge],$n(t,t.faceColors),t}function un(t,e,n){return ve.add(G).add(Ge).add(be.mul(2*t/3).add(Pe.mul(2*e/3)).add(me.mul(2*n/3)))}function kF(){const t={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,faceColors:["y","g","r","w","b","o"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=2*e/3;let s=t.pieces,r=new yt([new He([un(2,0,2),un(2,0,3),un(3,0,3),un(3,0,2)]),new He([un(2,0,3),un(2,1,3),un(3,1,3),un(3,0,3)]),new He([un(3,0,3),un(3,1,3),un(3,1,2),un(3,0,2)])]),o=new yt([new He([un(0,0,0),un(0,0,1),un(2,0,1),un(2,0,0)]),new He([un(0,0,0),un(2,0,0),un(2,1,0),un(0,1,0)]),new He([un(0,0,0),un(0,1,0),un(0,1,1),un(0,0,1)]),new He([un(0,0,1),un(0,1,1),un(2,1,1),un(2,0,1)])]),a=new yt([new He([un(1,1,0),un(2,1,0),un(2,3,0),un(1,3,0)]),new He([un(1,3,0),un(2,3,0),un(2,3,2),un(1,3,2)])]),l=[o,o.add(me.mul(2/3)),o.add(me.mul(4/3))];return s.push(r),s.push(...l),s.push(...l.map(c=>c.rotate(te,be.add(G).add(me),i))),s.push(...l.map(c=>c.rotate(te,be.add(G).add(me),-i))),s.push(...l.map(c=>c.rotate(te,me,n))),s.pop(),s.push(a),t.toMove=function(c,u,f){let h=u.updateMassCenter(),d=f.unit().toNormal().div(3),p=s.filter(m=>m.direction1(d,f)===0),_=s.filter(m=>m.direction1(h,f)===0);return{pieces:p.length>0?[]:_,ang:n}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,be,me,Pe,ve,Ge],$n(t,t.faceColors),rF(t),s.forEach(c=>{c.stickers=c.stickers.filter(u=>u.color!="x")}),t}function ad(t,e,n){let i=0,s=1,r;for(let o=1;o<=50;o+=1){r=(i+s)/2;let a=t.add(e.sub(t).mul(r));Math.abs(a[n])<1?i=r:s=r}return t.add(e.sub(t).mul(r))}function CF(){const t={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,faceColors:["w","b","r","y","g","o"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);let e=t.pieces;const n=1,i=2*n/3,s=2*n*Math.sqrt(2)/2,r=Math.PI,o=r/6,a=s*Math.sin(o)/Math.sin(7*r/12);let l=[],c=ve.add(Ge),u=ve.add(me),f=be.add(me),h=be.add(Ge),d=c.add(G),p=c.add(Pe),_=h.add(G),m=h.add(Pe),v=u.add(G),g=u.add(Pe);f.add(G),f.add(Pe);for(let w=0;w<3;w+=1)l.push(ad(te,c.rotate(te,G,o*w),"x").add(G));for(let w=0;w<3;w+=1)l.push(ad(te,u.rotate(te,G,o*w),"z").add(G));for(let w=0;w<3;w+=1)l.push(ad(te,f.rotate(te,G,o*w),"x").add(G));for(let w=0;w<3;w+=1)l.push(ad(te,h.rotate(te,G,o*w),"z").add(G));for(let w=0,x=l.length;w<x;w+=1){let S=l[w],T=l[(w+1)%x],A=new yt([new He([te.add(G),S,T]),new He([te.add(G),S,T]).add(Pe.mul(2/3),!0).reverse(!0),new He([S,S.add(Pe.mul(2/3)),T.add(Pe.mul(2/3)),T],null,[G.clone()]),new He([te.add(G),T,T.add(Pe.mul(2/3)),te.add(G.div(3))]),new He([te.add(G),te.add(G.div(3)),S.add(Pe.mul(2/3)),S])]);e.push(A),e.push(A.rotate(te,be,r))}let b=new yt([new He([d.add(Pe.mul(i)),p.add(G.mul(i)),g.add(G.mul(i)),v.add(Pe.mul(i))]),new He([v.add(Pe.mul(i)),g.add(G.mul(i)),g.add(G.mul(i)).add(be.mul(a)),v.add(Pe.mul(i)).add(be.mul(a))]),new He([v.add(Pe.mul(i)).add(be.mul(a)),g.add(G.mul(i)).add(be.mul(a)),m.add(G.mul(i)).add(ve.mul(a)),_.add(Pe.mul(i)).add(ve.mul(a))]),new He([_.add(Pe.mul(i)).add(ve.mul(a)),m.add(G.mul(i)).add(ve.mul(a)),p.add(G.mul(i)),d.add(Pe.mul(i))]),new He([d.add(Pe.mul(i)),v.add(Pe.mul(i)),v.add(Pe.mul(i)).add(be.mul(a)),_.add(Pe.mul(i)).add(ve.mul(a))]),new He([p.add(G.mul(i)),g.add(G.mul(i)),g.add(G.mul(i)).add(be.mul(a)),m.add(G.mul(i)).add(ve.mul(a))]).reverse()]),y=b.stickers[2].getOrientation();return b.stickers.forEach(w=>{w.vecs=[y.mul(-1),G.clone()]}),e.push(b),e.push(b.rotate(te,G,r)),t.toMove=function(w,x,S){let T=x.vecs[0].cross(G).abs()<1e-6?o:r,A=[];if(T>o&&S.cross(G).abs()>1e-6)A=e.filter(C=>C.direction1(S.mul(.06),S)===0);else{let C=x.updateMassCenter(),k=T>o;A=e.filter(L=>k?L.direction1(C,S)===0:L.direction1(C,S)>=0)}return{pieces:A,ang:T}},t.rotation={x:o,y:-o,z:0},t.faceVectors=[G,be,me,Pe,ve,Ge],$n(t,t.faceColors),t}let gb=new Map;function jn(t,e,n,i){gb.set(t,{code:t,name:e,constr:n,order:i})}function LF(){const t={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,faceColors:["w","r","g","y","o","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=2*e/3,s=n,r=[be,me,G];let o=t.pieces,a=new He([be.add(G).add(me),me.add(G),me.add(be)],null,r),l=new yt([0,1,2].map(v=>a.rotate(te,be.add(G).add(me),i*v))),c=[0,1,2,3].map(v=>l.rotate(te,G,n*v));o.push(...c),o.push(...c.map(v=>v.rotate(te,me,e)));let u=G.add(Ge).add(G.add(ve)).div(2),f=new yt([new He([0,1,2,3].map(v=>u.rotate(te,G,n*v)),null,r),new He([0,1,2,3].map(v=>u.rotate(te,G,n*v).mul(.5)),null,r)]),h=[...[0,1,2,3].map(v=>f.rotate(te,be,n*v)),f.rotate(te,me,n),f.rotate(te,me,-n)];o.push(...h);let d=new He([u,ve.add(G),u.rotate(te,G,n)],null,[G,ve,me]),p=new He([Ge.add(ve).div(2).add(G),Ge.add(G).div(2).add(ve),ve.add(G)]),_=new yt([d,d.rotate(te,ve.add(G),e),p,p.rotate(te,ve.add(G),e)]),m=[0,1,2,3].map(v=>_.rotate(te,G,n*v));return o.push(...m),o.push(...m.map(v=>v.rotate(te,v.stickers[0].points[1],n).rotate(te,v.stickers[1].getOrientation().rotate(te,G,n),n/2).rotate(te,G,n/2))),o.push(...m.map(v=>v.rotate(te,me,e))),t.toMove=function(v,g,b){let y=g.updateMassCenter();return{pieces:o.filter(x=>x.direction1(y,b,!0)===0),ang:s}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,be,me,Pe,ve,Ge],$n(t,t.faceColors),t}function PF(){const t={pieces:[],palette:Kn,rotation:{},center:new $e(0,0,0),faceVectors:[],getAllStickers:null,faceColors:["white","yellow","violet","green","red","blue","orange","lblue","lyellow","pink","lgreen","gray"],move:()=>!0,roundParams:[]},e=Math.PI,n=Math.sqrt,i=n((50+22*n(5))/5)/4,s=n(6)/4*n(3+n(5)),r=1,a=r/i*s,l=n(a**2-r**2),c=2*e/5,u=2*e/3;let f=[];for(let k=0;k<5;k+=1)f.push(G.mul(r).add(Ge.mul(l).rotate(te,G,k*c)));t.getAllStickers=Qn.bind(t);let h=(k,L)=>f[k].add(f[L]).div(2),d=$e.cross(te,h(0,4),h(2,3)),p=$e.cross(te,h(0,1),h(4,3)),_=t.pieces,m=[$e.cross(te,h(2,3),h(0,4)),$e.cross(te,h(3,4),h(0,1)),$e.cross(te,h(0,4).reflect(te,h(1,1),h(2,2)),h(2,3).reflect(te,h(1,1),h(2,2)))],v=h(3,4).add(h(4,0)).sub(f[4]),g=new He([h(0,1),f[1],f[2],h(2,3),v],null,m),b=new He([f[0],h(0,1),v,h(0,4)],null,[m[0],m[1].mul(-1),m[2].reflect(te,f[4],h(1,2))]),y=new yt([g,g.rotate(te,h(1,2),e)]),w=y.stickers,x=new He([w[0].points[0],w[0].points[0].add(w[1].points[3]).sub(w[0].points[1]),w[1].points[3],w[0].points[1]],null,m);y.stickers.push(x,x.reflect1(te,f[2].sub(f[1]),!0)),w.forEach(k=>k.vecs=m.map(L=>L.clone()));let S=y.rotate(te,y.stickers[1].getOrientation(),c).rotate(te,G,c*3),T=b.reflect(te,f[3],f[4],!0),A=new yt([b,b.rotate(te,f[0],-2*e/3),T.rotate(te,T.getOrientation(),c*2).reflect(te,v,f[4],!0)]),C=A.reflect1(te,f[2].sub(f[1]),!0);return _.push(...[0,1,2].map(k=>y.rotate(te,d,u*k)),...[0,1,2].map(k=>S.rotate(te,d,u*k)),...[0,1,2].map(k=>A.rotate(te,d,u*k)),...[0,1,2].map(k=>C.rotate(te,d,u*k)),A.rotate(te,p,u),C.rotate(te,p,-u)),t.toMove=function(k,L,F){let U=k.updateMassCenter();return{pieces:_.filter(B=>B.direction1(U,F,!0)>=0),ang:u}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[y.stickers[0].getOrientation(),...[0,1,2,3,4].map(k=>y.stickers[1].rotate(te,G,c*k).getOrientation())],t.faceVectors.push(...t.faceVectors.map(k=>k.rotate(te,me,e).rotate(te,G,c/2))),$n(t,t.faceColors),t}function RF(){const t={pieces:[],palette:Kn,rotation:{},center:te,faceVectors:[],getAllStickers:null,faceColors:["white","yellow","violet","green","red","blue","orange","lblue","lyellow","pink","lgreen","gray"],move:()=>!0,roundParams:[]},e=Math.PI,n=Math.sqrt,i=n((50+22*n(5))/5)/4,s=n(6)/4*n(3+n(5)),r=1,a=r/i*s,l=n(a**2-r**2),c=2*e/5,u=2*e/3,f=.276393202250021,h=.4472135954999585;let d=[],p=(F,U)=>F.add(U.sub(F).mul(f));for(let F=0;F<5;F+=1)d.push(G.mul(r).add(Ge.mul(l).rotate(te,G,F*c)));let m=new He(d).getMassCenter();t.getAllStickers=Qn.bind(t);let v=t.pieces,g=[G,...[0,1,2].map(F=>m.rotate(te,d[F],u))],b=new He([p(d[0],d[4]),d[0],p(d[0],d[1]),m],null,g.slice(0,3)),y=new yt([...[0,1,2].map(F=>b.rotate(te,d[0],u*F))]),w=[0,1,2,3,4].map(F=>y.rotate(te,G,c*F)),x=t.faceVectors=[G,...w.map(F=>F.stickers[2].getOrientation())];x.push(...t.faceVectors.slice().map(F=>F.rotate(te,be,e))),v.push(...w),v.push(...w.map(F=>F.rotate(te,be,e)));let S=w.reduce((F,U,N)=>[...F,...[1,2].map(B=>U.rotate(te,x[N+1],c*B))],[]);v.push(...S);let T=new He([p(d[0],d[1]),p(d[1],d[0]),m],null,g),A=new yt([T,T.reflect1(te,$e.cross(te,d[0],d[1]),!0)]),C=[0,1,2,3,4].map(F=>A.rotate(te,G,c*F)),k=C.map(F=>F.rotate(te,be,e));v.push(...C,...k);let L=C.reduce((F,U,N)=>[...F,...[1,2,3].map(B=>U.rotate(te,x[N+1],c*B))],[]);return v.push(...L),v.push(...C.map((F,U)=>F.rotate(te,x[U+1],c).reflect1(te,G,!0).rotate(te,G,c/2))),$n(t,t.faceColors),t.toMove=function(F,U,N){let B=N.unit().mul(h);return{pieces:v.filter(ee=>ee.direction1(B,N,!0)>=0),ang:c}},t.rotation={x:e/6,y:-e/4,z:0},t}function DF(){let t={center:new $e(0,0,0),palette:Kn,pieces:[],rotation:{},faceVectors:[],getAllStickers:null,faceColors:["g","b","y","r","g","b","y","r"],move:()=>!0,dims:[],roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/3,i=2.6,s=i/Math.sqrt(3),r=Math.sqrt(i**2-s**2),o=Math.sqrt(6)*i/12;let a=G.mul(r-o),l=Pe.mul(o).add(me.mul(s)).rotate(te,G,n),c=l.rotate(te,G,2*n),u=c.rotate(te,G,2*n);t.pieces=[];const f=[a,l,c,u],h=[[u.sub(a).div(3),l.sub(u).div(3)],[c.sub(l).div(3),a.sub(c).div(3)],[a.sub(u).div(3),c.sub(a).div(3)],[l.sub(c).div(3),u.sub(l).div(3)]];t.faceVectors=[h[0][0].cross(h[0][1]).unit(),h[1][0].cross(h[1][1]).unit(),h[3][0].cross(h[3][1]).unit(),h[2][0].cross(h[2][1]).unit()];let d=t.faceVectors,p=t.pieces,_=new He([f[0].add(h[0][0]),f[0].add(h[0][0].add(h[0][1])),f[0].add(h[2][1])],null,[G,d[0],d[1],d[3]]),m=new He([a.add(h[0][0]),a.add(h[0][0].mul(2)).add(h[0][1]),a.add(h[0][0]).add(h[0][1])],null,[G,d[1],d[2]]),v=new yt([_,...[0,1,2].map(y=>m.rotate(te,G,2*n*y))]);p.push(v,v.reflect(te,l,c,!0),v.reflect(te,l,u,!0),v.reflect(te,c,u,!0));let g=new He([a.add(h[0][0]),a.add(h[0][0].mul(2)),a.add(h[0][0].mul(2)).add(h[0][1])]),b=new yt([g,g.reflect(te,a,u,!0)]);return b.stickers.forEach(y=>y.vecs=[G,d[0],d[1].mul(-1),d[2]].map(w=>w.clone())),p.push(...[0,1,2].map(y=>b.rotate(te,G,2*n*y))),p.push(...[0,1,2].map(y=>b.rotate(te,d[0],2*n).rotate(te,G,2*n*y))),t.toMove=function(y,w,x){let S=y.updateMassCenter();return{pieces:p.filter(A=>A.direction1(S,x)===0),ang:2*e/3}},t.faceVectors.push(a.unit(),l.unit(),u.unit(),c.unit()),$n(t,t.faceColors),t.rotation={x:Math.PI/6,y:-Math.PI/4,z:0},t}function OF(){let t={center:new $e(0,0,0),palette:Kn,pieces:[],rotation:{},faceVectors:[],getAllStickers:null,faceColors:["g","b","y","r"],move:()=>!0,dims:[],roundParams:[]};t.getAllStickers=Qn.bind(t);const n=2*Math.PI/3,i=2.6,s=i/Math.sqrt(3),r=Math.sqrt(i**2-s**2),o=Math.sqrt(6)*i/12;let a=G.mul(r-o),l=Pe.mul(o).add(me.mul(s)).rotate(te,G,n/2),c=l.rotate(te,G,n),u=c.rotate(te,G,n),f=t.pieces=[],h=t.faceVectors=[],d=$e.cross;const p=1/4,_=[a,l,c,u];let m=(A,C)=>_[C].sub(_[A]).mul(p),v=m(0,3),g=m(0,1),b=m(3,1),y=new He([a,a.add(v),a.add(v).add(g),a.add(g)],null,[d(a,u,l),d(a,l,c),d(a,c,u)]),w=new yt([0,1,2].map(A=>y.rotate(te,G,n*A)));h.push(Pe,...w.stickers.map(A=>A.getOrientation())),f.push(...[0,1,2].map(A=>w.rotate(te,h[1],n*A))),f.push(w.rotate(te,h[1],n).rotate(te,Pe,n));let x=new He([a.add(v),u.sub(v),u.sub(v).add(b),a.add(v).add(g)],null,[d(a,c,u)]),S=new yt([x,x.reflect(te,a,u,!0)]);f.push(...[0,1,2].map(A=>S.rotate(te,G,n*A))),f.push(...[0,1,2].map(A=>S.reflect(te,u,c,!0).rotate(te,G,n*A)));let T=new yt([new He([0,1,2].map(A=>a.add(v).add(g).rotate(te,h[1],n*A)))]);return f.push(...[0,1,2].map(A=>T.rotate(te,G,n*A))),f.push(T.reflect(te,u,l,!0)),t.toMove=function(A,C,k){let L=C.updateMassCenter();return{pieces:f.filter(U=>U.direction1(L,k)>=0),ang:n}},$n(t,t.faceColors),t.rotation={x:Math.PI/6,y:-Math.PI/4,z:0},t}jn("rubik","Rubik's Cube",oF,!0);jn("mirror","Mirror",mF,!0);jn("pyraminx","Pyraminx",cF,!0);jn("megaminx","Megaminx",pF,!0);jn("skewb","Skewb",aF,!1);jn("square1","Square One",lF,!1);jn("square2","Square Two",CF,!1);jn("axis","Axis",uF,!1);jn("fisher","Fisher",fF,!1);jn("ivy","Ivy",hF,!1);jn("clock","Rubik's clock",dF,!1);jn("dino","Dino",gF,!1);jn("rex","Rex",_F,!1);jn("redi","Redi",vF,!1);jn("mixup","Mixup",bF,!1);jn("pyramorphix","Pyramorphix",yF,!1);jn("gear","Gear",MF,!1);jn("dreidel","Dreidel",TF,!1);jn("bandaged222","Bandaged 2x2x2",AF,!1);jn("bicube","Bicube",kF,!1);jn("pandora","Pandora",LF,!1);jn("ultimateSkewb","Ultimate Skewb",PF,!1);jn("pyraminxCrystal","Pyraminx Crystal",RF,!1);jn("tetraminx","Tetraminx",DF,!1);jn("meierHalpernPyramid","Meier-Halpern Pyramid",OF,!1);class wr{constructor(e){ke(this,"rotation");ke(this,"p");ke(this,"order");ke(this,"arrows");ke(this,"type");ke(this,"mode");ke(this,"view");ke(this,"headless");ke(this,"img");ke(this,"options");if(this.options=e,this.type=e.type||"rubik",this.mode=e.mode||si.NORMAL,this.view=e.view||"trans",this.headless=!!e.headless,this.img=pb,this.options.sequence="",this.view==="plan")switch(this.type){case"megaminx":case"pyraminx":case"skewb":case"square1":this.view="2d";break}this.type==="mirror"&&(this.view="trans",this.mode=si.NORMAL),this.setTips(e.tips||[]);let n;if(Array.isArray(e.order))if(e.order.length>=3)n=[...e.order.slice(0,3)];else{n=[...e.order];let i=0;for(;n.length<3;)n.push(e.order[i]),i=(i+1)%e.order.length}else typeof e.order=="number"?n=[e.order,e.order,e.order]:n=[3,3,3];["megaminx","pyraminx"].indexOf(this.type)>-1&&(n.length=1),n.push(this.headless),this.p=gb.get(this.type).constr.apply(null,n),this.order=n,this.rotation=this.p.rotation,this.adjustColors()}adjustColors(){if(this.type!="rubik")return;let e=this.p.pieces,n;if(this.mode===si.NORMAL||this.mode===si.ELL||this.mode===si.ZBLL||this.mode===si.PLL){for(let r=0,o=e.length;r<o;r+=1){let a=e[r].stickers;for(let l=0,c=a.length;l<c;l+=1)a[l].color=a[l].oColor}return}if(this.order[0]===1)n=e[0].stickers.filter(r=>r.getOrientation().sub(G).abs()<1e-6)[0];else if(this.order[0]===2){for(let r=0,o=e.length;r<o;r+=1)if(e[r].getMassCenter(!1).y>0){n=e[r].stickers.filter(a=>a.getOrientation().sub(G).abs()<1e-6)[0];break}}else this.order[0]%2==1?n=e.filter(r=>{let o=r.stickers.filter(c=>c.oColor!="x"&&c.oColor!="d");if(o.length!=1)return!1;let l=o[0].getMassCenter();return o[0].getOrientation().sub(G).abs()<1e-6&&Math.abs(l.x)<1e-6&&Math.abs(l.z)<1e-6})[0].stickers.filter(r=>r.oColor!="x"&&r.oColor!="d")[0]:n=e.filter(r=>r.length===2&&r.stickers[0].getOrientation().sub(G).abs()<1e-6)[0].stickers[0];let i=n.oColor,s=this.p.faceColors[(this.p.faceColors.indexOf(i)+3)%6];for(let r=0,o=e.length;r<o;r+=1){let a=e[r].stickers.filter(u=>"xd".indexOf(u.oColor)===-1),l=a.length,c=a.reduce((u,f)=>u||f.getOrientation().sub(G).abs()<1e-6,!1);switch(this.mode){case si.OLL:{for(let u=0;u<l;u+=1)a[u].oColor!=i?a[u].color="x":a[u].color=a[u].oColor;break}case si.F2L:{for(let u=0;u<l;u+=1)e[r].contains(i)?a[u].color="x":a[u].color=a[u].oColor;break}case si.CMLL:{for(let u=0;u<l;u+=1)c&&l===2?a[u].color="x":a[u].color=a[u].oColor;break}case si.OLLCP:{if(c)for(let u=0;u<l;u+=1)l===2&&a[u].oColor!=i?a[u].color="x":a[u].color=a[u].oColor;else for(let u=0;u<l;u+=1)a[u].color="x";break}case si.COLL:{if(c)for(let u=0;u<l;u+=1)if(l===2){let f=!0,h=a[u].points;for(let d=1,p=h.length;d<p;d+=1)if(Math.abs(h[d].y-h[0].y)>1e-5){f=!1;break}f?a[u].color=a[u].oColor:a[u].color="x"}else a[u].color=a[u].oColor;else for(let u=0;u<l;u+=1)a[u].color="x";break}case si.VLS:case si.WV:{for(let u=0;u<l;u+=1)e[r].contains(i)&&a[u].oColor!=i?a[u].color="x":a[u].color=a[u].oColor;break}case si.GRAY:{for(let u=0;u<l;u+=1)a[u].color="x";break}case si.CENTERS:{for(let u=0;u<l;u+=1)l!=1?a[u].color="x":a[u].color=a[u].oColor;break}case si.CROSS:{let u=l>2||l===2&&!e[r].contains(s);for(let f=0;f<l;f+=1)a[f].color=u?"x":a[f].oColor;break}case si.FL:{let u=l>=2&&!e[r].contains(s);for(let f=0;f<l;f+=1)a[f].color=u?"x":a[f].oColor;break}case si.YCROSS:{let u=e[r].contains(i)&&l>2;for(let f=0;f<l;f+=1)a[f].color=u?"x":a[f].oColor;break}}}}static inverse(e,n){let i=n.trim().split(" ").map(r=>r.trim()).filter(r=>r!=""),s=[];if(e!=="square1")for(let r=i.length-1;r>=0;r-=1)i[r].indexOf("2")>-1||i[r].indexOf("'")>-1?s.push(i[r].replace("'","")):s.push(i[r]+"'");else{let r=/\s*\(?(-?\d+), *(-?\d+)\)?\s*/;i=n.replace(/\s+/g,"").split("/");for(let o=i.length-1;o>=0;o-=1){let a=i[o].match(r);a&&s.push(`(${-a[1]}, ${-a[2]})`),o>0&&s.push("/")}}return s.join(" ")}static fromSequence(e,n,i){let s=new wr(n),r=i?wr.inverse(n.type,e):e;return s.move(r),s.options.sequence=r,s}setTips(e){this.arrows=e.map(n=>n)}isComplete(){let e=this.p.pieces,n=this.p.faceVectors,i=n.length,s=[];for(let r=0;r<i;r+=1)s.push("-");for(let r=0,o=e.length;r<o;r+=1){let a=e[r].stickers;for(let l=0,c=a.length;l<c;l+=1){if("xd".indexOf(a[l].oColor)>-1)continue;let u=a[l].getOrientation(),f=!1;for(let h=0;h<i;h+=1)if(u.sub(n[h]).abs()<1e-6){if(s[h]==="-")s[h]=a[l].oColor;else if(s[h]!=a[l].oColor)return!1;f=!0;break}if(!f)return!1}}return!0}move(e){let n;if(["rubik","axis","fisher","ivy"].indexOf(this.type)>-1)n=Gs.parseNNN(e,this.order[0]);else if(this.type==="pyraminx")n=Gs.parsePyraminx(e);else if(this.type==="skewb")n=Gs.parseSkewb(e);else if(this.type==="square1")n=Gs.parseSquare1(e);else if(this.type==="clock")n=Gs.parseClock(e);else if(this.type==="megaminx")n=Gs.parseMegaminx(e);else return;this.p.move(n),this.adjustColors()}getColor(e){return this.p.palette[e]}getHexColor(e){let n=new Us(this.p.palette[e]);return pB(n.toRGBStr())}getHexStrColor(e){return new Us(this.p.palette[e]).toHex()}get pieces(){return this.p.pieces}getAllStickers(){return this.p.getAllStickers()}clone(e){let n=new wr({type:this.type,mode:typeof e<"u"?e:this.mode,view:this.view,order:[this.order[0]],tips:this.arrows,headless:this.options.headless,rounded:this.options.rounded,sequence:this.options.sequence});n.p.pieces.length=0;let i=this.p.pieces;for(let s=0,r=i.length;s<r;s+=1)n.p.pieces.push(i[s].clone());return n.p.center=this.p.center.clone(),n.p.dims=(this.p.dims||[]).map(s=>s),n.p.rotation=Object.assign({},this.p.rotation),n.rotation=Object.assign({},this.rotation),n}moveFromMouse(e,n,i,s){return this.p.toMove(e,n,i,s)}getPiece(e){let n=this.pieces,i=1/0,s=null,r=null;for(let o=0,a=n.length;o<a;o+=1){let l=n[o].stickers;for(let c=0,u=l.length;c<u;c+=1){let f=l[c].points;if(e.length===f.length){let h=f.reduce((d,p,_)=>d+p.sub(new $e(e[_].x,e[_].y,e[_].z)).abs(),0);h<i&&(i=h,s=n[o],r=l[c])}}}return[s,r]}computeBoundingBox(){let n=this.pieces.map(i=>i.computeBoundingBox()).reduce((i,s)=>[Math.min(i[0],s[0].x),Math.min(i[1],s[0].y),Math.min(i[2],s[0].z),Math.max(i[3],s[1].x),Math.max(i[4],s[1].y),Math.max(i[5],s[1].z)],[1/0,1/0,1/0,-1/0,-1/0,-1/0]);return[new $e(n[0],n[1],n[2]),new $e(n[3],n[4],n[5])]}}function oA(t,e,n,i,s){return n===e?i:(t-e)*(s-i)/(n-e)+i}function ld(t,e,n,i,s){return oA(t,e,i,n,s)}function cw(t){return Math.cos(t)}function uw(t){return Math.sin(t)}function IF(t,e,n){return[t*cw(n)-e*uw(n),t*uw(n)+e*cw(n)]}function Em(t,e,n){return Math.min(n,Math.max(e,t))}class NF{constructor(e,n,i){ke(this,"data");ke(this,"len");ke(this,"limit");ke(this,"offset");ke(this,"_page");ke(this,"_pages");ke(this,"width");ke(this,"labels");this.data=Array.isArray(e)?e:[],this.len=this.data.length,this.limit=Math.abs(~~n)||10,this.offset=0,this._page=0,this.width=i||5,this.labels=[],this.update()}get start(){return this.offset}get end(){return this.start+this.limit}get page(){return this._page}get pages(){return this._pages}update(){this.len=this.data.length,this._pages=Math.ceil(this.len/this.limit),this._page=Em(this._page,1,this._pages),this.offset=(this._page-1)*this.limit;let e=Math.max(1,this._page-(this.width>>1)),n=Math.min(this._pages,e+this.width-1);this.labels.length=0;for(let i=e;i<=n;i+=1)this.labels.push(i)}setData(e){this.data=e,this.update()}setPage(e){this._page=e,this.update()}nextPage(){this.setPage(this._page+1)}prevPage(){this.setPage(this._page-1)}}function BF(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9M10,16V19.08L13.08,16H20V4H4V16H10M11,6H13V9H16V11H13V14H11V11H8V9H11V6Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function FF(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class zF extends dt{constructor(e){super(),ht(this,e,FF,BF,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function UF(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function HF(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class VF extends dt{constructor(e){super(),ht(this,e,HF,UF,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function GF(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function WF(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class jF extends dt{constructor(e){super(),ht(this,e,WF,GF,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function YF(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M5,3H19A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3M7,5A2,2 0 0,0 5,7A2,2 0 0,0 7,9A2,2 0 0,0 9,7A2,2 0 0,0 7,5M17,15A2,2 0 0,0 15,17A2,2 0 0,0 17,19A2,2 0 0,0 19,17A2,2 0 0,0 17,15M17,5A2,2 0 0,0 15,7A2,2 0 0,0 17,9A2,2 0 0,0 19,7A2,2 0 0,0 17,5M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M7,15A2,2 0 0,0 5,17A2,2 0 0,0 7,19A2,2 0 0,0 9,17A2,2 0 0,0 7,15Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function qF(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class XF extends dt{constructor(e){super(),ht(this,e,qF,YF,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function ZF(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function JF(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class Eg extends dt{constructor(e){super(),ht(this,e,JF,ZF,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function KF(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M2,21L23,12L2,3V10L17,12L2,14V21Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function $F(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class QF extends dt{constructor(e){super(),ht(this,e,$F,KF,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function ez(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M15,16H19V18H15V16M15,8H22V10H15V8M15,12H21V14H15V12M11,10V18H5V10H11M13,8H3V18A2,2 0 0,0 5,20H11A2,2 0 0,0 13,18V8M14,5H11L10,4H6L5,5H2V7H14V5Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function tz(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class nz extends dt{constructor(e){super(),ht(this,e,tz,ez,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function iz(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M9,9H15V15H9M7,17H17V7H7M15,5H17V3H15M15,21H17V19H15M19,17H21V15H19M19,9H21V7H19M19,21A2,2 0 0,0 21,19H19M19,13H21V11H19M11,21H13V19H11M9,3H7V5H9M3,17H5V15H3M5,21V19H3A2,2 0 0,0 5,21M19,3V5H21A2,2 0 0,0 19,3M13,3H11V5H13M3,9H5V7H3M7,21H9V19H7M3,13H5V11H3M3,5H5V3A2,2 0 0,0 3,5Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function sz(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class rz extends dt{constructor(e){super(),ht(this,e,sz,iz,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function oz(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M9,11H15V8L19,12L15,16V13H9V16L5,12L9,8V11M2,20V4H4V20H2M20,20V4H22V20H20Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function az(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class lz extends dt{constructor(e){super(),ht(this,e,az,oz,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function cz(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M5,3H7V5H9V3H11V5H13V3H15V5H17V3H19V5H21V7H19V9H21V11H19V13H21V15H19V17H21V19H19V21H17V19H15V21H13V19H11V21H9V19H7V21H5V19H3V17H5V15H3V13H5V11H3V9H5V7H3V5H5V3Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function uz(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class fz extends dt{constructor(e){super(),ht(this,e,uz,cz,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function hz(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M1,4.27L2.28,3L21,21.72L19.73,23L17,20.27V21H15V19H15.73L5,8.27V9H3V7H3.73L1,4.27M20,3A1,1 0 0,1 21,4V5H19V3H20M15,5V3H17V5H15M11,5V3H13V5H11M7,5V3H9V5H7M11,21V19H13V21H11M7,21V19H9V21H7M4,21A1,1 0 0,1 3,20V19H5V21H4M3,15H5V17H3V15M21,15V17H19V15H21M3,11H5V13H3V11M21,11V13H19V11H21M21,7V9H19V7H21Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function dz(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class pz extends dt{constructor(e){super(),ht(this,e,dz,hz,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function mz(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function gz(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class _z extends dt{constructor(e){super(),ht(this,e,gz,mz,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function vz(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function bz(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class yz extends dt{constructor(e){super(),ht(this,e,bz,vz,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function wz(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M18.41,7.41L17,6L11,12L17,18L18.41,16.59L13.83,12L18.41,7.41M12.41,7.41L11,6L5,12L11,18L12.41,16.59L7.83,12L12.41,7.41Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function xz(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class Mz extends dt{constructor(e){super(),ht(this,e,xz,wz,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function Sz(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M5.59,7.41L7,6L13,12L7,18L5.59,16.59L10.17,12L5.59,7.41M11.59,7.41L13,6L19,12L13,18L11.59,16.59L16.17,12L11.59,7.41Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function Ez(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class Tz extends dt{constructor(e){super(),ht(this,e,Ez,Sz,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function Az(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M21,12L14,5V9C7,10 4,15 3,20C5.5,16.5 9,14.9 14,14.9V19L21,12Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function kz(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class aA extends dt{constructor(e){super(),ht(this,e,kz,Az,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function lA(t,e,n){let i=[],s=e.length-1,r=[],o=t===3?0:Math.ceil(t*.05);for(let a=0,l=s;a<=l;a+=1)if(r.push(e[s-a]),r.length<t)i.push(null);else{let u=r.slice().sort((f,h)=>isFinite(f)&&isFinite(h)?f-h:isFinite(f)?-1:1).reduce((f,h,d)=>d>=o&&d<t-o?f+h:f,0);i.push(isFinite(u)?u/(t-o*2):null),n===kr.GROUP&&(r.length=0),n===kr.SEQUENTIAL&&r.shift()}return i}function $f(t,e,n){return lA(t,e.map(i=>yr(i)?1/0:i.time),n)}function Cz(t){const e=t.length;let n=0,i=0,s=0,r=0;for(let l=0;l<e;l+=1){let c=t[l][0],u=t[l][1];n+=c,i+=u,s+=c*c,r+=c*u}let o=(e*r-n*i)/(e*s-n**2),a=(i-o*n)/e;return{m:o,n:a}}function cA(t,e){const i=e*2;return t.length<=i?t:new Array(i).fill(0).map((s,r)=>t[Math.round(r*(t.length-1)/(i-1))])}function Lz(t,e){return cA(t,e)}function Pz(t,e){return cA(t.filter(n=>!yr(n)),e)}function fw(t,e,n){const i=t.slice();return i[59]=e[n],i}function hw(t,e,n){const i=t.slice();return i[62]=e[n],i}function dw(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m;i=new Mz({}),o=new _z({});let v=t[1].labels,g=[];for(let b=0;b<v.length;b+=1)g[b]=pw(hw(t,v,b));return u=new yz({}),d=new Tz({}),{c(){e=D("ul"),n=D("li"),ce(i.$$.fragment),s=z(),r=D("li"),ce(o.$$.fragment),a=z();for(let b=0;b<g.length;b+=1)g[b].c();l=z(),c=D("li"),ce(u.$$.fragment),f=z(),h=D("li"),ce(d.$$.fragment),M(n,"class","paginator-item svelte-wt3lwp"),M(r,"class","paginator-item svelte-wt3lwp"),M(c,"class","paginator-item svelte-wt3lwp"),M(h,"class","paginator-item svelte-wt3lwp"),M(e,"class","w-max flex justify-center mx-auto gap-2 text-gray-400")},m(b,y){I(b,e,y),E(e,n),ae(i,n,null),E(e,s),E(e,r),ae(o,r,null),E(e,a);for(let w=0;w<g.length;w+=1)g[w].m(e,null);E(e,l),E(e,c),ae(u,c,null),E(e,f),E(e,h),ae(d,h,null),p=!0,_||(m=[tt(n,"click",t[26]),tt(r,"click",t[27]),tt(c,"click",t[29]),tt(h,"click",t[30])],_=!0)},p(b,y){if(y[0]&4194306){v=b[1].labels;let w;for(w=0;w<v.length;w+=1){const x=hw(b,v,w);g[w]?g[w].p(x,y):(g[w]=pw(x),g[w].c(),g[w].m(e,l))}for(;w<g.length;w+=1)g[w].d(1);g.length=v.length}},i(b){p||(P(i.$$.fragment,b),P(o.$$.fragment,b),P(u.$$.fragment,b),P(d.$$.fragment,b),p=!0)},o(b){H(i.$$.fragment,b),H(o.$$.fragment,b),H(u.$$.fragment,b),H(d.$$.fragment,b),p=!1},d(b){b&&O(e),le(i),le(o),en(g,b),le(u),le(d),_=!1,Jn(m)}}}function pw(t){let e,n=t[62]+"",i,s,r;function o(){return t[28](t[62])}return{c(){e=D("li"),i=ye(n),M(e,"class","paginator-item svelte-wt3lwp"),bt(e,"selected",t[1].page===t[62])},m(a,l){I(a,e,l),E(e,i),s||(r=tt(e,"click",o),s=!0)},p(a,l){t=a,l[0]&2&&n!==(n=t[62]+"")&&nt(i,n),l[0]&2&&bt(e,"selected",t[1].page===t[62])},d(a){a&&O(e),s=!1,r()}}}function mw(t){let e;return{c(){e=D("span"),e.textContent="+2",M(e,"class","font-small svelte-wt3lwp")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function gw(t){let e,n;return e=new zF({props:{width:".8rem"}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function _w(t){let e,n,i=rt(t[59].date).format("DD/MM")+"",s,r,o,a=(t[59].penalty===ct.DNF?"DNF":xt(t[59].time,!0))+"",l,c,u,f,h,d,p,_,m=t[59].penalty===1&&mw(),v=t[59].comments&&gw();function g(){return t[31](t[59])}return{c(){e=D("div"),n=D("div"),s=ye(i),r=z(),o=D("span"),l=ye(a),c=z(),u=D("div"),m&&m.c(),f=z(),v&&v.c(),h=z(),M(n,"class","font-small absolute top-0 left-2 svelte-wt3lwp"),M(o,"class","time font-bold"),M(u,"class","absolute right-1 top-0 h-full flex flex-col items-center justify-evenly"),M(e,"class","shadow-md w-24 h-12 rounded-md m-3 p-1 bg-white bg-opacity-10 relative flex items-center justify-center transition-all duration-200 select-none cursor-pointer hover:shadow-lg hover:bg-opacity-20  svelte-wt3lwp"),bt(e,"selected",t[59].selected)},m(b,y){I(b,e,y),E(e,n),E(n,s),E(e,r),E(e,o),E(o,l),E(e,c),E(e,u),m&&m.m(u,null),E(u,f),v&&v.m(u,null),E(e,h),d=!0,p||(_=tt(e,"click",g),p=!0)},p(b,y){t=b,(!d||y[0]&3)&&i!==(i=rt(t[59].date).format("DD/MM")+"")&&nt(s,i),(!d||y[0]&3)&&a!==(a=(t[59].penalty===ct.DNF?"DNF":xt(t[59].time,!0))+"")&&nt(l,a),t[59].penalty===1?m||(m=mw(),m.c(),m.m(u,f)):m&&(m.d(1),m=null),t[59].comments?v?y[0]&3&&P(v,1):(v=gw(),v.c(),P(v,1),v.m(u,null)):v&&(at(),H(v,1,1,()=>{v=null}),lt()),(!d||y[0]&3)&&bt(e,"selected",t[59].selected)},i(b){d||(P(v),d=!0)},o(b){H(v),d=!1},d(b){b&&O(e),m&&m.d(),v&&v.d(),p=!1,_()}}}function vw(t){let e,n;return e=new Vi({props:{position:"left",text:"Delete all [D]",$$slots:{default:[Rz]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s[2]&8&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Rz(t){let e,n,i,s,r;return n=new nz({props:{width:"1.2rem",height:"1.2rem"}}),{c(){e=D("span"),ce(n.$$.fragment),M(e,"class","cursor-pointer grid place-items-center")},m(o,a){I(o,e,a),ae(n,e,null),i=!0,s||(r=tt(e,"click",t[14]),s=!0)},p:Ve,i(o){i||(P(n.$$.fragment,o),i=!0)},o(o){H(n.$$.fragment,o),i=!1},d(o){o&&O(e),le(n),s=!1,r()}}}function Dz(t){let e,n,i,s,r;return n=new aA({props:{width:"1.2rem",height:"1.2rem"}}),{c(){e=D("span"),ce(n.$$.fragment),M(e,"class","cursor-pointer grid place-items-center")},m(o,a){I(o,e,a),ae(n,e,null),i=!0,s||(r=tt(e,"click",t[32]),s=!0)},p:Ve,i(o){i||(P(n.$$.fragment,o),i=!0)},o(o){H(n.$$.fragment,o),i=!1},d(o){o&&O(e),le(n),s=!1,r()}}}function Oz(t){let e,n,i,s,r;return n=new aA({props:{width:"1.2rem",height:"1.2rem"}}),{c(){e=D("span"),ce(n.$$.fragment),M(e,"class","cursor-pointer grid place-items-center")},m(o,a){I(o,e,a),ae(n,e,null),i=!0,s||(r=tt(e,"click",t[33]),s=!0)},p:Ve,i(o){i||(P(n.$$.fragment,o),i=!0)},o(o){H(n.$$.fragment,o),i=!1},d(o){o&&O(e),le(n),s=!1,r()}}}function Iz(t){let e,n,i;return e=new rz({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ce(e.$$.fragment),n=ye(" Select All [A]")},m(s,r){ae(e,s,r),I(s,n,r),i=!0},p:Ve,i(s){i||(P(e.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),i=!1},d(s){le(e,s),s&&O(n)}}}function Nz(t){let e,n,i;return e=new lz({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ce(e.$$.fragment),n=ye(" Select Interval [T]")},m(s,r){ae(e,s,r),I(s,n,r),i=!0},p:Ve,i(s){i||(P(e.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),i=!1},d(s){le(e,s),s&&O(n)}}}function Bz(t){let e,n,i;return e=new fz({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ce(e.$$.fragment),n=ye(" Invert Selection [V]")},m(s,r){ae(e,s,r),I(s,n,r),i=!0},p:Ve,i(s){i||(P(e.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),i=!1},d(s){le(e,s),s&&O(n)}}}function Fz(t){let e,n,i;return e=new pz({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ce(e.$$.fragment),n=ye(" Cancel [C / Esc]")},m(s,r){ae(e,s,r),I(s,n,r),i=!0},p:Ve,i(s){i||(P(e.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),i=!1},d(s){le(e,s),s&&O(n)}}}function zz(t){let e,n,i;return e=new Eg({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ce(e.$$.fragment),n=ye(" Delete [D]")},m(s,r){ae(e,s,r),I(s,n,r),i=!0},p:Ve,i(s){i||(P(e.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),i=!1},d(s){le(e,s),s&&O(n)}}}function bw(t){let e;return{c(){e=D("span"),e.textContent="+2",M(e,"class","font-small text-red-500 svelte-wt3lwp")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function yw(t){let e;return{c(){e=D("span"),e.textContent="DNF",M(e,"class","font-small text-red-500 svelte-wt3lwp")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function Uz(t){let e,n,i;return e=new Eg({}),{c(){ce(e.$$.fragment),n=ye(" Delete")},m(s,r){ae(e,s,r),I(s,n,r),i=!0},i(s){i||(P(e.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),i=!1},d(s){le(e,s),s&&O(n)}}}function Hz(t){let e,n,i;return e=new Oa({}),{c(){ce(e.$$.fragment),n=ye(" Cancel")},m(s,r){ae(e,s,r),I(s,n,r),i=!0},i(s){i||(P(e.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),i=!1},d(s){le(e,s),s&&O(n)}}}function Vz(t){let e,n,i;return e=new QF({}),{c(){ce(e.$$.fragment),n=ye(" Save")},m(s,r){ae(e,s,r),I(s,n,r),i=!0},i(s){i||(P(e.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),i=!1},d(s){le(e,s),s&&O(n)}}}function Gz(t){let e;return{c(){e=ye("+2")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function Wz(t){let e;return{c(){e=ye("DNF")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function jz(t){let e;return{c(){e=ye("No Penalty")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function Yz(t){let e,n,i=xt(t[7].time,!1,!0)+"",s,r,o,a,l,c,u,f,h=rt(t[7].date).format("D MMM YYYY")+"",d,p,_,m,v=rt(t[7].date).format("HH:MM")+"",g,b,y,w,x,S,T=t[7].scramble+"",A,C,k,L,F,U,N,B,W,ee,K,ge,se,X,q,Y,$,ze,_e,pe,Te,De,je,de=t[7].penalty===ct.P2&&bw(),Ae=t[7].penalty===ct.DNF&&yw();c=new jF({props:{width:"1.2rem",height:"1.2rem"}}),w=new XF({}),U=new VF({});function Oe(fe){t[39](fe)}let Ye={placeholder:"Comment..."};return t[7].comments!==void 0&&(Ye.value=t[7].comments),B=new Nh({props:Ye}),wt.push(()=>Nt(B,"value",Oe)),ge=new At({props:{flat:!0,$$slots:{default:[Uz]},$$scope:{ctx:t}}}),ge.$on("click",t[40]),X=new At({props:{flat:!0,$$slots:{default:[Hz]},$$scope:{ctx:t}}}),X.$on("click",t[41]),Y=new At({props:{flat:!0,class:"mr-2",$$slots:{default:[Vz]},$$scope:{ctx:t}}}),Y.$on("click",t[42]),ze=new At({props:{flat:!0,class:t[7].penalty===ct.P2?"text-red-500":"",$$slots:{default:[Gz]},$$scope:{ctx:t}}}),ze.$on("click",t[43]),pe=new At({props:{flat:!0,class:t[7].penalty===ct.DNF?"text-red-500":"",$$slots:{default:[Wz]},$$scope:{ctx:t}}}),pe.$on("click",t[44]),De=new At({props:{flat:!0,class:t[7].penalty===ct.NONE?"text-green-500":"",$$slots:{default:[jz]},$$scope:{ctx:t}}}),De.$on("click",t[45]),{c(){e=D("div"),n=D("h2"),s=ye(i),r=z(),de&&de.c(),o=z(),Ae&&Ae.c(),a=z(),l=D("span"),ce(c.$$.fragment),u=z(),f=D("span"),d=ye(h),p=z(),_=D("br"),m=z(),g=ye(v),b=z(),y=D("div"),ce(w.$$.fragment),x=z(),S=D("span"),A=ye(T),C=z(),k=D("img"),F=z(),ce(U.$$.fragment),N=z(),ce(B.$$.fragment),ee=z(),K=D("div"),ce(ge.$$.fragment),se=z(),ce(X.$$.fragment),q=z(),ce(Y.$$.fragment),$=z(),ce(ze.$$.fragment),_e=z(),ce(pe.$$.fragment),Te=z(),ce(De.$$.fragment),M(n,"class","m-1 w-max"),M(f,"class","ml-2"),M(l,"class","flex items-center font-small svelte-wt3lwp"),M(e,"class","flex justify-between items-center text-gray-400 m-2"),gi(k.src,L=t[8])||M(k,"src",L),M(k,"class","preview col-start-1 col-end-3 mb-2 mx-auto"),M(k,"alt",""),M(y,"class","algorithm-container text-gray-400 m-2 svelte-wt3lwp"),M(K,"class","mt-2 flex")},m(fe,R){I(fe,e,R),E(e,n),E(n,s),E(n,r),de&&de.m(n,null),E(n,o),Ae&&Ae.m(n,null),E(e,a),E(e,l),ae(c,l,null),E(l,u),E(l,f),E(f,d),E(f,p),E(f,_),E(f,m),E(f,g),I(fe,b,R),I(fe,y,R),ae(w,y,null),E(y,x),E(y,S),E(S,A),E(y,C),E(y,k),E(y,F),ae(U,y,null),E(y,N),ae(B,y,null),I(fe,ee,R),I(fe,K,R),ae(ge,K,null),E(K,se),ae(X,K,null),E(K,q),ae(Y,K,null),E(K,$),ae(ze,K,null),E(K,_e),ae(pe,K,null),E(K,Te),ae(De,K,null),je=!0},p(fe,R){(!je||R[0]&128)&&i!==(i=xt(fe[7].time,!1,!0)+"")&&nt(s,i),fe[7].penalty===ct.P2?de||(de=bw(),de.c(),de.m(n,o)):de&&(de.d(1),de=null),fe[7].penalty===ct.DNF?Ae||(Ae=yw(),Ae.c(),Ae.m(n,null)):Ae&&(Ae.d(1),Ae=null),(!je||R[0]&128)&&h!==(h=rt(fe[7].date).format("D MMM YYYY")+"")&&nt(d,h),(!je||R[0]&128)&&v!==(v=rt(fe[7].date).format("HH:MM")+"")&&nt(g,v),(!je||R[0]&128)&&T!==(T=fe[7].scramble+"")&&nt(A,T),(!je||R[0]&256&&!gi(k.src,L=fe[8]))&&M(k,"src",L);const V={};!W&&R[0]&128&&(W=!0,V.value=fe[7].comments,It(()=>W=!1)),B.$set(V);const ne={};R[2]&8&&(ne.$$scope={dirty:R,ctx:fe}),ge.$set(ne);const he={};R[2]&8&&(he.$$scope={dirty:R,ctx:fe}),X.$set(he);const ie={};R[2]&8&&(ie.$$scope={dirty:R,ctx:fe}),Y.$set(ie);const ue={};R[0]&128&&(ue.class=fe[7].penalty===ct.P2?"text-red-500":""),R[2]&8&&(ue.$$scope={dirty:R,ctx:fe}),ze.$set(ue);const Re={};R[0]&128&&(Re.class=fe[7].penalty===ct.DNF?"text-red-500":""),R[2]&8&&(Re.$$scope={dirty:R,ctx:fe}),pe.$set(Re);const Ue={};R[0]&128&&(Ue.class=fe[7].penalty===ct.NONE?"text-green-500":""),R[2]&8&&(Ue.$$scope={dirty:R,ctx:fe}),De.$set(Ue)},i(fe){je||(P(c.$$.fragment,fe),P(w.$$.fragment,fe),P(U.$$.fragment,fe),P(B.$$.fragment,fe),P(ge.$$.fragment,fe),P(X.$$.fragment,fe),P(Y.$$.fragment,fe),P(ze.$$.fragment,fe),P(pe.$$.fragment,fe),P(De.$$.fragment,fe),je=!0)},o(fe){H(c.$$.fragment,fe),H(w.$$.fragment,fe),H(U.$$.fragment,fe),H(B.$$.fragment,fe),H(ge.$$.fragment,fe),H(X.$$.fragment,fe),H(Y.$$.fragment,fe),H(ze.$$.fragment,fe),H(pe.$$.fragment,fe),H(De.$$.fragment,fe),je=!1},d(fe){fe&&O(e),de&&de.d(),Ae&&Ae.d(),le(c),fe&&O(b),fe&&O(y),le(w),le(U),le(B),fe&&O(ee),fe&&O(K),le(ge),le(X),le(Y),le(ze),le(pe),le(De)}}}function qz(t){let e;return{c(){e=ye("Cancel")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function Xz(t){let e;return{c(){e=ye("Delete")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function Zz(t){let e,n,i,s,r,o,a;return s=new At({props:{$$slots:{default:[qz]},$$scope:{ctx:t}}}),s.$on("click",t[48]),o=new At({props:{class:"bg-red-800 hover:bg-red-700 text-gray-400",$$slots:{default:[Xz]},$$scope:{ctx:t}}}),o.$on("click",t[49]),{c(){e=D("h1"),e.textContent="Do you want to remove all solves?",n=z(),i=D("div"),ce(s.$$.fragment),r=z(),ce(o.$$.fragment),M(e,"class","text-gray-400 mb-4 text-lg"),M(i,"class","flex justify-evenly")},m(l,c){I(l,e,c),I(l,n,c),I(l,i,c),ae(s,i,null),E(i,r),ae(o,i,null),a=!0},p(l,c){const u={};c[2]&8&&(u.$$scope={dirty:c,ctx:l}),s.$set(u);const f={};c[2]&8&&(f.$$scope={dirty:c,ctx:l}),o.$set(f)},i(l){a||(P(s.$$.fragment,l),P(o.$$.fragment,l),a=!0)},o(l){H(s.$$.fragment,l),H(o.$$.fragment,l),a=!1},d(l){l&&O(e),l&&O(n),l&&O(i),le(s),le(o)}}}function Jz(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w,x,S,T,A,C,k,L,F,U=t[1].pages>1&&dw(t),N=t[0].slice(t[1].start,t[1].end),B=[];for(let q=0;q<N.length;q+=1)B[q]=_w(fw(t,N,q));const W=q=>H(B[q],1,1,()=>{B[q]=null});let ee=t[0].length>0&&vw(t);a=new Vi({props:{position:"left",text:"Share Ao5",$$slots:{default:[Dz]},$$scope:{ctx:t}}}),c=new Vi({props:{position:"left",text:"Share Ao12",$$slots:{default:[Oz]},$$scope:{ctx:t}}}),h=new At({props:{flat:!0,$$slots:{default:[Iz]},$$scope:{ctx:t}}}),h.$on("click",t[34]),p=new At({props:{flat:!0,$$slots:{default:[Nz]},$$scope:{ctx:t}}}),p.$on("click",t[35]),m=new At({props:{flat:!0,$$slots:{default:[Bz]},$$scope:{ctx:t}}}),m.$on("click",t[36]),g=new At({props:{flat:!0,$$slots:{default:[Fz]},$$scope:{ctx:t}}}),g.$on("click",t[37]),y=new At({props:{flat:!0,$$slots:{default:[zz]},$$scope:{ctx:t}}}),y.$on("click",t[38]);function K(q){t[47](q)}let ge={onClose:t[11],$$slots:{default:[Yz]},$$scope:{ctx:t}};t[5]!==void 0&&(ge.show=t[5]),x=new Ma({props:ge}),t[46](x),wt.push(()=>Nt(x,"show",K));function se(q){t[51](q)}let X={onClose:t[24],$$slots:{default:[Zz]},$$scope:{ctx:t}};return t[6]!==void 0&&(X.show=t[6]),A=new Ma({props:X}),t[50](A),wt.push(()=>Nt(A,"show",se)),{c(){e=D("main"),U&&U.c(),n=z(),i=D("div");for(let q=0;q<B.length;q+=1)B[q].c();s=z(),r=D("div"),ee&&ee.c(),o=z(),ce(a.$$.fragment),l=z(),ce(c.$$.fragment),u=z(),f=D("div"),ce(h.$$.fragment),d=z(),ce(p.$$.fragment),_=z(),ce(m.$$.fragment),v=z(),ce(g.$$.fragment),b=z(),ce(y.$$.fragment),w=z(),ce(x.$$.fragment),T=z(),ce(A.$$.fragment),M(i,"id","grid"),M(i,"class","text-gray-400 ml-8 mr-12 grid h-max-[100%] overflow-scroll svelte-wt3lwp"),M(r,"class","absolute top-3 right-2 text-gray-400 my-3 mx-1 flex flex-col gap-2"),M(f,"class","fixed rounded-md p-2 top-0 opacity-0 pointer-events-none transition-all duration-300 bg-gray-700 shadow-md flex w-max max-w-full actions z-20 svelte-wt3lwp"),bt(f,"isVisible",t[2]),M(e,"class","w-full h-full")},m(q,Y){I(q,e,Y),U&&U.m(e,null),E(e,n),E(e,i);for(let $=0;$<B.length;$+=1)B[$].m(i,null);E(e,s),E(e,r),ee&&ee.m(r,null),E(r,o),ae(a,r,null),E(r,l),ae(c,r,null),E(e,u),E(e,f),ae(h,f,null),E(f,d),ae(p,f,null),E(f,_),ae(m,f,null),E(f,v),ae(g,f,null),E(f,b),ae(y,f,null),E(e,w),ae(x,e,null),E(e,T),ae(A,e,null),k=!0,L||(F=tt(window,"keyup",t[21]),L=!0)},p(q,Y){if(q[1].pages>1?U?(U.p(q,Y),Y[0]&2&&P(U,1)):(U=dw(q),U.c(),P(U,1),U.m(e,n)):U&&(at(),H(U,1,1,()=>{U=null}),lt()),Y[0]&4099){N=q[0].slice(q[1].start,q[1].end);let Oe;for(Oe=0;Oe<N.length;Oe+=1){const Ye=fw(q,N,Oe);B[Oe]?(B[Oe].p(Ye,Y),P(B[Oe],1)):(B[Oe]=_w(Ye),B[Oe].c(),P(B[Oe],1),B[Oe].m(i,null))}for(at(),Oe=N.length;Oe<B.length;Oe+=1)W(Oe);lt()}q[0].length>0?ee?(ee.p(q,Y),Y[0]&1&&P(ee,1)):(ee=vw(q),ee.c(),P(ee,1),ee.m(r,o)):ee&&(at(),H(ee,1,1,()=>{ee=null}),lt());const $={};Y[2]&8&&($.$$scope={dirty:Y,ctx:q}),a.$set($);const ze={};Y[2]&8&&(ze.$$scope={dirty:Y,ctx:q}),c.$set(ze);const _e={};Y[2]&8&&(_e.$$scope={dirty:Y,ctx:q}),h.$set(_e);const pe={};Y[2]&8&&(pe.$$scope={dirty:Y,ctx:q}),p.$set(pe);const Te={};Y[2]&8&&(Te.$$scope={dirty:Y,ctx:q}),m.$set(Te);const De={};Y[2]&8&&(De.$$scope={dirty:Y,ctx:q}),g.$set(De);const je={};Y[2]&8&&(je.$$scope={dirty:Y,ctx:q}),y.$set(je),(!k||Y[0]&4)&&bt(f,"isVisible",q[2]);const de={};Y[0]&392|Y[2]&8&&(de.$$scope={dirty:Y,ctx:q}),!S&&Y[0]&32&&(S=!0,de.show=q[5],It(()=>S=!1)),x.$set(de);const Ae={};Y[0]&16|Y[2]&8&&(Ae.$$scope={dirty:Y,ctx:q}),!C&&Y[0]&64&&(C=!0,Ae.show=q[6],It(()=>C=!1)),A.$set(Ae)},i(q){if(!k){P(U);for(let Y=0;Y<N.length;Y+=1)P(B[Y]);P(ee),P(a.$$.fragment,q),P(c.$$.fragment,q),P(h.$$.fragment,q),P(p.$$.fragment,q),P(m.$$.fragment,q),P(g.$$.fragment,q),P(y.$$.fragment,q),P(x.$$.fragment,q),P(A.$$.fragment,q),k=!0}},o(q){H(U),B=B.filter(Boolean);for(let Y=0;Y<B.length;Y+=1)H(B[Y]);H(ee),H(a.$$.fragment,q),H(c.$$.fragment,q),H(h.$$.fragment,q),H(p.$$.fragment,q),H(m.$$.fragment,q),H(g.$$.fragment,q),H(y.$$.fragment,q),H(x.$$.fragment,q),H(A.$$.fragment,q),k=!1},d(q){q&&O(e),U&&U.d(),en(B,q),ee&&ee.d(),le(a),le(c),le(h),le(p),le(m),le(g),le(y),t[46](null),le(x),t[50](null),le(A),L=!1,F()}}}function Kz(t){navigator.clipboard.writeText(t).then(()=>{console.log("Copied to clipboard")})}function $z(t,e,n){let i,s;const r=Ys.getInstance();let{context:o}=e,{solves:a,tab:l}=o;Lt(t,a,Se=>n(0,i=Se)),Lt(t,l,Se=>n(55,s=Se));let c=new NF([],100),u=0,f=0,h,d,p=!1,_=!1,m,v,g=pb,b;function y(Se){Se&&(v.comments=(Se.comments||"").trim(),v.penalty=Se.penalty,r.updateSolve(Se)),n(5,p=!1)}function w(Se){v=Se,n(7,m={...Se});let re=m.mode,we=Kc.has(re)?re:"333";b=wr.fromSequence(m.scramble,{...Kc.get(we),rounded:!0,headless:!0}),Dl([b],200).then(Me=>{let Ne=Me.subscribe(Ze=>{Ze!=="__initial__"&&(Ze!=null?n(8,g=Ze):Ne())})}),n(5,p=!0)}function x(Se){performance.now()-f<200||u?(Se.selected=!Se.selected,n(2,u+=Se.selected?1:-1),a.set(i)):setTimeout(()=>performance.now()-f>=200&&w(Se),200),f=performance.now()}function S(Se){Se===ct.P2?m.penalty!=ct.P2&&n(7,m.time+=2e3,m):m.penalty===ct.P2&&n(7,m.time-=2e3,m),n(7,m.penalty=Se,m)}function T(){n(6,_=!0)}function A(){n(2,u=i.length);for(let Se=0,re=u;Se<re;Se+=1)gt(a,i[Se].selected=!0,i)}function C(){n(2,u=i.length-u);for(let Se=0,re=i.length;Se<re;Se+=1)gt(a,i[Se].selected=!i[Se].selected,i)}function k(){let Se,re,we=i.length;for(Se=0;Se<we&&!i[Se].selected;Se+=1);for(re=we-1;re>=0&&!i[re].selected;re-=1);for(let Me=Se;Me<=re;Me+=1)i[Me].selected||(gt(a,i[Me].selected=!0,i),n(2,u+=1))}function L(){n(2,u=0);for(let Se=0,re=i.length;Se<re;Se+=1)gt(a,i[Se].selected=!1,i)}function F(Se){r.removeSolves(Se)}function U(){F(i.filter(Se=>Se.selected)),n(2,u=0)}function N(Se){if(s==1)switch(Se.code){case"KeyC":case"Escape":L();break;case"KeyA":A();break;case"KeyT":k();break;case"KeyV":C();break;case"KeyD":u?U():T();break;case"Enter":_&&d.close(!0)}}function B(Se){c.setData(i),n(1,c)}function W(Se){Se===-1&&c.nextPage(),Se===-2&&c.prevPage(),Se!=-1&&Se!=-2&&c.setPage(Se),n(1,c)}function ee(Se){let re=i.slice(0,Se).reverse(),we=$f(Se,re,kr.SEQUENTIAL),Me=(Ze,pt)=>yr(Ze)?pt:yr(pt)||Ze.time<pt.time?Ze:pt,Ne=re.reduce((Ze,pt)=>[Me(Ze[0],pt)===pt?pt:Ze[0],Me(Ze[1],pt)===pt?Ze[1]:pt],[re[0],re[0]]);we.length===Se&&Kz(`Ao${Se}: ${xt(we[Se-1],!0)} = ${re.map(Ze=>Ze===Ne[0]||Ze===Ne[1]?"("+E2(Ze,!0)+")":E2(Ze,!0)).join(", ")}`)}function K(Se){Se&&F(i)}const ge=()=>W(1),se=()=>W(-2),X=Se=>W(Se),q=()=>W(-1),Y=()=>W(1/0),$=Se=>x(Se),ze=()=>ee(5),_e=()=>ee(12),pe=()=>A(),Te=()=>k(),De=()=>C(),je=()=>L(),de=()=>U();function Ae(Se){t.$$.not_equal(m.comments,Se)&&(m.comments=Se,n(7,m))}const Oe=()=>{F([m]),h.close()},Ye=()=>h.close(),fe=()=>h.close(m),R=()=>S(ct.P2),V=()=>S(ct.DNF),ne=()=>S(ct.NONE);function he(Se){wt[Se?"unshift":"push"](()=>{h=Se,n(3,h)})}function ie(Se){p=Se,n(5,p)}const ue=()=>d.close(),Re=()=>d.close(!0);function Ue(Se){wt[Se?"unshift":"push"](()=>{d=Se,n(4,d)})}function Ee(Se){_=Se,n(6,_)}return t.$$set=Se=>{"context"in Se&&n(25,o=Se.context)},t.$$.update=()=>{t.$$.dirty[0]&1&&B()},[i,c,u,h,d,p,_,m,g,a,l,y,x,S,T,A,C,k,L,F,U,N,W,ee,K,o,ge,se,X,q,Y,$,ze,_e,pe,Te,De,je,de,Ae,Oe,Ye,fe,R,V,ne,he,ie,ue,Re,Ue,Ee]}class Qz extends dt{constructor(e){super(),ht(this,e,$z,Jz,ft,{context:25},null,[-1,-1,-1])}}/*!
 * Chart.js v4.0.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */function ro(){}const eU=(()=>{let t=0;return()=>t++})();function wn(t){return t===null||typeof t>"u"}function Un(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function fn(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ai(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ms(t,e){return ai(t)?t:e}function Ft(t,e){return typeof t>"u"?e:t}const tU=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,uA=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ut(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function cn(t,e,n,i){let s,r,o;if(Un(t))if(r=t.length,i)for(s=r-1;s>=0;s--)e.call(n,t[s],s);else for(s=0;s<r;s++)e.call(n,t[s],s);else if(fn(t))for(o=Object.keys(t),r=o.length,s=0;s<r;s++)e.call(n,t[o[s]],o[s])}function Tm(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Am(t){if(Un(t))return t.map(Am);if(fn(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=Am(t[n[s]]);return e}return t}function fA(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function nU(t,e,n,i){if(!fA(t))return;const s=e[t],r=n[t];fn(s)&&fn(r)?Qf(s,r,i):e[t]=Am(r)}function Qf(t,e,n){const i=Un(e)?e:[e],s=i.length;if(!fn(t))return t;n=n||{};const r=n.merger||nU;let o;for(let a=0;a<s;++a){if(o=i[a],!fn(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],t,o,n)}return t}function bf(t,e){return Qf(t,e,{merger:iU})}function iU(t,e,n){if(!fA(t))return;const i=e[t],s=n[t];fn(i)&&fn(s)?bf(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Am(s))}const ww={"":t=>t,x:t=>t.x,y:t=>t.y};function sU(t){const e=t.split("."),n=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function rU(t){const e=sU(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Sa(t,e){return(ww[e]||(ww[e]=rU(e)))(t)}function _b(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Js=t=>typeof t<"u",Ea=t=>typeof t=="function",xw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function oU(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Zn=Math.PI,Hn=2*Zn,aU=Hn+Zn,km=Number.POSITIVE_INFINITY,lU=Zn/180,li=Zn/2,za=Zn/4,Mw=Zn*2/3,fa=Math.log10,Xs=Math.sign;function yf(t,e,n){return Math.abs(t-e)<n}function Sw(t){const e=Math.round(t);t=yf(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(fa(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function cU(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((s,r)=>s-r).pop(),e}function ru(t){return!isNaN(parseFloat(t))&&isFinite(t)}function uU(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function hA(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function br(t){return t*(Zn/180)}function vb(t){return t*(180/Zn)}function Ew(t){if(!ai(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function dA(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*Zn&&(r+=Hn),{angle:r,distance:s}}function $1(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function fU(t,e){return(t-e+aU)%Hn-Zn}function Es(t){return(t%Hn+Hn)%Hn}function eh(t,e,n,i){const s=Es(t),r=Es(e),o=Es(n),a=Es(r-s),l=Es(o-s),c=Es(s-r),u=Es(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function ki(t,e,n){return Math.max(e,Math.min(n,t))}function hU(t){return ki(t,-32768,32767)}function So(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function bb(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const Eo=(t,e,n,i)=>bb(t,n,i?s=>{const r=t[s][e];return r<n||r===n&&t[s+1][e]===n}:s=>t[s][e]<n),dU=(t,e,n)=>bb(t,n,i=>t[i][e]>=n);function pU(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}const pA=["push","pop","shift","splice","unshift"];function mU(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),pA.forEach(n=>{const i="_onData"+_b(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function Tw(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(pA.forEach(r=>{delete t[r]}),delete t._chartjs)}function mA(t){const e=new Set;let n,i;for(n=0,i=t.length;n<i;++n)e.add(t[n]);return e.size===i?t:Array.from(e)}const gA=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function _A(t,e){let n=!1;return function(...i){n||(n=!0,gA.call(window,()=>{n=!1,t.apply(e,i)}))}}function gU(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const yb=t=>t==="start"?"left":t==="end"?"right":"center",Bi=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,_U=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function vA(t,e,n){const i=e.length;let s=0,r=i;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:f,maxDefined:h}=o.getUserBounds();f&&(s=ki(Math.min(Eo(a,o.axis,c).lo,n?i:Eo(e,l,o.getPixelForValue(c)).lo),0,i-1)),h?r=ki(Math.max(Eo(a,o.axis,u,!0).hi+1,n?0:Eo(e,l,o.getPixelForValue(u),!0).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function bA(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const cd=t=>t===0||t===1,Aw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Hn/n)),kw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Hn/n)+1,Sp={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*li)+1,easeOutSine:t=>Math.sin(t*li),easeInOutSine:t=>-.5*(Math.cos(Zn*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>cd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>cd(t)?t:Aw(t,.075,.3),easeOutElastic:t=>cd(t)?t:kw(t,.075,.3),easeInOutElastic(t){return cd(t)?t:t<.5?.5*Aw(t*2,.1125,.45):.5+.5*kw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Sp.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Sp.easeInBounce(t*2)*.5:Sp.easeOutBounce(t*2-1)*.5+.5};var Cw=Sp;/*!
 * @kurkle/color v0.2.1
 * https://github.com/kurkle/color#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */function Bh(t){return t+.5|0}const ha=(t,e,n)=>Math.max(Math.min(t,n),e);function Qu(t){return ha(Bh(t*2.55),0,255)}function _a(t){return ha(Bh(t*255),0,255)}function _o(t){return ha(Bh(t/2.55)/100,0,1)}function Lw(t){return ha(Bh(t*100),0,100)}const Fs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Q1=[..."0123456789ABCDEF"],vU=t=>Q1[t&15],bU=t=>Q1[(t&240)>>4]+Q1[t&15],ud=t=>(t&240)>>4===(t&15),yU=t=>ud(t.r)&&ud(t.g)&&ud(t.b)&&ud(t.a);function wU(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Fs[t[1]]*17,g:255&Fs[t[2]]*17,b:255&Fs[t[3]]*17,a:e===5?Fs[t[4]]*17:255}:(e===7||e===9)&&(n={r:Fs[t[1]]<<4|Fs[t[2]],g:Fs[t[3]]<<4|Fs[t[4]],b:Fs[t[5]]<<4|Fs[t[6]],a:e===9?Fs[t[7]]<<4|Fs[t[8]]:255})),n}const xU=(t,e)=>t<255?e(t):"";function MU(t){var e=yU(t)?vU:bU;return t?"#"+e(t.r)+e(t.g)+e(t.b)+xU(t.a,e):void 0}const SU=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function yA(t,e,n){const i=e*Math.min(n,1-n),s=(r,o=(r+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function EU(t,e,n){const i=(s,r=(s+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function TU(t,e,n){const i=yA(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function AU(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}function wb(t){const n=t.r/255,i=t.g/255,s=t.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=AU(n,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function xb(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(_a)}function Mb(t,e,n){return xb(yA,t,e,n)}function kU(t,e,n){return xb(TU,t,e,n)}function CU(t,e,n){return xb(EU,t,e,n)}function wA(t){return(t%360+360)%360}function LU(t){const e=SU.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Qu(+e[5]):_a(+e[5]));const s=wA(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=kU(s,r,o):e[1]==="hsv"?i=CU(s,r,o):i=Mb(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function PU(t,e){var n=wb(t);n[0]=wA(n[0]+e),n=Mb(n),t.r=n[0],t.g=n[1],t.b=n[2]}function RU(t){if(!t)return;const e=wb(t),n=e[0],i=Lw(e[1]),s=Lw(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${s}%, ${_o(t.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const Pw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Rw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function DU(){const t={},e=Object.keys(Rw),n=Object.keys(Pw);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,Pw[r]);r=parseInt(Rw[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let fd;function OU(t){fd||(fd=DU(),fd.transparent=[0,0,0,0]);const e=fd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const IU=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function NU(t){const e=IU.exec(t);let n=255,i,s,r;if(!!e){if(e[7]!==i){const o=+e[7];n=e[8]?Qu(o):ha(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?Qu(i):ha(i,0,255)),s=255&(e[4]?Qu(s):ha(s,0,255)),r=255&(e[6]?Qu(r):ha(r,0,255)),{r:i,g:s,b:r,a:n}}}function BU(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${_o(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const v0=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Kl=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function FU(t,e,n){const i=Kl(_o(t.r)),s=Kl(_o(t.g)),r=Kl(_o(t.b));return{r:_a(v0(i+n*(Kl(_o(e.r))-i))),g:_a(v0(s+n*(Kl(_o(e.g))-s))),b:_a(v0(r+n*(Kl(_o(e.b))-r))),a:t.a+n*(e.a-t.a)}}function hd(t,e,n){if(t){let i=wb(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Mb(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function xA(t,e){return t&&Object.assign(e||{},t)}function Dw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=_a(t[3]))):(e=xA(t,{r:0,g:0,b:0,a:1}),e.a=_a(e.a)),e}function zU(t){return t.charAt(0)==="r"?NU(t):LU(t)}class Cm{constructor(e){if(e instanceof Cm)return e;const n=typeof e;let i;n==="object"?i=Dw(e):n==="string"&&(i=wU(e)||OU(e)||zU(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=xA(this._rgb);return e&&(e.a=_o(e.a)),e}set rgb(e){this._rgb=Dw(e)}rgbString(){return this._valid?BU(this._rgb):void 0}hexString(){return this._valid?MU(this._rgb):void 0}hslString(){return this._valid?RU(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,s=e.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=FU(this._rgb,e._rgb,n)),this}clone(){return new Cm(this.rgb)}alpha(e){return this._rgb.a=_a(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Bh(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return hd(this._rgb,2,e),this}darken(e){return hd(this._rgb,2,-e),this}saturate(e){return hd(this._rgb,1,e),this}desaturate(e){return hd(this._rgb,1,-e),this}rotate(e){return PU(this._rgb,e),this}}function MA(t){return new Cm(t)}function SA(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Ow(t){return SA(t)?t:MA(t)}function b0(t){return SA(t)?t:MA(t).saturate(.5).darken(.1).hexString()}const UU=["x","y","borderWidth","radius","tension"],HU=["color","borderColor","backgroundColor"];function VU(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:HU},numbers:{type:"number",properties:UU}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function GU(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Iw=new Map;function WU(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Iw.get(n);return i||(i=new Intl.NumberFormat(t,e),Iw.set(n,i)),i}function Fh(t,e,n){return WU(e,n).format(t)}const EA={values(t){return Un(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=jU(t,n)}const o=fa(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Fh(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(fa(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?EA.numeric.call(this,t,e,n):""}};function jU(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Tg={formatters:EA};function YU(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Tg.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const bl=Object.create(null),e_=Object.create(null);function wf(t,e){if(!e)return t;const n=e.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];t=t[r]||(t[r]=Object.create(null))}return t}function y0(t,e,n){return typeof e=="string"?Qf(wf(t,e),n):Qf(wf(t,""),e)}class qU{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>b0(s.backgroundColor),this.hoverBorderColor=(i,s)=>b0(s.borderColor),this.hoverColor=(i,s)=>b0(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return y0(this,e,n)}get(e){return wf(this,e)}describe(e,n){return y0(e_,e,n)}override(e,n){return y0(bl,e,n)}route(e,n,i,s){const r=wf(this,e),o=wf(this,i),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return fn(l)?Object.assign({},c,l):Ft(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var ui=new qU({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[VU,GU,YU]);function XU(t){return!t||wn(t.size)||wn(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Lm(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function ZU(t,e,n,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,f,h;for(l=0;l<a;l++)if(f=n[l],f!=null&&Un(f)!==!0)o=Lm(t,s,r,o,f);else if(Un(f))for(c=0,u=f.length;c<u;c++)h=f[c],h!=null&&!Un(h)&&(o=Lm(t,s,r,o,h));t.restore();const d=r.length/2;if(d>n.length){for(l=0;l<d;l++)delete s[r[l]];r.splice(0,d)}return o}function Ua(t,e,n){const i=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function Nw(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function t_(t,e,n,i){TA(t,e,n,i,null)}function TA(t,e,n,i,s){let r,o,a,l,c,u,f,h;const d=e.pointStyle,p=e.rotation,_=e.radius;let m=(p||0)*lU;if(d&&typeof d=="object"&&(r=d.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(m),t.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),d){default:s?t.ellipse(n,i,s/2,_,0,0,Hn):t.arc(n,i,_,0,Hn),t.closePath();break;case"triangle":u=s?s/2:_,t.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*_),m+=Mw,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*_),m+=Mw,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*_),t.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(m+za)*l,f=Math.cos(m+za)*(s?s/2-c:l),a=Math.sin(m+za)*l,h=Math.sin(m+za)*(s?s/2-c:l),t.arc(n-f,i-a,c,m-Zn,m-li),t.arc(n+h,i-o,c,m-li,m),t.arc(n+f,i+a,c,m,m+li),t.arc(n-h,i+o,c,m+li,m+Zn),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*_,u=s?s/2:l,t.rect(n-u,i-l,2*u,2*l);break}m+=za;case"rectRot":f=Math.cos(m)*(s?s/2:_),o=Math.cos(m)*_,a=Math.sin(m)*_,h=Math.sin(m)*(s?s/2:_),t.moveTo(n-f,i-a),t.lineTo(n+h,i-o),t.lineTo(n+f,i+a),t.lineTo(n-h,i+o),t.closePath();break;case"crossRot":m+=za;case"cross":f=Math.cos(m)*(s?s/2:_),o=Math.cos(m)*_,a=Math.sin(m)*_,h=Math.sin(m)*(s?s/2:_),t.moveTo(n-f,i-a),t.lineTo(n+f,i+a),t.moveTo(n+h,i-o),t.lineTo(n-h,i+o);break;case"star":f=Math.cos(m)*(s?s/2:_),o=Math.cos(m)*_,a=Math.sin(m)*_,h=Math.sin(m)*(s?s/2:_),t.moveTo(n-f,i-a),t.lineTo(n+f,i+a),t.moveTo(n+h,i-o),t.lineTo(n-h,i+o),m+=za,f=Math.cos(m)*(s?s/2:_),o=Math.cos(m)*_,a=Math.sin(m)*_,h=Math.sin(m)*(s?s/2:_),t.moveTo(n-f,i-a),t.lineTo(n+f,i+a),t.moveTo(n+h,i-o),t.lineTo(n-h,i+o);break;case"line":o=s?s/2:Math.cos(m)*_,a=Math.sin(m)*_,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(m)*(s?s/2:_),i+Math.sin(m)*_);break}t.fill(),e.borderWidth>0&&t.stroke()}}function th(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Ag(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function kg(t){t.restore()}function JU(t,e,n,i,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else s==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function KU(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function yl(t,e,n,i,s,r={}){const o=Un(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,$U(t,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&e7(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),wn(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,i,r.maxWidth)),t.fillText(c,n,i,r.maxWidth),QU(t,n,i,c,r),i+=s.lineHeight;t.restore()}function $U(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),wn(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function QU(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function e7(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function nh(t,e){const{x:n,y:i,w:s,h:r,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,-li,Zn,!0),t.lineTo(n,i+r-o.bottomLeft),t.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,Zn,li,!0),t.lineTo(n+s-o.bottomRight,i+r),t.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,li,0,!0),t.lineTo(n+s,i+o.topRight),t.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-li,!0),t.lineTo(n+o.topLeft,i)}const t7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,n7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function i7(t,e){const n=(""+t).match(t7);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const s7=t=>+t||0;function Sb(t,e){const n={},i=fn(e),s=i?Object.keys(e):e,r=fn(t)?i?o=>Ft(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=s7(r(o));return n}function AA(t){return Sb(t,{top:"y",right:"x",bottom:"y",left:"x"})}function cl(t){return Sb(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Gi(t){const e=AA(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function wi(t,e){t=t||{},e=e||ui.font;let n=Ft(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=Ft(t.style,e.style);i&&!(""+i).match(n7)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Ft(t.family,e.family),lineHeight:i7(Ft(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Ft(t.weight,e.weight),string:""};return s.string=XU(s),s}function ef(t,e,n,i){let s=!0,r,o,a;for(r=0,o=t.length;r<o;++r)if(a=t[r],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),n!==void 0&&Un(a)&&(a=a[n%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function r7(t,e,n){const{min:i,max:s}=t,r=uA(e,(s-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Na(t,e){return Object.assign(Object.create(t),e)}function Eb(t,e=[""],n=t,i,s=()=>t[0]){Js(i)||(i=PA("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:i,_getTarget:s,override:o=>Eb([o,...t],e,n,i)};return new Proxy(r,{deleteProperty(o,a){return delete o[a],delete o._keys,delete t[0][a],!0},get(o,a){return CA(o,a,()=>d7(a,e,t,o))},getOwnPropertyDescriptor(o,a){return Reflect.getOwnPropertyDescriptor(o._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,a){return Fw(o).includes(a)},ownKeys(o){return Fw(o)},set(o,a,l){const c=o._storage||(o._storage=s());return o[a]=c[a]=l,delete o._keys,!0}})}function ou(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:kA(t,i),setContext:r=>ou(t,r,n,i),override:r=>ou(t.override(r),e,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return CA(r,o,()=>a7(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function kA(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Ea(n)?n:()=>n,isIndexable:Ea(i)?i:()=>i}}const o7=(t,e)=>t?t+_b(e):e,Tb=(t,e)=>fn(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function CA(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function a7(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=t;let a=i[e];return Ea(a)&&o.isScriptable(e)&&(a=l7(e,a,t,n)),Un(a)&&a.length&&(a=c7(e,a,t,o.isIndexable)),Tb(e,a)&&(a=ou(a,s,r&&r[e],o)),a}function l7(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);return a.add(t),e=e(r,o||i),a.delete(t),Tb(t,e)&&(e=Ab(s._scopes,s,t,e)),e}function c7(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(Js(r.index)&&i(t))e=e[r.index%e.length];else if(fn(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const f=Ab(c,s,t,u);e.push(ou(f,r,o&&o[t],a))}}return e}function LA(t,e,n){return Ea(t)?t(e,n):t}const u7=(t,e)=>t===!0?e:typeof t=="string"?Sa(e,t):void 0;function f7(t,e,n,i,s){for(const r of e){const o=u7(n,r);if(o){t.add(o);const a=LA(o._fallback,n,s);if(Js(a)&&a!==n&&a!==i)return a}else if(o===!1&&Js(i)&&n!==i)return null}return!1}function Ab(t,e,n,i){const s=e._rootScopes,r=LA(e._fallback,n,i),o=[...t,...s],a=new Set;a.add(i);let l=Bw(a,o,n,r||n,i);return l===null||Js(r)&&r!==n&&(l=Bw(a,o,r,l,i),l===null)?!1:Eb(Array.from(a),[""],s,r,()=>h7(e,n,i))}function Bw(t,e,n,i,s){for(;n;)n=f7(t,e,n,i,s);return n}function h7(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];return Un(s)&&fn(n)?n:s||{}}function d7(t,e,n,i){let s;for(const r of e)if(s=PA(o7(r,t),n),Js(s))return Tb(t,s)?Ab(n,i,t,s):s}function PA(t,e){for(const n of e){if(!n)continue;const i=n[t];if(Js(i))return i}}function Fw(t){let e=t._keys;return e||(e=t._keys=p7(t._scopes)),e}function p7(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}function RA(t,e,n,i){const{iScale:s}=t,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],o[a]={r:s.parse(Sa(u,r),c)};return o}const m7=Number.EPSILON||1e-14,au=(t,e)=>e<t.length&&!t[e].skip&&t[e],DA=t=>t==="x"?"y":"x";function g7(t,e,n,i){const s=t.skip?e:t,r=e,o=n.skip?e:n,a=$1(r,s),l=$1(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=i*c,h=i*u;return{previous:{x:r.x-f*(o.x-s.x),y:r.y-f*(o.y-s.y)},next:{x:r.x+h*(o.x-s.x),y:r.y+h*(o.y-s.y)}}}function _7(t,e,n){const i=t.length;let s,r,o,a,l,c=au(t,0);for(let u=0;u<i-1;++u)if(l=c,c=au(t,u+1),!(!l||!c)){if(yf(e[u],0,m7)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=r*o*e[u])}}function v7(t,e,n="x"){const i=DA(n),s=t.length;let r,o,a,l=au(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=au(t,c+1),!a)continue;const u=a[n],f=a[i];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${i}`]=f-r*e[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${i}`]=f+r*e[c])}}function b7(t,e="x"){const n=DA(e),i=t.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=au(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=au(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?Xs(s[o-1])!==Xs(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}_7(t,s,r),v7(t,r,e)}function dd(t,e,n){return Math.max(Math.min(t,n),e)}function y7(t,e){let n,i,s,r,o,a=th(t[0],e);for(n=0,i=t.length;n<i;++n)o=r,r=a,a=n<i-1&&th(t[n+1],e),r&&(s=t[n],o&&(s.cp1x=dd(s.cp1x,e.left,e.right),s.cp1y=dd(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=dd(s.cp2x,e.left,e.right),s.cp2y=dd(s.cp2y,e.top,e.bottom)))}function w7(t,e,n,i,s){let r,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")b7(t,s);else{let c=i?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],l=g7(c,a,t[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&y7(t,n)}function OA(){return typeof window<"u"&&typeof document<"u"}function kb(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Pm(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Cg=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function x7(t,e){return Cg(t).getPropertyValue(e)}const M7=["top","right","bottom","left"];function ul(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=M7[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const S7=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function E7(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(S7(s,r,t.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function qa(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=Cg(n),r=s.boxSizing==="border-box",o=ul(s,"padding"),a=ul(s,"border","width"),{x:l,y:c,box:u}=E7(t,n),f=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:d,height:p}=e;return r&&(d-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-f)/d*n.width/i),y:Math.round((c-h)/p*n.height/i)}}function T7(t,e,n){let i,s;if(e===void 0||n===void 0){const r=kb(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),a=Cg(r),l=ul(a,"border","width"),c=ul(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Pm(a.maxWidth,r,"clientWidth"),s=Pm(a.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:i||km,maxHeight:s||km}}const pd=t=>Math.round(t*10)/10;function A7(t,e,n,i){const s=Cg(t),r=ul(s,"margin"),o=Pm(s.maxWidth,t,"clientWidth")||km,a=Pm(s.maxHeight,t,"clientHeight")||km,l=T7(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const h=ul(s,"border","width"),d=ul(s,"padding");c-=d.width+h.width,u-=d.height+h.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?Math.floor(c/i):u-r.height),c=pd(Math.min(c,o,l.maxWidth)),u=pd(Math.min(u,a,l.maxHeight)),c&&!u&&(u=pd(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=pd(Math.floor(u*i))),{width:c,height:u}}function zw(t,e,n){const i=e||1,s=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=s/i,t.width=r/i;const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(t.currentDevicePixelRatio=i,o.height=s,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const k7=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t}();function Uw(t,e){const n=x7(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Xa(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function C7(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function L7(t,e,n,i){const s={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=Xa(t,s,n),a=Xa(s,r,n),l=Xa(r,e,n),c=Xa(o,a,n),u=Xa(a,l,n);return Xa(c,u,n)}const P7=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},R7=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function qc(t,e,n){return t?P7(e,n):R7()}function IA(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function NA(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function BA(t){return t==="angle"?{between:eh,compare:fU,normalize:Es}:{between:So,compare:(e,n)=>e-n,normalize:e=>e}}function Hw({start:t,end:e,count:n,loop:i,style:s}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:s}}function D7(t,e,n){const{property:i,start:s,end:r}=n,{between:o,normalize:a}=BA(i),l=e.length;let{start:c,end:u,loop:f}=t,h,d;if(f){for(c+=l,u+=l,h=0,d=l;h<d&&o(a(e[c%l][i]),s,r);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:t.style}}function FA(t,e,n){if(!n)return[t];const{property:i,start:s,end:r}=n,o=e.length,{compare:a,between:l,normalize:c}=BA(i),{start:u,end:f,loop:h,style:d}=D7(t,e,n),p=[];let _=!1,m=null,v,g,b;const y=()=>l(s,b,v)&&a(s,b)!==0,w=()=>a(r,v)===0||l(r,b,v),x=()=>_||y(),S=()=>!_||w();for(let T=u,A=u;T<=f;++T)g=e[T%o],!g.skip&&(v=c(g[i]),v!==b&&(_=l(v,s,r),m===null&&x()&&(m=a(v,s)===0?T:A),m!==null&&S()&&(p.push(Hw({start:m,end:T,loop:h,count:o,style:d})),m=null),A=T,b=v));return m!==null&&p.push(Hw({start:m,end:f,loop:h,count:o,style:d})),p}function zA(t,e){const n=[],i=t.segments;for(let s=0;s<i.length;s++){const r=FA(i[s],t.points,e);r.length&&n.push(...r)}return n}function O7(t,e,n,i){let s=0,r=e-1;if(n&&!i)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(r+=s);r>s&&t[r%e].skip;)r--;return r%=e,{start:s,end:r}}function I7(t,e,n,i){const s=t.length,r=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function N7(t,e){const n=t.points,i=t.options.spanGaps,s=n.length;if(!s)return[];const r=!!t._loop,{start:o,end:a}=O7(n,s,r,i);if(i===!0)return Vw(t,[{start:o,end:a,loop:r}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return Vw(t,I7(n,o,l,c),n,e)}function Vw(t,e,n,i){return!i||!i.setContext||!n?e:B7(t,e,n,i)}function B7(t,e,n,i){const s=t._chart.getContext(),r=Gw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=r,f=e[0].start,h=f;function d(p,_,m,v){const g=a?-1:1;if(p!==_){for(p+=l;n[p%l].skip;)p-=g;for(;n[_%l].skip;)_+=g;p%l!==_%l&&(c.push({start:p%l,end:_%l,loop:m,style:v}),u=v,f=_%l)}}for(const p of e){f=a?f:p.start;let _=n[f%l],m;for(h=f+1;h<=p.end;h++){const v=n[h%l];m=Gw(i.setContext(Na(s,{type:"segment",p0:_,p1:v,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),F7(m,u)&&d(f,h-1,p.loop,u),_=v,u=m}f<h-1&&d(f,h-1,p.loop,u)}return c}function Gw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function F7(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}/*!
 * Chart.js v4.0.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */class z7{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=gA.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);!n||(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ho=new z7;const Ww="transparent",U7={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Ow(t||Ww),s=i.valid&&Ow(e||Ww);return s&&s.valid?s.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class H7{constructor(e,n,i,s){const r=n[i];s=ef([e.to,s,r,e.from]);const o=ef([e.from,r,s]);this._active=!0,this._fn=e.fn||U7[e.type||typeof o],this._easing=Cw[e.easing]||Cw.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=ef([e.to,n,s,e.from]),this._from=ef([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=r;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class UA{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!fn(e))return;const n=Object.keys(ui.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!fn(r))return;const o={};for(const a of n)o[a]=r[a];(Un(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,s=G7(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&V7(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,n){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let f=r[c];const h=i.get(c);if(f)if(h&&f.active()){f.update(h,u,a);continue}else f.cancel();if(!h||!h.duration){e[c]=u;continue}r[c]=f=new H7(h,e,c,u),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return ho.add(this._chart,i),!0}}function V7(t,e){const n=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=t[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function G7(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function jw(t,e){const n=t&&t.options||{},i=n.reverse,s=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function W7(t,e,n){if(n===!1)return!1;const i=jw(t,n),s=jw(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function j7(t){let e,n,i,s;return fn(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:t===!1}}function HA(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function Yw(t,e,n,i={}){const s=t.keys,r=i.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(i.all)continue;break}c=t.values[l],ai(c)&&(r||e===0||Xs(e)===Xs(c))&&(e+=c)}return e}}function Y7(t){const e=Object.keys(t),n=new Array(e.length);let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i],n[i]={x:r,y:t[r]};return n}function qw(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function q7(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function X7(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function Z7(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Xw(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=t[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function Zw(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=q7(r,o,i),f=e.length;let h;for(let d=0;d<f;++d){const p=e[d],{[l]:_,[c]:m}=p,v=p._stacks||(p._stacks={});h=v[c]=Z7(s,u,_),h[a]=m,h._top=Xw(h,o,!0,i.type),h._bottom=Xw(h,o,!1,i.type)}}function w0(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function J7(t,e){return Na(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function K7(t,e,n){return Na(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Iu(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(!!i){e=e||t._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n]}}}const x0=t=>t==="reset"||t==="none",Jw=(t,e)=>e?t:Object.assign({},t),$7=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:HA(n,!0),values:null};class xr{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=qw(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Iu(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(f,h,d,p)=>f==="x"?h:f==="r"?p:d,r=n.xAxisID=Ft(i.xAxisID,w0(e,"x")),o=n.yAxisID=Ft(i.yAxisID,w0(e,"y")),a=n.rAxisID=Ft(i.rAxisID,w0(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,r,o,a),u=n.vAxisID=s(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Tw(this._data,this),e._stacked&&Iu(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(fn(n))this._data=Y7(n);else if(i!==n){if(i){Tw(i,this);const s=this._cachedMeta;Iu(s),s._parsed=[]}n&&Object.isExtensible(n)&&mU(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=qw(n.vScale,n),n.stack!==i.stack&&(s=!0,Iu(n),n.stack=i.stack),this._resyncElements(e),(s||r!==n._stacked)&&Zw(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&n===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,f,h;if(this._parsing===!1)i._parsed=s,i._sorted=!0,h=s;else{Un(s[e])?h=this.parseArrayData(i,s,e,n):fn(s[e])?h=this.parseObjectData(i,s,e,n):h=this.parsePrimitiveData(i,s,e,n);const d=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=f=h[u],l&&(d()&&(l=!1),c=f);i._sorted=l}o&&Zw(this,h)}parsePrimitiveData(e,n,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,f=new Array(s);let h,d,p;for(h=0,d=s;h<d;++h)p=h+i,f[h]={[a]:u||r.parse(c[p],p),[l]:o.parse(n[p],p)};return f}parseArrayData(e,n,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,u,f;for(l=0,c=s;l<c;++l)u=l+i,f=n[u],a[l]={x:r.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(e,n,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,f,h,d;for(u=0,f=s;u<f;++u)h=u+i,d=n[h],c[u]={x:r.parse(Sa(d,a),h),y:o.parse(Sa(d,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const s=this.chart,r=this._cachedMeta,o=n[e.axis],a={keys:HA(s,!0),values:n._stacks[e.axis]};return Yw(a,o,r.index,{mode:i})}updateRangeFromParsed(e,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,o=Yw(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=$7(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=X7(a);let h,d;function p(){d=s[h];const _=d[a.axis];return!ai(d[e.axis])||u>_||f<_}for(h=0;h<o&&!(!p()&&(this.updateRangeFromParsed(c,e,d,l),r));++h);if(r){for(h=o-1;h>=0;--h)if(!p()){this.updateRangeFromParsed(c,e,d,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][e.axis],ai(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=j7(Ft(this.options.clip,W7(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const f=s[u];f.hidden||(f.active&&c?o.push(f):f.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=K7(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=J7(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=e+"-"+n,a=r[o],l=this.enableOptionSharing&&Js(i);if(a)return Jw(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),d=Object.keys(ui.elements[e]),p=()=>this.getContext(i,s),_=c.resolveNamedOptions(h,d,p,f);return _.$shared&&(_.$shared=l,r[o]=Object.freeze(Jw(_,l))),_}_resolveAnimations(e,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(h,this.getContext(e,i,n))}const c=new UA(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(!!e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||x0(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:o}}updateElement(e,n,i,s){x0(s)?Object.assign(e,i):this._resolveAnimations(n,s).update(e,i)}updateSharedOptions(e,n,i){e&&!x0(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,s){e.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,n,i=!0){const s=this._cachedMeta,r=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),i&&this.updateElements(r,e,n,"reset")}updateElements(e,n,i,s){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,n);i._stacked&&Iu(i,s)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,s]=e;this[n](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ke(xr,"defaults",{}),ke(xr,"datasetElementType",null),ke(xr,"dataElementType",null);function Q7(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=n.length;s<r;s++)i=i.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=mA(i.sort((s,r)=>s-r))}return t._cache.$bar}function eH(t){const e=t.iScale,n=Q7(e,t.type);let i=e._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(Js(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=n.length;s<r;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function tH(t,e,n,i){const s=n.barThickness;let r,o;return wn(s)?(r=e.min*n.categoryPercentage,o=n.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[t]-r/2}}function nH(t,e,n,i){const s=e.pixels,r=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function iH(t,e,n,i){const s=n.parse(t[0],i),r=n.parse(t[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function VA(t,e,n,i){return Un(t)?iH(t,e,n,i):e[n.axis]=n.parse(t,i),e}function Kw(t,e,n,i){const s=t.iScale,r=t.vScale,o=s.getLabels(),a=s===r,l=[];let c,u,f,h;for(c=n,u=n+i;c<u;++c)h=e[c],f={},f[s.axis]=a||s.parse(o[c],c),l.push(VA(h,f,r,c));return l}function M0(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function sH(t,e,n){return t!==0?Xs(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function rH(t){let e,n,i,s,r;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:e,top:s,bottom:r}}function oH(t,e,n,i){let s=e.borderSkipped;const r={};if(!s){t.borderSkipped=r;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=rH(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?s=c:(n._bottom||0)===i?s=u:(r[$w(u,o,a,l)]=!0,s=c)),r[$w(s,o,a,l)]=!0,t.borderSkipped=r}function $w(t,e,n,i){return i?(t=aH(t,e,n),t=Qw(t,n,e)):t=Qw(t,e,n),t}function aH(t,e,n){return t===e?n:t===n?e:t}function Qw(t,e,n){return t==="start"?e:t==="end"?n:t}function lH(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Ep extends xr{parsePrimitiveData(e,n,i,s){return Kw(e,n,i,s)}parseArrayData(e,n,i,s){return Kw(e,n,i,s)}parseObjectData(e,n,i,s){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,f=[];let h,d,p,_;for(h=i,d=i+s;h<d;++h)_=n[h],p={},p[r.axis]=r.parse(Sa(_,c),h),f.push(VA(Sa(_,u),p,o,h));return f}updateRangeFromParsed(e,n,i,s){super.updateRangeFromParsed(e,n,i,s);const r=i._custom;r&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:s}=n,r=this.getParsed(e),o=r._custom,a=M0(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:h}=this._getSharedOptions(n,s);for(let d=n;d<n+i;d++){const p=this.getParsed(d),_=r||wn(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(d),m=this._calculateBarIndexPixels(d,u),v=(p._stacks||{})[a.axis],g={horizontal:c,base:_.base,enableBorderRadius:!v||M0(p._custom)||o===v._top||o===v._bottom,x:c?_.head:m.center,y:c?m.center:_.head,height:c?m.size:Math.abs(_.size),width:c?Math.abs(_.size):m.size};h&&(g.options=f||this.resolveDataElementOptions(d,e[d].active?"active":s));const b=g.options||e[d].options;oH(g,b,v,o),lH(g,b,u.ratio),this.updateElement(e[d],d,g,s)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=i.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),u=c&&c[l.vScale.axis];if(wn(u)||isNaN(u))return!0};for(const l of s)if(!(n!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const s=this._getStacks(e,i),r=n!==void 0?s.indexOf(n):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,s=[];let r,o;for(r=0,o=n.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=e.barThickness;return{min:a||eH(n),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i},options:{base:s,minBarLength:r}}=this,o=s||0,a=this.getParsed(e),l=a._custom,c=M0(l);let u=a[n.axis],f=0,h=i?this.applyStack(n,a,i):u,d,p;h!==u&&(f=h-u,h=u),c&&(u=l.barStart,h=l.barEnd-l.barStart,u!==0&&Xs(u)!==Xs(l.barEnd)&&(f=0),f+=u);const _=!wn(s)&&!c?s:f;let m=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?d=n.getPixelForValue(f+h):d=m,p=d-m,Math.abs(p)<r){p=sH(p,n,o)*r,u===o&&(m-=p/2);const v=n.getPixelForDecimal(0),g=n.getPixelForDecimal(1),b=Math.min(v,g),y=Math.max(v,g);m=Math.max(Math.min(m,y),b),d=m+p}if(m===n.getPixelForValue(o)){const v=Xs(p)*n.getLineWidthForValue(o)/2;m+=v,p-=v}return{size:p,base:m,head:d,center:d+p/2}}_calculateBarIndexPixels(e,n){const i=n.scale,s=this.options,r=s.skipNull,o=Ft(s.maxBarThickness,1/0);let a,l;if(n.grouped){const c=r?this._getStackCount(e):n.stackCount,u=s.barThickness==="flex"?nH(e,n,s,c):tH(e,n,s,c),f=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=u.start+u.chunk*f+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[n.axis]!==null&&i[r].draw(this._ctx)}}ke(Ep,"id","bar"),ke(Ep,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ke(Ep,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Tp extends xr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,i,s){const r=super.parsePrimitiveData(e,n,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(e,n,i,s){const r=super.parseArrayData(e,n,i,s);for(let o=0;o<r.length;o++){const a=n[i+o];r[o]._custom=Ft(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(e,n,i,s){const r=super.parseObjectData(e,n,i,s);for(let o=0;o<r.length;o++){const a=n[i+o];r[o]._custom=Ft(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let i=e.length-1;i>=0;--i)n=Math.max(n,e[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=n,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,s),u=o.axis,f=a.axis;for(let h=n;h<n+i;h++){const d=e[h],p=!r&&this.getParsed(h),_={},m=_[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(p[u]),v=_[f]=r?a.getBasePixel():a.getPixelForValue(p[f]);_.skip=isNaN(m)||isNaN(v),c&&(_.options=l||this.resolveDataElementOptions(h,d.active?"active":s),r&&(_.options.radius=0)),this.updateElement(d,h,_,s)}}resolveDataElementOptions(e,n){const i=this.getParsed(e);let s=super.resolveDataElementOptions(e,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return n!=="active"&&(s.radius=0),s.radius+=Ft(i&&i._custom,r),s}}ke(Tp,"id","bubble"),ke(Tp,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ke(Tp,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function cH(t,e,n){let i=1,s=1,r=0,o=0;if(e<Hn){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),h=Math.sin(l),d=(b,y,w)=>eh(b,a,l,!0)?1:Math.max(y,y*n,w,w*n),p=(b,y,w)=>eh(b,a,l,!0)?-1:Math.min(y,y*n,w,w*n),_=d(0,c,f),m=d(li,u,h),v=p(Zn,c,f),g=p(Zn+li,u,h);i=(_-v)/2,s=(m-g)/2,r=-(_+v)/2,o=-(m+g)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class Tc extends xr{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if(fn(i[e])){const{key:l="value"}=this._parsing;r=c=>+Sa(i[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return br(this.options.rotation-90)}_getCircumference(){return br(this.options.circumference)}_getRotationExtents(){let e=Hn,n=-Hn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();e=Math.min(e,r),n=Math.max(n,r+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(tU(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:h,ratioY:d,offsetX:p,offsetY:_}=cH(f,u,l),m=(i.width-o)/h,v=(i.height-o)/d,g=Math.max(Math.min(m,v)/2,0),b=uA(this.options.radius,g),y=Math.max(b*l,0),w=(b-y)/this._getVisibleDatasetWeightTotal();this.offsetX=p*b,this.offsetY=_*b,s.total=this.calculateTotal(),this.outerRadius=b-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,n){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/Hn)}updateElements(e,n,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,f=(a.top+a.bottom)/2,h=r&&c.animateScale,d=h?0:this.innerRadius,p=h?0:this.outerRadius,{sharedOptions:_,includeOptions:m}=this._getSharedOptions(n,s);let v=this._getRotation(),g;for(g=0;g<n;++g)v+=this._circumference(g,r);for(g=n;g<n+i;++g){const b=this._circumference(g,r),y=e[g],w={x:u+this.offsetX,y:f+this.offsetY,startAngle:v,endAngle:v+b,circumference:b,outerRadius:p,innerRadius:d};m&&(w.options=_||this.resolveDataElementOptions(g,y.active?"active":s)),v+=b,this.updateElement(y,g,w,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,s;for(s=0;s<n.length;s++){const r=e._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Hn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Fh(n._parsed[e],i.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let n=0;const i=this.chart;let s,r,o,a,l;if(!e){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,r=e.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,s=e.length;i<s;++i){const r=this.resolveDataElementOptions(i);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(Ft(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ke(Tc,"id","doughnut"),ke(Tc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ke(Tc,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"}),ke(Tc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return n.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class Ap extends xr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=vA(n,s,o);this._drawStart=a,this._drawCount=l,bA(n)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(n,s),h=o.axis,d=a.axis,{spanGaps:p,segment:_}=this.options,m=ru(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||s==="none",g=n+i,b=e.length;let y=n>0&&this.getParsed(n-1);for(let w=0;w<b;++w){const x=e[w],S=v?x:{};if(w<n||w>=g){S.skip=!0;continue}const T=this.getParsed(w),A=wn(T[d]),C=S[h]=o.getPixelForValue(T[h],w),k=S[d]=r||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[d],w);S.skip=isNaN(C)||isNaN(k)||A,S.stop=w>0&&Math.abs(T[h]-y[h])>m,_&&(S.parsed=T,S.raw=c.data[w]),f&&(S.options=u||this.resolveDataElementOptions(w,x.active?"active":s)),v||this.updateElement(x,w,S,s),y=T}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ke(Ap,"id","line"),ke(Ap,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ke(Ap,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class kp extends xr{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Fh(n._parsed[e].r,i.options.locale);return{label:s[e]||"",value:r}}parseObjectData(e,n,i,s){return RA.bind(this)(e,n,i,s)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<n.min&&(n.min=r),r>n.max&&(n.max=r))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,i=e.options,s=Math.min(n.right-n.left,n.bottom-n.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,i,s){const r=s==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,f=c.yCenter,h=c.getIndexAngle(0)-.5*Zn;let d=h,p;const _=360/this.countVisibleElements();for(p=0;p<n;++p)d+=this._computeAngle(p,s,_);for(p=n;p<n+i;p++){const m=e[p];let v=d,g=d+this._computeAngle(p,s,_),b=o.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;d=g,r&&(l.animateScale&&(b=0),l.animateRotate&&(v=g=h));const y={x:u,y:f,innerRadius:0,outerRadius:b,startAngle:v,endAngle:g,options:this.resolveDataElementOptions(p,m.active?"active":s)};this.updateElement(m,p,y,s)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(e,n,i){return this.chart.getDataVisibility(e)?br(this.resolveDataElementOptions(e,n).angle||i):0}}ke(kp,"id","polarArea"),ke(kp,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ke(kp,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return n.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class n_ extends Tc{}ke(n_,"id","pie"),ke(n_,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Cp extends xr{getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,s){return RA.bind(this)(e,n,i,s)}update(e){const n=this._cachedMeta,i=n.dataset,s=n.data||[],r=n.iScale.getLabels();if(i.points=s,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=n;a<n+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=r.getPointPositionForValue(a,this.getParsed(a).r),f=o?r.xCenter:u.x,h=o?r.yCenter:u.y,d={x:f,y:h,angle:u.angle,skip:isNaN(f)||isNaN(h),options:c};this.updateElement(l,a,d,s)}}}ke(Cp,"id","radar"),ke(Cp,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ke(Cp,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Lp extends xr{getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=n,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:i=[]}=n,s=this.chart._animationsDisabled;let{start:r,count:o}=vA(n,i,s);if(this._drawStart=r,this._drawCount=o,bA(n)&&(r=0,o=i.length),this.options.showLine){const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},e)}this.updateElements(i,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,s),f=this.getSharedOptions(u),h=this.includeOptions(s,f),d=o.axis,p=a.axis,{spanGaps:_,segment:m}=this.options,v=ru(_)?_:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||s==="none";let b=n>0&&this.getParsed(n-1);for(let y=n;y<n+i;++y){const w=e[y],x=this.getParsed(y),S=g?w:{},T=wn(x[p]),A=S[d]=o.getPixelForValue(x[d],y),C=S[p]=r||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,x,l):x[p],y);S.skip=isNaN(A)||isNaN(C)||T,S.stop=y>0&&Math.abs(x[d]-b[d])>v,m&&(S.parsed=x,S.raw=c.data[y]),h&&(S.options=f||this.resolveDataElementOptions(y,w.active?"active":s)),g||this.updateElement(w,y,S,s),b=x}this.updateSharedOptions(f,s,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!n.length)return s;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,r,o)/2}}ke(Lp,"id","scatter"),ke(Lp,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ke(Lp,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var uH=Object.freeze({__proto__:null,BarController:Ep,BubbleController:Tp,DoughnutController:Tc,LineController:Ap,PolarAreaController:kp,PieController:n_,RadarController:Cp,ScatterController:Lp});function Ha(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Cb{static override(e){Object.assign(Cb.prototype,e)}constructor(e){this.options=e||{}}init(){}formats(){return Ha()}parse(){return Ha()}format(){return Ha()}add(){return Ha()}diff(){return Ha()}startOf(){return Ha()}endOf(){return Ha()}}var fH={_date:Cb};function hH(t,e,n,i){const{controller:s,data:r,_sorted:o}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const l=a._reversePixels?dU:Eo;if(i){if(s._sharedOptions){const c=r[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const f=l(r,e,n-u),h=l(r,e,n+u);return{lo:f.lo,hi:h.hi}}}}else return l(r,e,n)}return{lo:0,hi:r.length-1}}function zh(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:f,hi:h}=hH(r[a],e,o,s);for(let d=f;d<=h;++d){const p=u[d];p.skip||i(p,c,d)}}}function dH(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function S0(t,e,n,i,s){const r=[];return!s&&!t.isPointInArea(e)||zh(t,n,e,function(a,l,c){!s&&!th(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function pH(t,e,n,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:f}=dA(o,{x:e.x,y:e.y});eh(f,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return zh(t,n,e,r),s}function mH(t,e,n,i,s,r){let o=[];const a=dH(n);let l=Number.POSITIVE_INFINITY;function c(u,f,h){const d=u.inRange(e.x,e.y,s);if(i&&!d)return;const p=u.getCenterPoint(s);if(!(!!r||t.isPointInArea(p))&&!d)return;const m=a(e,p);m<l?(o=[{element:u,datasetIndex:f,index:h}],l=m):m===l&&o.push({element:u,datasetIndex:f,index:h})}return zh(t,n,e,c),o}function E0(t,e,n,i,s,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!i?pH(t,e,n,s):mH(t,e,n,i,s,r)}function ex(t,e,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return zh(t,n,e,(l,c,u)=>{l[o](e[n],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var gH={evaluateInteractionItems:zh,modes:{index(t,e,n,i){const s=qa(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?S0(t,s,r,i,o):E0(t,s,r,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const s=qa(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?S0(t,s,r,i,o):E0(t,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const s=qa(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return S0(t,s,r,i,o)},nearest(t,e,n,i){const s=qa(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return E0(t,s,r,n.intersect,i,o)},x(t,e,n,i){const s=qa(e,t);return ex(t,s,"x",n.intersect,i)},y(t,e,n,i){const s=qa(e,t);return ex(t,s,"y",n.intersect,i)}}};const GA=["left","top","right","bottom"];function Nu(t,e){return t.filter(n=>n.pos===e)}function tx(t,e){return t.filter(n=>GA.indexOf(n.pos)===-1&&n.box.axis===e)}function Bu(t,e){return t.sort((n,i)=>{const s=e?i:n,r=e?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function _H(t){const e=[];let n,i,s,r,o,a;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function vH(t){const e={};for(const n of t){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!GA.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function bH(t,e){const n=vH(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&e.availableHeight)}return n}function yH(t){const e=_H(t),n=Bu(e.filter(c=>c.box.fullSize),!0),i=Bu(Nu(e,"left"),!0),s=Bu(Nu(e,"right")),r=Bu(Nu(e,"top"),!0),o=Bu(Nu(e,"bottom")),a=tx(e,"x"),l=tx(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Nu(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function nx(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function WA(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function wH(t,e,n,i){const{pos:s,box:r}=n,o=t.maxPadding;if(!fn(s)){n.size&&(t[s]-=n.size);const f=i[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?r.height:r.width),n.size=f.size/f.count,t[s]+=n.size}r.getPadding&&WA(o,r.getPadding());const a=Math.max(0,e.outerWidth-nx(o,t,"left","right")),l=Math.max(0,e.outerHeight-nx(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function xH(t){const e=t.maxPadding;function n(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function MH(t,e){const n=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return i(t?["left","right"]:["top","bottom"])}function tf(t,e,n,i){const s=[];let r,o,a,l,c,u;for(r=0,o=t.length,c=0;r<o;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,MH(a.horizontal,e));const{same:f,other:h}=wH(e,n,a,i);c|=f&&s.length,u=u||h,l.fullSize||s.push(a)}return c&&tf(s,e,n,i)||u}function md(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function ix(t,e,n,i){const s=n.padding;let{x:r,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*u,h=c.size||l.height;Js(c.start)&&(o=c.start),l.fullSize?md(l,s.left,o,n.outerWidth-s.right-s.left,h):md(l,e.left+c.placed,o,f,h),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*u,h=c.size||l.width;Js(c.start)&&(r=c.start),l.fullSize?md(l,r,s.top,h,n.outerHeight-s.bottom-s.top):md(l,r,e.top+c.placed,h,f),c.start=r,c.placed+=f,r=l.right}}e.x=r,e.y=o}var zi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=Gi(t.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=yH(t.boxes),l=a.vertical,c=a.horizontal;cn(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=l.reduce((_,m)=>m.box.options&&m.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},s);WA(h,Gi(i));const d=Object.assign({maxPadding:h,w:r,h:o,x:s.left,y:s.top},s),p=bH(l.concat(c),f);tf(a.fullSize,d,f,p),tf(l,d,f,p),tf(c,d,f,p)&&tf(l,d,f,p),xH(d),ix(a.leftAndTop,d,f,p),d.x+=d.w,d.y+=d.h,ix(a.rightAndBottom,d,f,p),t.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},cn(a.chartArea,_=>{const m=_.box;Object.assign(m,t.chartArea),m.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class jA{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,s){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(e){return!0}updateConfig(e){}}class SH extends jA{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Pp="$chartjs",EH={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},sx=t=>t===null||t==="";function TH(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t[Pp]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",sx(s)){const r=Uw(t,"width");r!==void 0&&(t.width=r)}if(sx(i))if(t.style.height==="")t.height=t.width/(e||2);else{const r=Uw(t,"height");r!==void 0&&(t.height=r)}return t}const YA=k7?{passive:!0}:!1;function AH(t,e,n){t.addEventListener(e,n,YA)}function kH(t,e,n){t.canvas.removeEventListener(e,n,YA)}function CH(t,e){const n=EH[t.type]||t.type,{x:i,y:s}=qa(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Rm(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function LH(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Rm(a.addedNodes,i),o=o&&!Rm(a.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function PH(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Rm(a.removedNodes,i),o=o&&!Rm(a.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const ih=new Map;let rx=0;function qA(){const t=window.devicePixelRatio;t!==rx&&(rx=t,ih.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function RH(t,e){ih.size||window.addEventListener("resize",qA),ih.set(t,e)}function DH(t){ih.delete(t),ih.size||window.removeEventListener("resize",qA)}function OH(t,e,n){const i=t.canvas,s=i&&kb(i);if(!s)return;const r=_A((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),RH(t,r),o}function T0(t,e,n){n&&n.disconnect(),e==="resize"&&DH(t)}function IH(t,e,n){const i=t.canvas,s=_A(r=>{t.ctx!==null&&n(CH(r,t))},t);return AH(i,e,s),s}class NH extends jA{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(TH(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Pp])return!1;const i=n[Pp].initial;["height","width"].forEach(r=>{const o=i[r];wn(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[Pp],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:LH,detach:PH,resize:OH}[n]||IH;s[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),s=i[n];if(!s)return;({attach:T0,detach:T0,resize:T0}[n]||kH)(e,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,s){return A7(e,n,i,s)}isAttached(e){const n=kb(e);return!!(n&&n.isConnected)}}function BH(t){return!OA()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?SH:NH}class Cr{constructor(){ke(this,"active",!1)}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return ru(this.x)&&ru(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}ke(Cr,"defaults",{}),ke(Cr,"defaultRoutes");function FH(t,e){const n=t.options.ticks,i=zH(t),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?HH(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return VH(e,c,r,o/s),c;const u=UH(r,e,s);if(o>0){let f,h;const d=o>1?Math.round((l-a)/(o-1)):null;for(gd(e,c,u,wn(d)?0:a-d,a),f=0,h=o-1;f<h;f++)gd(e,c,u,r[f],r[f+1]);return gd(e,c,u,l,wn(d)?e.length:l+d),c}return gd(e,c,u),c}function zH(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}function UH(t,e,n){const i=GH(t),s=e.length/n;if(!i)return Math.max(s,1);const r=cU(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function HH(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function VH(t,e,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===r&&(e.push(t[o]),s++,r=n[s*i])}function gd(t,e,n,i,s){const r=Ft(i,0),o=Math.min(Ft(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-i,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(r+a*n))}function GH(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const WH=t=>t==="left"?"right":t==="right"?"left":t,ox=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n;function ax(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function jH(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(i===1?c=Math.max(l-r,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function YH(t,e){cn(t,n=>{const i=n.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function Fu(t){return t.drawTicks?t.tickLength:0}function lx(t,e){if(!t.display)return 0;const n=wi(t.font,e),i=Gi(t.padding);return(Un(t.text)?t.text.length:1)*n.lineHeight+i.height}function qH(t,e){return Na(t,{scale:e,type:"scale"})}function XH(t,e,n){return Na(t,{tick:n,index:e,type:"tick"})}function ZH(t,e,n){let i=yb(t);return(n&&e!=="right"||!n&&e==="right")&&(i=WH(i)),i}function JH(t,e,n,i){const{top:s,left:r,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let f=0,h,d,p;const _=o-s,m=a-r;if(t.isHorizontal()){if(d=Bi(i,r,a),fn(n)){const v=Object.keys(n)[0],g=n[v];p=u[v].getPixelForValue(g)+_-e}else n==="center"?p=(c.bottom+c.top)/2+_-e:p=ox(t,n,e);h=a-r}else{if(fn(n)){const v=Object.keys(n)[0],g=n[v];d=u[v].getPixelForValue(g)-m+e}else n==="center"?d=(c.left+c.right)/2-m+e:d=ox(t,n,e);p=Bi(i,o,s),f=n==="left"?-li:li}return{titleX:d,titleY:p,maxWidth:h,rotation:f}}class Il extends Cr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return e=Ms(e,Number.POSITIVE_INFINITY),n=Ms(n,Number.NEGATIVE_INFINITY),i=Ms(i,Number.POSITIVE_INFINITY),s=Ms(s,Number.NEGATIVE_INFINITY),{min:Ms(e,i),max:Ms(n,s),minDefined:ai(e),maxDefined:ai(n)}}getMinMax(e){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:Ms(n,Ms(i,n)),max:Ms(i,Ms(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ut(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=r7(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?ax(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=FH(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ut(this.options.afterUpdate,[this])}beforeSetDimensions(){Ut(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ut(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ut(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ut(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=Ut(n.callback,[r.value,i,e],this)}afterTickToLabelConversion(){Ut(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ut(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=this.ticks.length,s=n.minRotation||0,r=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),f=u.widest.width,h=u.highest.height,d=ki(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/i:d/(i-1),f+6>a&&(a=d/(i-(e.offset?.5:1)),l=this.maxHeight-Fu(e.grid)-n.padding-lx(e.title,this.chart.options.font),c=Math.sqrt(f*f+h*h),o=vb(Math.min(Math.asin(ki((u.highest.height+6)/a,-1,1)),Math.asin(ki(l/c,-1,1))-Math.asin(ki(h/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ut(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ut(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=lx(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Fu(r)+l):(e.height=this.maxHeight,e.width=Fu(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:h}=this._getLabelSizes(),d=i.padding*2,p=br(this.labelRotation),_=Math.cos(p),m=Math.sin(p);if(a){const v=i.mirror?0:m*f.width+_*h.height;e.height=Math.min(this.maxHeight,e.height+v+d)}else{const v=i.mirror?0:_*f.width+m*h.height;e.width=Math.min(this.maxWidth,e.width+v+d)}this._calculatePadding(c,u,m,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,d=0;l?c?(h=s*e.width,d=i*n.height):(h=i*e.height,d=s*n.width):r==="start"?d=n.width:r==="end"?h=e.width:r!=="inner"&&(h=e.width/2,d=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((d-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=e.height/2;r==="start"?(u=0,f=e.height):r==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ut(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)wn(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=ax(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length)}return e}_computeLabelSizes(e,n){const{ctx:i,_longestTextCache:s}=this,r=[],o=[];let a=0,l=0,c,u,f,h,d,p,_,m,v,g,b;for(c=0;c<n;++c){if(h=e[c].label,d=this._resolveTickFontOptions(c),i.font=p=d.string,_=s[p]=s[p]||{data:{},gc:[]},m=d.lineHeight,v=g=0,!wn(h)&&!Un(h))v=Lm(i,_.data,_.gc,v,h),g=m;else if(Un(h))for(u=0,f=h.length;u<f;++u)b=h[u],!wn(b)&&!Un(b)&&(v=Lm(i,_.data,_.gc,v,b),g+=m);r.push(v),o.push(g),a=Math.max(v,a),l=Math.max(g,l)}YH(s,n);const y=r.indexOf(a),w=o.indexOf(l),x=S=>({width:r[S]||0,height:o[S]||0});return{first:x(0),last:x(n-1),widest:x(y),highest:x(w),widths:r,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return hU(this._alignToPixels?Ua(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=XH(this.getContext(),e,i))}return this.$context||(this.$context=qH(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=br(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),h=Fu(r),d=[],p=a.setContext(this.getContext()),_=p.display?p.width:0,m=_/2,v=function(B){return Ua(i,B,_)};let g,b,y,w,x,S,T,A,C,k,L,F;if(o==="top")g=v(this.bottom),S=this.bottom-h,A=g-m,k=v(e.top)+m,F=e.bottom;else if(o==="bottom")g=v(this.top),k=e.top,F=v(e.bottom)-m,S=g+m,A=this.top+h;else if(o==="left")g=v(this.right),x=this.right-h,T=g-m,C=v(e.left)+m,L=e.right;else if(o==="right")g=v(this.left),C=e.left,L=v(e.right)-m,x=g+m,T=this.left+h;else if(n==="x"){if(o==="center")g=v((e.top+e.bottom)/2+.5);else if(fn(o)){const B=Object.keys(o)[0],W=o[B];g=v(this.chart.scales[B].getPixelForValue(W))}k=e.top,F=e.bottom,S=g+m,A=S+h}else if(n==="y"){if(o==="center")g=v((e.left+e.right)/2);else if(fn(o)){const B=Object.keys(o)[0],W=o[B];g=v(this.chart.scales[B].getPixelForValue(W))}x=g-m,T=x-h,C=e.left,L=e.right}const U=Ft(s.ticks.maxTicksLimit,f),N=Math.max(1,Math.ceil(f/U));for(b=0;b<f;b+=N){const B=this.getContext(b),W=r.setContext(B),ee=a.setContext(B),K=W.lineWidth,ge=W.color,se=ee.dash||[],X=ee.dashOffset,q=W.tickWidth,Y=W.tickColor,$=W.tickBorderDash||[],ze=W.tickBorderDashOffset;y=jH(this,b,l),y!==void 0&&(w=Ua(i,y,K),c?x=T=C=L=w:S=A=k=F=w,d.push({tx1:x,ty1:S,tx2:T,ty2:A,x1:C,y1:k,x2:L,y2:F,width:K,color:ge,borderDash:se,borderDashOffset:X,tickWidth:q,tickColor:Y,tickBorderDash:$,tickBorderDashOffset:ze}))}return this._ticksLength=f,this._borderValue=g,d}_computeLabelItems(e){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=r,h=Fu(i.grid),d=h+u,p=f?-u:d,_=-br(this.labelRotation),m=[];let v,g,b,y,w,x,S,T,A,C,k,L,F="middle";if(s==="top")x=this.bottom-p,S=this._getXAxisLabelAlignment();else if(s==="bottom")x=this.top+p,S=this._getXAxisLabelAlignment();else if(s==="left"){const N=this._getYAxisLabelAlignment(h);S=N.textAlign,w=N.x}else if(s==="right"){const N=this._getYAxisLabelAlignment(h);S=N.textAlign,w=N.x}else if(n==="x"){if(s==="center")x=(e.top+e.bottom)/2+d;else if(fn(s)){const N=Object.keys(s)[0],B=s[N];x=this.chart.scales[N].getPixelForValue(B)+d}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")w=(e.left+e.right)/2-d;else if(fn(s)){const N=Object.keys(s)[0],B=s[N];w=this.chart.scales[N].getPixelForValue(B)}S=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?F="top":l==="end"&&(F="bottom"));const U=this._getLabelSizes();for(v=0,g=a.length;v<g;++v){b=a[v],y=b.label;const N=r.setContext(this.getContext(v));T=this.getPixelForTick(v)+r.labelOffset,A=this._resolveTickFontOptions(v),C=A.lineHeight,k=Un(y)?y.length:1;const B=k/2,W=N.color,ee=N.textStrokeColor,K=N.textStrokeWidth;let ge=S;o?(w=T,S==="inner"&&(v===g-1?ge=this.options.reverse?"left":"right":v===0?ge=this.options.reverse?"right":"left":ge="center"),s==="top"?c==="near"||_!==0?L=-k*C+C/2:c==="center"?L=-U.highest.height/2-B*C+C:L=-U.highest.height+C/2:c==="near"||_!==0?L=C/2:c==="center"?L=U.highest.height/2-B*C:L=U.highest.height-k*C,f&&(L*=-1),_!==0&&!N.showLabelBackdrop&&(w+=C/2*Math.sin(_))):(x=T,L=(1-k)*C/2);let se;if(N.showLabelBackdrop){const X=Gi(N.backdropPadding),q=U.heights[v],Y=U.widths[v];let $=L-X.top,ze=0-X.left;switch(F){case"middle":$-=q/2;break;case"bottom":$-=q;break}switch(S){case"center":ze-=Y/2;break;case"right":ze-=Y;break}se={left:ze,top:$,width:Y+X.width,height:q+X.height,color:N.backdropColor}}m.push({rotation:_,label:y,font:A,color:W,strokeColor:ee,strokeWidth:K,textOffset:L,textAlign:ge,textBaseline:F,translation:[w,x],backdrop:se})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-br(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const l=s[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,h;this.isHorizontal()?(c=Ua(e,this.left,o)-o/2,u=Ua(e,this.right,a)+a/2,f=h=l):(f=Ua(e,this.top,o)-o/2,h=Ua(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Ag(i,s);const r=this._labelItems||(this._labelItems=this._computeLabelItems(e));let o,a;for(o=0,a=r.length;o<a;++o){const l=r[o],c=l.font,u=l.label;let f=l.textOffset;yl(i,u,0,f,c,l)}s&&kg(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=wi(i.font),o=Gi(i.padding),a=i.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||fn(n)?(l+=o.bottom,Un(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:h}=JH(this,l,n,a);yl(e,i.text,0,0,r,{color:i.color,maxWidth:f,rotation:h,textAlign:ZH(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){!this._isVisible()||(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Ft(e.grid&&e.grid.z,-1),s=Ft(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Il.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return wi(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class _d{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;QH(n)&&(i=this.register(n));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,KH(e,o,i),this.override&&ui.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,s=this.scope;i in n&&delete n[i],s&&i in ui[s]&&(delete ui[s][i],this.override&&delete bl[i])}}function KH(t,e,n){const i=Qf(Object.create(null),[n?ui.get(n):{},ui.get(e),t.defaults]);ui.set(e,i),t.defaultRoutes&&$H(e,t.defaultRoutes),t.descriptors&&ui.describe(e,t.descriptors)}function $H(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");ui.route(r,s,l,a)})}function QH(t){return"id"in t&&"defaults"in t}class eV{constructor(){this.controllers=new _d(xr,"datasets",!0),this.elements=new _d(Cr,"elements"),this.plugins=new _d(Object,"plugins"),this.scales=new _d(Il,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):cn(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const s=_b(e);Ut(i["before"+s],[],i),n[e](i),Ut(i["after"+s],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Fr=new eV;class tV{constructor(){this._init=[]}notify(e,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,n,i);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[n,s,r.options];if(Ut(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){wn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,s=Ft(i.options&&i.options.plugins,{}),r=nV(i);return s===!1&&!n?[]:sV(e,r,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,i),e,"stop"),this._notify(s(i,n),e,"start")}}function nV(t){const e={},n=[],i=Object.keys(Fr.plugins.items);for(let r=0;r<i.length;r++)n.push(Fr.getPlugin(i[r]));const s=t.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function iV(t,e){return!e&&t===!1?null:t===!0?{}:t}function sV(t,{plugins:e,localIds:n},i,s){const r=[],o=t.getContext();for(const a of e){const l=a.id,c=iV(i[l],s);c!==null&&r.push({plugin:a,options:rV(t.config,{plugin:a,local:n[l]},c,o)})}return r}function rV(t,{plugin:e,local:n},i,s){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(i,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function i_(t,e){const n=ui.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function oV(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function aV(t,e){return t===e?"_index_":"_value_"}function lV(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Dm(t,e){if(t==="x"||t==="y"||t==="r"||(t=e.axis||lV(e.position)||t.length>1&&Dm(t[0].toLowerCase(),e),t))return t;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function cV(t,e){const n=bl[t.type]||{scales:{}},i=e.scales||{},s=i_(t.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!fn(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Dm(o,a),c=aV(l,s),u=n.scales||{};r[o]=bf(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||i_(a,e),u=(bl[a]||{}).scales||{};Object.keys(u).forEach(f=>{const h=oV(f,l),d=o[h+"AxisID"]||h;r[d]=r[d]||Object.create(null),bf(r[d],[{axis:h},i[d],u[f]])})}),Object.keys(r).forEach(o=>{const a=r[o];bf(a,[ui.scales[a.type],ui.scale])}),r}function XA(t){const e=t.options||(t.options={});e.plugins=Ft(e.plugins,{}),e.scales=cV(t,e)}function ZA(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function uV(t){return t=t||{},t.data=ZA(t.data),XA(t),t}const cx=new Map,JA=new Set;function vd(t,e){let n=cx.get(t);return n||(n=e(),cx.set(t,n),JA.add(n)),n}const zu=(t,e,n)=>{const i=Sa(e,n);i!==void 0&&t.add(i)};class fV{constructor(e){this._config=uV(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ZA(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),XA(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return vd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return vd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return vd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return vd(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let s=i.get(e);return(!s||n)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,n,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(f=>zu(l,e,f))),u.forEach(f=>zu(l,s,f)),u.forEach(f=>zu(l,bl[r]||{},f)),u.forEach(f=>zu(l,ui,f)),u.forEach(f=>zu(l,e_,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),JA.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,bl[n]||{},ui.datasets[n]||{},{type:n},ui,e_]}resolveNamedOptions(e,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=ux(this._resolverCache,e,s);let l=o;if(dV(o,n)){r.$shared=!1,i=Ea(i)?i():i;const c=this.createResolver(e,i,a);l=ou(o,i,c)}for(const c of n)r[c]=l[c];return r}createResolver(e,n,i=[""],s){const{resolver:r}=ux(this._resolverCache,e,i);return fn(n)?ou(r,n,void 0,s):r}}function ux(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);return r||(r={resolver:Eb(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const hV=t=>fn(t)&&Object.getOwnPropertyNames(t).reduce((e,n)=>e||Ea(t[n]),!1);function dV(t,e){const{isScriptable:n,isIndexable:i}=kA(t);for(const s of e){const r=n(s),o=i(s),a=(o||r)&&t[s];if(r&&(Ea(a)||hV(a))||o&&Un(a))return!0}return!1}var pV="4.0.1";const mV=["top","bottom","left","right","chartArea"];function fx(t,e){return t==="top"||t==="bottom"||mV.indexOf(t)===-1&&e==="x"}function hx(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function dx(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ut(n&&n.onComplete,[t],e)}function gV(t){const e=t.chart,n=e.options.animation;Ut(n&&n.onProgress,[t],e)}function KA(t){return OA()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Rp={},px=t=>{const e=KA(t);return Object.values(Rp).filter(n=>n.canvas===e).pop()};function _V(t,e,n){const i=Object.keys(t);for(const s of i){const r=+s;if(r>=e){const o=t[s];delete t[s],(n>0||r>e)&&(t[r+n]=o)}}}function vV(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function bV(t){const{xScale:e,yScale:n}=t;if(e&&n)return{left:e.left,right:e.right,top:n.top,bottom:n.bottom}}class Qo{static register(...e){Fr.add(...e),mx()}static unregister(...e){Fr.remove(...e),mx()}constructor(e,n){const i=this.config=new fV(n),s=KA(e),r=px(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||BH(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=eU(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new tV,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=gU(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Rp[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ho.listen(this,"complete",dx),ho.listen(this,"progress",gV),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return wn(e)?n&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Fr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():zw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Nw(this.canvas,this.ctx),this}stop(){return ho.stop(this),this}resize(e,n){ho.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,zw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ut(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};cn(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Dm(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),cn(r,o=>{const a=o.options,l=a.id,c=Dm(l,a),u=Ft(a.type,o.dtype);(a.position===void 0||fx(a.position,c)!==fx(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in i&&i[l].type===u)f=i[l];else{const h=Fr.getScale(u);f=new h({id:l,type:u,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(a,e)}),cn(s,(o,a)=>{o||delete i[a]}),cn(i,o=>{zi.configure(this,o,o.options),zi.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(hx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||i_(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Fr.getController(a),{datasetElementType:c,dataElementType:u}=ui.datasets[a];Object.assign(l,{dataElementType:Fr.getElement(u),datasetElementType:c&&Fr.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){cn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),h=!s&&r.indexOf(f)===-1;f.buildOrUpdateElements(h),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||cn(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(hx("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){cn(this.scales,e=>{zi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!xw(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;_V(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!xw(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;zi.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],cn(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Ea(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ho.has(this)?this.attached&&!ho.running(this)&&ho.start(this):(this.draw(),dx({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,s=!i.disabled,r=bV(e)||this.chartArea,o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&Ag(n,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&kg(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return th(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,s){const r=gH.modes[n];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Na(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);Js(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ho.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Nw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Rp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};cn(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){cn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},cn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const s=i?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Tm(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=r(n,e),a=i?e:r(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:s=[],options:r}=this,o=n,a=this._getActiveElements(e,s,i,o),l=oU(e),c=vV(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Ut(r.onHover,[e,a,this],this),l&&Ut(r.onClick,[e,a,this],this));const u=!Tm(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,s){if(e.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}ke(Qo,"defaults",ui),ke(Qo,"instances",Rp),ke(Qo,"overrides",bl),ke(Qo,"registry",Fr),ke(Qo,"version",pV),ke(Qo,"getChart",px);function mx(){return cn(Qo.instances,t=>t._plugins.invalidate())}var Jo=Qo;function yV(t,e,n){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(r,o,a,i-c,n+c),l>s?(c=s/l,t.arc(r,o,l,n+c,i-c,!0)):t.arc(r,o,s,n+li,i-li),t.closePath(),t.clip()}function wV(t){return Sb(t,["outerStart","outerEnd","innerStart","innerEnd"])}function xV(t,e,n,i){const s=wV(t.options.borderRadius),r=(n-e)/2,o=Math.min(r,i*e/2),a=l=>{const c=(n-Math.min(r,l))*i/2;return ki(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:ki(s.innerStart,0,o),innerEnd:ki(s.innerEnd,0,o)}}function $l(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Om(t,e,n,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,f=Math.max(e.outerRadius+i+n-c,0),h=u>0?u+i+n+c:0;let d=0;const p=s-l;if(i){const N=u>0?u-i:0,B=f>0?f-i:0,W=(N+B)/2,ee=W!==0?p*W/(W+i):p;d=(p-ee)/2}const _=Math.max(.001,p*f-n/Zn)/f,m=(p-_)/2,v=l+m+d,g=s-m-d,{outerStart:b,outerEnd:y,innerStart:w,innerEnd:x}=xV(e,h,f,g-v),S=f-b,T=f-y,A=v+b/S,C=g-y/T,k=h+w,L=h+x,F=v+w/k,U=g-x/L;if(t.beginPath(),r){const N=(A+C)/2;if(t.arc(o,a,f,A,N),t.arc(o,a,f,N,C),y>0){const K=$l(T,C,o,a);t.arc(K.x,K.y,y,C,g+li)}const B=$l(L,g,o,a);if(t.lineTo(B.x,B.y),x>0){const K=$l(L,U,o,a);t.arc(K.x,K.y,x,g+li,U+Math.PI)}const W=(g-x/h+(v+w/h))/2;if(t.arc(o,a,h,g-x/h,W,!0),t.arc(o,a,h,W,v+w/h,!0),w>0){const K=$l(k,F,o,a);t.arc(K.x,K.y,w,F+Math.PI,v-li)}const ee=$l(S,v,o,a);if(t.lineTo(ee.x,ee.y),b>0){const K=$l(S,A,o,a);t.arc(K.x,K.y,b,v-li,A)}}else{t.moveTo(o,a);const N=Math.cos(A)*f+o,B=Math.sin(A)*f+a;t.lineTo(N,B);const W=Math.cos(C)*f+o,ee=Math.sin(C)*f+a;t.lineTo(W,ee)}t.closePath()}function MV(t,e,n,i,s){const{fullCircles:r,startAngle:o,circumference:a}=e;let l=e.endAngle;if(r){Om(t,e,n,i,l,s);for(let c=0;c<r;++c)t.fill();isNaN(a)||(l=o+(a%Hn||Hn))}return Om(t,e,n,i,l,s),t.fill(),l}function SV(t,e,n,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,f=l.borderAlign==="inner";if(!c)return;f?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let h=e.endAngle;if(r){Om(t,e,n,i,h,s);for(let d=0;d<r;++d)t.stroke();isNaN(a)||(h=o+(a%Hn||Hn))}f&&yV(t,e,h),r||(Om(t,e,n,i,h,s),t.stroke())}class Dp extends Cr{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const s=this.getProps(["x","y"],i),{angle:r,distance:o}=dA(s,{x:e,y:n}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=this.options.spacing/2,p=Ft(f,l-a)>=Hn||eh(r,a,l),_=So(o,c+h,u+h);return p&&_}getCenterPoint(e){const{x:n,y:i,startAngle:s,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:l,spacing:c}=this.options,u=(s+r)/2,f=(o+a+c+l)/2;return{x:n+Math.cos(u)*f,y:i+Math.sin(u)*f}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,s=(n.offset||0)/4,r=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>Hn?Math.floor(i/Hn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*s,Math.sin(a)*s);const l=1-Math.sin(Math.min(Zn,i||0)),c=s*l;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,MV(e,this,c,r,o),SV(e,this,c,r,o),e.restore()}}ke(Dp,"id","arc"),ke(Dp,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),ke(Dp,"defaultRoutes",{backgroundColor:"backgroundColor"});function $A(t,e,n=e){t.lineCap=Ft(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Ft(n.borderDash,e.borderDash)),t.lineDashOffset=Ft(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Ft(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ft(n.borderWidth,e.borderWidth),t.strokeStyle=Ft(n.borderColor,e.borderColor)}function EV(t,e,n){t.lineTo(n.x,n.y)}function TV(t){return t.stepped?JU:t.tension||t.cubicInterpolationMode==="monotone"?KU:EV}function QA(t,e,n={}){const i=t.length,{start:s=0,end:r=i-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function AV(t,e,n,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=QA(s,n,i),u=TV(r);let{move:f=!0,reverse:h}=i||{},d,p,_;for(d=0;d<=c;++d)p=s[(a+(h?c-d:d))%o],!p.skip&&(f?(t.moveTo(p.x,p.y),f=!1):u(t,_,p,h,r.stepped),_=p);return l&&(p=s[(a+(h?c:0))%o],u(t,_,p,h,r.stepped)),!!l}function kV(t,e,n,i){const s=e.points,{count:r,start:o,ilen:a}=QA(s,n,i),{move:l=!0,reverse:c}=i||{};let u=0,f=0,h,d,p,_,m,v;const g=y=>(o+(c?a-y:y))%r,b=()=>{_!==m&&(t.lineTo(u,m),t.lineTo(u,_),t.lineTo(u,v))};for(l&&(d=s[g(0)],t.moveTo(d.x,d.y)),h=0;h<=a;++h){if(d=s[g(h)],d.skip)continue;const y=d.x,w=d.y,x=y|0;x===p?(w<_?_=w:w>m&&(m=w),u=(f*u+y)/++f):(b(),t.lineTo(y,w),p=x,f=0,_=m=w),v=w}b()}function s_(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?kV:AV}function CV(t){return t.stepped?C7:t.tension||t.cubicInterpolationMode==="monotone"?L7:Xa}function LV(t,e,n,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,i)&&s.closePath()),$A(t,e.options),t.stroke(s)}function PV(t,e,n,i){const{segments:s,options:r}=e,o=s_(e);for(const a of s)$A(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const RV=typeof Path2D=="function";function DV(t,e,n,i){RV&&!e.options.segment?LV(t,e,n,i):PV(t,e,n,i)}class da extends Cr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;w7(this._points,i,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=N7(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,s=e[n],r=this.points,o=zA(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=CV(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:f,end:h}=o[c],d=r[f],p=r[h];if(d===p){a.push(d);continue}const _=Math.abs((s-d[n])/(p[n]-d[n])),m=l(d,p,_,i.stepped);m[n]=e[n],a.push(m)}return a.length===1?a[0]:a}pathSegment(e,n,i){return s_(this)(e,this,n,i)}path(e,n,i){const s=this.segments,r=s_(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of s)o&=r(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),DV(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ke(da,"id","line"),ke(da,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ke(da,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ke(da,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function gx(t,e,n,i){const s=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<s.radius+s.hitRadius}class Op extends Cr{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,i){const s=this.options,{x:r,y:o}=this.getProps(["x","y"],i);return Math.pow(e-r,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return gx(this,e,"x",n)}inYRange(e,n){return gx(this,e,"y",n)}getCenterPoint(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const i=n&&e.borderWidth||0;return(n+i)*2}draw(e,n){const i=this.options;this.skip||i.radius<.1||!th(this,n,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,t_(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}ke(Op,"id","point"),ke(Op,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ke(Op,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ek(t,e){const{x:n,y:i,base:s,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,f;return t.horizontal?(f=o/2,a=Math.min(n,s),l=Math.max(n,s),c=i-f,u=i+f):(f=r/2,a=n-f,l=n+f,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function pa(t,e,n,i){return t?0:ki(e,n,i)}function OV(t,e,n){const i=t.options.borderWidth,s=t.borderSkipped,r=AA(i);return{t:pa(s.top,r.top,0,n),r:pa(s.right,r.right,0,e),b:pa(s.bottom,r.bottom,0,n),l:pa(s.left,r.left,0,e)}}function IV(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,r=cl(s),o=Math.min(e,n),a=t.borderSkipped,l=i||fn(s);return{topLeft:pa(!l||a.top||a.left,r.topLeft,0,o),topRight:pa(!l||a.top||a.right,r.topRight,0,o),bottomLeft:pa(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:pa(!l||a.bottom||a.right,r.bottomRight,0,o)}}function NV(t){const e=ek(t),n=e.right-e.left,i=e.bottom-e.top,s=OV(t,n/2,i/2),r=IV(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function A0(t,e,n,i){const s=e===null,r=n===null,a=t&&!(s&&r)&&ek(t,i);return a&&(s||So(e,a.left,a.right))&&(r||So(n,a.top,a.bottom))}function BV(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function FV(t,e){t.rect(e.x,e.y,e.w,e.h)}function k0(t,e,n={}){const i=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+i,y:t.y+s,w:t.w+r,h:t.h+o,radius:t.radius}}class Ip extends Cr{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=NV(this),a=BV(o.radius)?nh:FV;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,k0(o,n,r)),e.clip(),a(e,k0(r,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,k0(r,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,i){return A0(this,e,n,i)}inXRange(e,n){return A0(this,e,null,n)}inYRange(e,n){return A0(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(n+s)/2:n,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ke(Ip,"id","bar"),ke(Ip,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ke(Ip,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var zV=Object.freeze({__proto__:null,ArcElement:Dp,LineElement:da,PointElement:Op,BarElement:Ip});const r_=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],_x=r_.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function tk(t){return r_[t%r_.length]}function nk(t){return _x[t%_x.length]}function UV(){return(t,e)=>{t.borderColor=tk(e),t.backgroundColor=nk(e)}}function HV(){let t=0;return e=>{e.backgroundColor=e.data.map(()=>tk(t++))}}function VV(){let t=0;return e=>{e.backgroundColor=e.data.map(()=>nk(t++))}}function GV(t){return t==="doughnut"||t==="pie"?HV():t==="polarArea"?VV():UV()}function vx(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var WV={id:"colors",defaults:{enabled:!0},beforeLayout(t,e,n){if(!n.enabled)return;const{type:i,options:{elements:s},data:{datasets:r}}=t.config;if(vx(r)||s&&vx(s))return;const o=GV(i);r.forEach(o)}};function jV(t,e,n,i,s){const r=s.samples||i;if(r>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(r-2);let l=0;const c=e+n-1;let u=e,f,h,d,p,_;for(o[l++]=t[u],f=0;f<r-2;f++){let m=0,v=0,g;const b=Math.floor((f+1)*a)+1+e,y=Math.min(Math.floor((f+2)*a)+1,n)+e,w=y-b;for(g=b;g<y;g++)m+=t[g].x,v+=t[g].y;m/=w,v/=w;const x=Math.floor(f*a)+1+e,S=Math.min(Math.floor((f+1)*a)+1,n)+e,{x:T,y:A}=t[u];for(d=p=-1,g=x;g<S;g++)p=.5*Math.abs((T-m)*(t[g].y-A)-(T-t[g].x)*(v-A)),p>d&&(d=p,h=t[g],_=g);o[l++]=h,u=_}return o[l++]=t[c],o}function YV(t,e,n,i){let s=0,r=0,o,a,l,c,u,f,h,d,p,_;const m=[],v=e+n-1,g=t[e].x,y=t[v].x-g;for(o=e;o<e+n;++o){a=t[o],l=(a.x-g)/y*i,c=a.y;const w=l|0;if(w===u)c<p?(p=c,f=o):c>_&&(_=c,h=o),s=(r*s+a.x)/++r;else{const x=o-1;if(!wn(f)&&!wn(h)){const S=Math.min(f,h),T=Math.max(f,h);S!==d&&S!==x&&m.push({...t[S],x:s}),T!==d&&T!==x&&m.push({...t[T],x:s})}o>0&&x!==d&&m.push(t[x]),m.push(a),u=w,r=0,p=_=c,f=h=d=o}}return m}function ik(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function bx(t){t.data.datasets.forEach(e=>{ik(e)})}function qV(t,e){const n=e.length;let i=0,s;const{iScale:r}=t,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=ki(Eo(e,r.axis,o).lo,0,n-1)),c?s=ki(Eo(e,r.axis,a).hi+1,i,n)-i:s=n-i,{start:i,count:s}}var XV={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){bx(t);return}const i=t.width;t.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=t.getDatasetMeta(r),c=o||s.data;if(ef([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:f,count:h}=qV(l,c);const d=n.threshold||4*i;if(h<=d){ik(s);return}wn(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(_){this._data=_}}));let p;switch(n.algorithm){case"lttb":p=jV(c,f,h,i,n);break;case"min-max":p=YV(c,f,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}s._decimated=p})},destroy(t){bx(t)}};function ZV(t,e,n){const i=t.segments,s=t.points,r=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=Lb(l,c,s);const u=o_(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const f=zA(e,u);for(const h of f){const d=o_(n,r[h.start],r[h.end],h.loop),p=FA(a,s,d);for(const _ of p)o.push({source:_,target:h,start:{[n]:yx(u,d,"start",Math.max)},end:{[n]:yx(u,d,"end",Math.min)}})}}return o}function o_(t,e,n,i){if(i)return;let s=e[t],r=n[t];return t==="angle"&&(s=Es(s),r=Es(r)),{property:t,start:s,end:r}}function JV(t,e){const{x:n=null,y:i=null}=t||{},s=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=Lb(o,a,s);const l=s[o],c=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):n!==null&&(r.push({x:n,y:l.y}),r.push({x:n,y:c.y}))}),r}function Lb(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function yx(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function sk(t,e){let n=[],i=!1;return Un(t)?(i=!0,n=t):n=JV(t,e),n.length?new da({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function wx(t){return t&&t.fill!==!1}function KV(t,e,n){let s=t[e].fill;const r=[e];let o;if(!n)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!ai(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function $V(t,e,n){const i=n9(t);if(fn(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return ai(s)&&Math.floor(s)===s?QV(i[0],e,s,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function QV(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function e9(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:fn(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function t9(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:fn(t)?i=t.value:i=e.getBaseValue(),i}function n9(t){const e=t.options,n=e.fill;let i=Ft(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function i9(t){const{scale:e,index:n,line:i}=t,s=[],r=i.segments,o=i.points,a=s9(e,n);a.push(sk({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)r9(s,o[u],a)}return new da({points:s,options:{}})}function s9(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}function r9(t,e,n){const i=[];for(let s=0;s<n.length;s++){const r=n[s],{first:o,last:a,point:l}=o9(r,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function o9(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const s=i[n],r=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],f=o[u.start][n],h=o[u.end][n];if(So(s,f,h)){a=s===f,l=s===h;break}}return{first:a,last:l,point:i}}class rk{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:s,y:r,radius:o}=this;return n=n||{start:0,end:Hn},e.arc(s,r,o,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:s}=this,r=e.angle;return{x:n+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function a9(t){const{chart:e,fill:n,line:i}=t;if(ai(n))return l9(e,n);if(n==="stack")return i9(t);if(n==="shape")return!0;const s=c9(t);return s instanceof rk?s:sk(s,i)}function l9(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function c9(t){return(t.scale||{}).getPointPositionForValue?f9(t):u9(t)}function u9(t){const{scale:e={},fill:n}=t,i=e9(n,e);if(ai(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function f9(t){const{scale:e,fill:n}=t,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=t9(n,e,r),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new rk({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function C0(t,e,n){const i=a9(e),{line:s,scale:r,axis:o}=e,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:f=c}=l||{};i&&s.points.length&&(Ag(t,n),h9(t,{line:s,target:i,above:u,below:f,area:n,scale:r,axis:o}),kg(t))}function h9(t,e){const{line:n,target:i,above:s,below:r,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&r!==s&&(xx(t,i,o.top),Mx(t,{line:n,target:i,color:s,scale:a,property:l}),t.restore(),t.save(),xx(t,i,o.bottom)),Mx(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore()}function xx(t,e,n){const{segments:i,points:s}=e;let r=!0,o=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,u=s[l],f=s[Lb(l,c,s)];r?(t.moveTo(u.x,u.y),r=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Mx(t,e){const{line:n,target:i,property:s,color:r,scale:o}=e,a=ZV(n,i,s);for(const{source:l,target:c,start:u,end:f}of a){const{style:{backgroundColor:h=r}={}}=l,d=i!==!0;t.save(),t.fillStyle=h,d9(t,o,d&&o_(s,u,f)),t.beginPath();const p=!!n.pathSegment(t,l);let _;if(d){p?t.closePath():Sx(t,i,f,s);const m=!!i.pathSegment(t,c,{move:p,reverse:!0});_=p&&m,_||Sx(t,i,u,s)}t.closePath(),t.fill(_?"evenodd":"nonzero"),t.restore()}}function d9(t,e,n){const{top:i,bottom:s}=e.chart.chartArea,{property:r,start:o,end:a}=n||{};r==="x"&&(t.beginPath(),t.rect(o,i,a-o,s-i),t.clip())}function Sx(t,e,n,i){const s=e.interpolate(n,i);s&&t.lineTo(s.x,s.y)}var p9={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=t.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof da&&(l={visible:t.isDatasetVisible(o),index:o,fill:$V(a,o,i),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=KV(s,o,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;!a||(a.line.updateControlPoints(r,a.axis),i&&a.fill&&C0(t.ctx,a,r))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;wx(r)&&C0(t.ctx,r,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!wx(i)||n.drawTime!=="beforeDatasetDraw"||C0(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ex=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},m9=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Tx extends Cr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ut(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=wi(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Ex(i,r);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let f=e;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-u;return this.legendItems.forEach((p,_)=>{const m=i+n/2+r.measureText(p.text).width;(_===0||c[c.length-1]+m+2*a>o)&&(f+=u,c[c.length-(_>0?0:1)]=0,d+=u,h++),l[_]={left:0,top:d,row:h,width:m,height:s},c[c.length-1]+=m+a}),f}_fitCols(e,n,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let f=a,h=0,d=0,p=0,_=0;return this.legendItems.forEach((m,v)=>{const{itemWidth:g,itemHeight:b}=g9(i,n,r,m,s);v>0&&d+b+2*a>u&&(f+=h+a,c.push({width:h,height:d}),p+=h+a,_++,h=d=0),l[v]={left:p,top:d,col:_,width:g,height:b},h=Math.max(h,g),d+=b+a}),f+=h,c.push({width:h,height:d}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,o=qc(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Bi(i,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Bi(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Bi(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Bi(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Ag(e,this),this._draw(),kg(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=ui.color,l=qc(e.rtl,this.left,this.width),c=wi(o.font),{padding:u}=o,f=c.size,h=f/2;let d;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:p,boxHeight:_,itemHeight:m}=Ex(o,f),v=function(x,S,T){if(isNaN(p)||p<=0||isNaN(_)||_<0)return;s.save();const A=Ft(T.lineWidth,1);if(s.fillStyle=Ft(T.fillStyle,a),s.lineCap=Ft(T.lineCap,"butt"),s.lineDashOffset=Ft(T.lineDashOffset,0),s.lineJoin=Ft(T.lineJoin,"miter"),s.lineWidth=A,s.strokeStyle=Ft(T.strokeStyle,a),s.setLineDash(Ft(T.lineDash,[])),o.usePointStyle){const C={radius:_*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:A},k=l.xPlus(x,p/2),L=S+h;TA(s,C,k,L,o.pointStyleWidth&&p)}else{const C=S+Math.max((f-_)/2,0),k=l.leftForLtr(x,p),L=cl(T.borderRadius);s.beginPath(),Object.values(L).some(F=>F!==0)?nh(s,{x:k,y:C,w:p,h:_,radius:L}):s.rect(k,C,p,_),s.fill(),A!==0&&s.stroke()}s.restore()},g=function(x,S,T){yl(s,T.text,x,S+m/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},b=this.isHorizontal(),y=this._computeTitleHeight();b?d={x:Bi(r,this.left+u,this.right-i[0]),y:this.top+u+y,line:0}:d={x:this.left+u,y:Bi(r,this.top+y+u,this.bottom-n[0].height),line:0},IA(this.ctx,e.textDirection);const w=m+u;this.legendItems.forEach((x,S)=>{s.strokeStyle=x.fontColor,s.fillStyle=x.fontColor;const T=s.measureText(x.text).width,A=l.textAlign(x.textAlign||(x.textAlign=o.textAlign)),C=p+h+T;let k=d.x,L=d.y;l.setWidth(this.width),b?S>0&&k+C+u>this.right&&(L=d.y+=w,d.line++,k=d.x=Bi(r,this.left+u,this.right-i[d.line])):S>0&&L+w>this.bottom&&(k=d.x=k+n[d.line].width+u,d.line++,L=d.y=Bi(r,this.top+y+u,this.bottom-n[d.line].height));const F=l.x(k);if(v(F,L,x),k=_U(A,k+p+h,b?k+C:this.right,e.rtl),g(l.x(k),L,x),b)d.x+=C+u;else if(typeof x.text!="string"){const U=c.lineHeight;d.y+=ok(x,U)}else d.y+=w}),NA(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=wi(n.font),s=Gi(n.padding);if(!n.display)return;const r=qc(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=s.top+l;let u,f=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,f=Bi(e.align,f,this.right-h);else{const p=this.columnSizes.reduce((_,m)=>Math.max(_,m.height),0);u=c+Bi(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const d=Bi(a,f,f+h);o.textAlign=r.textAlign(yb(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,yl(o,n.text,d,u,i)}_computeTitleHeight(){const e=this.options.title,n=wi(e.font),i=Gi(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,s,r;if(So(e,this.left,this.right)&&So(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],So(e,s.left,s.left+s.width)&&So(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!b9(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=m9(s,i);s&&!r&&Ut(n.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&Ut(n.onHover,[e,i,this],this)}else i&&Ut(n.onClick,[e,i,this],this)}}function g9(t,e,n,i,s){const r=_9(i,t,e,n),o=v9(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function _9(t,e,n,i){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+n.size/2+i.measureText(s).width}function v9(t,e,n){let i=t;return typeof e.text!="string"&&(i=ok(e,n)),i}function ok(t,e){const n=t.text?t.text.length+.5:0;return e*n}function b9(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var y9={id:"legend",_element:Tx,start(t,e,n){const i=t.legend=new Tx({ctx:t.ctx,options:n,chart:t});zi.configure(t,i,n),zi.addBox(t,i)},stop(t){zi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;zi.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Gi(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Pb extends Cr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Un(i.text)?i.text.length:1;this._padding=Gi(i.padding);const r=s*wi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=Bi(a,i,r),f=n+e,c=r-i):(o.position==="left"?(u=i+e,f=Bi(a,s,n),l=Zn*-.5):(u=r-e,f=Bi(a,n,s),l=Zn*.5),c=s-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=wi(n.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);yl(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:yb(n.align),textBaseline:"middle",translation:[o,a]})}}function w9(t,e){const n=new Pb({ctx:t.ctx,options:e,chart:t});zi.configure(t,n,e),zi.addBox(t,n),t.titleBlock=n}var x9={id:"title",_element:Pb,start(t,e,n){w9(t,n)},stop(t){const e=t.titleBlock;zi.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;zi.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const bd=new WeakMap;var M9={id:"subtitle",start(t,e,n){const i=new Pb({ctx:t.ctx,options:n,chart:t});zi.configure(t,i,n),zi.addBox(t,i),bd.set(t,i)},stop(t){zi.removeBox(t,bd.get(t)),bd.delete(t)},beforeUpdate(t,e,n){const i=bd.get(t);zi.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const nf={average(t){if(!t.length)return!1;let e,n,i=0,s=0,r=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,s+=a.y,++r}}return{x:i/r,y:s/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const l=t[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=$1(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Br(t,e){return e&&(Un(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function po(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function S9(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:t,label:o,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function Ax(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:o,boxHeight:a}=e,l=wi(e.bodyFont),c=wi(e.titleFont),u=wi(e.footerFont),f=r.length,h=s.length,d=i.length,p=Gi(e.padding);let _=p.height,m=0,v=i.reduce((y,w)=>y+w.before.length+w.lines.length+w.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,f&&(_+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),v){const y=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=d*y+(v-d)*l.lineHeight+(v-1)*e.bodySpacing}h&&(_+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let g=0;const b=function(y){m=Math.max(m,n.measureText(y).width+g)};return n.save(),n.font=c.string,cn(t.title,b),n.font=l.string,cn(t.beforeBody.concat(t.afterBody),b),g=e.displayColors?o+2+e.boxPadding:0,cn(i,y=>{cn(y.before,b),cn(y.lines,b),cn(y.after,b)}),g=0,n.font=u.string,cn(t.footer,b),n.restore(),m+=p.width,{width:m,height:_}}function E9(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function T9(t,e,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&s+r+o>e.width||t==="right"&&s-r-o<0)return!0}function A9(t,e,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),T9(c,t,e,n)&&(c="center"),c}function kx(t,e,n){const i=n.yAlign||e.yAlign||E9(t,n);return{xAlign:n.xAlign||e.xAlign||A9(t,e,n,i),yAlign:i}}function k9(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function C9(t,e,n){let{y:i,height:s}=t;return e==="top"?i+=n:e==="bottom"?i-=s+n:i-=s/2,i}function Cx(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+r,{topLeft:u,topRight:f,bottomLeft:h,bottomRight:d}=cl(o);let p=k9(e,a);const _=C9(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,h)+s:a==="right"&&(p+=Math.max(f,d)+s),{x:ki(p,0,i.width-e.width),y:ki(_,0,i.height-e.height)}}function yd(t,e,n){const i=Gi(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Lx(t){return Br([],po(t))}function L9(t,e,n){return Na(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Px(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const ak={beforeTitle:ro,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:ro,beforeBody:ro,beforeLabel:ro,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return wn(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ro,afterBody:ro,beforeFooter:ro,footer:ro,afterFooter:ro};function rs(t,e,n,i){const s=t[e].call(n,i);return typeof s>"u"?ak[e].call(n,i):s}class a_ extends Cr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new UA(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=L9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,s=rs(i,"beforeTitle",this,e),r=rs(i,"title",this,e),o=rs(i,"afterTitle",this,e);let a=[];return a=Br(a,po(s)),a=Br(a,po(r)),a=Br(a,po(o)),a}getBeforeBody(e,n){return Lx(rs(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,s=[];return cn(e,r=>{const o={before:[],lines:[],after:[]},a=Px(i,r);Br(o.before,po(rs(a,"beforeLabel",this,r))),Br(o.lines,rs(a,"label",this,r)),Br(o.after,po(rs(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,n){return Lx(rs(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,s=rs(i,"beforeFooter",this,e),r=rs(i,"footer",this,e),o=rs(i,"afterFooter",this,e);let a=[];return a=Br(a,po(s)),a=Br(a,po(r)),a=Br(a,po(o)),a}_createItems(e){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(S9(this.chart,n[l]));return e.filter&&(a=a.filter((u,f,h)=>e.filter(u,f,h,i))),e.itemSort&&(a=a.sort((u,f)=>e.itemSort(u,f,i))),cn(a,u=>{const f=Px(e.callbacks,u);s.push(rs(f,"labelColor",this,u)),r.push(rs(f,"labelPointStyle",this,u)),o.push(rs(f,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=nf[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Ax(this,i),c=Object.assign({},a,l),u=kx(this.chart,i,c),f=Cx(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,s){const r=this.getCaretPosition(e,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=cl(a),{x:h,y:d}=e,{width:p,height:_}=n;let m,v,g,b,y,w;return r==="center"?(y=d+_/2,s==="left"?(m=h,v=m-o,b=y+o,w=y-o):(m=h+p,v=m+o,b=y-o,w=y+o),g=m):(s==="left"?v=h+Math.max(l,u)+o:s==="right"?v=h+p-Math.max(c,f)-o:v=this.caretX,r==="top"?(b=d,y=b-o,m=v-o,g=v+o):(b=d+_,y=b+o,m=v+o,g=v-o),w=b),{x1:m,x2:v,x3:g,y1:b,y2:y,y3:w}}drawTitle(e,n,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=qc(i.rtl,this.x,this.width);for(e.x=yd(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=wi(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c,boxPadding:u}=r,f=wi(r.bodyFont),h=yd(this,"left",r),d=s.x(h),p=l<f.lineHeight?(f.lineHeight-l)/2:0,_=n.y+p;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=s.leftForLtr(d,c)+c/2,g=_+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,t_(e,m,v,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,t_(e,m,v,g)}else{e.lineWidth=fn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=s.leftForLtr(d,c-u),v=s.leftForLtr(s.xPlus(d,1),c-u-2),g=cl(o.borderRadius);Object.values(g).some(b=>b!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,nh(e,{x:m,y:_,w:c,h:l,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),nh(e,{x:v,y:_+1,w:c-2,h:l-2,radius:g}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(m,_,c,l),e.strokeRect(m,_,c,l),e.fillStyle=o.backgroundColor,e.fillRect(v,_+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,f=wi(i.bodyFont);let h=f.lineHeight,d=0;const p=qc(i.rtl,this.x,this.width),_=function(T){n.fillText(T,p.x(e.x+d),e.y+h/2),e.y+=h+r},m=p.textAlign(o);let v,g,b,y,w,x,S;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=yd(this,m,i),n.fillStyle=i.bodyColor,cn(this.beforeBody,_),d=a&&m!=="right"?o==="center"?c/2+u:c+2+u:0,y=0,x=s.length;y<x;++y){for(v=s[y],g=this.labelTextColors[y],n.fillStyle=g,cn(v.before,_),b=v.lines,a&&b.length&&(this._drawColorBox(n,e,y,p,i),h=Math.max(f.lineHeight,l)),w=0,S=b.length;w<S;++w)_(b[w]),h=f.lineHeight;cn(v.after,_)}d=0,h=f.lineHeight,cn(this.afterBody,_),e.y-=r}drawFooter(e,n,i){const s=this.footer,r=s.length;let o,a;if(r){const l=qc(i.rtl,this.x,this.width);for(e.x=yd(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=wi(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:f,topRight:h,bottomLeft:d,bottomRight:p}=cl(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,i,s),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&r==="right"&&this.drawCaret(e,n,i,s),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,i,s),n.lineTo(a+d,l+u),n.quadraticCurveTo(a,l+u,a,l+u-d),o==="center"&&r==="left"&&this.drawCaret(e,n,i,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=nf[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Ax(this,e),l=Object.assign({},o,this._size),c=kx(n,e,l),u=Cx(e,l,c,n);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Gi(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,n),IA(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),NA(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Tm(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,i),a=this._positionChanged(o,e),l=n||!Tm(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return n;const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:s,options:r}=this,o=nf[r.position].call(this,e,n);return o!==!1&&(i!==o.x||s!==o.y)}}ke(a_,"positioners",nf);var P9={id:"tooltip",_element:a_,positioners:nf,afterInit(t,e,n){n&&(t.tooltip=new a_({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ak},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},R9=Object.freeze({__proto__:null,Colors:WV,Decimation:XV,Filler:p9,Legend:y9,SubTitle:M9,Title:x9,Tooltip:P9});const D9=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function O9(t,e,n,i){const s=t.indexOf(e);if(s===-1)return D9(t,e,n,i);const r=t.lastIndexOf(e);return s!==r?n:s}const I9=(t,e)=>t===null?null:ki(Math.round(t),0,e);function Rx(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class l_ extends Il{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(wn(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:O9(i,e,Ft(n,e),this._addedLabels),I9(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Rx.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ke(l_,"id","category"),ke(l_,"defaults",{ticks:{callback:Rx}});function N9(t,e){const n=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:h}=t,d=r||1,p=u-1,{min:_,max:m}=e,v=!wn(o),g=!wn(a),b=!wn(c),y=(m-_)/(f+1);let w=Sw((m-_)/p/d)*d,x,S,T,A;if(w<1e-14&&!v&&!g)return[{value:_},{value:m}];A=Math.ceil(m/w)-Math.floor(_/w),A>p&&(w=Sw(A*w/p/d)*d),wn(l)||(x=Math.pow(10,l),w=Math.ceil(w*x)/x),s==="ticks"?(S=Math.floor(_/w)*w,T=Math.ceil(m/w)*w):(S=_,T=m),v&&g&&r&&uU((a-o)/r,w/1e3)?(A=Math.round(Math.min((a-o)/w,u)),w=(a-o)/A,S=o,T=a):b?(S=v?o:S,T=g?a:T,A=c-1,w=(T-S)/A):(A=(T-S)/w,yf(A,Math.round(A),w/1e3)?A=Math.round(A):A=Math.ceil(A));const C=Math.max(Ew(w),Ew(S));x=Math.pow(10,wn(l)?C:l),S=Math.round(S*x)/x,T=Math.round(T*x)/x;let k=0;for(v&&(h&&S!==o?(n.push({value:o}),S<o&&k++,yf(Math.round((S+k*w)*x)/x,o,Dx(o,y,t))&&k++):S<o&&k++);k<A;++k)n.push({value:Math.round((S+k*w)*x)/x});return g&&h&&T!==a?n.length&&yf(n[n.length-1].value,a,Dx(a,y,t))?n[n.length-1].value=a:n.push({value:a}):(!g||T===a)&&n.push({value:T}),n}function Dx(t,e,{horizontal:n,minRotation:i}){const s=br(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class Im extends Il{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return wn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=n?s:l,a=l=>r=i?r:l;if(e){const l=Xs(s),c=Xs(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=N9(s,r);return e.bounds==="ticks"&&hA(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-n)/Math.max(e.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Fh(e,this.chart.options.locale,this.options.ticks.format)}}class c_ extends Im{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ai(e)?e:0,this.max=ai(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=br(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ke(c_,"id","linear"),ke(c_,"defaults",{ticks:{callback:Tg.formatters.numeric}});const sh=t=>Math.floor(fa(t)),Va=(t,e)=>Math.pow(10,sh(t)+e);function Ox(t){return t/Math.pow(10,sh(t))===1}function Ix(t,e,n){const i=Math.pow(10,n),s=Math.floor(t/i);return Math.ceil(e/i)-s}function B9(t,e){const n=e-t;let i=sh(n);for(;Ix(t,e,i)>10;)i++;for(;Ix(t,e,i)<10;)i--;return Math.min(i,sh(t))}function F9(t,{min:e,max:n}){e=Ms(t.min,e);const i=[],s=sh(e);let r=B9(e,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let f=Math.floor((c-u)/Math.pow(10,r)),h=Ms(t.min,Math.round((l+u+f*Math.pow(10,r))*o)/o);for(;h<n;)i.push({value:h,major:Ox(h),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(r++,f=2,o=r>=0?1:o),h=Math.round((l+u+f*Math.pow(10,r))*o)/o;const d=Ms(t.max,h);return i.push({value:d,major:Ox(d),significand:f}),i}class u_ extends Il{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Im.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return ai(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ai(e)?Math.max(0,e):null,this.max=ai(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ai(this._userMin)&&(this.min=e===Va(this.min,0)?Va(this.min,-1):Va(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=n?s:a;i===s&&(i<=0?(r(1),o(10)):(r(Va(i,-1)),o(Va(s,1)))),i<=0&&r(Va(s,-1)),s<=0&&o(Va(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=F9(n,this);return e.bounds==="ticks"&&hA(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Fh(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=fa(e),this._valueRange=fa(this.max)-fa(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(fa(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}ke(u_,"id","logarithmic"),ke(u_,"defaults",{ticks:{callback:Tg.formatters.logarithmic,major:{enabled:!0}}});function f_(t){const e=t.ticks;if(e.display&&t.display){const n=Gi(e.backdropPadding);return Ft(e.font&&e.font.size,ui.font.size)+n.height}return 0}function z9(t,e,n){return n=Un(n)?n:[n],{w:ZU(t,e.string,n),h:n.length*e.lineHeight}}function Nx(t,e,n,i,s){return t===i||t===s?{start:e-n/2,end:e+n/2}:t<i||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function U9(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],s=[],r=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Zn/r:0;for(let l=0;l<r;l++){const c=o.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],a),f=wi(c.font),h=z9(t.ctx,f,t._pointLabels[l]);i[l]=h;const d=Es(t.getIndexAngle(l)+a),p=Math.round(vb(d)),_=Nx(p,u.x,h.w,0,180),m=Nx(p,u.y,h.h,90,270);H9(n,e,d,_,m)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=V9(t,i,s)}function H9(t,e,n,i,s){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function V9(t,e,n){const i=[],s=t._pointLabels.length,r=t.options,o=f_(r)/2,a=t.drawingArea,l=r.pointLabels.centerPointLabels?Zn/s:0;for(let c=0;c<s;c++){const u=t.getPointPosition(c,a+o+n[c],l),f=Math.round(vb(Es(u.angle+li))),h=e[c],d=j9(u.y,h.h,f),p=G9(f),_=W9(u.x,h.w,p);i.push({x:u.x,y:d,textAlign:p,left:_,top:d,right:_+h.w,bottom:d+h.h})}return i}function G9(t){return t===0||t===180?"center":t<180?"left":"right"}function W9(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function j9(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function Y9(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let s=e-1;s>=0;s--){const r=i.setContext(t.getPointLabelContext(s)),o=wi(r.font),{x:a,y:l,textAlign:c,left:u,top:f,right:h,bottom:d}=t._pointLabelItems[s],{backdropColor:p}=r;if(!wn(p)){const _=cl(r.borderRadius),m=Gi(r.backdropPadding);n.fillStyle=p;const v=u-m.left,g=f-m.top,b=h-u+m.width,y=d-f+m.height;Object.values(_).some(w=>w!==0)?(n.beginPath(),nh(n,{x:v,y:g,w:b,h:y,radius:_}),n.fill()):n.fillRect(v,g,b,y)}yl(n,t._pointLabels[s],a,l+o.lineHeight/2,o,{color:r.color,textAlign:c,textBaseline:"middle"})}}function lk(t,e,n,i){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,Hn);else{let r=t.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=t.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function q9(t,e,n,i,s){const r=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash),r.lineDashOffset=s.dashOffset,r.beginPath(),lk(t,n,o,i),r.closePath(),r.stroke(),r.restore())}function X9(t,e,n){return Na(t,{label:n,index:e,type:"pointLabel"})}class sf extends Im{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Gi(f_(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ai(e)&&!isNaN(e)?e:0,this.max=ai(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/f_(this.options))}generateTickLabels(e){Im.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const s=Ut(this.options.pointLabels.callback,[n,i],this);return s||s===0?s:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?U9(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,s))}getIndexAngle(e){const n=Hn/(this._pointLabels.length||1),i=this.options.startAngle||0;return Es(e*n+br(i))}getDistanceFromCenterForValue(e){if(wn(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(wn(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return X9(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const s=this.getIndexAngle(e)-li+i;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:n,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),lk(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:s,border:r}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&Y9(this,o),s.display&&this.ticks.forEach((u,f)=>{if(f!==0){l=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(f),d=s.setContext(h),p=r.setContext(h);q9(this,d,l,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:h}=u;!h||!f||(e.lineWidth=h,e.strokeStyle=f,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=wi(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const f=Gi(c.backdropPadding);e.fillRect(-o/2-f.left,-r-u.size/2-f.top,o+f.width,u.size+f.height)}yl(e,a.label,0,-r,u,{color:c.color})}),e.restore()}drawTitle(){}}ke(sf,"id","radialLinear"),ke(sf,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Tg.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ke(sf,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ke(sf,"descriptors",{angleLines:{_fallback:"grid"}});const Lg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},cs=Object.keys(Lg);function Z9(t,e){return t-e}function Bx(t,e){if(wn(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),ai(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(ru(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function Fx(t,e,n,i){const s=cs.length;for(let r=cs.indexOf(t);r<s-1;++r){const o=Lg[cs[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return cs[r]}return cs[s-1]}function J9(t,e,n,i,s){for(let r=cs.length-1;r>=cs.indexOf(n);r--){const o=cs[r];if(Lg[o].common&&t._adapter.diff(s,i,o)>=e-1)return o}return cs[n?cs.indexOf(n):0]}function K9(t){for(let e=cs.indexOf(t)+1,n=cs.length;e<n;++e)if(Lg[cs[e]].common)return cs[e]}function zx(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:s}=bb(n,e),r=n[i]>=e?n[i]:n[s];t[r]=!0}}function $9(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Ux(t,e,n){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!n?i:$9(t,i,s,n)}class rh extends Il{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),s=this._adapter=new fH._date(e.adapters.date);s.init(n),bf(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Bx(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ai(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=ai(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=pU(s,r,o);return this._unit=n.unit||(i.autoSkip?Fx(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):J9(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:K9(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Ux(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=ki(n,0,o),i=ki(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Fx(r.minUnit,n,i,this._getLabelCapacity(n)),a=Ft(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=ru(l)||l===!0,u={};let f=n,h,d;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(h=f,d=0;h<i;h=+e.add(h,a,o),d++)zx(u,h,p);return(h===i||s.bounds==="ticks"||d===1)&&zx(u,h,p),Object.keys(u).sort((_,m)=>_-m).map(_=>+_)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}_tickFormatFunction(e,n,i,s){const r=this.options,o=r.ticks.callback;if(o)return Ut(o,[e,n,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],h=i[n],d=c&&f&&h&&h.major;return this._adapter.format(e,s||(d?f:u))}generateTickLabels(e){let n,i,s;for(n=0,i=e.length;n<i;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,s=br(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(e,0,Ux(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)e.push(Bx(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return mA(e.sort(Z9))}}ke(rh,"id","time"),ke(rh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function wd(t,e,n){let i=0,s=t.length-1,r,o,a,l;n?(e>=t[i].pos&&e<=t[s].pos&&({lo:i,hi:s}=Eo(t,"pos",e)),{pos:r,time:a}=t[i],{pos:o,time:l}=t[s]):(e>=t[i].time&&e<=t[s].time&&({lo:i,hi:s}=Eo(t,"time",e)),{time:r,pos:a}=t[i],{time:o,pos:l}=t[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class h_ extends rh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=wd(n,this.min),this._tableRange=wd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(wd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return wd(this._table,i*this._tableRange+this._minPos,!0)}}ke(h_,"id","timeseries"),ke(h_,"defaults",rh.defaults);var Q9=h_,eG=Object.freeze({__proto__:null,CategoryScale:l_,LinearScale:c_,LogarithmicScale:u_,RadialLinearScale:sf,TimeScale:rh,TimeSeriesScale:Q9});const tG=[uH,zV,R9,eG];Jo.register(...tG);var ck={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,i,s){var r=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),a="function",l=Math.round,c=Math.abs,u=Date.now;function f(j,Z,oe){return setTimeout(b(j,oe),Z)}function h(j,Z,oe){return Array.isArray(j)?(d(j,oe[Z],oe),!0):!1}function d(j,Z,oe){var Ce;if(!!j)if(j.forEach)j.forEach(Z,oe);else if(j.length!==s)for(Ce=0;Ce<j.length;)Z.call(oe,j[Ce],Ce,j),Ce++;else for(Ce in j)j.hasOwnProperty(Ce)&&Z.call(oe,j[Ce],Ce,j)}function p(j,Z,oe){var Ce="DEPRECATED METHOD: "+Z+`
`+oe+` AT 
`;return function(){var Ke=new Error("get-stack-trace"),mt=Ke&&Ke.stack?Ke.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",an=e.console&&(e.console.warn||e.console.log);return an&&an.call(e.console,Ce,mt),j.apply(this,arguments)}}var _;typeof Object.assign!="function"?_=function(Z){if(Z===s||Z===null)throw new TypeError("Cannot convert undefined or null to object");for(var oe=Object(Z),Ce=1;Ce<arguments.length;Ce++){var Ke=arguments[Ce];if(Ke!==s&&Ke!==null)for(var mt in Ke)Ke.hasOwnProperty(mt)&&(oe[mt]=Ke[mt])}return oe}:_=Object.assign;var m=p(function(Z,oe,Ce){for(var Ke=Object.keys(oe),mt=0;mt<Ke.length;)(!Ce||Ce&&Z[Ke[mt]]===s)&&(Z[Ke[mt]]=oe[Ke[mt]]),mt++;return Z},"extend","Use `assign`."),v=p(function(Z,oe){return m(Z,oe,!0)},"merge","Use `assign`.");function g(j,Z,oe){var Ce=Z.prototype,Ke;Ke=j.prototype=Object.create(Ce),Ke.constructor=j,Ke._super=Ce,oe&&_(Ke,oe)}function b(j,Z){return function(){return j.apply(Z,arguments)}}function y(j,Z){return typeof j==a?j.apply(Z&&Z[0]||s,Z):j}function w(j,Z){return j===s?Z:j}function x(j,Z,oe){d(C(Z),function(Ce){j.addEventListener(Ce,oe,!1)})}function S(j,Z,oe){d(C(Z),function(Ce){j.removeEventListener(Ce,oe,!1)})}function T(j,Z){for(;j;){if(j==Z)return!0;j=j.parentNode}return!1}function A(j,Z){return j.indexOf(Z)>-1}function C(j){return j.trim().split(/\s+/g)}function k(j,Z,oe){if(j.indexOf&&!oe)return j.indexOf(Z);for(var Ce=0;Ce<j.length;){if(oe&&j[Ce][oe]==Z||!oe&&j[Ce]===Z)return Ce;Ce++}return-1}function L(j){return Array.prototype.slice.call(j,0)}function F(j,Z,oe){for(var Ce=[],Ke=[],mt=0;mt<j.length;){var an=Z?j[mt][Z]:j[mt];k(Ke,an)<0&&Ce.push(j[mt]),Ke[mt]=an,mt++}return oe&&(Z?Ce=Ce.sort(function(Li,Xi){return Li[Z]>Xi[Z]}):Ce=Ce.sort()),Ce}function U(j,Z){for(var oe,Ce,Ke=Z[0].toUpperCase()+Z.slice(1),mt=0;mt<r.length;){if(oe=r[mt],Ce=oe?oe+Ke:Z,Ce in j)return Ce;mt++}return s}var N=1;function B(){return N++}function W(j){var Z=j.ownerDocument||j;return Z.defaultView||Z.parentWindow||e}var ee=/mobile|tablet|ip(ad|hone|od)|android/i,K="ontouchstart"in e,ge=U(e,"PointerEvent")!==s,se=K&&ee.test(navigator.userAgent),X="touch",q="pen",Y="mouse",$="kinect",ze=25,_e=1,pe=2,Te=4,De=8,je=1,de=2,Ae=4,Oe=8,Ye=16,fe=de|Ae,R=Oe|Ye,V=fe|R,ne=["x","y"],he=["clientX","clientY"];function ie(j,Z){var oe=this;this.manager=j,this.callback=Z,this.element=j.element,this.target=j.options.inputTarget,this.domHandler=function(Ce){y(j.options.enable,[j])&&oe.handler(Ce)},this.init()}ie.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(W(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(W(this.element),this.evWin,this.domHandler)}};function ue(j){var Z,oe=j.options.inputClass;return oe?Z=oe:ge?Z=Qe:se?Z=st:K?Z=Rt:Z=Jt,new Z(j,Re)}function Re(j,Z,oe){var Ce=oe.pointers.length,Ke=oe.changedPointers.length,mt=Z&_e&&Ce-Ke===0,an=Z&(Te|De)&&Ce-Ke===0;oe.isFirst=!!mt,oe.isFinal=!!an,mt&&(j.session={}),oe.eventType=Z,Ue(j,oe),j.emit("hammer.input",oe),j.recognize(oe),j.session.prevInput=oe}function Ue(j,Z){var oe=j.session,Ce=Z.pointers,Ke=Ce.length;oe.firstInput||(oe.firstInput=re(Z)),Ke>1&&!oe.firstMultiple?oe.firstMultiple=re(Z):Ke===1&&(oe.firstMultiple=!1);var mt=oe.firstInput,an=oe.firstMultiple,Si=an?an.center:mt.center,Li=Z.center=we(Ce);Z.timeStamp=u(),Z.deltaTime=Z.timeStamp-mt.timeStamp,Z.angle=pt(Si,Li),Z.distance=Ze(Si,Li),Ee(oe,Z),Z.offsetDirection=Ne(Z.deltaX,Z.deltaY);var Xi=Me(Z.deltaTime,Z.deltaX,Z.deltaY);Z.overallVelocityX=Xi.x,Z.overallVelocityY=Xi.y,Z.overallVelocity=c(Xi.x)>c(Xi.y)?Xi.x:Xi.y,Z.scale=an?Gt(an.pointers,Ce):1,Z.rotation=an?sn(an.pointers,Ce):0,Z.maxPointers=oe.prevInput?Z.pointers.length>oe.prevInput.maxPointers?Z.pointers.length:oe.prevInput.maxPointers:Z.pointers.length,Se(oe,Z);var Dr=j.element;T(Z.srcEvent.target,Dr)&&(Dr=Z.srcEvent.target),Z.target=Dr}function Ee(j,Z){var oe=Z.center,Ce=j.offsetDelta||{},Ke=j.prevDelta||{},mt=j.prevInput||{};(Z.eventType===_e||mt.eventType===Te)&&(Ke=j.prevDelta={x:mt.deltaX||0,y:mt.deltaY||0},Ce=j.offsetDelta={x:oe.x,y:oe.y}),Z.deltaX=Ke.x+(oe.x-Ce.x),Z.deltaY=Ke.y+(oe.y-Ce.y)}function Se(j,Z){var oe=j.lastInterval||Z,Ce=Z.timeStamp-oe.timeStamp,Ke,mt,an,Si;if(Z.eventType!=De&&(Ce>ze||oe.velocity===s)){var Li=Z.deltaX-oe.deltaX,Xi=Z.deltaY-oe.deltaY,Dr=Me(Ce,Li,Xi);mt=Dr.x,an=Dr.y,Ke=c(Dr.x)>c(Dr.y)?Dr.x:Dr.y,Si=Ne(Li,Xi),j.lastInterval=Z}else Ke=oe.velocity,mt=oe.velocityX,an=oe.velocityY,Si=oe.direction;Z.velocity=Ke,Z.velocityX=mt,Z.velocityY=an,Z.direction=Si}function re(j){for(var Z=[],oe=0;oe<j.pointers.length;)Z[oe]={clientX:l(j.pointers[oe].clientX),clientY:l(j.pointers[oe].clientY)},oe++;return{timeStamp:u(),pointers:Z,center:we(Z),deltaX:j.deltaX,deltaY:j.deltaY}}function we(j){var Z=j.length;if(Z===1)return{x:l(j[0].clientX),y:l(j[0].clientY)};for(var oe=0,Ce=0,Ke=0;Ke<Z;)oe+=j[Ke].clientX,Ce+=j[Ke].clientY,Ke++;return{x:l(oe/Z),y:l(Ce/Z)}}function Me(j,Z,oe){return{x:Z/j||0,y:oe/j||0}}function Ne(j,Z){return j===Z?je:c(j)>=c(Z)?j<0?de:Ae:Z<0?Oe:Ye}function Ze(j,Z,oe){oe||(oe=ne);var Ce=Z[oe[0]]-j[oe[0]],Ke=Z[oe[1]]-j[oe[1]];return Math.sqrt(Ce*Ce+Ke*Ke)}function pt(j,Z,oe){oe||(oe=ne);var Ce=Z[oe[0]]-j[oe[0]],Ke=Z[oe[1]]-j[oe[1]];return Math.atan2(Ke,Ce)*180/Math.PI}function sn(j,Z){return pt(Z[1],Z[0],he)+pt(j[1],j[0],he)}function Gt(j,Z){return Ze(Z[0],Z[1],he)/Ze(j[0],j[1],he)}var Wt={mousedown:_e,mousemove:pe,mouseup:Te},gn="mousedown",jt="mousemove mouseup";function Jt(){this.evEl=gn,this.evWin=jt,this.pressed=!1,ie.apply(this,arguments)}g(Jt,ie,{handler:function(Z){var oe=Wt[Z.type];oe&_e&&Z.button===0&&(this.pressed=!0),oe&pe&&Z.which!==1&&(oe=Te),this.pressed&&(oe&Te&&(this.pressed=!1),this.callback(this.manager,oe,{pointers:[Z],changedPointers:[Z],pointerType:Y,srcEvent:Z}))}});var Yt={pointerdown:_e,pointermove:pe,pointerup:Te,pointercancel:De,pointerout:De},Kt={2:X,3:q,4:Y,5:$},kn="pointerdown",xn="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(kn="MSPointerDown",xn="MSPointerMove MSPointerUp MSPointerCancel");function Qe(){this.evEl=kn,this.evWin=xn,ie.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}g(Qe,ie,{handler:function(Z){var oe=this.store,Ce=!1,Ke=Z.type.toLowerCase().replace("ms",""),mt=Yt[Ke],an=Kt[Z.pointerType]||Z.pointerType,Si=an==X,Li=k(oe,Z.pointerId,"pointerId");mt&_e&&(Z.button===0||Si)?Li<0&&(oe.push(Z),Li=oe.length-1):mt&(Te|De)&&(Ce=!0),!(Li<0)&&(oe[Li]=Z,this.callback(this.manager,mt,{pointers:oe,changedPointers:[Z],pointerType:an,srcEvent:Z}),Ce&&oe.splice(Li,1))}});var qt={touchstart:_e,touchmove:pe,touchend:Te,touchcancel:De},Nn="touchstart",Os="touchstart touchmove touchend touchcancel";function Q(){this.evTarget=Nn,this.evWin=Os,this.started=!1,ie.apply(this,arguments)}g(Q,ie,{handler:function(Z){var oe=qt[Z.type];if(oe===_e&&(this.started=!0),!!this.started){var Ce=Be.call(this,Z,oe);oe&(Te|De)&&Ce[0].length-Ce[1].length===0&&(this.started=!1),this.callback(this.manager,oe,{pointers:Ce[0],changedPointers:Ce[1],pointerType:X,srcEvent:Z})}}});function Be(j,Z){var oe=L(j.touches),Ce=L(j.changedTouches);return Z&(Te|De)&&(oe=F(oe.concat(Ce),"identifier",!0)),[oe,Ce]}var Le={touchstart:_e,touchmove:pe,touchend:Te,touchcancel:De},qe="touchstart touchmove touchend touchcancel";function st(){this.evTarget=qe,this.targetIds={},ie.apply(this,arguments)}g(st,ie,{handler:function(Z){var oe=Le[Z.type],Ce=Ht.call(this,Z,oe);!Ce||this.callback(this.manager,oe,{pointers:Ce[0],changedPointers:Ce[1],pointerType:X,srcEvent:Z})}});function Ht(j,Z){var oe=L(j.touches),Ce=this.targetIds;if(Z&(_e|pe)&&oe.length===1)return Ce[oe[0].identifier]=!0,[oe,oe];var Ke,mt,an=L(j.changedTouches),Si=[],Li=this.target;if(mt=oe.filter(function(Xi){return T(Xi.target,Li)}),Z===_e)for(Ke=0;Ke<mt.length;)Ce[mt[Ke].identifier]=!0,Ke++;for(Ke=0;Ke<an.length;)Ce[an[Ke].identifier]&&Si.push(an[Ke]),Z&(Te|De)&&delete Ce[an[Ke].identifier],Ke++;if(!!Si.length)return[F(mt.concat(Si),"identifier",!0),Si]}var Bt=2500,Vt=25;function Rt(){ie.apply(this,arguments);var j=b(this.handler,this);this.touch=new st(this.manager,j),this.mouse=new Jt(this.manager,j),this.primaryTouch=null,this.lastTouches=[]}g(Rt,ie,{handler:function(Z,oe,Ce){var Ke=Ce.pointerType==X,mt=Ce.pointerType==Y;if(!(mt&&Ce.sourceCapabilities&&Ce.sourceCapabilities.firesTouchEvents)){if(Ke)Bn.call(this,oe,Ce);else if(mt&&Ot.call(this,Ce))return;this.callback(Z,oe,Ce)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Bn(j,Z){j&_e?(this.primaryTouch=Z.changedPointers[0].identifier,Ln.call(this,Z)):j&(Te|De)&&Ln.call(this,Z)}function Ln(j){var Z=j.changedPointers[0];if(Z.identifier===this.primaryTouch){var oe={x:Z.clientX,y:Z.clientY};this.lastTouches.push(oe);var Ce=this.lastTouches,Ke=function(){var mt=Ce.indexOf(oe);mt>-1&&Ce.splice(mt,1)};setTimeout(Ke,Bt)}}function Ot(j){for(var Z=j.srcEvent.clientX,oe=j.srcEvent.clientY,Ce=0;Ce<this.lastTouches.length;Ce++){var Ke=this.lastTouches[Ce],mt=Math.abs(Z-Ke.x),an=Math.abs(oe-Ke.y);if(mt<=Vt&&an<=Vt)return!0}return!1}var xe=U(o.style,"touchAction"),it=xe!==s,Je="compute",Tt="auto",hn="manipulation",hi="none",Tn="pan-x",Mi="pan-y",di=Nl();function qi(j,Z){this.manager=j,this.set(Z)}qi.prototype={set:function(j){j==Je&&(j=this.compute()),it&&this.manager.element.style&&di[j]&&(this.manager.element.style[xe]=j),this.actions=j.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var j=[];return d(this.manager.recognizers,function(Z){y(Z.options.enable,[Z])&&(j=j.concat(Z.getTouchAction()))}),Uo(j.join(" "))},preventDefaults:function(j){var Z=j.srcEvent,oe=j.offsetDirection;if(this.manager.session.prevented){Z.preventDefault();return}var Ce=this.actions,Ke=A(Ce,hi)&&!di[hi],mt=A(Ce,Mi)&&!di[Mi],an=A(Ce,Tn)&&!di[Tn];if(Ke){var Si=j.pointers.length===1,Li=j.distance<2,Xi=j.deltaTime<250;if(Si&&Li&&Xi)return}if(!(an&&mt)&&(Ke||mt&&oe&fe||an&&oe&R))return this.preventSrc(Z)},preventSrc:function(j){this.manager.session.prevented=!0,j.preventDefault()}};function Uo(j){if(A(j,hi))return hi;var Z=A(j,Tn),oe=A(j,Mi);return Z&&oe?hi:Z||oe?Z?Tn:Mi:A(j,hn)?hn:Tt}function Nl(){if(!it)return!1;var j={},Z=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(oe){j[oe]=Z?e.CSS.supports("touch-action",oe):!0}),j}var pi=1,Dn=2,ir=4,vs=8,ss=vs,Rr=16,Is=32;function sr(j){this.options=_({},this.defaults,j||{}),this.id=B(),this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=pi,this.simultaneous={},this.requireFail=[]}sr.prototype={defaults:{},set:function(j){return _(this.options,j),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(j){if(h(j,"recognizeWith",this))return this;var Z=this.simultaneous;return j=Bl(j,this),Z[j.id]||(Z[j.id]=j,j.recognizeWith(this)),this},dropRecognizeWith:function(j){return h(j,"dropRecognizeWith",this)?this:(j=Bl(j,this),delete this.simultaneous[j.id],this)},requireFailure:function(j){if(h(j,"requireFailure",this))return this;var Z=this.requireFail;return j=Bl(j,this),k(Z,j)===-1&&(Z.push(j),j.requireFailure(this)),this},dropRequireFailure:function(j){if(h(j,"dropRequireFailure",this))return this;j=Bl(j,this);var Z=k(this.requireFail,j);return Z>-1&&this.requireFail.splice(Z,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(j){return!!this.simultaneous[j.id]},emit:function(j){var Z=this,oe=this.state;function Ce(Ke){Z.manager.emit(Ke,j)}oe<vs&&Ce(Z.options.event+Yh(oe)),Ce(Z.options.event),j.additionalEvent&&Ce(j.additionalEvent),oe>=vs&&Ce(Z.options.event+Yh(oe))},tryEmit:function(j){if(this.canEmit())return this.emit(j);this.state=Is},canEmit:function(){for(var j=0;j<this.requireFail.length;){if(!(this.requireFail[j].state&(Is|pi)))return!1;j++}return!0},recognize:function(j){var Z=_({},j);if(!y(this.options.enable,[this,Z])){this.reset(),this.state=Is;return}this.state&(ss|Rr|Is)&&(this.state=pi),this.state=this.process(Z),this.state&(Dn|ir|vs|Rr)&&this.tryEmit(Z)},process:function(j){},getTouchAction:function(){},reset:function(){}};function Yh(j){return j&Rr?"cancel":j&vs?"end":j&ir?"move":j&Dn?"start":""}function qh(j){return j==Ye?"down":j==Oe?"up":j==de?"left":j==Ae?"right":""}function Bl(j,Z){var oe=Z.manager;return oe?oe.get(j):j}function bs(){sr.apply(this,arguments)}g(bs,sr,{defaults:{pointers:1},attrTest:function(j){var Z=this.options.pointers;return Z===0||j.pointers.length===Z},process:function(j){var Z=this.state,oe=j.eventType,Ce=Z&(Dn|ir),Ke=this.attrTest(j);return Ce&&(oe&De||!Ke)?Z|Rr:Ce||Ke?oe&Te?Z|vs:Z&Dn?Z|ir:Dn:Is}});function Fl(){bs.apply(this,arguments),this.pX=null,this.pY=null}g(Fl,bs,{defaults:{event:"pan",threshold:10,pointers:1,direction:V},getTouchAction:function(){var j=this.options.direction,Z=[];return j&fe&&Z.push(Mi),j&R&&Z.push(Tn),Z},directionTest:function(j){var Z=this.options,oe=!0,Ce=j.distance,Ke=j.direction,mt=j.deltaX,an=j.deltaY;return Ke&Z.direction||(Z.direction&fe?(Ke=mt===0?je:mt<0?de:Ae,oe=mt!=this.pX,Ce=Math.abs(j.deltaX)):(Ke=an===0?je:an<0?Oe:Ye,oe=an!=this.pY,Ce=Math.abs(j.deltaY))),j.direction=Ke,oe&&Ce>Z.threshold&&Ke&Z.direction},attrTest:function(j){return bs.prototype.attrTest.call(this,j)&&(this.state&Dn||!(this.state&Dn)&&this.directionTest(j))},emit:function(j){this.pX=j.deltaX,this.pY=j.deltaY;var Z=qh(j.direction);Z&&(j.additionalEvent=this.options.event+Z),this._super.emit.call(this,j)}});function ku(){bs.apply(this,arguments)}g(ku,bs,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[hi]},attrTest:function(j){return this._super.attrTest.call(this,j)&&(Math.abs(j.scale-1)>this.options.threshold||this.state&Dn)},emit:function(j){if(j.scale!==1){var Z=j.scale<1?"in":"out";j.additionalEvent=this.options.event+Z}this._super.emit.call(this,j)}});function Cu(){sr.apply(this,arguments),this._timer=null,this._input=null}g(Cu,sr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Tt]},process:function(j){var Z=this.options,oe=j.pointers.length===Z.pointers,Ce=j.distance<Z.threshold,Ke=j.deltaTime>Z.time;if(this._input=j,!Ce||!oe||j.eventType&(Te|De)&&!Ke)this.reset();else if(j.eventType&_e)this.reset(),this._timer=f(function(){this.state=ss,this.tryEmit()},Z.time,this);else if(j.eventType&Te)return ss;return Is},reset:function(){clearTimeout(this._timer)},emit:function(j){this.state===ss&&(j&&j.eventType&Te?this.manager.emit(this.options.event+"up",j):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function Lu(){bs.apply(this,arguments)}g(Lu,bs,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[hi]},attrTest:function(j){return this._super.attrTest.call(this,j)&&(Math.abs(j.rotation)>this.options.threshold||this.state&Dn)}});function Fe(){bs.apply(this,arguments)}g(Fe,bs,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:fe|R,pointers:1},getTouchAction:function(){return Fl.prototype.getTouchAction.call(this)},attrTest:function(j){var Z=this.options.direction,oe;return Z&(fe|R)?oe=j.overallVelocity:Z&fe?oe=j.overallVelocityX:Z&R&&(oe=j.overallVelocityY),this._super.attrTest.call(this,j)&&Z&j.offsetDirection&&j.distance>this.options.threshold&&j.maxPointers==this.options.pointers&&c(oe)>this.options.velocity&&j.eventType&Te},emit:function(j){var Z=qh(j.offsetDirection);Z&&this.manager.emit(this.options.event+Z,j),this.manager.emit(this.options.event,j)}});function vn(){sr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}g(vn,sr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[hn]},process:function(j){var Z=this.options,oe=j.pointers.length===Z.pointers,Ce=j.distance<Z.threshold,Ke=j.deltaTime<Z.time;if(this.reset(),j.eventType&_e&&this.count===0)return this.failTimeout();if(Ce&&Ke&&oe){if(j.eventType!=Te)return this.failTimeout();var mt=this.pTime?j.timeStamp-this.pTime<Z.interval:!0,an=!this.pCenter||Ze(this.pCenter,j.center)<Z.posThreshold;this.pTime=j.timeStamp,this.pCenter=j.center,!an||!mt?this.count=1:this.count+=1,this._input=j;var Si=this.count%Z.taps;if(Si===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=ss,this.tryEmit()},Z.interval,this),Dn):ss}return Is},failTimeout:function(){return this._timer=f(function(){this.state=Is},this.options.interval,this),Is},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ss&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function dn(j,Z){return Z=Z||{},Z.recognizers=w(Z.recognizers,dn.defaults.preset),new Wg(j,Z)}dn.VERSION="2.0.7",dn.defaults={domEvents:!1,touchAction:Je,enable:!0,inputTarget:null,inputClass:null,preset:[[Lu,{enable:!1}],[ku,{enable:!1},["rotate"]],[Fe,{direction:fe}],[Fl,{direction:fe},["swipe"]],[vn],[vn,{event:"doubletap",taps:2},["tap"]],[Cu]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var UC=1,Xb=2;function Wg(j,Z){this.options=_({},dn.defaults,Z||{}),this.options.inputTarget=this.options.inputTarget||j,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=j,this.input=ue(this),this.touchAction=new qi(this,this.options.touchAction),Zb(this,!0),d(this.options.recognizers,function(oe){var Ce=this.add(new oe[0](oe[1]));oe[2]&&Ce.recognizeWith(oe[2]),oe[3]&&Ce.requireFailure(oe[3])},this)}Wg.prototype={set:function(j){return _(this.options,j),j.touchAction&&this.touchAction.update(),j.inputTarget&&(this.input.destroy(),this.input.target=j.inputTarget,this.input.init()),this},stop:function(j){this.session.stopped=j?Xb:UC},recognize:function(j){var Z=this.session;if(!Z.stopped){this.touchAction.preventDefaults(j);var oe,Ce=this.recognizers,Ke=Z.curRecognizer;(!Ke||Ke&&Ke.state&ss)&&(Ke=Z.curRecognizer=null);for(var mt=0;mt<Ce.length;)oe=Ce[mt],Z.stopped!==Xb&&(!Ke||oe==Ke||oe.canRecognizeWith(Ke))?oe.recognize(j):oe.reset(),!Ke&&oe.state&(Dn|ir|vs)&&(Ke=Z.curRecognizer=oe),mt++}},get:function(j){if(j instanceof sr)return j;for(var Z=this.recognizers,oe=0;oe<Z.length;oe++)if(Z[oe].options.event==j)return Z[oe];return null},add:function(j){if(h(j,"add",this))return this;var Z=this.get(j.options.event);return Z&&this.remove(Z),this.recognizers.push(j),j.manager=this,this.touchAction.update(),j},remove:function(j){if(h(j,"remove",this))return this;if(j=this.get(j),j){var Z=this.recognizers,oe=k(Z,j);oe!==-1&&(Z.splice(oe,1),this.touchAction.update())}return this},on:function(j,Z){if(j!==s&&Z!==s){var oe=this.handlers;return d(C(j),function(Ce){oe[Ce]=oe[Ce]||[],oe[Ce].push(Z)}),this}},off:function(j,Z){if(j!==s){var oe=this.handlers;return d(C(j),function(Ce){Z?oe[Ce]&&oe[Ce].splice(k(oe[Ce],Z),1):delete oe[Ce]}),this}},emit:function(j,Z){this.options.domEvents&&HC(j,Z);var oe=this.handlers[j]&&this.handlers[j].slice();if(!(!oe||!oe.length)){Z.type=j,Z.preventDefault=function(){Z.srcEvent.preventDefault()};for(var Ce=0;Ce<oe.length;)oe[Ce](Z),Ce++}},destroy:function(){this.element&&Zb(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Zb(j,Z){var oe=j.element;if(!!oe.style){var Ce;d(j.options.cssProps,function(Ke,mt){Ce=U(oe.style,mt),Z?(j.oldCssProps[Ce]=oe.style[Ce],oe.style[Ce]=Ke):oe.style[Ce]=j.oldCssProps[Ce]||""}),Z||(j.oldCssProps={})}}function HC(j,Z){var oe=n.createEvent("Event");oe.initEvent(j,!0,!0),oe.gesture=Z,Z.target.dispatchEvent(oe)}_(dn,{INPUT_START:_e,INPUT_MOVE:pe,INPUT_END:Te,INPUT_CANCEL:De,STATE_POSSIBLE:pi,STATE_BEGAN:Dn,STATE_CHANGED:ir,STATE_ENDED:vs,STATE_RECOGNIZED:ss,STATE_CANCELLED:Rr,STATE_FAILED:Is,DIRECTION_NONE:je,DIRECTION_LEFT:de,DIRECTION_RIGHT:Ae,DIRECTION_UP:Oe,DIRECTION_DOWN:Ye,DIRECTION_HORIZONTAL:fe,DIRECTION_VERTICAL:R,DIRECTION_ALL:V,Manager:Wg,Input:ie,TouchAction:qi,TouchInput:st,MouseInput:Jt,PointerEventInput:Qe,TouchMouseInput:Rt,SingleTouchInput:Q,Recognizer:sr,AttrRecognizer:bs,Tap:vn,Pan:Fl,Swipe:Fe,Pinch:ku,Rotate:Lu,Press:Cu,on:x,off:S,each:d,merge:v,extend:m,assign:_,inherit:g,bindFn:b,prefixed:U});var VC=typeof e<"u"?e:typeof self<"u"?self:{};VC.Hammer=dn,typeof s=="function"&&s.amd?s(function(){return dn}):t.exports?t.exports=dn:e[i]=dn})(window,document,"Hammer")})(ck);const xf=ck.exports;/*!
* chartjs-plugin-zoom v2.0.0
* undefined
 * (c) 2016-2022 chartjs-plugin-zoom Contributors
 * Released under the MIT License
 */const oh=t=>t&&t.enabled&&t.modifierKey,uk=(t,e)=>t&&e[t+"Key"],Rb=(t,e)=>t&&!e[t+"Key"];function Ta(t,e,n){return t===void 0?!0:typeof t=="string"?t.indexOf(e)!==-1:typeof t=="function"?t({chart:n}).indexOf(e)!==-1:!1}function L0(t,e){return typeof t=="function"&&(t=t({chart:e})),typeof t=="string"?{x:t.indexOf("x")!==-1,y:t.indexOf("y")!==-1}:{x:!1,y:!1}}function nG(t,e){let n;return function(){return clearTimeout(n),n=setTimeout(t,e),e}}function iG({x:t,y:e},n){const i=n.scales,s=Object.keys(i);for(let r=0;r<s.length;r++){const o=i[s[r]];if(e>=o.top&&e<=o.bottom&&t>=o.left&&t<=o.right)return o}return null}function fk(t,e,n){const{mode:i="xy",scaleMode:s,overScaleMode:r}=t||{},o=iG(e,n),a=L0(i,n),l=L0(s,n);if(r){const u=L0(r,n);for(const f of["x","y"])u[f]&&(l[f]=a[f],a[f]=!1)}if(o&&l[o.axis])return[o];const c=[];return cn(n.scales,function(u){a[u.axis]&&c.push(u)}),c}const d_=new WeakMap;function fi(t){let e=d_.get(t);return e||(e={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{}},d_.set(t,e)),e}function sG(t){d_.delete(t)}function hk(t,e,n){const i=t.max-t.min,s=i*(e-1),r=t.isHorizontal()?n.x:n.y,o=Math.max(0,Math.min(1,(t.getValueForPixel(r)-t.min)/i||0)),a=1-o;return{min:s*o,max:s*a}}function Hx(t,e,n,i,s){let r=n[i];if(r==="original"){const o=t.originalScaleLimits[e.id][i];r=Ft(o.options,o.scale)}return Ft(r,s)}function rG(t,e,n){const i=t.getValueForPixel(e),s=t.getValueForPixel(n);return{min:Math.min(i,s),max:Math.max(i,s)}}function Mu(t,{min:e,max:n},i,s=!1){const r=fi(t.chart),{id:o,axis:a,options:l}=t,c=i&&(i[o]||i[a])||{},{minRange:u=0}=c,f=Hx(r,t,c,"min",-1/0),h=Hx(r,t,c,"max",1/0),d=Math.max(e,f),p=Math.min(n,h),_=s?Math.max(p-d,u):t.max-t.min;if(p-d!==_)if(f>p-_)e=d,n=d+_;else if(h<d+_)n=p,e=p-_;else{const m=(_-p+d)/2;e=d-m,n=p+m}else e=d,n=p;return l.min=e,l.max=n,r.updatedScaleLimits[t.id]={min:e,max:n},t.parse(e)!==t.min||t.parse(n)!==t.max}function oG(t,e,n,i){const s=hk(t,e,n),r={min:t.min+s.min,max:t.max-s.max};return Mu(t,r,i,!0)}function aG(t,e,n,i){Mu(t,rG(t,e,n),i,!0)}const Vx=t=>t===0||isNaN(t)?0:t<0?Math.min(Math.round(t),-1):Math.max(Math.round(t),1);function lG(t){const n=t.getLabels().length-1;t.min>0&&(t.min-=1),t.max<n&&(t.max+=1)}function cG(t,e,n,i){const s=hk(t,e,n);t.min===t.max&&e<1&&lG(t);const r={min:t.min+Vx(s.min),max:t.max-Vx(s.max)};return Mu(t,r,i,!0)}function uG(t){return t.isHorizontal()?t.width:t.height}function fG(t,e,n){const s=t.getLabels().length-1;let{min:r,max:o}=t;const a=Math.max(o-r,1),l=Math.round(uG(t)/Math.max(a,10)),c=Math.round(Math.abs(e/l));let u;return e<-l?(o=Math.min(o+c,s),r=a===1?o:o-a,u=o===s):e>l&&(r=Math.max(0,r-c),o=a===1?r:r+a,u=r===0),Mu(t,{min:r,max:o},n)||u}const hG={second:500,minute:30*1e3,hour:30*60*1e3,day:12*60*60*1e3,week:3.5*24*60*60*1e3,month:15*24*60*60*1e3,quarter:60*24*60*60*1e3,year:182*24*60*60*1e3};function dk(t,e,n,i=!1){const{min:s,max:r,options:o}=t,a=o.time&&o.time.round,l=hG[a]||0,c=t.getValueForPixel(t.getPixelForValue(s+l)-e),u=t.getValueForPixel(t.getPixelForValue(r+l)-e),{min:f=-1/0,max:h=1/0}=i&&n&&n[t.axis]||{};return isNaN(c)||isNaN(u)||c<f||u>h?!0:Mu(t,{min:c,max:u},n,i)}function Gx(t,e,n){return dk(t,e,n,!0)}const p_={category:cG,default:oG},m_={default:aG},g_={category:fG,default:dk,logarithmic:Gx,timeseries:Gx};function dG(t,e,n){const{id:i,options:{min:s,max:r}}=t;if(!e[i]||!n[i])return!0;const o=n[i];return o.min!==s||o.max!==r}function Wx(t,e){cn(t,(n,i)=>{e[i]||delete t[i]})}function Uh(t,e){const{scales:n}=t,{originalScaleLimits:i,updatedScaleLimits:s}=e;return cn(n,function(r){dG(r,i,s)&&(i[r.id]={min:{scale:r.min,options:r.options.min},max:{scale:r.max,options:r.options.max}})}),Wx(i,n),Wx(s,n),i}function jx(t,e,n,i){const s=p_[t.type]||p_.default;Ut(s,[t,e,n,i])}function Yx(t,e,n,i,s){const r=m_[t.type]||m_.default;Ut(r,[t,e,n,i,s])}function pG(t){const e=t.chartArea;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function Db(t,e,n="none"){const{x:i=1,y:s=1,focalPoint:r=pG(t)}=typeof e=="number"?{x:e,y:e}:e,o=fi(t),{options:{limits:a,zoom:l}}=o;Uh(t,o);const c=i!==1,u=s!==1,f=fk(l,r,t);cn(f||t.scales,function(h){h.isHorizontal()&&c?jx(h,i,r,a):!h.isHorizontal()&&u&&jx(h,s,r,a)}),t.update(n),Ut(l.onZoom,[{chart:t}])}function pk(t,e,n,i="none"){const s=fi(t),{options:{limits:r,zoom:o}}=s,{mode:a="xy"}=o;Uh(t,s);const l=Ta(a,"x",t),c=Ta(a,"y",t);cn(t.scales,function(u){u.isHorizontal()&&l?Yx(u,e.x,n.x,r):!u.isHorizontal()&&c&&Yx(u,e.y,n.y,r)}),t.update(i),Ut(o.onZoom,[{chart:t}])}function mG(t,e,n,i="none"){Uh(t,fi(t));const s=t.scales[e];Mu(s,n,void 0,!0),t.update(i)}function gG(t,e="default"){const n=fi(t),i=Uh(t,n);cn(t.scales,function(s){const r=s.options;i[s.id]?(r.min=i[s.id].min.options,r.max=i[s.id].max.options):(delete r.min,delete r.max)}),t.update(e),Ut(n.options.zoom.onZoomComplete,[{chart:t}])}function _G(t,e){const n=t.originalScaleLimits[e];if(!n)return;const{min:i,max:s}=n;return Ft(s.options,s.scale)-Ft(i.options,i.scale)}function vG(t){const e=fi(t);let n=1,i=1;return cn(t.scales,function(s){const r=_G(e,s.id);if(r){const o=Math.round(r/(s.max-s.min)*100)/100;n=Math.min(n,o),i=Math.max(i,o)}}),n<1?n:i}function qx(t,e,n,i){const{panDelta:s}=i,r=s[t.id]||0;Xs(r)===Xs(e)&&(e+=r);const o=g_[t.type]||g_.default;Ut(o,[t,e,n])?s[t.id]=0:s[t.id]=e}function mk(t,e,n,i="none"){const{x:s=0,y:r=0}=typeof e=="number"?{x:e,y:e}:e,o=fi(t),{options:{pan:a,limits:l}}=o,{onPan:c}=a||{};Uh(t,o);const u=s!==0,f=r!==0;cn(n||t.scales,function(h){h.isHorizontal()&&u?qx(h,s,l,o):!h.isHorizontal()&&f&&qx(h,r,l,o)}),t.update(i),Ut(c,[{chart:t}])}function gk(t){const e=fi(t),n={};for(const i of Object.keys(t.scales)){const{min:s,max:r}=e.originalScaleLimits[i]||{min:{},max:{}};n[i]={min:s.scale,max:r.scale}}return n}function bG(t){const e=gk(t);for(const n of Object.keys(t.scales)){const{min:i,max:s}=e[n];if(i!==void 0&&t.scales[n].min!==i||s!==void 0&&t.scales[n].max!==s)return!0}return!1}function ls(t,e){const{handlers:n}=fi(t),i=n[e];i&&i.target&&(i.target.removeEventListener(e,i),delete n[e])}function Mf(t,e,n,i){const{handlers:s,options:r}=fi(t),o=s[n];o&&o.target===e||(ls(t,n),s[n]=a=>i(t,a,r),s[n].target=e,e.addEventListener(n,s[n]))}function yG(t,e){const n=fi(t);n.dragStart&&(n.dragging=!0,n.dragEnd=e,t.update("none"))}function wG(t,e){const n=fi(t);!n.dragStart||e.key!=="Escape"||(ls(t,"keydown"),n.dragging=!1,n.dragStart=n.dragEnd=null,t.update("none"))}function _k(t,e,n){const{onZoomStart:i,onZoomRejected:s}=n;if(i){const{left:r,top:o}=e.target.getBoundingClientRect(),a={x:e.clientX-r,y:e.clientY-o};if(Ut(i,[{chart:t,event:e,point:a}])===!1)return Ut(s,[{chart:t,event:e}]),!1}}function xG(t,e){const n=fi(t),{pan:i,zoom:s={}}=n.options;if(e.button!==0||uk(oh(i),e)||Rb(oh(s.drag),e))return Ut(s.onZoomRejected,[{chart:t,event:e}]);_k(t,e,s)!==!1&&(n.dragStart=e,Mf(t,t.canvas,"mousemove",yG),Mf(t,window.document,"keydown",wG))}function vk(t,e,n,i){const{left:s,top:r}=n.target.getBoundingClientRect(),o=Ta(e,"x",t),a=Ta(e,"y",t);let{top:l,left:c,right:u,bottom:f,width:h,height:d}=t.chartArea;o&&(c=Math.min(n.clientX,i.clientX)-s,u=Math.max(n.clientX,i.clientX)-s),a&&(l=Math.min(n.clientY,i.clientY)-r,f=Math.max(n.clientY,i.clientY)-r);const p=u-c,_=f-l;return{left:c,top:l,right:u,bottom:f,width:p,height:_,zoomX:o&&p?1+(h-p)/h:1,zoomY:a&&_?1+(d-_)/d:1}}function MG(t,e){const n=fi(t);if(!n.dragStart)return;ls(t,"mousemove");const{mode:i,onZoomComplete:s,drag:{threshold:r=0}}=n.options.zoom,o=vk(t,i,n.dragStart,e),a=Ta(i,"x",t)?o.width:0,l=Ta(i,"y",t)?o.height:0,c=Math.sqrt(a*a+l*l);if(n.dragStart=n.dragEnd=null,c<=r){n.dragging=!1,t.update("none");return}pk(t,{x:o.left,y:o.top},{x:o.right,y:o.bottom},"zoom"),setTimeout(()=>n.dragging=!1,500),Ut(s,[{chart:t}])}function SG(t,e,n){if(Rb(oh(n.wheel),e)){Ut(n.onZoomRejected,[{chart:t,event:e}]);return}if(_k(t,e,n)!==!1&&(e.cancelable&&e.preventDefault(),e.deltaY!==void 0))return!0}function EG(t,e){const{handlers:{onZoomComplete:n},options:{zoom:i}}=fi(t);if(!SG(t,e,i))return;const s=e.target.getBoundingClientRect(),r=1+(e.deltaY>=0?-i.wheel.speed:i.wheel.speed),o={x:r,y:r,focalPoint:{x:e.clientX-s.left,y:e.clientY-s.top}};Db(t,o),n&&n()}function TG(t,e,n,i){n&&(fi(t).handlers[e]=nG(()=>Ut(n,[{chart:t}]),i))}function AG(t,e){const n=t.canvas,{wheel:i,drag:s,onZoomComplete:r}=e.zoom;i.enabled?(Mf(t,n,"wheel",EG),TG(t,"onZoomComplete",r,250)):ls(t,"wheel"),s.enabled?(Mf(t,n,"mousedown",xG),Mf(t,n.ownerDocument,"mouseup",MG)):(ls(t,"mousedown"),ls(t,"mousemove"),ls(t,"mouseup"),ls(t,"keydown"))}function kG(t){ls(t,"mousedown"),ls(t,"mousemove"),ls(t,"mouseup"),ls(t,"wheel"),ls(t,"click"),ls(t,"keydown")}function CG(t,e){return function(n,i){const{pan:s,zoom:r={}}=e.options;if(!s||!s.enabled)return!1;const o=i&&i.srcEvent;return o&&!e.panning&&i.pointerType==="mouse"&&(Rb(oh(s),o)||uk(oh(r.drag),o))?(Ut(s.onPanRejected,[{chart:t,event:i}]),!1):!0}}function LG(t,e){const n=Math.abs(t.clientX-e.clientX),i=Math.abs(t.clientY-e.clientY),s=n/i;let r,o;return s>.3&&s<1.7?r=o=!0:n>i?r=!0:o=!0,{x:r,y:o}}function bk(t,e,n){if(e.scale){const{center:i,pointers:s}=n,r=1/e.scale*n.scale,o=n.target.getBoundingClientRect(),a=LG(s[0],s[1]),l=e.options.zoom.mode,c={x:a.x&&Ta(l,"x",t)?r:1,y:a.y&&Ta(l,"y",t)?r:1,focalPoint:{x:i.x-o.left,y:i.y-o.top}};Db(t,c),e.scale=n.scale}}function PG(t,e){e.options.zoom.pinch.enabled&&(e.scale=1)}function RG(t,e,n){e.scale&&(bk(t,e,n),e.scale=null,Ut(e.options.zoom.onZoomComplete,[{chart:t}]))}function yk(t,e,n){const i=e.delta;i&&(e.panning=!0,mk(t,{x:n.deltaX-i.x,y:n.deltaY-i.y},e.panScales),e.delta={x:n.deltaX,y:n.deltaY})}function DG(t,e,n){const{enabled:i,onPanStart:s,onPanRejected:r}=e.options.pan;if(!i)return;const o=n.target.getBoundingClientRect(),a={x:n.center.x-o.left,y:n.center.y-o.top};if(Ut(s,[{chart:t,event:n,point:a}])===!1)return Ut(r,[{chart:t,event:n}]);e.panScales=fk(e.options.pan,a,t),e.delta={x:0,y:0},clearTimeout(e.panEndTimeout),yk(t,e,n)}function OG(t,e){e.delta=null,e.panning&&(e.panEndTimeout=setTimeout(()=>e.panning=!1,500),Ut(e.options.pan.onPanComplete,[{chart:t}]))}const __=new WeakMap;function IG(t,e){const n=fi(t),i=t.canvas,{pan:s,zoom:r}=e,o=new xf.Manager(i);r&&r.pinch.enabled&&(o.add(new xf.Pinch),o.on("pinchstart",()=>PG(t,n)),o.on("pinch",a=>bk(t,n,a)),o.on("pinchend",a=>RG(t,n,a))),s&&s.enabled&&(o.add(new xf.Pan({threshold:s.threshold,enable:CG(t,n)})),o.on("panstart",a=>DG(t,n,a)),o.on("panmove",a=>yk(t,n,a)),o.on("panend",()=>OG(t,n))),__.set(t,o)}function NG(t){const e=__.get(t);e&&(e.remove("pinchstart"),e.remove("pinch"),e.remove("pinchend"),e.remove("panstart"),e.remove("pan"),e.remove("panend"),e.destroy(),__.delete(t))}var BG="2.0.0";function xd(t,e,n){const i=n.zoom.drag,{dragStart:s,dragEnd:r}=fi(t);if(i.drawTime!==e||!r)return;const{left:o,top:a,width:l,height:c}=vk(t,n.zoom.mode,s,r),u=t.ctx;u.save(),u.beginPath(),u.fillStyle=i.backgroundColor||"rgba(225,225,225,0.3)",u.fillRect(o,a,l,c),i.borderWidth>0&&(u.lineWidth=i.borderWidth,u.strokeStyle=i.borderColor||"rgba(225,225,225)",u.strokeRect(o,a,l,c)),u.restore()}var FG={id:"zoom",version:BG,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(t,e,n){const i=fi(t);i.options=n,Object.prototype.hasOwnProperty.call(n.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(n.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(n.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),xf&&IG(t,n),t.pan=(s,r,o)=>mk(t,s,r,o),t.zoom=(s,r)=>Db(t,s,r),t.zoomRect=(s,r,o)=>pk(t,s,r,o),t.zoomScale=(s,r,o)=>mG(t,s,r,o),t.resetZoom=s=>gG(t,s),t.getZoomLevel=()=>vG(t),t.getInitialScaleBounds=()=>gk(t),t.isZoomedOrPanned=()=>bG(t)},beforeEvent(t){const e=fi(t);if(e.panning||e.dragging)return!1},beforeUpdate:function(t,e,n){const i=fi(t);i.options=n,AG(t,n)},beforeDatasetsDraw(t,e,n){xd(t,"beforeDatasetsDraw",n)},afterDatasetsDraw(t,e,n){xd(t,"afterDatasetsDraw",n)},beforeDraw(t,e,n){xd(t,"beforeDraw",n)},afterDraw(t,e,n){xd(t,"afterDraw",n)},stop:function(t){kG(t),xf&&NG(t),sG(t)},panFunctions:g_,zoomFunctions:p_,zoomRectFunctions:m_};function zG(t){let e,n,i,s,r,o,a,l,c,u,f,h;return{c(){e=D("div"),n=D("div"),i=D("span"),s=ye(t[0]),r=z(),o=D("span"),a=ye(t[1]),l=z(),c=D("div"),u=D("div"),M(i,"class","text-left"),M(o,"class","ml-auto flex"),M(n,"class","flex justify-between"),M(u,"class",f="h-full progress "+(t[3]||"")+" rounded-full shadow-md transition-all duration-200"),$i(u,"width",t[4]+"%"),M(c,"class",h="meter w-full h-3 "+(t[2]||"")+" rounded-full transition-all duration-200"),M(e,"class","grid w-full gap-2")},m(d,p){I(d,e,p),E(e,n),E(n,i),E(i,s),E(n,r),E(n,o),E(o,a),E(e,l),E(e,c),E(c,u)},p(d,[p]){p&1&&nt(s,d[0]),p&2&&nt(a,d[1]),p&8&&f!==(f="h-full progress "+(d[3]||"")+" rounded-full shadow-md transition-all duration-200")&&M(u,"class",f),p&16&&$i(u,"width",d[4]+"%"),p&4&&h!==(h="meter w-full h-3 "+(d[2]||"")+" rounded-full transition-all duration-200")&&M(c,"class",h)},i:Ve,o:Ve,d(d){d&&O(e)}}}function UG(t,e,n){let{title:i="Title"}=e,{label:s="Label"}=e,{bgColor:r="bg-gray-600"}=e,{pColor:o="bg-blue-400"}=e,{value:a=0}=e,{total:l=0}=e,c=0;return t.$$set=u=>{"title"in u&&n(0,i=u.title),"label"in u&&n(1,s=u.label),"bgColor"in u&&n(2,r=u.bgColor),"pColor"in u&&n(3,o=u.pColor),"value"in u&&n(5,a=u.value),"total"in u&&n(6,l=u.total)},t.$$.update=()=>{t.$$.dirty&96&&n(4,c=l===0?0:a*100/l)},[i,s,r,o,c,a,l]}class oo extends dt{constructor(e){super(),ht(this,e,UG,zG,ft,{title:0,label:1,bgColor:2,pColor:3,value:5,total:6})}}function HG(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w,x,S,T,A,C,k,L,F,U,N,B,W,ee,K,ge,se,X,q;return o=new oo({props:{title:"Best",pColor:"bg-green-400",label:xt(t[2].best.value,!0,!0),value:t[2].best.value,total:t[2].worst.value}}),l=new oo({props:{title:"Worst",pColor:"bg-orange-400",label:xt(t[2].worst.value,!0,!0),value:t[2].worst.value,total:t[2].worst.value}}),u=new oo({props:{title:"Average",label:xt(t[2].avg.value,!0,!0),value:t[2].avg.value,total:t[2].worst.value}}),h=new oo({props:{title:"Standard Deviation",label:xt(t[2].dev.value,!0,!0),value:t[2].dev.value,total:t[2].worst.value}}),p=new oo({props:{title:"Total time",bgColor:"hidden",label:xt(t[2].time.value,!0,!0)}}),w=new oo({props:{title:"Count",label:t[2].count.value.toString(),value:t[2].count.value,total:t[2].count.value}}),S=new oo({props:{title:"Clean",pColor:"bg-green-400",label:`${t[2].NP.value}`,value:t[2].NP.value,total:t[2].count.value}}),A=new oo({props:{title:"+2",pColor:"bg-orange-400",label:t[2].P2.value.toString(),value:t[2].P2.value,total:t[2].count.value}}),k=new oo({props:{title:"DNF",pColor:"bg-red-400",label:t[2].DNF.value.toString(),value:t[2].DNF.value,total:t[2].count.value}}),{c(){e=D("main"),n=D("div"),i=D("canvas"),s=z(),r=D("div"),ce(o.$$.fragment),a=z(),ce(l.$$.fragment),c=z(),ce(u.$$.fragment),f=z(),ce(h.$$.fragment),d=z(),ce(p.$$.fragment),_=z(),m=D("div"),v=D("div"),g=D("canvas"),b=z(),y=D("div"),ce(w.$$.fragment),x=z(),ce(S.$$.fragment),T=z(),ce(A.$$.fragment),C=z(),ce(k.$$.fragment),L=z(),F=D("div"),U=D("canvas"),N=z(),B=D("div"),W=D("canvas"),ee=z(),K=D("div"),ge=D("canvas"),M(n,"class","canvas card grid place-items-center bg-white bg-opacity-10 rounded-md svelte-18s6ccv"),M(r,"class","stats card svelte-18s6ccv"),M(v,"class","w-full"),M(y,"class","w-full"),M(m,"class","penalties card svelte-18s6ccv"),M(F,"class","hour-distribution card svelte-18s6ccv"),M(B,"class","week-distribution card svelte-18s6ccv"),M(K,"class","histogram card svelte-18s6ccv"),M(e,"class","svelte-18s6ccv")},m(Y,$){I(Y,e,$),E(e,n),E(n,i),t[18](i),E(e,s),E(e,r),ae(o,r,null),E(r,a),ae(l,r,null),E(r,c),ae(u,r,null),E(r,f),ae(h,r,null),E(r,d),ae(p,r,null),E(e,_),E(e,m),E(m,v),E(v,g),t[19](g),E(m,b),E(m,y),ae(w,y,null),E(y,x),ae(S,y,null),E(y,T),ae(A,y,null),E(y,C),ae(k,y,null),E(e,L),E(e,F),E(F,U),t[20](U),E(e,N),E(e,B),E(B,W),t[21](W),E(e,ee),E(e,K),E(K,ge),t[22](ge),se=!0,X||(q=tt(window,"resize",t[17]),X=!0)},p(Y,[$]){const ze={};$&4&&(ze.label=xt(Y[2].best.value,!0,!0)),$&4&&(ze.value=Y[2].best.value),$&4&&(ze.total=Y[2].worst.value),o.$set(ze);const _e={};$&4&&(_e.label=xt(Y[2].worst.value,!0,!0)),$&4&&(_e.value=Y[2].worst.value),$&4&&(_e.total=Y[2].worst.value),l.$set(_e);const pe={};$&4&&(pe.label=xt(Y[2].avg.value,!0,!0)),$&4&&(pe.value=Y[2].avg.value),$&4&&(pe.total=Y[2].worst.value),u.$set(pe);const Te={};$&4&&(Te.label=xt(Y[2].dev.value,!0,!0)),$&4&&(Te.value=Y[2].dev.value),$&4&&(Te.total=Y[2].worst.value),h.$set(Te);const De={};$&4&&(De.label=xt(Y[2].time.value,!0,!0)),p.$set(De);const je={};$&4&&(je.label=Y[2].count.value.toString()),$&4&&(je.value=Y[2].count.value),$&4&&(je.total=Y[2].count.value),w.$set(je);const de={};$&4&&(de.label=`${Y[2].NP.value}`),$&4&&(de.value=Y[2].NP.value),$&4&&(de.total=Y[2].count.value),S.$set(de);const Ae={};$&4&&(Ae.label=Y[2].P2.value.toString()),$&4&&(Ae.value=Y[2].P2.value),$&4&&(Ae.total=Y[2].count.value),A.$set(Ae);const Oe={};$&4&&(Oe.label=Y[2].DNF.value.toString()),$&4&&(Oe.value=Y[2].DNF.value),$&4&&(Oe.total=Y[2].count.value),k.$set(Oe)},i(Y){se||(P(o.$$.fragment,Y),P(l.$$.fragment,Y),P(u.$$.fragment,Y),P(h.$$.fragment,Y),P(p.$$.fragment,Y),P(w.$$.fragment,Y),P(S.$$.fragment,Y),P(A.$$.fragment,Y),P(k.$$.fragment,Y),se=!0)},o(Y){H(o.$$.fragment,Y),H(l.$$.fragment,Y),H(u.$$.fragment,Y),H(h.$$.fragment,Y),H(p.$$.fragment,Y),H(w.$$.fragment,Y),H(S.$$.fragment,Y),H(A.$$.fragment,Y),H(k.$$.fragment,Y),se=!1},d(Y){Y&&O(e),t[18](null),le(o),le(l),le(u),le(h),le(p),t[19](null),le(w),le(S),le(A),le(k),t[20](null),t[21](null),t[22](null),X=!1,q()}}}function VG(t,e,n){let i,s,r,o,{context:a}=e,{solves:l,AoX:c,stats:u,session:f}=a;Lt(t,l,B=>n(15,s=B)),Lt(t,c,B=>n(16,r=B)),Lt(t,u,B=>n(2,i=B)),Lt(t,f,B=>n(25,o=B));let h,d,p,_,m,v,g,b,y,w;const x=["Sun","Mon","Tue","Wen","Thu","Fri","Sat"];function S(B,W){let ee=1/0,K=[],ge=B.length-1,se=X=>W?ge-X:X;for(let X=0,q=ge+1;X<q;X+=1)B[se(X)].penalty!==ct.DNF&&B[se(X)].time<ee&&(ee=B[se(X)].time,K.push({x:X,y:ee}));return K}function T(B){const W=v.width;let ee=Pz(B,W);const K=B.length-1,ge=ee.length-1,se=K/(ge||1);n(0,v.data.labels=ee.map((_e,pe)=>pe),v),n(0,v.data.datasets[0].data.length=0,v),ee.forEach((_e,pe)=>{v.data.datasets[0].data.push({x:pe*se,y:yr(ee[ge-pe])?null:ee[ge-pe].time})}),n(0,v.options.plugins.zoom.limits.x.max=ge+1,v),[5,12,50,r].forEach((_e,pe)=>{var je;let Te=v.data.datasets[pe+1];Te.data.length=0;let De=$f(_e,B,((je=o==null?void 0:o.settings)==null?void 0:je.calcAoX)||kr.SEQUENTIAL);Lz(De,W).map((de,Ae)=>Te.data.push({x:Ae*se,y:de})),Te.label="Ao"+_e}),n(0,v.data.datasets[5].data.length=0,v),S(B,!0).forEach(_e=>v.data.datasets[5].data.push(_e));const{m:q,n:Y}=Cz(ee.map((_e,pe)=>[ge-pe,_e.time]));n(0,v.data.datasets[6].data.length=0,v),[{x:0,y:Y},{x:ge*se,y:q*ge+Y}].forEach(_e=>v.data.datasets[6].data.push(_e)),v.update(),v.resetZoom();let $=B.reduce((_e,pe)=>(_e[rt(pe.date).hour()]+=1,_e),new Array(24).fill(0));n(8,b.data.datasets[0].data=$.map((_e,pe)=>({x:pe,y:_e})),b),b.update();let ze=B.reduce((_e,pe)=>(_e[rt(pe.date).isoWeekday()]+=1,_e),new Array(7).fill(0));n(9,y.data.datasets[0].data=ze,y),y.update()}function A(){n(1,g.data.datasets[0].data=[i.NP.value,i.P2.value,i.DNF.value],g),g.update();let B=i.best.value,W=i.worst.value+1e-5,ee=Em(s.length,1,10),K=X=>B+(W-B)*X/ee,ge=new Array(ee).fill(0).map((X,q)=>[K(q),K(q+1)]),se=s.reduce((X,q)=>(yr(q)||(X[Math.floor((q.time-B)*ee/(W-B))]+=1),X),new Array(ee).fill(0));w.data.datasets[0].data=se,w.data.labels=ge.map(X=>`${xt(X[0],!0)} - ${xt(X[1],!0)}`),w.update()}gs(()=>{const B={showLine:!0,fill:!1,tension:.1,xAxisID:"x",yAxisID:"y"},W={normalized:!0};let ee=h.getContext("2d");Jo.register(FG),Jo.defaults.color="#bbbbbb";const K={id:"shadingArea",beforeDatasetsDraw(Y){const{ctx:$,scales:{y:ze}}=Y,{data:_e,hidden:pe}=Y.getDatasetMeta(6);if(_e.length<2||pe)return;let Te=[_e[0].x,_e[0].y],De=[_e[1].x,_e[1].y],je=ze.height*i.dev.value/(ze.max-ze.min),de=IF(De[0]-Te[0],De[1]-Te[1],Math.PI/2),Ae=Math.sqrt(de[0]**2+de[1]**2);de=de.map(ue=>ue*je/Ae);let Oe=ld(Te[0],Te[0]+de[0],Te[1]+de[1],De[0]+de[0],De[1]+de[1]),Ye=ld(De[0],Te[0]+de[0],Te[1]+de[1],De[0]+de[0],De[1]+de[1]),fe=ld(De[0],Te[0]-de[0],Te[1]-de[1],De[0]-de[0],De[1]-de[1]),R=ld(Te[0],Te[0]-de[0],Te[1]-de[1],De[0]-de[0],De[1]-de[1]),V=[Te[0],Oe],ne=[De[0],Ye],he=[De[0],fe],ie=[Te[0],R];$.save(),$.beginPath(),$.fillStyle="rgba(255, 255, 255, .1)",$.moveTo(V[0],V[1]),$.lineTo(ne[0],ne[1]),$.lineTo(he[0],he[1]),$.lineTo(ie[0],ie[1]),$.lineTo(V[0],V[1]),$.fill(),$.restore()}};n(0,v=new Jo(ee,{data:{datasets:[{data:[],type:"line",label:"Time",...B,...W},{data:[],type:"line",hidden:!0,label:"Ao5",...B,...W},{data:[],type:"line",hidden:!0,label:"Ao12",...B,...W},{data:[],type:"line",hidden:!0,label:"Ao50",...B,...W},{data:[],type:"line",hidden:!0,label:"AoX",...B,...W},{data:[],type:"line",label:"Best",borderDash:[5,5],...B,...W},{data:[],type:"line",label:"Trend",borderDash:[5,5],...B}],labels:[]},options:{responsive:!0,maintainAspectRatio:!0,animation:!1,scales:{x:{type:"linear",ticks:{display:!1},grid:{display:!1}},y:{position:"left",grid:{color:"#555"},ticks:{callback:Y=>xt(Y,!1,!0)}}},layout:{padding:{left:10,right:10}},plugins:{tooltip:{mode:"nearest",intersect:!1,callbacks:{label:Y=>{let $=Y.dataset.label,ze=Y.parsed.y;return $+": "+xt(+ze,!1,!0)},title:Y=>`Solve #${Math.round(Y[0].parsed.x)+1}`}},zoom:{zoom:{wheel:{enabled:!0},mode:"x",scaleMode:"x"},pan:{enabled:!0,mode:"x"},limits:{x:{min:1,max:40}}},title:{text:"Time distribution",display:!0,font:{size:30,family:"Raleway"},color:"#ddd"}}},plugins:[K]}));let ge=d.getContext("2d");n(1,g=new Jo(ge,{type:"doughnut",data:{datasets:[{data:[3,4,5],backgroundColor:["rgb(74, 222, 128)","rgb(251, 146, 60)","rgb(248, 113, 113)"],borderColor:"transparent"}],labels:["Clean","+2","DNF"]},options:{plugins:{legend:{display:!1}}}}));let se=p.getContext("2d");n(8,b=new Jo(se,{data:{datasets:[{data:[],label:"Solves",type:"scatter",...B,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{text:"Hour distribution",display:!0,font:{size:30,family:"Raleway"},color:"#ddd"}},scales:{x:{min:0,max:23},y:{beginAtZero:!0}}}}));let X=_.getContext("2d");n(9,y=new Jo(X,{data:{datasets:[{data:[],label:"Solves",type:"line",...B,tension:.4}],labels:x},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{text:"Week distribution",display:!0,font:{size:30,family:"Raleway"},color:"#ddd"}},scales:{y:{beginAtZero:!0}}}}));let q=m.getContext("2d");w=new Jo(q,{data:{datasets:[{data:[1,2,3,4,5],label:"Solves",type:"bar"}],labels:["A","B","C","D","E"]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{text:"Histogram",display:!0,font:{size:30,family:"Raleway"},color:"#ddd"}},scales:{y:{beginAtZero:!0}}}}),T(s)});const C=()=>[v,g,b,y].forEach(B=>B.resize());function k(B){wt[B?"unshift":"push"](()=>{h=B,n(3,h)})}function L(B){wt[B?"unshift":"push"](()=>{d=B,n(4,d)})}function F(B){wt[B?"unshift":"push"](()=>{p=B,n(5,p)})}function U(B){wt[B?"unshift":"push"](()=>{_=B,n(6,_)})}function N(B){wt[B?"unshift":"push"](()=>{m=B,n(7,m)})}return t.$$set=B=>{"context"in B&&n(14,a=B.context)},t.$$.update=()=>{t.$$.dirty&98305&&r&&v&&T(s),t.$$.dirty&6&&i&&g&&A()},[v,g,i,h,d,p,_,m,b,y,l,c,u,f,a,s,r,C,k,L,F,U,N]}class GG extends dt{constructor(e){super(),ht(this,e,VG,HG,ft,{context:14})}}function WG(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M19.03 7.39L20.45 5.97C20 5.46 19.55 5 19.04 4.56L17.62 6C16.07 4.74 14.12 4 12 4C7.03 4 3 8.03 3 13S7.03 22 12 22C17 22 21 17.97 21 13C21 10.88 20.26 8.93 19.03 7.39M13 14H11V7H13V14M15 1H9V3H15V1Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function jG(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class YG extends dt{constructor(e){super(),ht(this,e,jG,WG,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function qG(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function XG(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class ZG extends dt{constructor(e){super(),ht(this,e,XG,qG,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function JG(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M3.5,18.5L9.5,12.5L13.5,16.5L22,6.92L20.59,5.5L13.5,13.5L9.5,9.5L2,17L3.5,18.5Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function KG(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class $G extends dt{constructor(e){super(),ht(this,e,KG,JG,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function QG(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function eW(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class tW extends dt{constructor(e){super(),ht(this,e,eW,QG,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function nW(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function iW(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class Ob extends dt{constructor(e){super(),ht(this,e,iW,nW,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function sW(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function rW(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class oW extends dt{constructor(e){super(),ht(this,e,rW,sW,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function Xx(t,e,n){const i=t.slice();return i[92]=e[n],i[93]=e,i[94]=n,i}function aW(t){let e,n,i,s,r,o,a,l,c,u;n=new Vi({props:{text:"Manage sessions",$$slots:{default:[cW]},$$scope:{ctx:t}}}),s=new ks({props:{placeholder:"Select session...",value:t[9],items:t[4],label:_W,transform:vW,onChange:t[55]}});let f=t[13]===0&&Zx(t),h=t[3].length>0&&t[13]===0&&Jx(t),d=t[13]===2&&Kx(t),p={class:"absolute w-full",onChange:t[60],$$slots:{default:[dW]},$$scope:{ctx:t}};return c=new QT({props:p}),t[61](c),{c(){e=D("div"),ce(n.$$.fragment),i=z(),ce(s.$$.fragment),r=z(),f&&f.c(),o=z(),h&&h.c(),a=z(),d&&d.c(),l=z(),ce(c.$$.fragment),M(e,"class","fixed w-max -translate-x-1/2 left-1/2 z-10 grid grid-flow-col gap-2 top-12 items-center justify-center text-gray-400")},m(_,m){I(_,e,m),ae(n,e,null),E(e,i),ae(s,e,null),E(e,r),f&&f.m(e,null),E(e,o),h&&h.m(e,null),E(e,a),d&&d.m(e,null),I(_,l,m),ae(c,_,m),u=!0},p(_,m){const v={};m[3]&4&&(v.$$scope={dirty:m,ctx:_}),n.$set(v);const g={};m[0]&512&&(g.value=_[9]),m[0]&16&&(g.items=_[4]),m[0]&512&&(g.onChange=_[55]),s.$set(g),_[13]===0?f?(f.p(_,m),m[0]&8192&&P(f,1)):(f=Zx(_),f.c(),P(f,1),f.m(e,o)):f&&(at(),H(f,1,1,()=>{f=null}),lt()),_[3].length>0&&_[13]===0?h?(h.p(_,m),m[0]&8200&&P(h,1)):(h=Jx(_),h.c(),P(h,1),h.m(e,a)):h&&(at(),H(h,1,1,()=>{h=null}),lt()),_[13]===2?d?(d.p(_,m),m[0]&8192&&P(d,1)):(d=Kx(_),d.c(),P(d,1),d.m(e,null)):d&&(at(),H(d,1,1,()=>{d=null}),lt());const b={};m[0]&8192&&(b.onChange=_[60]),m[3]&4&&(b.$$scope={dirty:m,ctx:_}),c.$set(b)},i(_){u||(P(n.$$.fragment,_),P(s.$$.fragment,_),P(f),P(h),P(d),P(c.$$.fragment,_),u=!0)},o(_){H(n.$$.fragment,_),H(s.$$.fragment,_),H(f),H(h),H(d),H(c.$$.fragment,_),u=!1},d(_){_&&O(e),le(n),le(s),f&&f.d(),h&&h.d(),d&&d.d(),_&&O(l),t[61](null),le(c,_)}}}function lW(t){let e,n;return e=new sA({props:{context:t[48],battle:t[0],enableKeyboard:t[1]}}),e.$on("solve",t[53]),e.$on("update",t[54]),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s[0]&1&&(r.battle=i[0]),s[0]&2&&(r.enableKeyboard=i[1]),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function cW(t){let e,n,i,s,r;return n=new tW({props:{width:"1.2rem",height:"1.2rem"}}),{c(){e=D("span"),ce(n.$$.fragment),M(e,"class","cursor-pointer")},m(o,a){I(o,e,a),ae(n,e,null),i=!0,s||(r=tt(e,"click",t[35]),s=!0)},p:Ve,i(o){i||(P(n.$$.fragment,o),i=!0)},o(o){H(n.$$.fragment,o),i=!1},d(o){o&&O(e),le(n),s=!1,r()}}}function Zx(t){let e,n,i,s;return e=new ks({props:{placeholder:"Select group",value:t[15][t[11]],items:t[15],transform:bW,onChange:t[56]}}),i=new ks({props:{placeholder:["Select mode"],value:t[10],items:t[2],label:yW,transform:wW,onChange:t[57]}}),{c(){ce(e.$$.fragment),n=z(),ce(i.$$.fragment)},m(r,o){ae(e,r,o),I(r,n,o),ae(i,r,o),s=!0},p(r,o){const a={};o[0]&2048&&(a.value=r[15][r[11]]),o[0]&2048&&(a.onChange=r[56]),e.$set(a);const l={};o[0]&1024&&(l.value=r[10]),o[0]&4&&(l.items=r[2]),o[0]&1024&&(l.onChange=r[57]),i.$set(l)},i(r){s||(P(e.$$.fragment,r),P(i.$$.fragment,r),s=!0)},o(r){H(e.$$.fragment,r),H(i.$$.fragment,r),s=!1},d(r){le(e,r),r&&O(n),le(i,r)}}}function Jx(t){let e,n;return e=new ks({props:{placeholder:"Select filter",value:t[12],items:t[3],label:xW,transform:MW,onChange:t[58]}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s[0]&4096&&(r.value=i[12]),s[0]&8&&(r.items=i[3]),s[0]&4096&&(r.onChange=i[58]),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Kx(t){let e,n,i;function s(o){t[59](o)}let r={min:3,max:1e3,class:"hidden-markers bg-gray-700 rounded-md",type:"number"};return t[14]!==void 0&&(r.value=t[14]),e=new oi({props:r}),wt.push(()=>Nt(e,"value",s)),e.$on("keyup",SW),{c(){ce(e.$$.fragment)},m(o,a){ae(e,o,a),i=!0},p(o,a){const l={};!n&&a[0]&16384&&(n=!0,l.value=o[14],It(()=>n=!1)),e.$set(l)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){H(e.$$.fragment,o),i=!1},d(o){le(e,o)}}}function uW(t){let e,n;return e=new sA({props:{context:t[48]}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p:Ve,i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function fW(t){let e,n;return e=new Qz({props:{context:t[48]}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p:Ve,i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function hW(t){let e,n;return e=new GG({props:{context:t[48]}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p:Ve,i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function dW(t){let e,n,i,s,r,o;return e=new il({props:{name:"",icon:YG,$$slots:{default:[uW]},$$scope:{ctx:t}}}),i=new il({props:{name:"",icon:ZG,$$slots:{default:[fW]},$$scope:{ctx:t}}}),r=new il({props:{name:"",icon:$G,$$slots:{default:[hW]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment),n=z(),ce(i.$$.fragment),s=z(),ce(r.$$.fragment)},m(a,l){ae(e,a,l),I(a,n,l),ae(i,a,l),I(a,s,l),ae(r,a,l),o=!0},p(a,l){const c={};l[3]&4&&(c.$$scope={dirty:l,ctx:a}),e.$set(c);const u={};l[3]&4&&(u.$$scope={dirty:l,ctx:a}),i.$set(u);const f={};l[3]&4&&(f.$$scope={dirty:l,ctx:a}),r.$set(f)},i(a){o||(P(e.$$.fragment,a),P(i.$$.fragment,a),P(r.$$.fragment,a),o=!0)},o(a){H(e.$$.fragment,a),H(i.$$.fragment,a),H(r.$$.fragment,a),o=!1},d(a){le(e,a),a&&O(n),le(i,a),a&&O(s),le(r,a)}}}function pW(t){let e,n,i;return e=new Bv({}),{c(){ce(e.$$.fragment),n=ye(" Add new Session")},m(s,r){ae(e,s,r),I(s,n,r),i=!0},i(s){i||(P(e.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),i=!1},d(s){le(e,s),s&&O(n)}}}function $x(t){let e,n,i,s,r,o,a,l,c,u,f,h,d;function p(m){t[62](m)}let _={focus:!0,class:"bg-gray-600 text-gray-200 flex-1"};return t[8]!==void 0&&(_.value=t[8]),n=new oi({props:_}),wt.push(()=>Nt(n,"value",p)),n.$on("keyup",t[63]),a=new Ob({props:{width:"100%",height:"100%"}}),u=new Oa({props:{width:"100%",height:"100%"}}),{c(){e=D("div"),ce(n.$$.fragment),s=z(),r=D("div"),o=D("span"),ce(a.$$.fragment),l=z(),c=D("span"),ce(u.$$.fragment),M(o,"class","text-gray-400 w-8 h-8 cursor-pointer"),M(c,"class","text-gray-400 w-8 h-8 cursor-pointer"),M(r,"class","flex mx-2 flex-grow-0 w-10 items-center justify-center"),M(e,"class","flex")},m(m,v){I(m,e,v),ae(n,e,null),E(e,s),E(e,r),E(r,o),ae(a,o,null),E(r,l),E(r,c),ae(u,c,null),f=!0,h||(d=[tt(o,"click",t[45]),tt(c,"click",t[37])],h=!0)},p(m,v){const g={};!i&&v[0]&256&&(i=!0,g.value=m[8],It(()=>i=!1)),n.$set(g)},i(m){f||(P(n.$$.fragment,m),P(a.$$.fragment,m),P(u.$$.fragment,m),f=!0)},o(m){H(n.$$.fragment,m),H(a.$$.fragment,m),H(u.$$.fragment,m),f=!1},d(m){m&&O(e),le(n),le(a),le(u),h=!1,Jn(d)}}}function Qx(t){let e,n,i,s,r,o,a,l;n=new oW({props:{width:"100%",height:"100%"}});function c(){return t[66](t[92],t[93],t[94])}r=new Eg({props:{width:"100%",height:"100%"}});function u(){return t[67](t[92])}return{c(){e=D("span"),ce(n.$$.fragment),i=z(),s=D("span"),ce(r.$$.fragment),M(e,"class","text-gray-400 w-8 h-8 cursor-pointer"),M(s,"class","text-gray-400 w-8 h-8 cursor-pointer")},m(f,h){I(f,e,h),ae(n,e,null),I(f,i,h),I(f,s,h),ae(r,s,null),o=!0,a||(l=[tt(e,"click",c),tt(s,"click",u)],a=!0)},p(f,h){t=f},i(f){o||(P(n.$$.fragment,f),P(r.$$.fragment,f),o=!0)},o(f){H(n.$$.fragment,f),H(r.$$.fragment,f),o=!1},d(f){f&&O(e),le(n),f&&O(i),f&&O(s),le(r),a=!1,Jn(l)}}}function eM(t){let e,n,i,s,r,o,a,l;n=new Ob({props:{width:"100%",height:"100%"}});function c(){return t[68](t[92])}r=new Oa({props:{width:"100%",height:"100%"}});function u(){return t[69](t[92],t[93],t[94])}return{c(){e=D("span"),ce(n.$$.fragment),i=z(),s=D("span"),ce(r.$$.fragment),M(e,"class","text-gray-400 w-8 h-8 cursor-pointer"),M(s,"class","text-gray-400 w-8 h-8 cursor-pointer")},m(f,h){I(f,e,h),ae(n,e,null),I(f,i,h),I(f,s,h),ae(r,s,null),o=!0,a||(l=[tt(e,"click",c),tt(s,"click",u)],a=!0)},p(f,h){t=f},i(f){o||(P(n.$$.fragment,f),P(r.$$.fragment,f),o=!0)},o(f){H(n.$$.fragment,f),H(r.$$.fragment,f),o=!1},d(f){f&&O(e),le(n),f&&O(i),f&&O(s),le(r),a=!1,Jn(l)}}}function tM(t){let e,n,i,s,r,o,a,l;function c(p){t[64](p,t[92])}function u(...p){return t[65](t[92],t[93],t[94],...p)}let f={disabled:!t[92].editing,class:"bg-transparent text-gray-400 flex-1 "+(t[92].editing?"":"border-transparent"),focus:t[92].editing};t[92].tName!==void 0&&(f.value=t[92].tName),n=new oi({props:f}),wt.push(()=>Nt(n,"value",c)),n.$on("keyup",u);let h=!t[92].editing&&!t[7]&&Qx(t),d=t[92].editing&&!t[7]&&eM(t);return{c(){e=D("div"),ce(n.$$.fragment),s=z(),r=D("div"),h&&h.c(),o=z(),d&&d.c(),a=z(),M(r,"class","flex mx-2 flex-grow-0 w-10 items-center justify-center"),M(e,"class","flex")},m(p,_){I(p,e,_),ae(n,e,null),E(e,s),E(e,r),h&&h.m(r,null),E(r,o),d&&d.m(r,null),E(e,a),l=!0},p(p,_){t=p;const m={};_[0]&16&&(m.disabled=!t[92].editing),_[0]&16&&(m.class="bg-transparent text-gray-400 flex-1 "+(t[92].editing?"":"border-transparent")),_[0]&16&&(m.focus=t[92].editing),!i&&_[0]&16&&(i=!0,m.value=t[92].tName,It(()=>i=!1)),n.$set(m),!t[92].editing&&!t[7]?h?(h.p(t,_),_[0]&144&&P(h,1)):(h=Qx(t),h.c(),P(h,1),h.m(r,o)):h&&(at(),H(h,1,1,()=>{h=null}),lt()),t[92].editing&&!t[7]?d?(d.p(t,_),_[0]&144&&P(d,1)):(d=eM(t),d.c(),P(d,1),d.m(r,null)):d&&(at(),H(d,1,1,()=>{d=null}),lt())},i(p){l||(P(n.$$.fragment,p),P(h),P(d),l=!0)},o(p){H(n.$$.fragment,p),H(h),H(d),l=!1},d(p){p&&O(e),le(n),h&&h.d(),d&&d.d()}}}function mW(t){let e,n,i,s,r;e=new At({props:{$$slots:{default:[pW]},$$scope:{ctx:t}}}),e.$on("click",t[36]);let o=t[7]&&$x(t),a=t[4],l=[];for(let u=0;u<a.length;u+=1)l[u]=tM(Xx(t,a,u));const c=u=>H(l[u],1,1,()=>{l[u]=null});return{c(){ce(e.$$.fragment),n=z(),i=D("div"),o&&o.c(),s=z();for(let u=0;u<l.length;u+=1)l[u].c();M(i,"class","grid")},m(u,f){ae(e,u,f),I(u,n,f),I(u,i,f),o&&o.m(i,null),E(i,s);for(let h=0;h<l.length;h+=1)l[h].m(i,null);r=!0},p(u,f){const h={};if(f[3]&4&&(h.$$scope={dirty:f,ctx:u}),e.$set(h),u[7]?o?(o.p(u,f),f[0]&128&&P(o,1)):(o=$x(u),o.c(),P(o,1),o.m(i,s)):o&&(at(),H(o,1,1,()=>{o=null}),lt()),f[0]&144|f[1]&98304){a=u[4];let d;for(d=0;d<a.length;d+=1){const p=Xx(u,a,d);l[d]?(l[d].p(p,f),P(l[d],1)):(l[d]=tM(p),l[d].c(),P(l[d],1),l[d].m(i,null))}for(at(),d=a.length;d<l.length;d+=1)c(d);lt()}},i(u){if(!r){P(e.$$.fragment,u),P(o);for(let f=0;f<a.length;f+=1)P(l[f]);r=!0}},o(u){H(e.$$.fragment,u),H(o),l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)H(l[f]);r=!1},d(u){le(e,u),u&&O(n),u&&O(i),o&&o.d(),en(l,u)}}}function gW(t){let e,n,i,s,r,o,a,l;const c=[lW,aW],u=[];function f(h,d){return h[0]?0:1}return n=f(t),i=u[n]=c[n](t),r=new Ma({props:{show:t[6],onClose:t[38],$$slots:{default:[mW]},$$scope:{ctx:t}}}),{c(){e=D("main"),i.c(),s=z(),ce(r.$$.fragment),M(e,"class","w-full h-full")},m(h,d){I(h,e,d),u[n].m(e,null),E(e,s),ae(r,e,null),o=!0,a||(l=tt(window,"keyup",t[39]),a=!0)},p(h,d){let p=n;n=f(h),n===p?u[n].p(h,d):(at(),H(u[p],1,1,()=>{u[p]=null}),lt(),i=u[n],i?i.p(h,d):(i=u[n]=c[n](h),i.c()),P(i,1),i.m(e,s));const _={};d[0]&64&&(_.show=h[6]),d[0]&400|d[3]&4&&(_.$$scope={dirty:d,ctx:h}),r.$set(_)},i(h){o||(P(i),P(r.$$.fragment,h),o=!0)},o(h){H(i),H(r.$$.fragment,h),o=!1},d(h){h&&O(e),u[n].d(),le(r),a=!1,l()}}}const _W=t=>(t||{}).name,vW=t=>t,bW=t=>t,yW=t=>t[0],wW=t=>t,xW=t=>t.toUpperCase(),MW=(t,e)=>e,SW=t=>t.detail.stopPropagation();function EW(t,e,n){let i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,{battle:w=!1}=e,{useScramble:x=""}=e,{useMode:S=""}=e,{genScramble:T=!0}=e,{enableKeyboard:A=!0}=e;const C={best:{value:0,better:!1},worst:{value:0,better:!1},count:{value:0,better:!1},time:{value:0,better:!1},avg:{value:0,better:!1},dev:{value:0,better:!1},Mo3:{value:-1,better:!1},Ao5:{value:-1,better:!1},Ao12:{value:-1,better:!1},Ao50:{value:-1,better:!1},Ao100:{value:-1,better:!1},Ao200:{value:-1,better:!1},Ao500:{value:-1,better:!1},Ao1k:{value:-1,better:!1},Ao2k:{value:-1,better:!1},NP:{value:0,better:!1},P2:{value:0,better:!1},DNS:{value:0,better:!1},DNF:{value:0,better:!1},counter:{value:0,better:!1}},k=Ys.getInstance(),L=la.map((xe,it)=>xe[0]);let F=[],U=[],N=[],B=[],W,ee=Da(),K=!1,ge=!1,se="",X=bn($t.CLEAN);Lt(t,X,xe=>n(52,p=xe));let q=bn(!1),Y=bn(0);Lt(t,Y,xe=>n(13,b=xe));let $=bn([]);Lt(t,$,xe=>n(78,_=xe));let ze=bn([]);Lt(t,ze,xe=>n(71,s=xe));let _e=bn();Lt(t,_e,xe=>n(9,i=xe));let pe=bn();Lt(t,pe,xe=>n(79,m=xe));let Te=bn(100);Lt(t,Te,xe=>n(14,y=xe));let De=bn(C);Lt(t,De,xe=>n(80,v=xe));let je=bn();Lt(t,je,xe=>n(74,u=xe));let de=bn();Lt(t,de,xe=>n(11,o=xe));let Ae=bn();Lt(t,Ae,xe=>n(10,r=xe));let Oe=bn();Lt(t,Oe,xe=>n(72,l=xe));let Ye=bn();Lt(t,Ye,xe=>n(73,c=xe));let fe=bn();Lt(t,fe,xe=>n(76,h=xe));let R=bn();Lt(t,R,xe=>n(75,f=xe));let V=bn(pb);Lt(t,V,xe=>n(77,d=xe));let ne=bn();Lt(t,ne,xe=>n(12,a=xe));let he=bn(!1);Lt(t,he,xe=>n(81,g=xe));function ie(xe){gt(de,o=xe.group||0,o);let it=la[o];n(2,F=it[1]);let Je=F.filter(Tt=>Tt[1]===xe.mode);gt(Ae,r=Je.length?Je[0]:F[0],r),gt(ne,a=xe.prob||-1,a),Gt()}function ue(xe){var Nl;let it=[3,5,12,50,100,200,500,1e3,2e3],Je=[0,0,0,0,0,0,0,0,0],Tt=[],hn=_.length,hi=0,Tn=0,Mi=0,di=new Map,qi=_.reduce((pi,Dn)=>(di.set(Dn.penalty,(di.get(Dn.penalty)||0)+1),yr(Dn)?hn-=1:hi+=Dn.time,yr(Dn)?pi:[Math.min(pi[0],Dn.time),Math.max(pi[1],Dn.time)]),[1/0,0]);Tn=hn>0?hi/hn:0,Mi=hn>0?Math.sqrt(_.reduce((pi,Dn)=>yr(Dn)?pi:pi+(Dn.time-Tn)**2/hn,0)):0;for(let pi=0,Dn=it.length;pi<Dn;pi+=1){let ir=$f(it[pi],_,(Nl=i==null?void 0:i.settings)==null?void 0:Nl.calcAoX);Tt[pi]=ir.reduce((ss,Rr)=>Rr?Math.min(ss,Rr):ss,Tt[pi]);let vs=ir.pop();Je[pi]=vs||-1}let Uo=Object.assign({},v);gt(De,v={best:{value:qi[0],better:Uo.best.value>qi[0]},worst:{value:qi[1],better:!1},avg:{value:Tn,better:!1},dev:{value:Mi,better:!1},count:{value:_.length,better:!1},time:{value:hi,better:!1},Mo3:{value:Je[0],better:Je[0]<=Tt[0]},Ao5:{value:Je[1],better:Je[1]<=Tt[1]},Ao12:{value:Je[2],better:Je[2]<=Tt[2]},Ao50:{value:Je[3],better:Je[3]<=Tt[3]},Ao100:{value:Je[4],better:Je[4]<=Tt[4]},Ao200:{value:Je[5],better:Je[5]<=Tt[5]},Ao500:{value:Je[6],better:Je[6]<=Tt[6]},Ao1k:{value:Je[7],better:Je[7]<=Tt[7]},Ao2k:{value:Je[8],better:Je[8]<=Tt[8]},NP:{value:di.get(ct.NONE)||0,better:!1},P2:{value:di.get(ct.P2)||0,better:!1},DNS:{value:di.get(ct.DNS)||0,better:!1},DNF:{value:di.get(ct.DNF)||0,better:!1},counter:{value:xe?Uo.counter.value+1:Uo.counter.value,better:!1}},v),v.best.better&&Uo.best.value!=1/0}function Re(){gt($,_=s.filter(it=>it.session===(i||{})._id),_);let xe=[];for(let it=0,Je=0,Tt=_.length;it<Tt&&Je<4;it+=1)_[it].penalty!=ct.DNF&&(xe.push(_[it].time),Je+=1);if(xe.length===4){xe.sort();let it=xe.reduce((Je,Tt)=>Je+Tt,0);gt(pe,m=[(it-xe[3])/3,(it-xe[0])/3].sort((Je,Tt)=>Je-Tt),m)}else gt(pe,m=[],m)}function Ue(){gt(ze,s=s.sort((xe,it)=>it.date-xe.date),s),Re()}function Ee(){Ue(),ue(!0),_.length>0&&ie(_[0])}function Se(){n(6,K=!0)}function re(){n(7,ge=!0),n(8,se="")}function we(){n(7,ge=!1)}function Me(){N.indexOf(i)<0&&gt(_e,i=N[0],i),we(),n(6,K=!1)}function Ne(xe){!A||!w&&(p===$t.CLEAN||p===$t.STOPPED)&&(xe.key==="ArrowRight"?W.nextTab():xe.key==="ArrowLeft"&&W.prevTab())}function Ze(xe){if(!A)return;const it=xe.detail;it.key==="Enter"?Jt():it.key==="Escape"&&we(),it.stopPropagation()}function pt(xe){let it=wr.fromSequence(u,{...Kc.get(xe),rounded:!0,headless:!0});Dl([it],500).then(Je=>{let Tt=Je.subscribe(hn=>{hn!=="__initial__"&&(hn===null?Tt():gt(V,d=hn,d))})})}function sn(xe,it){var hi;gt(Oe,l=!1,l),r||gt(Ae,r=la[o||0][1][0],r);let Je=S||it||r[1],Tt=x||xe;T?gt(je,u=Tt||zf.get(Je).apply(null,[Je,Math.abs(r[2]),a<0?void 0:a]).replace(/\\n/g,"<br>").trim(),u):gt(je,u=xe||x,u),yB(Je)&&gt(je,u=Gs.parseNNNString(u),u),["333","333fm","333oh","333o","easyc","333ft"].indexOf(Je)>-1?(gt(fe,h=CI(u).map(Tn=>Tn.map(Mi=>Mi.trim()).join(" "))[0],h),gt(R,f=LI(u,0).map(Tn=>Tn.trim()).join(" "),f),gt(Oe,l=!0,l)):(gt(Ye,c=!1,c),gt(Oe,l=!1,l)),Kc.has(Je)&&((hi=i==null?void 0:i.settings)==null?void 0:hi.genImage)&&pt(Je)}function Gt(){sn()}function Wt(){n(3,U=x1.get(r[1])||[]),gt(ne,a=-1,a),Gt()}function gn(){n(2,F=la[o][1]),gt(Ae,r=F[0],r),Wt()}function jt(){localStorage.setItem("session",i._id),Ee()}function Jt(){let xe=se.trim();xe!=""&&(k.addSession({_id:"",name:xe,settings:{hasInspection:!0,showElapsedTime:!0,inspection:15,calcAoX:kr.SEQUENTIAL,genImage:!0,scrambleAfterCancel:!1}}),we())}function Yt(xe){confirm("Do you really want to remove this session? You will loose all the solves in the session.")&&k.removeSession(xe)}function Kt(xe){var it,Je;xe.editing=!1,((it=xe.tName)==null?void 0:it.trim())!==""&&k.updateSession({_id:xe._id,name:((Je=xe.tName)==null?void 0:Je.trim())||"Session -",settings:xe.settings})}gs(()=>{w?gt(_e,i={_id:"",name:"Battle",settings:{calcAoX:kr.SEQUENTIAL,genImage:!0,hasInspection:!0,inspection:15,scrambleAfterCancel:!1,showElapsedTime:!0,input:"Keyboard"},editing:!1,tName:""},i):(B=[k.solveSub.subscribe(xe=>{if(!(!xe||!xe.data))switch(xe.type){case"get-solves":{gt(ze,s=xe.data,s),Ee();break}case"add-solve":{let it=xe.data[0],Je=s.find(Tt=>Tt.date===it.date);Je&&(Je._id=it._id,Re());break}case"remove-solves":{let it=xe.data;for(let Je=s.length-1;Je>=0;Je-=1)it.indexOf(s[Je]._id)>-1&&s.splice(Je,1);Ee();break}case"update-solve":{let it=xe.data;if(it){for(let Je=0,Tt=s.length;Je<Tt;Je+=1)if(s[Je]._id===it._id){gt(ze,s[Je].comments=it.comments,s),gt(ze,s[Je].penalty=it.penalty,s);break}Ee()}break}}}),k.sessSub.subscribe(xe=>{if(!(!xe||!xe.data))switch(xe.type){case"get-sessions":{if(n(4,N=xe.data.map(Tt=>(Tt.tName=Tt.name,Tt))),N.length===0){n(8,se="Session 1"),Jt();return}let it=localStorage.getItem("session"),Je=N.find(Tt=>Tt._id===it);gt(_e,i=Je||N[0],i),jt();break}case"rename-session":case"update-session":{let it=xe.data,Je=N.find(Tt=>Tt._id===it._id);Je&&(Je.name=it.name,Je.settings=it.settings),n(4,N);break}case"add-session":{let it=xe.data;it.tName=it.name,n(4,N=[...N,it]),gt(_e,i=it,i),jt();break}case"remove-session":{let it=xe.data;if(n(4,N=N.filter(Je=>Je._id!=it._id)),N.length===0){n(8,se="Session 1"),Jt();return}it._id===i._id&&gt(_e,i=N[0],i);break}}})],k.getSessions(),k.getSolves())}),er(()=>{B.forEach(xe=>xe())});let kn={state:X,ready:q,tab:Y,solves:$,allSolves:ze,session:_e,Ao5:pe,AoX:Te,stats:De,scramble:je,group:de,mode:Ae,hintDialog:Oe,hint:Ye,cross:fe,xcross:R,preview:V,prob:ne,isRunning:he,sortSolves:Ue,updateStatistics:ue,initScrambler:sn,selectedGroup:gn,setConfigFromSolve:ie};const xn=xe=>ee("solve",xe.detail),Qe=xe=>ee("solve",xe.detail),qt=xe=>{gt(_e,i=xe,i),jt()},Nn=(xe,it)=>{gt(de,o=it||0,o),gn()},Os=xe=>{gt(Ae,r=xe,r),Wt()},Q=(xe,it)=>{gt(ne,a=it||0,a),Gt()};function Be(xe){y=xe,Te.set(y)}const Le=xe=>gt(Y,b=xe||0,b);function qe(xe){wt[xe?"unshift":"push"](()=>{W=xe,n(5,W)})}function st(xe){se=xe,n(8,se)}const Ht=xe=>Ze(xe);function Bt(xe,it){t.$$.not_equal(it.tName,xe)&&(it.tName=xe,n(4,N))}const Vt=(xe,it,Je,Tt)=>{switch(Tt.detail.code){case"Enter":{n(4,it[Je].editing=!1,N),Kt(xe);break}case"Escape":{Tt.detail.stopPropagation(),n(4,it[Je].editing=!1,N);break}}},Rt=(xe,it,Je)=>{N.forEach(Tt=>Tt.editing=!1),n(4,it[Je].editing=!0,N)},Bn=xe=>Yt(xe),Ln=xe=>Kt(xe),Ot=(xe,it,Je)=>n(4,it[Je].editing=!1,N);return t.$$set=xe=>{"battle"in xe&&n(0,w=xe.battle),"useScramble"in xe&&n(49,x=xe.useScramble),"useMode"in xe&&n(50,S=xe.useMode),"genScramble"in xe&&n(51,T=xe.genScramble),"enableKeyboard"in xe&&n(1,A=xe.enableKeyboard)},t.$$.update=()=>{t.$$.dirty[1]&2097152&&gt(he,g=p===$t.INSPECTION||p===$t.RUNNING,g),t.$$.dirty[1]&786432&&(x||S?sn(x,S):sn())},[w,A,F,U,N,W,K,ge,se,i,r,o,a,b,y,L,ee,X,Y,$,ze,_e,pe,Te,De,je,de,Ae,Oe,Ye,fe,R,V,ne,he,Se,re,we,Me,Ne,Ze,Gt,Wt,gn,jt,Jt,Yt,Kt,kn,x,S,T,p,xn,Qe,qt,Nn,Os,Q,Be,Le,qe,st,Ht,Bt,Vt,Rt,Bn,Ln,Ot]}class wk extends dt{constructor(e){super(),ht(this,e,EW,gW,ft,{battle:0,useScramble:49,useMode:50,genScramble:51,enableKeyboard:1},null,[-1,-1,-1,-1])}}function nM(t,e,n){const i=t.slice();return i[27]=e[n],i}function iM(t,e,n){const i=t.slice();return i[30]=e[n],i}function sM(t,e,n){const i=t.slice();return i[33]=e[n],i}function rM(t){let e,n,i,s,r,o,a,l,c,u,f,h,d;function p(g){t[19](g)}let _={items:t[11],label:LW};t[0]!==void 0&&(_.value=t[0]),s=new ks({props:_}),wt.push(()=>Nt(s,"value",p));function m(g){t[20](g)}let v={items:t[13],transform:PW};return t[1]!==void 0&&(v.value=t[1]),c=new ks({props:v}),wt.push(()=>Nt(c,"value",m)),h=new At({props:{class:"bg-green-700 hover:bg-green-600 text-gray-300 mx-auto my-4",$$slots:{default:[TW]},$$scope:{ctx:t}}}),h.$on("click",t[15]),{c(){e=D("div"),n=D("span"),n.textContent="Top Face",i=z(),ce(s.$$.fragment),o=z(),a=D("span"),a.textContent="Cases",l=z(),ce(c.$$.fragment),f=z(),ce(h.$$.fragment),M(e,"class","grid grid-cols-2 w-max items-center mx-auto gap-4 svelte-160bab9")},m(g,b){I(g,e,b),E(e,n),E(e,i),ae(s,e,null),E(e,o),E(e,a),E(e,l),ae(c,e,null),I(g,f,b),ae(h,g,b),d=!0},p(g,b){const y={};!r&&b[0]&1&&(r=!0,y.value=g[0],It(()=>r=!1)),s.$set(y);const w={};!u&&b[0]&2&&(u=!0,w.value=g[1],It(()=>u=!1)),c.$set(w);const x={};b[1]&32&&(x.$$scope={dirty:b,ctx:g}),h.$set(x)},i(g){d||(P(s.$$.fragment,g),P(c.$$.fragment,g),P(h.$$.fragment,g),d=!0)},o(g){H(s.$$.fragment,g),H(c.$$.fragment,g),H(h.$$.fragment,g),d=!1},d(g){g&&O(e),le(s),le(c),g&&O(f),le(h,g)}}}function TW(t){let e;return{c(){e=ye("Next")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function oM(t){let e,n,i=t[4]+1+"",s,r,o,a,l,c,u,f,h=t[14],d=[];for(let p=0;p<h.length;p+=1)d[p]=aM(sM(t,h,p));return{c(){e=D("h3"),n=ye("Case "),s=ye(i),r=ye(" / "),o=ye(t[1]),a=z(),l=D("img"),u=z(),f=D("div");for(let p=0;p<d.length;p+=1)d[p].c();gi(l.src,c=t[6][t[4]])||M(l,"src",c),M(l,"class","puzzle-img"),M(l,"alt",""),M(f,"class","answer-container grid gap-2 my-4 max-w-2xl svelte-160bab9")},m(p,_){I(p,e,_),E(e,n),E(e,s),E(e,r),E(e,o),I(p,a,_),I(p,l,_),I(p,u,_),I(p,f,_);for(let m=0;m<d.length;m+=1)d[m].m(f,null)},p(p,_){if(_[0]&16&&i!==(i=p[4]+1+"")&&nt(s,i),_[0]&2&&nt(o,p[1]),_[0]&80&&!gi(l.src,c=p[6][p[4]])&&M(l,"src",c),_[0]&82736){h=p[14];let m;for(m=0;m<h.length;m+=1){const v=sM(p,h,m);d[m]?d[m].p(v,_):(d[m]=aM(v),d[m].c(),d[m].m(f,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=h.length}},d(p){p&&O(e),p&&O(a),p&&O(l),p&&O(u),p&&O(f),en(d,p)}}}function aM(t){let e,n=t[33]+"",i,s,r;function o(){return t[21](t[33])}return{c(){e=D("button"),i=ye(n),M(e,"class","answer border border-gray-300 p-4 flex items-center justify-center outline-none rounded-md svelte-160bab9"),bt(e,"right",t[33]===t[5][t[4]]&&t[8]),bt(e,"wrong",t[33]!=t[5][t[4]]&&t[33]===t[9]&&t[8])},m(a,l){I(a,e,l),E(e,i),s||(r=tt(e,"click",o),s=!0)},p(a,l){t=a,l[0]&16688&&bt(e,"right",t[33]===t[5][t[4]]&&t[8]),l[0]&17200&&bt(e,"wrong",t[33]!=t[5][t[4]]&&t[33]===t[9]&&t[8])},d(a){a&&O(e),s=!1,r()}}}function lM(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p=t[3]===t[1]&&cM();c=new At({props:{class:"ml-12 bg-green-700 hover:bg-green-600 text-gray-300",$$slots:{default:[AW]},$$scope:{ctx:t}}}),c.$on("click",t[15]);let _=t[12],m=[];for(let b=0;b<_.length;b+=1)m[b]=uM(iM(t,_,b));let v=t[7],g=[];for(let b=0;b<v.length;b+=1)g[b]=fM(nM(t,v,b));return{c(){e=D("div"),n=D("span"),i=ye("Completed: "),s=ye(t[3]),r=ye(" / "),o=ye(t[1]),a=z(),p&&p.c(),l=z(),ce(c.$$.fragment),u=z(),f=D("div");for(let b=0;b<m.length;b+=1)m[b].c();h=z();for(let b=0;b<g.length;b+=1)g[b].c();M(n,"class","mr-1"),M(e,"class","flex items-center text-gray-400 font-bold"),M(f,"class","grid grid-cols-5 mt-8 text-center w-full overflow-scroll place-items-center svelte-160bab9")},m(b,y){I(b,e,y),E(e,n),E(n,i),E(n,s),E(n,r),E(n,o),E(e,a),p&&p.m(e,null),E(e,l),ae(c,e,null),I(b,u,y),I(b,f,y);for(let w=0;w<m.length;w+=1)m[w].m(f,null);E(f,h);for(let w=0;w<g.length;w+=1)g[w].m(f,null);d=!0},p(b,y){(!d||y[0]&8)&&nt(s,b[3]),(!d||y[0]&2)&&nt(o,b[1]),b[3]===b[1]?p?y[0]&10&&P(p,1):(p=cM(),p.c(),P(p,1),p.m(e,l)):p&&(at(),H(p,1,1,()=>{p=null}),lt());const w={};if(y[1]&32&&(w.$$scope={dirty:y,ctx:b}),c.$set(w),y[0]&4096){_=b[12];let x;for(x=0;x<_.length;x+=1){const S=iM(b,_,x);m[x]?m[x].p(S,y):(m[x]=uM(S),m[x].c(),m[x].m(f,h))}for(;x<m.length;x+=1)m[x].d(1);m.length=_.length}if(y[0]&128){v=b[7];let x;for(x=0;x<v.length;x+=1){const S=nM(b,v,x);g[x]?g[x].p(S,y):(g[x]=fM(S),g[x].c(),g[x].m(f,null))}for(;x<g.length;x+=1)g[x].d(1);g.length=v.length}},i(b){d||(P(p),P(c.$$.fragment,b),d=!0)},o(b){H(p),H(c.$$.fragment,b),d=!1},d(b){b&&O(e),p&&p.d(),le(c),b&&O(u),b&&O(f),en(m,b),en(g,b)}}}function cM(t){let e,n;return e=new Ob({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function AW(t){let e;return{c(){e=ye("Try again")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function uM(t){let e,n=t[30]+"",i;return{c(){e=D("strong"),i=ye(n)},m(s,r){I(s,e,r),E(e,i)},p:Ve,d(s){s&&O(e)}}}function fM(t){let e,n=t[27].id+"",i,s,r,o,a,l,c,u=t[27].expected+"",f,h,d,p,_=t[27].answer+"",m,v,g,b,y=xt(t[27].time,!1,!0)+"",w,x;return{c(){e=D("span"),i=ye(n),r=z(),o=D("img"),l=z(),c=D("span"),f=ye(u),d=z(),p=D("span"),m=ye(_),g=z(),b=D("span"),w=ye(y),M(e,"class",s=t[27].expected===t[27].answer?"text-green-400":""),gi(o.src,a=t[27].img)||M(o,"src",a),M(o,"alt",""),M(o,"class","puzzle-img flex mx-auto"),M(c,"class",h=t[27].expected===t[27].answer?"text-green-400":""),M(p,"class",v=t[27].expected===t[27].answer?"text-green-400":""),M(b,"class",x=t[27].expected===t[27].answer?"text-green-400":"")},m(S,T){I(S,e,T),E(e,i),I(S,r,T),I(S,o,T),I(S,l,T),I(S,c,T),E(c,f),I(S,d,T),I(S,p,T),E(p,m),I(S,g,T),I(S,b,T),E(b,w)},p(S,T){T[0]&128&&n!==(n=S[27].id+"")&&nt(i,n),T[0]&128&&s!==(s=S[27].expected===S[27].answer?"text-green-400":"")&&M(e,"class",s),T[0]&128&&!gi(o.src,a=S[27].img)&&M(o,"src",a),T[0]&128&&u!==(u=S[27].expected+"")&&nt(f,u),T[0]&128&&h!==(h=S[27].expected===S[27].answer?"text-green-400":"")&&M(c,"class",h),T[0]&128&&_!==(_=S[27].answer+"")&&nt(m,_),T[0]&128&&v!==(v=S[27].expected===S[27].answer?"text-green-400":"")&&M(p,"class",v),T[0]&128&&y!==(y=xt(S[27].time,!1,!0)+"")&&nt(w,y),T[0]&128&&x!==(x=S[27].expected===S[27].answer?"text-green-400":"")&&M(b,"class",x)},d(S){S&&O(e),S&&O(r),S&&O(o),S&&O(l),S&&O(c),S&&O(d),S&&O(p),S&&O(g),S&&O(b)}}}function kW(t){let e,n,i,s,r,o,a,l,c,u,f,h,d;return{c(){e=D("h1"),e.textContent="Key bindings",n=z(),i=D("h2"),i.textContent="Single letter PLL",s=z(),r=D("blockquote"),r.textContent="Just tap the letter to answer the quiz.",o=z(),a=D("h2"),a.textContent="Two variants PLL",l=z(),c=D("blockquote"),c.innerHTML="For PLL&#39;s like <mark>Ja</mark> and <mark>Jb</mark>, lowercase letter is the <mark>a</mark> variant <mark>(j is Ja)</mark> and capital letter is the <mark>b</mark> variant <mark>(J is Jb)</mark>",u=z(),f=D("h2"),f.textContent="G perms",h=z(),d=D("blockquote"),d.innerHTML="For the G Perms you can use the numbers <mark>1</mark> to <mark>4</mark> (Ga, Gb, Gc and Gd).",M(e,"class","svelte-160bab9"),M(i,"class","svelte-160bab9"),M(a,"class","svelte-160bab9"),M(f,"class","svelte-160bab9")},m(p,_){I(p,e,_),I(p,n,_),I(p,i,_),I(p,s,_),I(p,r,_),I(p,o,_),I(p,a,_),I(p,l,_),I(p,c,_),I(p,u,_),I(p,f,_),I(p,h,_),I(p,d,_)},p:Ve,d(p){p&&O(e),p&&O(n),p&&O(i),p&&O(s),p&&O(r),p&&O(o),p&&O(a),p&&O(l),p&&O(c),p&&O(u),p&&O(f),p&&O(h),p&&O(d)}}}function CW(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p=t[2]===0&&rM(t),_=t[2]===1&&oM(t),m=t[2]===2&&lM(t);function v(b){t[22](b)}let g={$$slots:{default:[kW]},$$scope:{ctx:t}};return t[10]!==void 0&&(g.show=t[10]),c=new Ma({props:g}),wt.push(()=>Nt(c,"show",v)),{c(){e=D("div"),n=D("h1"),n.textContent="PLL Recognition Trainer",i=z(),s=D("span"),s.textContent="?",r=z(),p&&p.c(),o=z(),_&&_.c(),a=z(),m&&m.c(),l=z(),ce(c.$$.fragment),M(n,"class","text-center text-3xl mb-4 text-gray-300 font-bold svelte-160bab9"),M(s,"class","absolute right-4 top-4 bg-gray-500 text-gray-200 w-6 h-6 flex items-center justify-center cursor-pointer rounded-full shadow-md hover:shadow-lg hover:bg-gray-400 font-bold transition-all duration-200 "),M(e,"class","text-gray-400 container-mini bg-white bg-opacity-10 w-4/5 mx-auto rounded-md flex flex-col items-center px-4 py-8 cnt relative  svelte-160bab9")},m(b,y){I(b,e,y),E(e,n),E(e,i),E(e,s),E(e,r),p&&p.m(e,null),E(e,o),_&&_.m(e,null),E(e,a),m&&m.m(e,null),E(e,l),ae(c,e,null),f=!0,h||(d=[tt(window,"keyup",t[17]),tt(s,"click",t[18])],h=!0)},p(b,y){b[2]===0?p?(p.p(b,y),y[0]&4&&P(p,1)):(p=rM(b),p.c(),P(p,1),p.m(e,o)):p&&(at(),H(p,1,1,()=>{p=null}),lt()),b[2]===1?_?_.p(b,y):(_=oM(b),_.c(),_.m(e,a)):_&&(_.d(1),_=null),b[2]===2?m?(m.p(b,y),y[0]&4&&P(m,1)):(m=lM(b),m.c(),P(m,1),m.m(e,l)):m&&(at(),H(m,1,1,()=>{m=null}),lt());const w={};y[1]&32&&(w.$$scope={dirty:y,ctx:b}),!u&&y[0]&1024&&(u=!0,w.show=b[10],It(()=>u=!1)),c.$set(w)},i(b){f||(P(p),P(m),P(c.$$.fragment,b),f=!0)},o(b){H(p),H(m),H(c.$$.fragment,b),f=!1},d(b){b&&O(e),p&&p.d(),_&&_.d(),m&&m.d(),le(c),h=!1,Jn(d)}}}const LW=t=>t.label,PW=t=>t;function RW(t,e,n){const i=[{value:"random",label:"Color neutral"},{value:"",label:"White"},{value:"x2",label:"Yellow"},{value:"z'",label:"Red"},{value:"z",label:"Orange"},{value:"x'",label:"Blue"},{value:"x",label:"Green"}];let s=["No.","Case","Expected","Answer","Time"],r=[10,20,30,40,50,60,70,80,90,100],o="random",a=20,l=0,c=0,u,f=[],h=[],d=[],p=fp.slice().sort(),_=[],m=[],v=!1,g=null,b,y=!1;function w(){switch(l){case 0:{n(5,f.length=0,f),n(6,h.length=0,h),d.length=0,_.length=0,n(4,u=0);let F=fp.length,U=[];for(let N=0,B=a;N<B;N+=1){let W=~~(Math.random()*F),ee=Y4(null,null,W);f.push(fp[W]);let K=o==="random"?["x","x'","","z","z'","x2"][~~(Math.random()*6)]:o,ge=["","y","y'","y2"][~~(Math.random()*4)];U.push(wr.fromSequence(K+" "+ge+" "+ee,{type:"rubik",view:"trans"}))}Dl(U,null,!0).then(N=>{let B=N.subscribe(W=>{W!=="__initial__"&&(W!==null?h.push(...W):(b=Date.now(),n(2,l=1),setTimeout(()=>B())))})});break}case 1:{n(7,m.length=0,m);for(let F=0,U=a;F<U;F+=1)m.push({id:F+1,img:h[F],expected:f[F],answer:d[F],time:_[F]});n(2,l=2);break}case 2:{n(3,c=0),n(2,l=0);break}}}function x(F){d.push(F),_.push(Date.now()-b),n(9,g=F),n(8,v=!0),F===f[u]&&n(3,c+=1),setTimeout(()=>{n(8,v=!1),n(4,u+=1),b=Date.now(),u===a&&w()},1e3)}function S(F){if(l!=1)return;let U=[/^(Numpad|Digit)1$/,/^(Numpad|Digit)2$/,/^(Numpad|Digit)3$/,/^(Numpad|Digit)4$/],N=/^Key[AJNRU]$/,B=/^Key[EFHTVYZ]$/;U.some(W=>W.test(F.code))?x(["Ga","Gb","Gc","Gd"][+F.code.slice(-1)-1]):N.test(F.code)?x(F.code.slice(-1)+(F.shiftKey?"b":"a")):B.test(F.code)&&x(F.code.slice(-1))}const T=()=>n(10,y=!0);function A(F){o=F,n(0,o)}function C(F){a=F,n(1,a)}const k=F=>x(F);function L(F){y=F,n(10,y)}return[o,a,l,c,u,f,h,m,v,g,y,i,s,r,p,w,x,S,T,A,C,k,L]}class DW extends dt{constructor(e){super(),ht(this,e,RW,CW,ft,{},null,[-1,-1])}}function xk(t){return t.slice(1).split("&").reduce((e,n)=>{let i=n.split("=").map(s=>decodeURIComponent(s));return e.set(i[0],i[1]),e},new Map)}function hM(t,e,n){const i=t.slice();return i[18]=e[n],i[20]=n,i}function dM(t,e,n){const i=t.slice();return i[21]=e[n],i}function pM(t,e,n){const i=t.slice();return i[24]=e[n],i}function mM(t,e,n){const i=t.slice();return i[15]=e[n],i}function OW(t){let e,n,i,s=t[2]<2&&gM(t),r=(t[2]===2||t[2]>=4)&&vM(t);return{c(){s&&s.c(),e=z(),r&&r.c(),n=ms()},m(o,a){s&&s.m(o,a),I(o,e,a),r&&r.m(o,a),I(o,n,a),i=!0},p(o,a){o[2]<2?s?(s.p(o,a),a&4&&P(s,1)):(s=gM(o),s.c(),P(s,1),s.m(e.parentNode,e)):s&&(at(),H(s,1,1,()=>{s=null}),lt()),o[2]===2||o[2]>=4?r?r.p(o,a):(r=vM(o),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i(o){i||(P(s),i=!0)},o(o){H(s),i=!1},d(o){s&&s.d(o),o&&O(e),r&&r.d(o),o&&O(n)}}}function IW(t){var x,S;let e,n,i=((x=t[3])==null?void 0:x.name)+"",s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b=((S=t[3])==null?void 0:S.solutions)||[],y=[];for(let T=0;T<b.length;T+=1)y[T]=wM(mM(t,b,T));const w=T=>H(y[T],1,1,()=>{y[T]=null});return{c(){var T,A;e=D("div"),n=D("h1"),s=ye(i),r=z(),o=D("img"),l=z(),c=D("div"),u=D("h2"),f=z(),h=D("h2"),h.textContent="Solution",d=z(),p=D("h2"),p.textContent="Moves",_=z(),m=D("h2"),v=z();for(let C=0;C<y.length;C+=1)y[C].c();M(n,"class","text-gray-300 text-3xl font-bold text-center"),gi(o.src,a=(A=(T=t[3])==null?void 0:T._puzzle)==null?void 0:A.img)||M(o,"src",a),M(o,"class","puzzle-img flex mx-auto"),M(o,"alt",""),M(u,"class","col-span-1 font-bold text-xl"),M(h,"class","col-span-3 font-bold text-xl"),M(p,"class","col-span-1 font-bold text-xl"),M(m,"class","col-span-1 font-bold text-xl"),M(c,"class","grid grid-cols-6"),M(e,"class","svelte-1mzn3bq")},m(T,A){I(T,e,A),E(e,n),E(n,s),E(e,r),E(e,o),E(e,l),E(e,c),E(c,u),E(c,f),E(c,h),E(c,d),E(c,p),E(c,_),E(c,m),E(c,v);for(let C=0;C<y.length;C+=1)y[C].m(c,null);g=!0},p(T,A){var C,k,L,F;if((!g||A&8)&&i!==(i=((C=T[3])==null?void 0:C.name)+"")&&nt(s,i),(!g||A&8&&!gi(o.src,a=(L=(k=T[3])==null?void 0:k._puzzle)==null?void 0:L.img))&&M(o,"src",a),A&8){b=((F=T[3])==null?void 0:F.solutions)||[];let U;for(U=0;U<b.length;U+=1){const N=mM(T,b,U);y[U]?(y[U].p(N,A),P(y[U],1)):(y[U]=wM(N),y[U].c(),P(y[U],1),y[U].m(c,null))}for(at(),U=b.length;U<y.length;U+=1)w(U);lt()}},i(T){if(!g){for(let A=0;A<b.length;A+=1)P(y[A]);g=!0}},o(T){y=y.filter(Boolean);for(let A=0;A<y.length;A+=1)H(y[A]);g=!1},d(T){T&&O(e),en(y,T)}}}function gM(t){let e,n,i=t[0],s=[];for(let o=0;o<i.length;o+=1)s[o]=_M(pM(t,i,o));const r=o=>H(s[o],1,1,()=>{s[o]=null});return{c(){e=D("ul");for(let o=0;o<s.length;o+=1)s[o].c();M(e,"class","w-full grid svelte-1mzn3bq")},m(o,a){I(o,e,a);for(let l=0;l<s.length;l+=1)s[l].m(e,null);n=!0},p(o,a){if(a&1){i=o[0];let l;for(l=0;l<i.length;l+=1){const c=pM(o,i,l);s[l]?(s[l].p(c,a),P(s[l],1)):(s[l]=_M(c),s[l].c(),P(s[l],1),s[l].m(e,null))}for(at(),l=i.length;l<s.length;l+=1)r(l);lt()}},i(o){if(!n){for(let a=0;a<i.length;a+=1)P(s[a]);n=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)H(s[a]);n=!1},d(o){o&&O(e),en(s,o)}}}function NW(t){let e,n,i,s,r,o,a=t[24].title+"",l,c;return{c(){var u,f;e=D("li"),n=D("img"),r=z(),o=D("h2"),l=ye(a),c=z(),M(n,"class","w-32 h-32"),gi(n.src,i=((f=(u=t[24])==null?void 0:u.puzzle)==null?void 0:f.img)||"")||M(n,"src",i),M(n,"alt",s=t[24].title),M(e,"class","w-40 h-48 text-center shadow-md rounded-md select-none cursor-pointer transition-all duration-200 flex flex-col items-center justify-between py-3 bg-white bg-opacity-10 text-gray-400 hover:rotate-3 hover:shadow-lg")},m(u,f){I(u,e,f),E(e,n),E(e,r),E(e,o),E(o,l),I(u,c,f)},p(u,f){var h,d;f&1&&!gi(n.src,i=((d=(h=u[24])==null?void 0:h.puzzle)==null?void 0:d.img)||"")&&M(n,"src",i),f&1&&s!==(s=u[24].title)&&M(n,"alt",s),f&1&&a!==(a=u[24].title+"")&&nt(l,a)},d(u){u&&O(e),u&&O(c)}}}function _M(t){let e,n;return e=new Qm({props:{to:t[24].route,$$slots:{default:[NW]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s&1&&(r.to=i[24].route),s&134217729&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function vM(t){let e,n,i,s=t[1],r=[];for(let o=0;o<s.length;o+=1)r[o]=yM(hM(t,s,o));return{c(){e=D("div"),n=D("div"),n.innerHTML=`<span class="text-gray-300 font-bold">Case</span> 
          <span class="text-gray-300 font-bold"></span> 
          <span class="text-gray-300 font-bold">Algorithms</span>`,i=z();for(let o=0;o<r.length;o+=1)r[o].c();M(n,"class","row svelte-1mzn3bq"),M(e,"class","grid text-gray-400 svelte-1mzn3bq")},m(o,a){I(o,e,a),E(e,n),E(e,i);for(let l=0;l<r.length;l+=1)r[l].m(e,null)},p(o,a){if(a&66){s=o[1];let l;for(l=0;l<s.length;l+=1){const c=hM(o,s,l);r[l]?r[l].p(c,a):(r[l]=yM(c),r[l].c(),r[l].m(e,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=s.length}},d(o){o&&O(e),en(r,o)}}}function bM(t){let e,n=t[21].moves+"",i;return{c(){e=D("li"),i=ye(n),M(e,"class","algorithm")},m(s,r){I(s,e,r),E(e,i)},p(s,r){r&2&&n!==(n=s[21].moves+"")&&nt(i,n)},d(s){s&&O(e)}}}function yM(t){let e,n,i=t[18].name+"",s,r,o,a,l,c,u,f,h;function d(){return t[9](t[18])}let p=(t[18].solutions||[]).slice(0,4),_=[];for(let m=0;m<p.length;m+=1)_[m]=bM(dM(t,p,m));return{c(){var m,v;e=D("div"),n=D("span"),s=ye(i),r=z(),o=D("img"),l=z(),c=D("ul");for(let g=0;g<_.length;g+=1)_[g].c();u=z(),M(n,"class","font-bold"),M(o,"class","puzzle-img hover:shadow-lg transition-all duration-200 cursor-pointer svelte-1mzn3bq"),gi(o.src,a=((v=(m=t[18])==null?void 0:m._puzzle)==null?void 0:v.img)||"")||M(o,"src",a),M(o,"alt",""),M(c,"class","svelte-1mzn3bq"),M(e,"class","row svelte-1mzn3bq")},m(m,v){I(m,e,v),E(e,n),E(n,s),E(e,r),E(e,o),E(e,l),E(e,c);for(let g=0;g<_.length;g+=1)_[g].m(c,null);E(e,u),f||(h=tt(o,"click",d),f=!0)},p(m,v){var g,b;if(t=m,v&2&&i!==(i=t[18].name+"")&&nt(s,i),v&2&&!gi(o.src,a=((b=(g=t[18])==null?void 0:g._puzzle)==null?void 0:b.img)||"")&&M(o,"src",a),v&2){p=(t[18].solutions||[]).slice(0,4);let y;for(y=0;y<p.length;y+=1){const w=dM(t,p,y);_[y]?_[y].p(w,v):(_[y]=bM(w),_[y].c(),_[y].m(c,null))}for(;y<_.length;y+=1)_[y].d(1);_.length=p.length}},d(m){m&&O(e),en(_,m),f=!1,h()}}}function BW(t){let e,n=t[15].moves+"",i,s,r;function o(){return t[8](t[15])}return{c(){e=D("span"),i=ye(n),M(e,"class","mt-2 cursor-pointer hover:text-gray-300 transition-all duration-200")},m(a,l){I(a,e,l),E(e,i),s||(r=tt(e,"click",o),s=!0)},p(a,l){t=a,l&8&&n!==(n=t[15].moves+"")&&nt(i,n)},d(a){a&&O(e),s=!1,r()}}}function wM(t){let e,n,i,s,r,o=t[15].moves.split(" ").length+"",a,l,c,u;return i=new Vi({props:{position:"left",text:"Click to copy",class:"col-span-3",$$slots:{default:[BW]},$$scope:{ctx:t}}}),{c(){e=D("span"),n=z(),ce(i.$$.fragment),s=z(),r=D("span"),a=ye(o),l=z(),c=D("span"),M(e,"class","col-span-1"),M(r,"class","col-span-1 mt-2"),M(c,"class","col-span-1")},m(f,h){I(f,e,h),I(f,n,h),ae(i,f,h),I(f,s,h),I(f,r,h),E(r,a),I(f,l,h),I(f,c,h),u=!0},p(f,h){const d={};h&134217736&&(d.$$scope={dirty:h,ctx:f}),i.$set(d),(!u||h&8)&&o!==(o=f[15].moves.split(" ").length+"")&&nt(a,o)},i(f){u||(P(i.$$.fragment,f),u=!0)},o(f){H(i.$$.fragment,f),u=!1},d(f){f&&O(e),f&&O(n),le(i,f),f&&O(s),f&&O(r),f&&O(l),f&&O(c)}}}function FW(t){let e,n,i,s,r,o;const a=[IW,OW],l=[];function c(u,f){return u[4]?0:1}return n=c(t),i=l[n]=a[n](t),{c(){e=D("main"),i.c(),M(e,"class","container-mini overflow-hidden text-gray-400 svelte-1mzn3bq")},m(u,f){I(u,e,f),l[n].m(e,null),s=!0,r||(o=tt(window,"keyup",t[5]),r=!0)},p(u,[f]){let h=n;n=c(u),n===h?l[n].p(u,f):(at(),H(l[h],1,1,()=>{l[h]=null}),lt(),i=l[n],i?i.p(u,f):(i=l[n]=a[n](u),i.c()),P(i,1),i.m(e,null))},i(u){s||(P(i),s=!0)},o(u){H(i),s=!1},d(u){u&&O(e),l[n].d(),r=!1,o()}}}function zW(t){const e=/^(\d*)[xX](\d*)$/,n=/^(\d*)[xX](\d*)[xX](\d*)$/,i=/^(\d){3}$/;let s;if(e.test(t))return["rubik",+t.replace(e,"$1")];if(n.test(t))return s=t.replace(n,"$1 $2 $3").split(" ").map(Number),["rubik",...s];if(i.test(t))return s=t.split("").map(Number),["rubik",...s];switch(t){case"sq1":case"Square-1":return["square1"];case"Skewb":return["skewb"];case"Pyraminx":return["pyraminx"];case"Axis":return["axis"];case"Fisher":return["fisher"];case"Ivy":return["ivy"];default:return["rubik",3]}}function UW(t){navigator.clipboard.writeText(t).then(()=>{console.log("Copied to clipboard")})}function HW(t,e,n){let{location:i}=e;const s=Ys.getInstance();let r="",o=[],a=[],l=0,c=null,u=!1,f;function h(g){if(n(2,l=0),n(0,o.length=0,o),n(1,a.length=0,a),g.length>0&&g.find(x=>x.hasOwnProperty("solutions"))){for(let x=0,S=g.length;x<S;x+=1)g[x].hasOwnProperty("solutions")||(g[x].solutions=[{moves:g[x].scramble,votes:0}]);n(2,l=2)}g.sort(function(w,x){let S=w.name.split(" ").map(A=>A.toLowerCase()),T=x.name.split(" ").map(A=>A.toLowerCase());for(let A=0,C=Math.min(S.length,T.length);A<C;A+=1)if(S[A]!=T[A])return!isNaN(parseInt(S[A]))&&!isNaN(parseInt(T[A]))?parseInt(S[A])-parseInt(T[A]):S[A]<T[A]?-1:1;return w<x?-1:1});let b=g.map(w=>{let x=zW(w.puzzle||""),S=w.scramble+" z2";return wr.fromSequence(S,{type:x[0],order:x.slice(1,x.length),mode:w.mode,view:w.view,tips:w.tips,headless:!0},!0)});for(let w=0,x=g.length;w<x;w+=1){let S=g[w];l<2?o.push({title:S.name,cube:"",ready:!1,route:"/algorithms"+(S.parentPath?"/"+S.parentPath:"")+"/"+S.shortName,puzzle:b[w]}):(S.cube="",S.ready=!1,S.parentPath="/algorithms/"+S.parentPath,S._puzzle=b[w],a.push(S))}let y=l<2?o.map(w=>w.puzzle):a.map(w=>w._puzzle);Dl(y,250,!1,!0).then(w=>{let x=w.subscribe(S=>{S===null&&(n(0,o),n(1,a),x())})})}function d(g){g.code==="Escape"&&u&&Wp(i.pathname.split("?")[0])}function p(g){let y=xk(g.search).get("case"),w=a.filter(S=>S.shortName===y);y&&w.length?(n(3,c=w[0]),n(4,u=!0)):n(4,u=!1);let x=g.pathname.split("/").slice(2).join("/");(x!=r||!x)&&(n(0,o.length=0,o),n(1,a.length=0,a),r=x,s.getAlgorithms(x))}function _(g){Wp(g.parentPath+"?case="+g.shortName)}gs(()=>{f=s.algSub.subscribe(g=>{h(g)})}),er(()=>{f()});const m=g=>UW(g.moves),v=g=>_(g);return t.$$set=g=>{"location"in g&&n(7,i=g.location)},t.$$.update=()=>{t.$$.dirty&128&&p(i)},[o,a,l,c,u,d,_,i,m,v]}class VW extends dt{constructor(e){super(),ht(this,e,HW,FW,ft,{location:7})}}Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});Math.sign===void 0&&(Math.sign=function(t){return t<0?-1:t>0?1:+t});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");const e=Object(t);for(let n=1;n<arguments.length;n++){const i=arguments[n];if(i!=null)for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e});const GW="120",P0={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},WW=0,xM=1,jW=2,Mk=1,YW=2,rf=3,Pg=0,Di=1,wl=2,Sk=1,Sf=0,Ef=1,MM=2,SM=3,EM=4,qW=5,bc=100,XW=101,ZW=102,TM=103,AM=104,JW=200,KW=201,$W=202,QW=203,Ek=204,Tk=205,ej=206,tj=207,nj=208,ij=209,sj=210,rj=0,oj=1,aj=2,v_=3,lj=4,cj=5,uj=6,fj=7,Rg=0,hj=1,dj=2,Tf=0,pj=1,mj=2,gj=3,_j=4,vj=5,Ib=300,Dg=301,Og=302,b_=303,y_=304,Ig=306,Ng=307,Nm=1e3,us=1001,Bm=1002,Fi=1003,w_=1004,x_=1005,Ii=1006,Ak=1007,Hh=1008,Nb=1009,bj=1010,yj=1011,Fm=1012,wj=1013,Np=1014,ia=1015,zm=1016,xj=1017,Mj=1018,Sj=1019,Af=1020,Ej=1021,fl=1022,Mr=1023,Tj=1024,Aj=1025,Xc=1026,ah=1027,kj=1028,Cj=1029,Lj=1030,Pj=1031,Rj=1032,Dj=1033,kM=33776,CM=33777,LM=33778,PM=33779,RM=35840,DM=35841,OM=35842,IM=35843,Oj=36196,NM=37492,BM=37496,Ij=37808,Nj=37809,Bj=37810,Fj=37811,zj=37812,Uj=37813,Hj=37814,Vj=37815,Gj=37816,Wj=37817,jj=37818,Yj=37819,qj=37820,Xj=37821,Zj=36492,Jj=37840,Kj=37841,$j=37842,Qj=37843,eY=37844,tY=37845,nY=37846,iY=37847,sY=37848,rY=37849,oY=37850,aY=37851,lY=37852,cY=37853,uY=2200,fY=2201,hY=2202,Um=2300,Bp=2301,R0=2302,Ac=2400,kc=2401,Hm=2402,Bb=2500,kk=2501,dY=0,Vh=3e3,Ck=3001,pY=3007,mY=3002,gY=3003,_Y=3004,vY=3005,bY=3006,yY=3200,wY=3201,Su=0,xY=1,D0=7680,MY=519,Bg=35044,lh=35048,FM="300 es";function io(){}Object.assign(io.prototype,{addEventListener:function(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)},hasEventListener:function(t,e){if(this._listeners===void 0)return!1;const n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(this._listeners===void 0)return;const i=this._listeners[t];if(i!==void 0){const s=i.indexOf(e);s!==-1&&i.splice(s,1)}},dispatchEvent:function(t){if(this._listeners===void 0)return;const n=this._listeners[t.type];if(n!==void 0){t.target=this;const i=n.slice(0);for(let s=0,r=i.length;s<r;s++)i[s].call(this,t)}}});const Pi=[];for(let t=0;t<256;t++)Pi[t]=(t<16?"0":"")+t.toString(16);let Md=1234567;const Zt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Pi[t&255]+Pi[t>>8&255]+Pi[t>>16&255]+Pi[t>>24&255]+"-"+Pi[e&255]+Pi[e>>8&255]+"-"+Pi[e>>16&15|64]+Pi[e>>24&255]+"-"+Pi[n&63|128]+Pi[n>>8&255]+"-"+Pi[n>>16&255]+Pi[n>>24&255]+Pi[i&255]+Pi[i>>8&255]+Pi[i>>16&255]+Pi[i>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,s){return i+(t-e)*(s-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return t!==void 0&&(Md=t%2147483647),Md=Md*16807%2147483647,(Md-1)/2147483646},degToRad:function(t){return t*Zt.DEG2RAD},radToDeg:function(t){return t*Zt.RAD2DEG},isPowerOfTwo:function(t){return(t&t-1)===0&&t!==0},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,s){const r=Math.cos,o=Math.sin,a=r(n/2),l=o(n/2),c=r((e+i)/2),u=o((e+i)/2),f=r((e-i)/2),h=o((e-i)/2),d=r((i-e)/2),p=o((i-e)/2);switch(s){case"XYX":t.set(a*u,l*f,l*h,a*c);break;case"YZY":t.set(l*h,a*u,l*f,a*c);break;case"ZXZ":t.set(l*f,l*h,a*u,a*c);break;case"XZX":t.set(a*u,l*p,l*d,a*c);break;case"YXY":t.set(l*d,a*u,l*p,a*c);break;case"ZYZ":t.set(l*p,l*d,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}};class We{constructor(e=0,n=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6],this.y=s[1]*n+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n){return n===void 0&&(n=0),this.x=e[n],this.y=e[n+1],this}toArray(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),s=Math.sin(n),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*s+e.x,this.y=r*s+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class fs{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,n,i,s,r,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=s,u[2]=a,u[3]=n,u[4]=r,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return new this.constructor().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,r=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],f=i[7],h=i[2],d=i[5],p=i[8],_=s[0],m=s[3],v=s[6],g=s[1],b=s[4],y=s[7],w=s[2],x=s[5],S=s[8];return r[0]=o*_+a*g+l*w,r[3]=o*m+a*b+l*x,r[6]=o*v+a*y+l*S,r[1]=c*_+u*g+f*w,r[4]=c*m+u*b+f*x,r[7]=c*v+u*y+f*S,r[2]=h*_+d*g+p*w,r[5]=h*m+d*b+p*x,r[8]=h*v+d*y+p*S,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-i*r*u+i*a*l+s*r*c-s*o*l}getInverse(e,n){n!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const i=e.elements,s=this.elements,r=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],f=i[6],h=i[7],d=i[8],p=d*c-u*h,_=u*f-d*l,m=h*l-c*f,v=r*p+o*_+a*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/v;return s[0]=p*g,s[1]=(a*h-d*o)*g,s[2]=(u*o-a*c)*g,s[3]=_*g,s[4]=(d*r-a*f)*g,s[5]=(a*l-u*r)*g,s[6]=m*g,s[7]=(o*f-h*r)*g,s[8]=(c*r-o*l)*g,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).getInverse(this).transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,s,r,o,a){const l=Math.cos(r),c=Math.sin(r);this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-s*c,s*l,-s*(-c*o+l*a)+a+n,0,0,1)}scale(e,n){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=n,i[4]*=n,i[7]*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),s=this.elements,r=s[0],o=s[3],a=s[6],l=s[1],c=s[4],u=s[7];return s[0]=n*r+i*l,s[3]=n*o+i*c,s[6]=n*a+i*u,s[1]=-i*r+n*l,s[4]=-i*o+n*c,s[7]=-i*a+n*u,this}translate(e,n){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<9;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n){n===void 0&&(n=0);for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e,n){e===void 0&&(e=[]),n===void 0&&(n=0);const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}}let Ql;const xl={getDataURL:function(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Ql===void 0&&(Ql=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Ql.width=t.width,Ql.height=t.height;const n=Ql.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Ql}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}};let SY=0;function In(t,e,n,i,s,r,o,a,l,c){Object.defineProperty(this,"id",{value:SY++}),this.uuid=Zt.generateUUID(),this.name="",this.image=t!==void 0?t:In.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=e!==void 0?e:In.DEFAULT_MAPPING,this.wrapS=n!==void 0?n:us,this.wrapT=i!==void 0?i:us,this.magFilter=s!==void 0?s:Ii,this.minFilter=r!==void 0?r:Hh,this.anisotropy=l!==void 0?l:1,this.format=o!==void 0?o:Mr,this.internalFormat=null,this.type=a!==void 0?a:Nb,this.offset=new We(0,0),this.repeat=new We(1,1),this.center=new We(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new fs,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c!==void 0?c:Vh,this.version=0,this.onUpdate=null}In.DEFAULT_IMAGE=void 0;In.DEFAULT_MAPPING=Ib;In.prototype=Object.assign(Object.create(io.prototype),{constructor:In,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=Zt.generateUUID()),!e&&t.images[i.uuid]===void 0){let s;if(Array.isArray(i)){s=[];for(let r=0,o=i.length;r<o;r++)s.push(xl.getDataURL(i[r]))}else s=xl.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:s}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==Ib)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Nm:t.x=t.x-Math.floor(t.x);break;case us:t.x=t.x<0?0:1;break;case Bm:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Nm:t.y=t.y-Math.floor(t.y);break;case us:t.y=t.y<0?0:1;break;case Bm:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}});Object.defineProperty(In.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});class On{constructor(e=0,n=0,i=0,s=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=n,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,s){return this.x=e,this.y=n,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*n+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*n+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*n+o[7]*i+o[11]*s+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,s,r;const l=e.elements,c=l[0],u=l[4],f=l[8],h=l[1],d=l[5],p=l[9],_=l[2],m=l[6],v=l[10];if(Math.abs(u-h)<.01&&Math.abs(f-_)<.01&&Math.abs(p-m)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+_)<.1&&Math.abs(p+m)<.1&&Math.abs(c+d+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const b=(c+1)/2,y=(d+1)/2,w=(v+1)/2,x=(u+h)/4,S=(f+_)/4,T=(p+m)/4;return b>y&&b>w?b<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(b),s=x/i,r=S/i):y>w?y<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(y),i=x/s,r=T/s):w<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(w),i=S/r,s=T/r),this.set(i,s,r,n),this}let g=Math.sqrt((m-p)*(m-p)+(f-_)*(f-_)+(h-u)*(h-u));return Math.abs(g)<.001&&(g=1),this.x=(m-p)/g,this.y=(f-_)/g,this.z=(h-u)/g,this.w=Math.acos((c+d+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n){return n===void 0&&(n=0),this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function Sr(t,e,n){this.width=t,this.height=e,this.scissor=new On(0,0,t,e),this.scissorTest=!1,this.viewport=new On(0,0,t,e),n=n||{},this.texture=new In(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Ii,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}Sr.prototype=Object.assign(Object.create(io.prototype),{constructor:Sr,isWebGLRenderTarget:!0,setSize:function(t,e){(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function zM(t,e,n){Sr.call(this,t,e,n),this.samples=4}zM.prototype=Object.assign(Object.create(Sr.prototype),{constructor:zM,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Sr.prototype.copy.call(this,t),this.samples=t.samples,this}});class Hi{constructor(e=0,n=0,i=0,s=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=n,this._z=i,this._w=s}static slerp(e,n,i,s){return i.copy(e).slerp(n,s)}static slerpFlat(e,n,i,s,r,o,a){let l=i[s+0],c=i[s+1],u=i[s+2],f=i[s+3];const h=r[o+0],d=r[o+1],p=r[o+2],_=r[o+3];if(f!==_||l!==h||c!==d||u!==p){let m=1-a;const v=l*h+c*d+u*p+f*_,g=v>=0?1:-1,b=1-v*v;if(b>Number.EPSILON){const w=Math.sqrt(b),x=Math.atan2(w,v*g);m=Math.sin(m*x)/w,a=Math.sin(a*x)/w}const y=a*g;if(l=l*m+h*y,c=c*m+d*y,u=u*m+p*y,f=f*m+_*y,m===1-a){const w=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=w,c*=w,u*=w,f*=w}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f}static multiplyQuaternionsFlat(e,n,i,s,r,o){const a=i[s],l=i[s+1],c=i[s+2],u=i[s+3],f=r[o],h=r[o+1],d=r[o+2],p=r[o+3];return e[n]=a*p+u*f+l*d-c*h,e[n+1]=l*p+u*h+c*f-a*d,e[n+2]=c*p+u*d+a*h-l*f,e[n+3]=u*p-a*f-l*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,s){return this._x=e,this._y=n,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,s=e._y,r=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(s/2),f=a(r/2),h=l(i/2),d=l(s/2),p=l(r/2);switch(o){case"XYZ":this._x=h*u*f+c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f-h*d*p;break;case"YXZ":this._x=h*u*f+c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f+h*d*p;break;case"ZXY":this._x=h*u*f-c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f-h*d*p;break;case"ZYX":this._x=h*u*f-c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f+h*d*p;break;case"YZX":this._x=h*u*f+c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f-h*d*p;break;case"XZY":this._x=h*u*f-c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],s=n[4],r=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],f=n[10],h=i+a+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-l)*d,this._y=(r-c)*d,this._z=(o-s)*d}else if(i>a&&i>f){const d=2*Math.sqrt(1+i-a-f);this._w=(u-l)/d,this._x=.25*d,this._y=(s+o)/d,this._z=(r+c)/d}else if(a>f){const d=2*Math.sqrt(1+a-i-f);this._w=(r-c)/d,this._x=(s+o)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+f-i-a);this._w=(o-s)/d,this._x=(r+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let s=e.dot(n)+1;return s<1e-6?(s=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=s):(this._x=0,this._y=-e.z,this._z=e.y,this._w=s)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=s),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Zt.clamp(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,n/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,n){return n!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,n)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,s=e._y,r=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=i*u+o*a+s*c-r*l,this._y=s*u+o*l+r*a-i*c,this._z=r*u+o*c+i*l-s*a,this._w=o*u-i*a-s*l-r*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,s=this._y,r=this._z,o=this._w;let a=o*e._w+i*e._x+s*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-n;return this._w=d*o+n*this._w,this._x=d*i+n*this._x,this._y=d*s+n*this._y,this._z=d*r+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=o*f+this._w*h,this._x=i*f+this._x*h,this._y=s*f+this._y*h,this._z=r*f+this._z*h,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n){return n===void 0&&(n=0),this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}class J{constructor(e=0,n=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e,n){return n!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,n)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(UM.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(UM.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6]*s,this.y=r[1]*n+r[4]*i+r[7]*s,this.z=r[2]*n+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,r=e.elements,o=1/(r[3]*n+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*n+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*n+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*n+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z,l=e.w,c=l*n+o*s-a*i,u=l*i+a*n-r*s,f=l*s+r*i-o*n,h=-r*n-o*i-a*s;return this.x=c*l+h*-r+u*-a-f*-o,this.y=u*l+h*-o+f*-r-c*-a,this.z=f*l+h*-a+c*-o-u*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*n+r[4]*i+r[8]*s,this.y=r[1]*n+r[5]*i+r[9]*s,this.z=r[2]*n+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e,n){return n!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,n)):this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,s=e.y,r=e.z,o=n.x,a=n.y,l=n.z;return this.x=s*l-r*a,this.y=r*o-i*l,this.z=i*a-s*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return O0.copy(this).projectOnVector(e),this.sub(O0)}reflect(e){return this.sub(O0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Zt.clamp(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return n*n+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const s=Math.sin(n)*e;return this.x=s*Math.sin(i),this.y=Math.cos(n)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=s,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n){return n===void 0&&(n=0),this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const O0=new J,UM=new Hi;class zo{constructor(e,n){Object.defineProperty(this,"isBox3",{value:!0}),this.min=e!==void 0?e:new J(1/0,1/0,1/0),this.max=n!==void 0?n:new J(-1/0,-1/0,-1/0)}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,i=1/0,s=1/0,r=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],f=e[l+1],h=e[l+2];u<n&&(n=u),f<i&&(i=f),h<s&&(s=h),u>r&&(r=u),f>o&&(o=f),h>a&&(a=h)}return this.min.set(n,i,s),this.max.set(r,o,a),this}setFromBufferAttribute(e){let n=1/0,i=1/0,s=1/0,r=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),f=e.getY(l),h=e.getZ(l);u<n&&(n=u),f<i&&(i=f),h<s&&(s=h),u>r&&(r=u),f>o&&(o=f),h>a&&(a=h)}return this.min.set(n,i,s),this.max.set(r,o,a),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Uu.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new J),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new J),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const n=e.geometry;n!==void 0&&(n.boundingBox===null&&n.computeBoundingBox(),N0.copy(n.boundingBox),N0.applyMatrix4(e.matrixWorld),this.union(N0));const i=e.children;for(let s=0,r=i.length;s<r;s++)this.expandByObject(i[s]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),n=new J),n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Uu),Uu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Hu),Sd.subVectors(this.max,Hu),ec.subVectors(e.a,Hu),tc.subVectors(e.b,Hu),nc.subVectors(e.c,Hu),Vo.subVectors(tc,ec),Go.subVectors(nc,tc),Ga.subVectors(ec,nc);let n=[0,-Vo.z,Vo.y,0,-Go.z,Go.y,0,-Ga.z,Ga.y,Vo.z,0,-Vo.x,Go.z,0,-Go.x,Ga.z,0,-Ga.x,-Vo.y,Vo.x,0,-Go.y,Go.x,0,-Ga.y,Ga.x,0];return!I0(n,ec,tc,nc,Sd)||(n=[1,0,0,0,1,0,0,0,1],!I0(n,ec,tc,nc,Sd))?!1:(Ed.crossVectors(Vo,Go),n=[Ed.x,Ed.y,Ed.z],I0(n,ec,tc,nc,Sd))}clampPoint(e,n){return n===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),n=new J),n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Uu.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=this.getSize(Uu).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ao[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ao[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ao[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ao[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ao[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ao[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ao[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ao[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ao),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}function I0(t,e,n,i,s){for(let r=0,o=t.length-3;r<=o;r+=3){Wa.fromArray(t,r);const a=s.x*Math.abs(Wa.x)+s.y*Math.abs(Wa.y)+s.z*Math.abs(Wa.z),l=e.dot(Wa),c=n.dot(Wa),u=i.dot(Wa);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const ao=[new J,new J,new J,new J,new J,new J,new J,new J],Uu=new J,N0=new zo,ec=new J,tc=new J,nc=new J,Vo=new J,Go=new J,Ga=new J,Hu=new J,Sd=new J,Ed=new J,Wa=new J,EY=new zo;class Ba{constructor(e,n){this.center=e!==void 0?e:new J,this.radius=n!==void 0?n:-1}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):EY.setFromPoints(e).getCenter(i);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),n=new J),n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new zo),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}}const lo=new J,B0=new J,Td=new J,Wo=new J,F0=new J,Ad=new J,z0=new J;class Gh{constructor(e,n){this.origin=e!==void 0?e:new J,this.direction=n!==void 0?n:new J(0,0,-1)}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n===void 0&&(console.warn("THREE.Ray: .at() target is now required"),n=new J),n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,lo)),this}closestPointToPoint(e,n){n===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),n=new J),n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=lo.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(lo.copy(this.direction).multiplyScalar(n).add(this.origin),lo.distanceToSquared(e))}distanceSqToSegment(e,n,i,s){B0.copy(e).add(n).multiplyScalar(.5),Td.copy(n).sub(e).normalize(),Wo.copy(this.origin).sub(B0);const r=e.distanceTo(n)*.5,o=-this.direction.dot(Td),a=Wo.dot(this.direction),l=-Wo.dot(Td),c=Wo.lengthSq(),u=Math.abs(1-o*o);let f,h,d,p;if(u>0)if(f=o*l-a,h=o*a-l,p=r*u,f>=0)if(h>=-p)if(h<=p){const _=1/u;f*=_,h*=_,d=f*(f+o*h+2*a)+h*(o*f+h+2*l)+c}else h=r,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;else h=-r,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;else h<=-p?(f=Math.max(0,-(-o*r+a)),h=f>0?-r:Math.min(Math.max(-r,-l),r),d=-f*f+h*(h+2*l)+c):h<=p?(f=0,h=Math.min(Math.max(-r,-l),r),d=h*(h+2*l)+c):(f=Math.max(0,-(o*r+a)),h=f>0?r:Math.min(Math.max(-r,-l),r),d=-f*f+h*(h+2*l)+c);else h=o>0?-r:r,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(f).add(this.origin),s&&s.copy(Td).multiplyScalar(h).add(B0),d}intersectSphere(e,n){lo.subVectors(e.center,this.origin);const i=lo.dot(this.direction),s=lo.dot(lo)-i*i,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=i-o,l=i+o;return a<0&&l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,s,r,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,s=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,s=(e.min.x-h.x)*c),u>=0?(r=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(r=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||r>s||((r>i||i!==i)&&(i=r),(o<s||s!==s)&&(s=o),f>=0?(a=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(a=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),i>l||a>s)||((a>i||i!==i)&&(i=a),(l<s||s!==s)&&(s=l),s<0)?null:this.at(i>=0?i:s,n)}intersectsBox(e){return this.intersectBox(e,lo)!==null}intersectTriangle(e,n,i,s,r){F0.subVectors(n,e),Ad.subVectors(i,e),z0.crossVectors(F0,Ad);let o=this.direction.dot(z0),a;if(o>0){if(s)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Wo.subVectors(this.origin,e);const l=a*this.direction.dot(Ad.crossVectors(Wo,Ad));if(l<0)return null;const c=a*this.direction.dot(F0.cross(Wo));if(c<0||l+c>o)return null;const u=-a*Wo.dot(z0);return u<0?null:this.at(u/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}class nn{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m){const v=this.elements;return v[0]=e,v[4]=n,v[8]=i,v[12]=s,v[1]=r,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=f,v[14]=h,v[3]=d,v[7]=p,v[11]=_,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new nn().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,s=1/ic.setFromMatrixColumn(e,0).length(),r=1/ic.setFromMatrixColumn(e,1).length(),o=1/ic.setFromMatrixColumn(e,2).length();return n[0]=i[0]*s,n[1]=i[1]*s,n[2]=i[2]*s,n[3]=0,n[4]=i[4]*r,n[5]=i[5]*r,n[6]=i[6]*r,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const n=this.elements,i=e.x,s=e.y,r=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(s),c=Math.sin(s),u=Math.cos(r),f=Math.sin(r);if(e.order==="XYZ"){const h=o*u,d=o*f,p=a*u,_=a*f;n[0]=l*u,n[4]=-l*f,n[8]=c,n[1]=d+p*c,n[5]=h-_*c,n[9]=-a*l,n[2]=_-h*c,n[6]=p+d*c,n[10]=o*l}else if(e.order==="YXZ"){const h=l*u,d=l*f,p=c*u,_=c*f;n[0]=h+_*a,n[4]=p*a-d,n[8]=o*c,n[1]=o*f,n[5]=o*u,n[9]=-a,n[2]=d*a-p,n[6]=_+h*a,n[10]=o*l}else if(e.order==="ZXY"){const h=l*u,d=l*f,p=c*u,_=c*f;n[0]=h-_*a,n[4]=-o*f,n[8]=p+d*a,n[1]=d+p*a,n[5]=o*u,n[9]=_-h*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const h=o*u,d=o*f,p=a*u,_=a*f;n[0]=l*u,n[4]=p*c-d,n[8]=h*c+_,n[1]=l*f,n[5]=_*c+h,n[9]=d*c-p,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const h=o*l,d=o*c,p=a*l,_=a*c;n[0]=l*u,n[4]=_-h*f,n[8]=p*f+d,n[1]=f,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=d*f+p,n[10]=h-_*f}else if(e.order==="XZY"){const h=o*l,d=o*c,p=a*l,_=a*c;n[0]=l*u,n[4]=-f,n[8]=c*u,n[1]=h*f+_,n[5]=o*u,n[9]=d*f-p,n[2]=p*f-d,n[6]=a*u,n[10]=_*f+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(TY,e,AY)}lookAt(e,n,i){const s=this.elements;return ys.subVectors(e,n),ys.lengthSq()===0&&(ys.z=1),ys.normalize(),jo.crossVectors(i,ys),jo.lengthSq()===0&&(Math.abs(i.z)===1?ys.x+=1e-4:ys.z+=1e-4,ys.normalize(),jo.crossVectors(i,ys)),jo.normalize(),kd.crossVectors(ys,jo),s[0]=jo.x,s[4]=kd.x,s[8]=ys.x,s[1]=jo.y,s[5]=kd.y,s[9]=ys.y,s[2]=jo.z,s[6]=kd.z,s[10]=ys.z,this}multiply(e,n){return n!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,n)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,r=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],f=i[5],h=i[9],d=i[13],p=i[2],_=i[6],m=i[10],v=i[14],g=i[3],b=i[7],y=i[11],w=i[15],x=s[0],S=s[4],T=s[8],A=s[12],C=s[1],k=s[5],L=s[9],F=s[13],U=s[2],N=s[6],B=s[10],W=s[14],ee=s[3],K=s[7],ge=s[11],se=s[15];return r[0]=o*x+a*C+l*U+c*ee,r[4]=o*S+a*k+l*N+c*K,r[8]=o*T+a*L+l*B+c*ge,r[12]=o*A+a*F+l*W+c*se,r[1]=u*x+f*C+h*U+d*ee,r[5]=u*S+f*k+h*N+d*K,r[9]=u*T+f*L+h*B+d*ge,r[13]=u*A+f*F+h*W+d*se,r[2]=p*x+_*C+m*U+v*ee,r[6]=p*S+_*k+m*N+v*K,r[10]=p*T+_*L+m*B+v*ge,r[14]=p*A+_*F+m*W+v*se,r[3]=g*x+b*C+y*U+w*ee,r[7]=g*S+b*k+y*N+w*K,r[11]=g*T+b*L+y*B+w*ge,r[15]=g*A+b*F+y*W+w*se,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],s=e[8],r=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],h=e[10],d=e[14],p=e[3],_=e[7],m=e[11],v=e[15];return p*(+r*l*f-s*c*f-r*a*h+i*c*h+s*a*d-i*l*d)+_*(+n*l*d-n*c*h+r*o*h-s*o*d+s*c*u-r*l*u)+m*(+n*c*f-n*a*d-r*o*f+i*o*d+r*a*u-i*c*u)+v*(-s*a*u-n*l*f+n*a*h+s*o*f-i*o*h+i*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=n,s[14]=i),this}getInverse(e,n){n!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const i=this.elements,s=e.elements,r=s[0],o=s[1],a=s[2],l=s[3],c=s[4],u=s[5],f=s[6],h=s[7],d=s[8],p=s[9],_=s[10],m=s[11],v=s[12],g=s[13],b=s[14],y=s[15],w=p*b*h-g*_*h+g*f*m-u*b*m-p*f*y+u*_*y,x=v*_*h-d*b*h-v*f*m+c*b*m+d*f*y-c*_*y,S=d*g*h-v*p*h+v*u*m-c*g*m-d*u*y+c*p*y,T=v*p*f-d*g*f-v*u*_+c*g*_+d*u*b-c*p*b,A=r*w+o*x+a*S+l*T;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/A;return i[0]=w*C,i[1]=(g*_*l-p*b*l-g*a*m+o*b*m+p*a*y-o*_*y)*C,i[2]=(u*b*l-g*f*l+g*a*h-o*b*h-u*a*y+o*f*y)*C,i[3]=(p*f*l-u*_*l-p*a*h+o*_*h+u*a*m-o*f*m)*C,i[4]=x*C,i[5]=(d*b*l-v*_*l+v*a*m-r*b*m-d*a*y+r*_*y)*C,i[6]=(v*f*l-c*b*l-v*a*h+r*b*h+c*a*y-r*f*y)*C,i[7]=(c*_*l-d*f*l+d*a*h-r*_*h-c*a*m+r*f*m)*C,i[8]=S*C,i[9]=(v*p*l-d*g*l-v*o*m+r*g*m+d*o*y-r*p*y)*C,i[10]=(c*g*l-v*u*l+v*o*h-r*g*h-c*o*y+r*u*y)*C,i[11]=(d*u*l-c*p*l-d*o*h+r*p*h+c*o*m-r*u*m)*C,i[12]=T*C,i[13]=(d*g*a-v*p*a+v*o*_-r*g*_-d*o*b+r*p*b)*C,i[14]=(v*u*a-c*g*a-v*o*f+r*g*f+c*o*b-r*u*b)*C,i[15]=(c*p*a-d*u*a+d*o*f-r*p*f-c*o*_+r*u*_)*C,this}scale(e){const n=this.elements,i=e.x,s=e.y,r=e.z;return n[0]*=i,n[4]*=s,n[8]*=r,n[1]*=i,n[5]*=s,n[9]*=r,n[2]*=i,n[6]*=s,n[10]*=r,n[3]*=i,n[7]*=s,n[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,s))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),s=Math.sin(n),r=1-i,o=e.x,a=e.y,l=e.z,c=r*o,u=r*a;return this.set(c*o+i,c*a-s*l,c*l+s*a,0,c*a+s*l,u*a+i,u*l-s*o,0,c*l-s*a,u*l+s*o,r*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i){return this.set(1,n,i,0,e,1,i,0,e,n,1,0,0,0,0,1),this}compose(e,n,i){const s=this.elements,r=n._x,o=n._y,a=n._z,l=n._w,c=r+r,u=o+o,f=a+a,h=r*c,d=r*u,p=r*f,_=o*u,m=o*f,v=a*f,g=l*c,b=l*u,y=l*f,w=i.x,x=i.y,S=i.z;return s[0]=(1-(_+v))*w,s[1]=(d+y)*w,s[2]=(p-b)*w,s[3]=0,s[4]=(d-y)*x,s[5]=(1-(h+v))*x,s[6]=(m+g)*x,s[7]=0,s[8]=(p+b)*S,s[9]=(m-g)*S,s[10]=(1-(h+_))*S,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,n,i){const s=this.elements;let r=ic.set(s[0],s[1],s[2]).length();const o=ic.set(s[4],s[5],s[6]).length(),a=ic.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],or.copy(this);const c=1/r,u=1/o,f=1/a;return or.elements[0]*=c,or.elements[1]*=c,or.elements[2]*=c,or.elements[4]*=u,or.elements[5]*=u,or.elements[6]*=u,or.elements[8]*=f,or.elements[9]*=f,or.elements[10]*=f,n.setFromRotationMatrix(or),i.x=r,i.y=o,i.z=a,this}makePerspective(e,n,i,s,r,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,l=2*r/(n-e),c=2*r/(i-s),u=(n+e)/(n-e),f=(i+s)/(i-s),h=-(o+r)/(o-r),d=-2*o*r/(o-r);return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,i,s,r,o){const a=this.elements,l=1/(n-e),c=1/(i-s),u=1/(o-r),f=(n+e)*l,h=(i+s)*c,d=(o+r)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<16;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n){n===void 0&&(n=0);for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e,n){e===void 0&&(e=[]),n===void 0&&(n=0);const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const ic=new J,or=new nn,TY=new J(0,0,0),AY=new J(1,1,1),jo=new J,kd=new J,ys=new J;class Wh{constructor(e=0,n=0,i=0,s=Wh.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=n,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,s){return this._x=e,this._y=n,this._z=i,this._order=s||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n,i){const s=Zt.clamp,r=e.elements,o=r[0],a=r[4],l=r[8],c=r[1],u=r[5],f=r[9],h=r[2],d=r[6],p=r[10];switch(n=n||this._order,n){case"XYZ":this._y=Math.asin(s(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-s(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(s(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-s(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(s(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-s(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-f,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i!==!1&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return HM.makeRotationFromQuaternion(e),this.setFromRotationMatrix(HM,n,i)}setFromVector3(e,n){return this.set(e.x,e.y,e.z,n||this._order)}reorder(e){return VM.setFromEuler(this),this.setFromQuaternion(VM,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new J(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Wh.DefaultOrder="XYZ";Wh.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const HM=new nn,VM=new Hi;class Lk{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}}let kY=0;const GM=new J,sc=new Hi,co=new nn,Cd=new J,Vu=new J,CY=new J,LY=new Hi,WM=new J(1,0,0),jM=new J(0,1,0),YM=new J(0,0,1),PY={type:"added"},RY={type:"removed"};function kt(){Object.defineProperty(this,"id",{value:kY++}),this.uuid=Zt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=kt.DefaultUp.clone();const t=new J,e=new Wh,n=new Hi,i=new J(1,1,1);function s(){n.setFromEuler(e,!1)}function r(){e.setFromQuaternion(n,void 0,!1)}e._onChange(s),n._onChange(r),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new nn},normalMatrix:{value:new fs}}),this.matrix=new nn,this.matrixWorld=new nn,this.matrixAutoUpdate=kt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Lk,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}kt.DefaultUp=new J(0,1,0);kt.DefaultMatrixAutoUpdate=!0;kt.prototype=Object.assign(Object.create(io.prototype),{constructor:kt,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return sc.setFromAxisAngle(t,e),this.quaternion.multiply(sc),this},rotateOnWorldAxis:function(t,e){return sc.setFromAxisAngle(t,e),this.quaternion.premultiply(sc),this},rotateX:function(t){return this.rotateOnAxis(WM,t)},rotateY:function(t){return this.rotateOnAxis(jM,t)},rotateZ:function(t){return this.rotateOnAxis(YM,t)},translateOnAxis:function(t,e){return GM.copy(t).applyQuaternion(this.quaternion),this.position.add(GM.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(WM,t)},translateY:function(t){return this.translateOnAxis(jM,t)},translateZ:function(t){return this.translateOnAxis(YM,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(co.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?Cd.copy(t):Cd.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Vu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?co.lookAt(Vu,Cd,this.up):co.lookAt(Cd,Vu,this.up),this.quaternion.setFromRotationMatrix(co),i&&(co.extractRotation(i.matrixWorld),sc.setFromRotationMatrix(co),this.quaternion.premultiply(sc.inverse()))},add:function(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(PY)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(RY)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),co.getInverse(this.matrixWorld),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),co.multiply(t.parent.matrixWorld)),t.applyMatrix4(co),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const r=this.children[n].getObjectByProperty(t,e);if(r!==void 0)return r}},getWorldPosition:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new J),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Hi),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Vu,t,CY),t},getWorldScale:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new J),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Vu,LY,t),t},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new J),this.updateMatrixWorld(!0);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)},traverseAncestors:function(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const i=this.children;for(let s=0,r=i.length;s<r;s++)i[s].updateWorldMatrix(!1,!0)}},toJSON:function(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON());function s(o,a){return o[a.uuid]===void 0&&(o[a.uuid]=a.toJSON(t)),a.uuid}if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(t.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const a=o.shapes;if(Array.isArray(a))for(let l=0,c=a.length;l<c;l++){const u=a[l];s(t.shapes,u)}else s(t.shapes,a)}}if(this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let a=0,l=this.material.length;a<l;a++)o.push(s(t.materials,this.material[a]));i.material=o}else i.material=s(t.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(t).object)}if(e){const o=r(t.geometries),a=r(t.materials),l=r(t.textures),c=r(t.images),u=r(t.shapes);o.length>0&&(n.geometries=o),a.length>0&&(n.materials=a),l.length>0&&(n.textures=l),c.length>0&&(n.images=c),u.length>0&&(n.shapes=u)}return n.object=i,n;function r(o){const a=[];for(const l in o){const c=o[l];delete c.metadata,a.push(c)}return a}},clone:function(t){return new this.constructor().copy(this,t)},copy:function(t,e){if(e===void 0&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const i=t.children[n];this.add(i.clone())}return this}});const U0=new J,DY=new J,OY=new fs;class vo{constructor(e,n){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=e!==void 0?e:new J(1,0,0),this.constant=n!==void 0?n:0}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,s){return this.normal.set(e,n,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const s=U0.subVectors(i,n).cross(DY.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}clone(){return new this.constructor().copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),n=new J),n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){n===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new J);const i=e.delta(U0),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):void 0;const r=-(e.start.dot(this.normal)+this.constant)/s;if(!(r<0||r>1))return n.copy(i).multiplyScalar(r).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new J),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||OY.getNormalMatrix(e),s=this.coplanarPoint(U0).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}const ar=new J,uo=new J,H0=new J,fo=new J,rc=new J,oc=new J,qM=new J,V0=new J,G0=new J,W0=new J;class Qi{constructor(e,n,i){this.a=e!==void 0?e:new J,this.b=n!==void 0?n:new J,this.c=i!==void 0?i:new J}static getNormal(e,n,i,s){s===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),s=new J),s.subVectors(i,n),ar.subVectors(e,n),s.cross(ar);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,n,i,s,r){ar.subVectors(s,n),uo.subVectors(i,n),H0.subVectors(e,n);const o=ar.dot(ar),a=ar.dot(uo),l=ar.dot(H0),c=uo.dot(uo),u=uo.dot(H0),f=o*c-a*a;if(r===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new J),f===0)return r.set(-2,-1,-1);const h=1/f,d=(c*l-a*u)*h,p=(o*u-a*l)*h;return r.set(1-d-p,p,d)}static containsPoint(e,n,i,s){return this.getBarycoord(e,n,i,s,fo),fo.x>=0&&fo.y>=0&&fo.x+fo.y<=1}static getUV(e,n,i,s,r,o,a,l){return this.getBarycoord(e,n,i,s,fo),l.set(0,0),l.addScaledVector(r,fo.x),l.addScaledVector(o,fo.y),l.addScaledVector(a,fo.z),l}static isFrontFacing(e,n,i,s){return ar.subVectors(i,n),uo.subVectors(e,n),ar.cross(uo).dot(s)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,s){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[s]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ar.subVectors(this.c,this.b),uo.subVectors(this.a,this.b),ar.cross(uo).length()*.5}getMidpoint(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new J),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Qi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new vo),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Qi.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,s,r){return Qi.getUV(e,this.a,this.b,this.c,n,i,s,r)}containsPoint(e){return Qi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Qi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){n===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),n=new J);const i=this.a,s=this.b,r=this.c;let o,a;rc.subVectors(s,i),oc.subVectors(r,i),V0.subVectors(e,i);const l=rc.dot(V0),c=oc.dot(V0);if(l<=0&&c<=0)return n.copy(i);G0.subVectors(e,s);const u=rc.dot(G0),f=oc.dot(G0);if(u>=0&&f<=u)return n.copy(s);const h=l*f-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(i).addScaledVector(rc,o);W0.subVectors(e,r);const d=rc.dot(W0),p=oc.dot(W0);if(p>=0&&d<=p)return n.copy(r);const _=d*c-l*p;if(_<=0&&c>=0&&p<=0)return a=c/(c-p),n.copy(i).addScaledVector(oc,a);const m=u*p-d*f;if(m<=0&&f-u>=0&&d-p>=0)return qM.subVectors(r,s),a=(f-u)/(f-u+(d-p)),n.copy(s).addScaledVector(qM,a);const v=1/(m+_+h);return o=_*v,a=h*v,n.copy(i).addScaledVector(rc,o).addScaledVector(oc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Pk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},lr={h:0,s:0,l:0},Ld={h:0,s:0,l:0};function j0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function Y0(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function q0(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}class Mt{constructor(e,n,i){return Object.defineProperty(this,"isColor",{value:!0}),n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,n,i){return this.r=e,this.g=n,this.b=i,this}setHSL(e,n,i){if(e=Zt.euclideanModulo(e,1),n=Zt.clamp(n,0,1),i=Zt.clamp(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,r=2*i-s;this.r=j0(r,s,e+1/3),this.g=j0(r,s,e),this.b=j0(r,s,e-1/3)}return this}setStyle(e){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){let s;const r=i[1],o=i[2];switch(r){case"rgb":case"rgba":if(s=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,n(s[5]),this;if(s=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,n(s[5]),this;break;case"hsl":case"hsla":if(s=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){const a=parseFloat(s[1])/360,l=parseInt(s[2],10)/100,c=parseInt(s[3],10)/100;return n(s[5]),this.setHSL(a,l,c)}break}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(e)){const s=i[1],r=s.length;if(r===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,this;if(r===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const n=Pk[e];return n!==void 0?this.setHex(n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,n){return n===void 0&&(n=2),this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}copyLinearToGamma(e,n){n===void 0&&(n=2);const i=n>0?1/n:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=Y0(e.r),this.g=Y0(e.g),this.b=Y0(e.b),this}copyLinearToSRGB(e){return this.r=q0(e.r),this.g=q0(e.g),this.b=q0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const n=this.r,i=this.g,s=this.b,r=Math.max(n,i,s),o=Math.min(n,i,s);let a,l;const c=(o+r)/2;if(o===r)a=0,l=0;else{const u=r-o;switch(l=c<=.5?u/(r+o):u/(2-r-o),r){case n:a=(i-s)/u+(i<s?6:0);break;case i:a=(s-n)/u+2;break;case s:a=(n-i)/u+4;break}a/=6}return e.h=a,e.s=l,e.l=c,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,n,i){return this.getHSL(lr),lr.h+=e,lr.s+=n,lr.l+=i,this.setHSL(lr.h,lr.s,lr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpHSL(e,n){this.getHSL(lr),e.getHSL(Ld);const i=Zt.lerp(lr.h,Ld.h,n),s=Zt.lerp(lr.s,Ld.s,n),r=Zt.lerp(lr.l,Ld.l,n);return this.setHSL(i,s,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n){return n===void 0&&(n=0),this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Mt.NAMES=Pk;Mt.prototype.r=1;Mt.prototype.g=1;Mt.prototype.b=1;class ch{constructor(e,n,i,s,r,o){this.a=e,this.b=n,this.c=i,this.normal=s&&s.isVector3?s:new J,this.vertexNormals=Array.isArray(s)?s:[],this.color=r&&r.isColor?r:new Mt,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=o!==void 0?o:0}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let n=0,i=e.vertexNormals.length;n<i;n++)this.vertexNormals[n]=e.vertexNormals[n].clone();for(let n=0,i=e.vertexColors.length;n<i;n++)this.vertexColors[n]=e.vertexColors[n].clone();return this}}let IY=0;function Dt(){Object.defineProperty(this,"id",{value:IY++}),this.uuid=Zt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Ef,this.side=Pg,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Ek,this.blendDst=Tk,this.blendEquation=bc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=v_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=MY,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=D0,this.stencilZFail=D0,this.stencilZPass=D0,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Dt.prototype=Object.assign(Object.create(io.prototype),{constructor:Dt,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Sk;continue}const i=this[e];if(i===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n}},toJSON:function(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,this.combine!==void 0&&(n.combine=this.combine),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Ef&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==Pg&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.morphNormals===!0&&(n.morphNormals=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function i(s){const r=[];for(const o in s){const a=s[o];delete a.metadata,r.push(a)}return r}if(e){const s=i(t.textures),r=i(t.images);s.length>0&&(n.textures=s),r.length>0&&(n.images=r)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const i=e.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Dt.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});function Xr(t){Dt.call(this),this.type="MeshBasicMaterial",this.color=new Mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}Xr.prototype=Object.create(Dt.prototype);Xr.prototype.constructor=Xr;Xr.prototype.isMeshBasicMaterial=!0;Xr.prototype.copy=function(t){return Dt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};const Fn=new J,Pd=new We;function zt(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n===!0,this.usage=Bg,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(zt.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});Object.assign(zt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new Mt),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this},copyVector2sArray:function(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new We),e[n++]=r.x,e[n++]=r.y}return this},copyVector3sArray:function(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new J),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this},copyVector4sArray:function(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new On),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this},applyMatrix3:function(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)Pd.fromBufferAttribute(this,e),Pd.applyMatrix3(t),this.setXY(e,Pd.x,Pd.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)Fn.fromBufferAttribute(this,e),Fn.applyMatrix3(t),this.setXYZ(e,Fn.x,Fn.y,Fn.z);return this},applyMatrix4:function(t){for(let e=0,n=this.count;e<n;e++)Fn.x=this.getX(e),Fn.y=this.getY(e),Fn.z=this.getZ(e),Fn.applyMatrix4(t),this.setXYZ(e,Fn.x,Fn.y,Fn.z);return this},applyNormalMatrix:function(t){for(let e=0,n=this.count;e<n;e++)Fn.x=this.getX(e),Fn.y=this.getY(e),Fn.z=this.getZ(e),Fn.applyNormalMatrix(t),this.setXYZ(e,Fn.x,Fn.y,Fn.z);return this},transformDirection:function(t){for(let e=0,n=this.count;e<n;e++)Fn.x=this.getX(e),Fn.y=this.getY(e),Fn.z=this.getZ(e),Fn.transformDirection(t),this.setXYZ(e,Fn.x,Fn.y,Fn.z);return this},set:function(t,e){return e===void 0&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,s){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=s,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function M_(t,e,n){zt.call(this,new Int8Array(t),e,n)}M_.prototype=Object.create(zt.prototype);M_.prototype.constructor=M_;function S_(t,e,n){zt.call(this,new Uint8Array(t),e,n)}S_.prototype=Object.create(zt.prototype);S_.prototype.constructor=S_;function E_(t,e,n){zt.call(this,new Uint8ClampedArray(t),e,n)}E_.prototype=Object.create(zt.prototype);E_.prototype.constructor=E_;function T_(t,e,n){zt.call(this,new Int16Array(t),e,n)}T_.prototype=Object.create(zt.prototype);T_.prototype.constructor=T_;function uh(t,e,n){zt.call(this,new Uint16Array(t),e,n)}uh.prototype=Object.create(zt.prototype);uh.prototype.constructor=uh;function A_(t,e,n){zt.call(this,new Int32Array(t),e,n)}A_.prototype=Object.create(zt.prototype);A_.prototype.constructor=A_;function fh(t,e,n){zt.call(this,new Uint32Array(t),e,n)}fh.prototype=Object.create(zt.prototype);fh.prototype.constructor=fh;function St(t,e,n){zt.call(this,new Float32Array(t),e,n)}St.prototype=Object.create(zt.prototype);St.prototype.constructor=St;function k_(t,e,n){zt.call(this,new Float64Array(t),e,n)}k_.prototype=Object.create(zt.prototype);k_.prototype.constructor=k_;class NY{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){const n=[];let i,s,r;const o=e.faces;for(s=0;s<o.length;s++){const a=o[s];a.materialIndex!==r&&(r=a.materialIndex,i!==void 0&&(i.count=s*3-i.start,n.push(i)),i={start:s*3,materialIndex:r})}i!==void 0&&(i.count=s*3-i.start,n.push(i)),this.groups=n}fromGeometry(e){const n=e.faces,i=e.vertices,s=e.faceVertexUvs,r=s[0]&&s[0].length>0,o=s[1]&&s[1].length>0,a=e.morphTargets,l=a.length;let c;if(l>0){c=[];for(let v=0;v<l;v++)c[v]={name:a[v].name,data:[]};this.morphTargets.position=c}const u=e.morphNormals,f=u.length;let h;if(f>0){h=[];for(let v=0;v<f;v++)h[v]={name:u[v].name,data:[]};this.morphTargets.normal=h}const d=e.skinIndices,p=e.skinWeights,_=d.length===i.length,m=p.length===i.length;i.length>0&&n.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let v=0;v<n.length;v++){const g=n[v];this.vertices.push(i[g.a],i[g.b],i[g.c]);const b=g.vertexNormals;if(b.length===3)this.normals.push(b[0],b[1],b[2]);else{const w=g.normal;this.normals.push(w,w,w)}const y=g.vertexColors;if(y.length===3)this.colors.push(y[0],y[1],y[2]);else{const w=g.color;this.colors.push(w,w,w)}if(r===!0){const w=s[0][v];w!==void 0?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",v),this.uvs.push(new We,new We,new We))}if(o===!0){const w=s[1][v];w!==void 0?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",v),this.uvs2.push(new We,new We,new We))}for(let w=0;w<l;w++){const x=a[w].vertices;c[w].data.push(x[g.a],x[g.b],x[g.c])}for(let w=0;w<f;w++){const x=u[w].vertexNormals[v];h[w].data.push(x.a,x.b,x.c)}_&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),m&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}}function Rk(t){if(t.length===0)return-1/0;let e=t[0];for(let n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}let BY=1;const Or=new nn,X0=new kt,ac=new J,ws=new zo,Gu=new zo,Ei=new J;function Qt(){Object.defineProperty(this,"id",{value:BY+=2}),this.uuid=Zt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Qt.prototype=Object.assign(Object.create(io.prototype),{constructor:Qt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(Rk(t)>65535?fh:uh)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:n!==void 0?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new fs().getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(t){return Or.makeRotationX(t),this.applyMatrix4(Or),this},rotateY:function(t){return Or.makeRotationY(t),this.applyMatrix4(Or),this},rotateZ:function(t){return Or.makeRotationZ(t),this.applyMatrix4(Or),this},translate:function(t,e,n){return Or.makeTranslation(t,e,n),this.applyMatrix4(Or),this},scale:function(t,e,n){return Or.makeScale(t,e,n),this.applyMatrix4(Or),this},lookAt:function(t){return X0.lookAt(t),X0.updateMatrix(),this.applyMatrix4(X0.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ac).negate(),this.translate(ac.x,ac.y,ac.z),this},setFromObject:function(t){const e=t.geometry;if(t.isPoints||t.isLine){const n=new St(e.vertices.length*3,3),i=new St(e.colors.length*3,3);if(this.setAttribute("position",n.copyVector3sArray(e.vertices)),this.setAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){const s=new St(e.lineDistances.length,1);this.setAttribute("lineDistance",s.copyArray(e.lineDistances))}e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){const e=[];for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new St(e,3)),this},updateFromObject:function(t){let e=t.geometry;if(t.isMesh){let n=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(n=void 0,e.elementsNeedUpdate=!1),n===void 0)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}if(e.verticesNeedUpdate===!0){const n=this.attributes.position;n!==void 0&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1}if(e.normalsNeedUpdate===!0){const n=this.attributes.normal;n!==void 0&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1}if(e.colorsNeedUpdate===!0){const n=this.attributes.color;n!==void 0&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){const n=this.attributes.uv;n!==void 0&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){const n=this.attributes.lineDistance;n!==void 0&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=new NY().fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){const e=new Float32Array(t.vertices.length*3);if(this.setAttribute("position",new zt(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){const n=new Float32Array(t.normals.length*3);this.setAttribute("normal",new zt(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){const n=new Float32Array(t.colors.length*3);this.setAttribute("color",new zt(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){const n=new Float32Array(t.uvs.length*2);this.setAttribute("uv",new zt(n,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){const n=new Float32Array(t.uvs2.length*2);this.setAttribute("uv2",new zt(n,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(const n in t.morphTargets){const i=[],s=t.morphTargets[n];for(let r=0,o=s.length;r<o;r++){const a=s[r],l=new St(a.data.length*3,3);l.name=a.name,i.push(l.copyVector3sArray(a.data))}this.morphAttributes[n]=i}if(t.skinIndices.length>0){const n=new St(t.skinIndices.length*4,4);this.setAttribute("skinIndex",n.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){const n=new St(t.skinWeights.length*4,4);this.setAttribute("skinWeight",n.copyVector4sArray(t.skinWeights))}return t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new zo);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,i=e.length;n<i;n++){const s=e[n];ws.setFromBufferAttribute(s),this.morphTargetsRelative?(Ei.addVectors(this.boundingBox.min,ws.min),this.boundingBox.expandByPoint(Ei),Ei.addVectors(this.boundingBox.max,ws.max),this.boundingBox.expandByPoint(Ei)):(this.boundingBox.expandByPoint(ws.min),this.boundingBox.expandByPoint(ws.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Ba);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new J,1/0);return}if(t){const n=this.boundingSphere.center;if(ws.setFromBufferAttribute(t),e)for(let s=0,r=e.length;s<r;s++){const o=e[s];Gu.setFromBufferAttribute(o),this.morphTargetsRelative?(Ei.addVectors(ws.min,Gu.min),ws.expandByPoint(Ei),Ei.addVectors(ws.max,Gu.max),ws.expandByPoint(Ei)):(ws.expandByPoint(Gu.min),ws.expandByPoint(Gu.max))}ws.getCenter(n);let i=0;for(let s=0,r=t.count;s<r;s++)Ei.fromBufferAttribute(t,s),i=Math.max(i,n.distanceToSquared(Ei));if(e)for(let s=0,r=e.length;s<r;s++){const o=e[s],a=this.morphTargetsRelative;for(let l=0,c=o.count;l<c;l++)Ei.fromBufferAttribute(o,l),a&&(ac.fromBufferAttribute(t,l),Ei.add(ac)),i=Math.max(i,n.distanceToSquared(Ei))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new zt(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let f=0,h=n.count;f<h;f++)n.setXYZ(f,0,0,0);const i=new J,s=new J,r=new J,o=new J,a=new J,l=new J,c=new J,u=new J;if(t)for(let f=0,h=t.count;f<h;f+=3){const d=t.getX(f+0),p=t.getX(f+1),_=t.getX(f+2);i.fromBufferAttribute(e,d),s.fromBufferAttribute(e,p),r.fromBufferAttribute(e,_),c.subVectors(r,s),u.subVectors(i,s),c.cross(u),o.fromBufferAttribute(n,d),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,_),o.add(c),a.add(c),l.add(c),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(_,l.x,l.y,l.z)}else for(let f=0,h=e.count;f<h;f+=3)i.fromBufferAttribute(e,f+0),s.fromBufferAttribute(e,f+1),r.fromBufferAttribute(e,f+2),c.subVectors(r,s),u.subVectors(i,s),c.cross(u),n.setXYZ(f+0,c.x,c.y,c.z),n.setXYZ(f+1,c.x,c.y,c.z),n.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(t.attributes[i]===void 0)continue;const r=n[i].array,o=t.attributes[i],a=o.array,l=o.itemSize*e,c=Math.min(a.length,r.length-l);for(let u=0,f=l;u<c;u++,f++)r[f]=a[u]}return this},normalizeNormals:function(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Ei.fromBufferAttribute(t,e),Ei.normalize(),t.setXYZ(e,Ei.x,Ei.y,Ei.z)},toNonIndexed:function(){function t(o,a){const l=o.array,c=o.itemSize,u=o.normalized,f=new l.constructor(a.length*c);let h=0,d=0;for(let p=0,_=a.length;p<_;p++){h=a[p]*c;for(let m=0;m<c;m++)f[d++]=l[h++]}return new zt(f,c,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const e=new Qt,n=this.index.array,i=this.attributes;for(const o in i){const a=i[o],l=t(a,n);e.setAttribute(o,l)}const s=this.morphAttributes;for(const o in s){const a=[],l=s[o];for(let c=0,u=l.length;c<u;c++){const f=l[c],h=t(f,n);a.push(h)}e.morphAttributes[o]=a}e.morphTargetsRelative=this.morphTargetsRelative;const r=this.groups;for(let o=0,a=r.length;o<a;o++){const l=r[o];e.addGroup(l.start,l.count,l.materialIndex)}return e},toJSON:function(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const a=this.parameters;for(const l in a)a[l]!==void 0&&(t[l]=a[l]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const a in n){const l=n[a],c=l.toJSON(t.data);l.name!==""&&(c.name=l.name),t.data.attributes[a]=c}const i={};let s=!1;for(const a in this.morphAttributes){const l=this.morphAttributes[a],c=[];for(let u=0,f=l.length;u<f;u++){const h=l[u],d=h.toJSON(t.data);h.name!==""&&(d.name=h.name),c.push(d)}c.length>0&&(i[a]=c,s=!0)}s&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const r=this.groups;r.length>0&&(t.data.groups=JSON.parse(JSON.stringify(r)));const o=this.boundingSphere;return o!==null&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t},clone:function(){return new Qt().copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone(e));const i=t.attributes;for(const l in i){const c=i[l];this.setAttribute(l,c.clone(e))}const s=t.morphAttributes;for(const l in s){const c=[],u=s[l];for(let f=0,h=u.length;f<h;f++)c.push(u[f].clone(e));this.morphAttributes[l]=c}this.morphTargetsRelative=t.morphTargetsRelative;const r=t.groups;for(let l=0,c=r.length;l<c;l++){const u=r[l];this.addGroup(u.start,u.count,u.materialIndex)}const o=t.boundingBox;o!==null&&(this.boundingBox=o.clone());const a=t.boundingSphere;return a!==null&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const XM=new nn,ja=new Gh,Z0=new Ba,Yo=new J,qo=new J,Xo=new J,J0=new J,K0=new J,$0=new J,Rd=new J,Dd=new J,Od=new J,Cc=new We,Lc=new We,Pc=new We,kf=new J,Id=new J;function xi(t,e){kt.call(this),this.type="Mesh",this.geometry=t!==void 0?t:new Qt,this.material=e!==void 0?e:new Xr,this.updateMorphTargets()}xi.prototype=Object.assign(Object.create(kt.prototype),{constructor:xi,isMesh:!0,copy:function(t){return kt.prototype.copy.call(this,t),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=i.length;s<r;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){const n=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),Z0.copy(n.boundingSphere),Z0.applyMatrix4(s),t.ray.intersectsSphere(Z0)===!1)||(XM.getInverse(s),ja.copy(t.ray).applyMatrix4(XM),n.boundingBox!==null&&ja.intersectsBox(n.boundingBox)===!1))return;let r;if(n.isBufferGeometry){const o=n.index,a=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,u=n.attributes.uv,f=n.attributes.uv2,h=n.groups,d=n.drawRange;if(o!==null)if(Array.isArray(i))for(let p=0,_=h.length;p<_;p++){const m=h[p],v=i[m.materialIndex],g=Math.max(m.start,d.start),b=Math.min(m.start+m.count,d.start+d.count);for(let y=g,w=b;y<w;y+=3){const x=o.getX(y),S=o.getX(y+1),T=o.getX(y+2);r=Nd(this,v,t,ja,a,l,c,u,f,x,S,T),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=m.materialIndex,e.push(r))}}else{const p=Math.max(0,d.start),_=Math.min(o.count,d.start+d.count);for(let m=p,v=_;m<v;m+=3){const g=o.getX(m),b=o.getX(m+1),y=o.getX(m+2);r=Nd(this,i,t,ja,a,l,c,u,f,g,b,y),r&&(r.faceIndex=Math.floor(m/3),e.push(r))}}else if(a!==void 0)if(Array.isArray(i))for(let p=0,_=h.length;p<_;p++){const m=h[p],v=i[m.materialIndex],g=Math.max(m.start,d.start),b=Math.min(m.start+m.count,d.start+d.count);for(let y=g,w=b;y<w;y+=3){const x=y,S=y+1,T=y+2;r=Nd(this,v,t,ja,a,l,c,u,f,x,S,T),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=m.materialIndex,e.push(r))}}else{const p=Math.max(0,d.start),_=Math.min(a.count,d.start+d.count);for(let m=p,v=_;m<v;m+=3){const g=m,b=m+1,y=m+2;r=Nd(this,i,t,ja,a,l,c,u,f,g,b,y),r&&(r.faceIndex=Math.floor(m/3),e.push(r))}}}else if(n.isGeometry){const o=Array.isArray(i),a=n.vertices,l=n.faces;let c;const u=n.faceVertexUvs[0];u.length>0&&(c=u);for(let f=0,h=l.length;f<h;f++){const d=l[f],p=o?i[d.materialIndex]:i;if(p===void 0)continue;const _=a[d.a],m=a[d.b],v=a[d.c];if(r=Dk(this,p,t,ja,_,m,v,kf),r){if(c&&c[f]){const g=c[f];Cc.copy(g[0]),Lc.copy(g[1]),Pc.copy(g[2]),r.uv=Qi.getUV(kf,_,m,v,Cc,Lc,Pc,new We)}r.face=d,r.faceIndex=f,e.push(r)}}}}});function Dk(t,e,n,i,s,r,o,a){let l;if(e.side===Di?l=i.intersectTriangle(o,r,s,!0,a):l=i.intersectTriangle(s,r,o,e.side!==wl,a),l===null)return null;Id.copy(a),Id.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Id);return c<n.near||c>n.far?null:{distance:c,point:Id.clone(),object:t}}function Nd(t,e,n,i,s,r,o,a,l,c,u,f){Yo.fromBufferAttribute(s,c),qo.fromBufferAttribute(s,u),Xo.fromBufferAttribute(s,f);const h=t.morphTargetInfluences;if(e.morphTargets&&r&&h){Rd.set(0,0,0),Dd.set(0,0,0),Od.set(0,0,0);for(let p=0,_=r.length;p<_;p++){const m=h[p],v=r[p];m!==0&&(J0.fromBufferAttribute(v,c),K0.fromBufferAttribute(v,u),$0.fromBufferAttribute(v,f),o?(Rd.addScaledVector(J0,m),Dd.addScaledVector(K0,m),Od.addScaledVector($0,m)):(Rd.addScaledVector(J0.sub(Yo),m),Dd.addScaledVector(K0.sub(qo),m),Od.addScaledVector($0.sub(Xo),m)))}Yo.add(Rd),qo.add(Dd),Xo.add(Od)}t.isSkinnedMesh&&(t.boneTransform(c,Yo),t.boneTransform(u,qo),t.boneTransform(f,Xo));const d=Dk(t,e,n,i,Yo,qo,Xo,kf);if(d){a&&(Cc.fromBufferAttribute(a,c),Lc.fromBufferAttribute(a,u),Pc.fromBufferAttribute(a,f),d.uv=Qi.getUV(kf,Yo,qo,Xo,Cc,Lc,Pc,new We)),l&&(Cc.fromBufferAttribute(l,c),Lc.fromBufferAttribute(l,u),Pc.fromBufferAttribute(l,f),d.uv2=Qi.getUV(kf,Yo,qo,Xo,Cc,Lc,Pc,new We));const p=new ch(c,u,f);Qi.getNormal(Yo,qo,Xo,p.normal),d.face=p}return d}let FY=0;const Ir=new nn,Q0=new kt,Bd=new J;function An(){Object.defineProperty(this,"id",{value:FY+=2}),this.uuid=Zt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}An.prototype=Object.assign(Object.create(io.prototype),{constructor:An,isGeometry:!0,applyMatrix4:function(t){const e=new fs().getNormalMatrix(t);for(let n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(t);for(let n=0,i=this.faces.length;n<i;n++){const s=this.faces[n];s.normal.applyMatrix3(e).normalize();for(let r=0,o=s.vertexNormals.length;r<o;r++)s.vertexNormals[r].applyMatrix3(e).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Ir.makeRotationX(t),this.applyMatrix4(Ir),this},rotateY:function(t){return Ir.makeRotationY(t),this.applyMatrix4(Ir),this},rotateZ:function(t){return Ir.makeRotationZ(t),this.applyMatrix4(Ir),this},translate:function(t,e,n){return Ir.makeTranslation(t,e,n),this.applyMatrix4(Ir),this},scale:function(t,e,n){return Ir.makeScale(t,e,n),this.applyMatrix4(Ir),this},lookAt:function(t){return Q0.lookAt(t),Q0.updateMatrix(),this.applyMatrix4(Q0.matrix),this},fromBufferGeometry:function(t){const e=this,n=t.index!==null?t.index:void 0,i=t.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const s=i.position,r=i.normal,o=i.color,a=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let f=0;f<s.count;f++)e.vertices.push(new J().fromBufferAttribute(s,f)),o!==void 0&&e.colors.push(new Mt().fromBufferAttribute(o,f));function c(f,h,d,p){const _=o===void 0?[]:[e.colors[f].clone(),e.colors[h].clone(),e.colors[d].clone()],m=r===void 0?[]:[new J().fromBufferAttribute(r,f),new J().fromBufferAttribute(r,h),new J().fromBufferAttribute(r,d)],v=new ch(f,h,d,m,_,p);e.faces.push(v),a!==void 0&&e.faceVertexUvs[0].push([new We().fromBufferAttribute(a,f),new We().fromBufferAttribute(a,h),new We().fromBufferAttribute(a,d)]),l!==void 0&&e.faceVertexUvs[1].push([new We().fromBufferAttribute(l,f),new We().fromBufferAttribute(l,h),new We().fromBufferAttribute(l,d)])}const u=t.groups;if(u.length>0)for(let f=0;f<u.length;f++){const h=u[f],d=h.start,p=h.count;for(let _=d,m=d+p;_<m;_+=3)n!==void 0?c(n.getX(_),n.getX(_+1),n.getX(_+2),h.materialIndex):c(_,_+1,_+2,h.materialIndex)}else if(n!==void 0)for(let f=0;f<n.count;f+=3)c(n.getX(f),n.getX(f+1),n.getX(f+2));else for(let f=0;f<s.count;f+=3)c(f,f+1,f+2);return this.computeFaceNormals(),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Bd).negate(),this.translate(Bd.x,Bd.y,Bd.z),this},normalize:function(){this.computeBoundingSphere();const t=this.boundingSphere.center,e=this.boundingSphere.radius,n=e===0?1:1/e,i=new nn;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){const t=new J,e=new J;for(let n=0,i=this.faces.length;n<i;n++){const s=this.faces[n],r=this.vertices[s.a],o=this.vertices[s.b],a=this.vertices[s.c];t.subVectors(a,o),e.subVectors(r,o),t.cross(e),t.normalize(),s.normal.copy(t)}},computeVertexNormals:function(t){t===void 0&&(t=!0);const e=new Array(this.vertices.length);for(let n=0,i=this.vertices.length;n<i;n++)e[n]=new J;if(t){const n=new J,i=new J;for(let s=0,r=this.faces.length;s<r;s++){const o=this.faces[s],a=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c];n.subVectors(c,l),i.subVectors(a,l),n.cross(i),e[o.a].add(n),e[o.b].add(n),e[o.c].add(n)}}else{this.computeFaceNormals();for(let n=0,i=this.faces.length;n<i;n++){const s=this.faces[n];e[s.a].add(s.normal),e[s.b].add(s.normal),e[s.c].add(s.normal)}}for(let n=0,i=this.vertices.length;n<i;n++)e[n].normalize();for(let n=0,i=this.faces.length;n<i;n++){const s=this.faces[n],r=s.vertexNormals;r.length===3?(r[0].copy(e[s.a]),r[1].copy(e[s.b]),r[2].copy(e[s.c])):(r[0]=e[s.a].clone(),r[1]=e[s.b].clone(),r[2]=e[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let t=0,e=this.faces.length;t<e;t++){const n=this.faces[t],i=n.vertexNormals;i.length===3?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let e=0,n=this.faces.length;e<n;e++){const i=this.faces[e];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let s=0,r=i.vertexNormals.length;s<r;s++)i.__originalVertexNormals[s]?i.__originalVertexNormals[s].copy(i.vertexNormals[s]):i.__originalVertexNormals[s]=i.vertexNormals[s].clone()}const t=new An;t.faces=this.faces;for(let e=0,n=this.morphTargets.length;e<n;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];const s=this.morphNormals[e].faceNormals,r=this.morphNormals[e].vertexNormals;for(let o=0,a=this.faces.length;o<a;o++){const l=new J,c={a:new J,b:new J,c:new J};s.push(l),r.push(c)}}const i=this.morphNormals[e];t.vertices=this.morphTargets[e].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let s=0,r=this.faces.length;s<r;s++){const o=this.faces[s],a=i.faceNormals[s],l=i.vertexNormals[s];a.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let e=0,n=this.faces.length;e<n;e++){const i=this.faces[e];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new zo),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Ba),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(!(t&&t.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);return}let i;const s=this.vertices.length,r=this.vertices,o=t.vertices,a=this.faces,l=t.faces,c=this.colors,u=t.colors;n===void 0&&(n=0),e!==void 0&&(i=new fs().getNormalMatrix(e));for(let f=0,h=o.length;f<h;f++){const p=o[f].clone();e!==void 0&&p.applyMatrix4(e),r.push(p)}for(let f=0,h=u.length;f<h;f++)c.push(u[f].clone());for(let f=0,h=l.length;f<h;f++){const d=l[f];let p,_;const m=d.vertexNormals,v=d.vertexColors,g=new ch(d.a+s,d.b+s,d.c+s);g.normal.copy(d.normal),i!==void 0&&g.normal.applyMatrix3(i).normalize();for(let b=0,y=m.length;b<y;b++)p=m[b].clone(),i!==void 0&&p.applyMatrix3(i).normalize(),g.vertexNormals.push(p);g.color.copy(d.color);for(let b=0,y=v.length;b<y;b++)_=v[b],g.vertexColors.push(_.clone());g.materialIndex=d.materialIndex+n,a.push(g)}for(let f=0,h=t.faceVertexUvs.length;f<h;f++){const d=t.faceVertexUvs[f];this.faceVertexUvs[f]===void 0&&(this.faceVertexUvs[f]=[]);for(let p=0,_=d.length;p<_;p++){const m=d[p],v=[];for(let g=0,b=m.length;g<b;g++)v.push(m[g].clone());this.faceVertexUvs[f].push(v)}}},mergeMesh:function(t){if(!(t&&t.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);return}t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)},mergeVertices:function(){const t={},e=[],n=[],s=Math.pow(10,4);for(let a=0,l=this.vertices.length;a<l;a++){const c=this.vertices[a],u=Math.round(c.x*s)+"_"+Math.round(c.y*s)+"_"+Math.round(c.z*s);t[u]===void 0?(t[u]=a,e.push(this.vertices[a]),n[a]=e.length-1):n[a]=n[t[u]]}const r=[];for(let a=0,l=this.faces.length;a<l;a++){const c=this.faces[a];c.a=n[c.a],c.b=n[c.b],c.c=n[c.c];const u=[c.a,c.b,c.c];for(let f=0;f<3;f++)if(u[f]===u[(f+1)%3]){r.push(a);break}}for(let a=r.length-1;a>=0;a--){const l=r[a];this.faces.splice(l,1);for(let c=0,u=this.faceVertexUvs.length;c<u;c++)this.faceVertexUvs[c].splice(l,1)}const o=this.vertices.length-e.length;return this.vertices=e,o},setFromPoints:function(t){this.vertices=[];for(let e=0,n=t.length;e<n;e++){const i=t[e];this.vertices.push(new J(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){const t=this.faces,e=t.length;for(let a=0;a<e;a++)t[a]._id=a;function n(a,l){return a.materialIndex-l.materialIndex}t.sort(n);const i=this.faceVertexUvs[0],s=this.faceVertexUvs[1];let r,o;i&&i.length===e&&(r=[]),s&&s.length===e&&(o=[]);for(let a=0;a<e;a++){const l=t[a]._id;r&&r.push(i[l]),o&&o.push(s[l])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){const t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(t[p]=d[p]);return t}const e=[];for(let d=0;d<this.vertices.length;d++){const p=this.vertices[d];e.push(p.x,p.y,p.z)}const n=[],i=[],s={},r=[],o={},a=[],l={};for(let d=0;d<this.faces.length;d++){const p=this.faces[d],_=!0,m=!1,v=this.faceVertexUvs[0][d]!==void 0,g=p.normal.length()>0,b=p.vertexNormals.length>0,y=p.color.r!==1||p.color.g!==1||p.color.b!==1,w=p.vertexColors.length>0;let x=0;if(x=c(x,0,0),x=c(x,1,_),x=c(x,2,m),x=c(x,3,v),x=c(x,4,g),x=c(x,5,b),x=c(x,6,y),x=c(x,7,w),n.push(x),n.push(p.a,p.b,p.c),n.push(p.materialIndex),v){const S=this.faceVertexUvs[0][d];n.push(h(S[0]),h(S[1]),h(S[2]))}if(g&&n.push(u(p.normal)),b){const S=p.vertexNormals;n.push(u(S[0]),u(S[1]),u(S[2]))}if(y&&n.push(f(p.color)),w){const S=p.vertexColors;n.push(f(S[0]),f(S[1]),f(S[2]))}}function c(d,p,_){return _?d|1<<p:d&~(1<<p)}function u(d){const p=d.x.toString()+d.y.toString()+d.z.toString();return s[p]!==void 0||(s[p]=i.length/3,i.push(d.x,d.y,d.z)),s[p]}function f(d){const p=d.r.toString()+d.g.toString()+d.b.toString();return o[p]!==void 0||(o[p]=r.length,r.push(d.getHex())),o[p]}function h(d){const p=d.x.toString()+d.y.toString();return l[p]!==void 0||(l[p]=a.length/2,a.push(d.x,d.y)),l[p]}return t.data={},t.data.vertices=e,t.data.normals=i,r.length>0&&(t.data.colors=r),a.length>0&&(t.data.uvs=[a]),t.data.faces=n,t},clone:function(){return new An().copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;const e=t.vertices;for(let f=0,h=e.length;f<h;f++)this.vertices.push(e[f].clone());const n=t.colors;for(let f=0,h=n.length;f<h;f++)this.colors.push(n[f].clone());const i=t.faces;for(let f=0,h=i.length;f<h;f++)this.faces.push(i[f].clone());for(let f=0,h=t.faceVertexUvs.length;f<h;f++){const d=t.faceVertexUvs[f];this.faceVertexUvs[f]===void 0&&(this.faceVertexUvs[f]=[]);for(let p=0,_=d.length;p<_;p++){const m=d[p],v=[];for(let g=0,b=m.length;g<b;g++){const y=m[g];v.push(y.clone())}this.faceVertexUvs[f].push(v)}}const s=t.morphTargets;for(let f=0,h=s.length;f<h;f++){const d={};if(d.name=s[f].name,s[f].vertices!==void 0){d.vertices=[];for(let p=0,_=s[f].vertices.length;p<_;p++)d.vertices.push(s[f].vertices[p].clone())}if(s[f].normals!==void 0){d.normals=[];for(let p=0,_=s[f].normals.length;p<_;p++)d.normals.push(s[f].normals[p].clone())}this.morphTargets.push(d)}const r=t.morphNormals;for(let f=0,h=r.length;f<h;f++){const d={};if(r[f].vertexNormals!==void 0){d.vertexNormals=[];for(let p=0,_=r[f].vertexNormals.length;p<_;p++){const m=r[f].vertexNormals[p],v={};v.a=m.a.clone(),v.b=m.b.clone(),v.c=m.c.clone(),d.vertexNormals.push(v)}}if(r[f].faceNormals!==void 0){d.faceNormals=[];for(let p=0,_=r[f].faceNormals.length;p<_;p++)d.faceNormals.push(r[f].faceNormals[p].clone())}this.morphNormals.push(d)}const o=t.skinWeights;for(let f=0,h=o.length;f<h;f++)this.skinWeights.push(o[f].clone());const a=t.skinIndices;for(let f=0,h=a.length;f<h;f++)this.skinIndices.push(a[f].clone());const l=t.lineDistances;for(let f=0,h=l.length;f<h;f++)this.lineDistances.push(l[f]);const c=t.boundingBox;c!==null&&(this.boundingBox=c.clone());const u=t.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class zY extends An{constructor(e,n,i,s,r,o){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:s,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new Fg(e,n,i,s,r,o)),this.mergeVertices()}}class Fg extends Qt{constructor(e=1,n=1,i=1,s=1,r=1,o=1){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const l=[],c=[],u=[],f=[];let h=0,d=0;p("z","y","x",-1,-1,i,n,e,o,r,0),p("z","y","x",1,-1,i,n,-e,o,r,1),p("x","z","y",1,1,e,i,n,s,o,2),p("x","z","y",1,-1,e,i,-n,s,o,3),p("x","y","z",1,-1,e,n,i,s,r,4),p("x","y","z",-1,-1,e,n,-i,s,r,5),this.setIndex(l),this.setAttribute("position",new St(c,3)),this.setAttribute("normal",new St(u,3)),this.setAttribute("uv",new St(f,2));function p(_,m,v,g,b,y,w,x,S,T,A){const C=y/S,k=w/T,L=y/2,F=w/2,U=x/2,N=S+1,B=T+1;let W=0,ee=0;const K=new J;for(let ge=0;ge<B;ge++){const se=ge*k-F;for(let X=0;X<N;X++){const q=X*C-L;K[_]=q*g,K[m]=se*b,K[v]=U,c.push(K.x,K.y,K.z),K[_]=0,K[m]=0,K[v]=x>0?1:-1,u.push(K.x,K.y,K.z),f.push(X/S),f.push(1-ge/T),W+=1}}for(let ge=0;ge<T;ge++)for(let se=0;se<S;se++){const X=h+se+N*ge,q=h+se+N*(ge+1),Y=h+(se+1)+N*(ge+1),$=h+(se+1)+N*ge;l.push(X,q,$),l.push(q,Y,$),ee+=6}a.addGroup(d,ee,A),d+=ee,h+=W}}}function lu(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const s=t[n][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture)?e[n][i]=s.clone():Array.isArray(s)?e[n][i]=s.slice():e[n][i]=s}}return e}function Ni(t){const e={};for(let n=0;n<t.length;n++){const i=lu(t[n]);for(const s in i)e[s]=i[s]}return e}const UY={clone:lu,merge:Ni};var HY=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,VY=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ps(t){Dt.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=HY,this.fragmentShader=VY,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&(t.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}ps.prototype=Object.create(Dt.prototype);ps.prototype.constructor=ps;ps.prototype.isShaderMaterial=!0;ps.prototype.copy=function(t){return Dt.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=lu(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this};ps.prototype.toJSON=function(t){const e=Dt.prototype.toJSON.call(this,t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const r=this.uniforms[i].value;r&&r.isTexture?e.uniforms[i]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[i]={type:"m4",value:r.toArray()}:e.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e};function Po(){kt.call(this),this.type="Camera",this.matrixWorldInverse=new nn,this.projectionMatrix=new nn,this.projectionMatrixInverse=new nn}Po.prototype=Object.assign(Object.create(kt.prototype),{constructor:Po,isCamera:!0,copy:function(t,e){return kt.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new J),this.updateMatrixWorld(!0);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){kt.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){kt.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function bi(t,e,n,i){Po.call(this),this.type="PerspectiveCamera",this.fov=t!==void 0?t:50,this.zoom=1,this.near=n!==void 0?n:.1,this.far=i!==void 0?i:2e3,this.focus=10,this.aspect=e!==void 0?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}bi.prototype=Object.assign(Object.create(Po.prototype),{constructor:bi,isPerspectiveCamera:!0,copy:function(t,e){return Po.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){const e=.5*this.getFilmHeight()/t;this.fov=Zt.RAD2DEG*2*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const t=Math.tan(Zt.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/t},getEffectiveFOV:function(){return Zt.RAD2DEG*2*Math.atan(Math.tan(Zt.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,s,r){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=this.near;let e=t*Math.tan(Zt.DEG2RAD*.5*this.fov)/this.zoom,n=2*e,i=this.aspect*n,s=-.5*i;const r=this.view;if(this.view!==null&&this.view.enabled){const a=r.fullWidth,l=r.fullHeight;s+=r.offsetX*i/a,e-=r.offsetY*n/l,i*=r.width/a,n*=r.height/l}const o=this.filmOffset;o!==0&&(s+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){const e=kt.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});const lc=90,cc=1;function hh(t,e,n){if(kt.call(this),this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const i=new bi(lc,cc,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new J(1,0,0)),this.add(i);const s=new bi(lc,cc,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new J(-1,0,0)),this.add(s);const r=new bi(lc,cc,t,e);r.layers=this.layers,r.up.set(0,0,1),r.lookAt(new J(0,1,0)),this.add(r);const o=new bi(lc,cc,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new J(0,-1,0)),this.add(o);const a=new bi(lc,cc,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new J(0,0,1)),this.add(a);const l=new bi(lc,cc,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new J(0,0,-1)),this.add(l),this.update=function(c,u){this.parent===null&&this.updateMatrixWorld();const f=c.xr.enabled,h=c.getRenderTarget();c.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,c.setRenderTarget(n,0),c.render(u,i),c.setRenderTarget(n,1),c.render(u,s),c.setRenderTarget(n,2),c.render(u,r),c.setRenderTarget(n,3),c.render(u,o),c.setRenderTarget(n,4),c.render(u,a),n.texture.generateMipmaps=d,c.setRenderTarget(n,5),c.render(u,l),c.setRenderTarget(h),c.xr.enabled=f},this.clear=function(c,u,f,h){const d=c.getRenderTarget();for(let p=0;p<6;p++)c.setRenderTarget(n,p),c.clear(u,f,h);c.setRenderTarget(d)}}hh.prototype=Object.create(kt.prototype);hh.prototype.constructor=hh;function cu(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),Sr.call(this,t,t,e),this.texture.isWebGLCubeRenderTargetTexture=!0}cu.prototype=Object.create(Sr.prototype);cu.prototype.constructor=cu;cu.prototype.isWebGLCubeRenderTarget=!0;cu.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=Mr,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

			varying vec3 vWorldDirection;

			vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

				return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

			}

			void main() {

				vWorldDirection = transformDirection( position, modelMatrix );

				#include <begin_vertex>
				#include <project_vertex>

			}
		`,fragmentShader:`

			uniform sampler2D tEquirect;

			varying vec3 vWorldDirection;

			#include <common>

			void main() {

				vec3 direction = normalize( vWorldDirection );

				vec2 sampleUV = equirectUv( direction );

				gl_FragColor = texture2D( tEquirect, sampleUV );

			}
		`},i=new Fg(5,5,5),s=new ps({name:"CubemapFromEquirect",uniforms:lu(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Di,blending:Sf});s.uniforms.tEquirect.value=e;const r=new xi(i,s),o=e.minFilter;return e.minFilter===Hh&&(e.minFilter=Ii),new hh(1,10,this).update(t,r),e.minFilter=o,r.geometry.dispose(),r.material.dispose(),this};function uu(t,e,n,i,s,r,o,a,l,c,u,f){In.call(this,null,r,o,a,l,c,i,s,u,f),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=l!==void 0?l:Fi,this.minFilter=c!==void 0?c:Fi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}uu.prototype=Object.create(In.prototype);uu.prototype.constructor=uu;uu.prototype.isDataTexture=!0;const uc=new Ba,Fd=new J;class zg{constructor(e,n,i,s,r,o){this.planes=[e!==void 0?e:new vo,n!==void 0?n:new vo,i!==void 0?i:new vo,s!==void 0?s:new vo,r!==void 0?r:new vo,o!==void 0?o:new vo]}set(e,n,i,s,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(s),a[4].copy(r),a[5].copy(o),this}clone(){return new this.constructor().copy(this)}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const n=this.planes,i=e.elements,s=i[0],r=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],f=i[7],h=i[8],d=i[9],p=i[10],_=i[11],m=i[12],v=i[13],g=i[14],b=i[15];return n[0].setComponents(a-s,f-l,_-h,b-m).normalize(),n[1].setComponents(a+s,f+l,_+h,b+m).normalize(),n[2].setComponents(a+r,f+c,_+d,b+v).normalize(),n[3].setComponents(a-r,f-c,_-d,b-v).normalize(),n[4].setComponents(a-o,f-u,_-p,b-g).normalize(),n[5].setComponents(a+o,f+u,_+p,b+g).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),uc.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(uc)}intersectsSprite(e){return uc.center.set(0,0,0),uc.radius=.7071067811865476,uc.applyMatrix4(e.matrixWorld),this.intersectsSphere(uc)}intersectsSphere(e){const n=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(n[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const s=n[i];if(Fd.x=s.normal.x>0?e.max.x:e.min.x,Fd.y=s.normal.y>0?e.max.y:e.min.y,Fd.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Fd)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}}function Ok(){let t=null,e=!1,n=null,i=null;function s(r,o){n(r,o),i=t.requestAnimationFrame(s)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(s),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){n=r},setContext:function(r){t=r}}}function GY(t,e){const n=e.isWebGL2,i=new WeakMap;function s(c,u){const f=c.array,h=c.usage,d=t.createBuffer();t.bindBuffer(u,d),t.bufferData(u,f,h),c.onUploadCallback();let p=5126;return f instanceof Float32Array?p=5126:f instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):f instanceof Uint16Array?p=5123:f instanceof Int16Array?p=5122:f instanceof Uint32Array?p=5125:f instanceof Int32Array?p=5124:f instanceof Int8Array?p=5120:f instanceof Uint8Array&&(p=5121),{buffer:d,type:p,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}function r(c,u,f){const h=u.array,d=u.updateRange;t.bindBuffer(f,c),d.count===-1?t.bufferSubData(f,0,h):(n?t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(t.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){var f=i.get(c);(!f||f.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);h===void 0?i.set(c,s(c,u)):h.version<c.version&&(r(h.buffer,c,u),h.version=c.version)}return{get:o,remove:a,update:l}}class WY extends An{constructor(e,n,i,s){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:s},this.fromBufferGeometry(new Ug(e,n,i,s)),this.mergeVertices()}}class Ug extends Qt{constructor(e,n,i,s){super(),this.type="PlaneBufferGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:s},e=e||1,n=n||1;const r=e/2,o=n/2,a=Math.floor(i)||1,l=Math.floor(s)||1,c=a+1,u=l+1,f=e/a,h=n/l,d=[],p=[],_=[],m=[];for(let v=0;v<u;v++){const g=v*h-o;for(let b=0;b<c;b++){const y=b*f-r;p.push(y,-g,0),_.push(0,0,1),m.push(b/a),m.push(1-v/l)}}for(let v=0;v<l;v++)for(let g=0;g<a;g++){const b=g+c*v,y=g+c*(v+1),w=g+1+c*(v+1),x=g+1+c*v;d.push(b,y,x),d.push(y,w,x)}this.setIndex(d),this.setAttribute("position",new St(p,3)),this.setAttribute("normal",new St(_,3)),this.setAttribute("uv",new St(m,2))}}var jY=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,YY=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qY=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,XY=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,ZY=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,JY="vec3 transformed = vec3( position );",KY=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,$Y=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,QY=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,eq=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,tq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,nq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,iq=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,sq=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,rq=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,oq=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,aq=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor.xyz *= color.xyz;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,lq=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cq=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,uq=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,fq=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,hq=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,dq=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,pq=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,mq="gl_FragColor = linearToOutputTexel( gl_FragColor );",gq=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,_q=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,vq=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,bq=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,yq=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,wq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,xq=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,Mq=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,Sq=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Eq=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Tq=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,Aq=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,kq=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Cq=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,Lq=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,Pq=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,Rq=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Dq=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Oq=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Iq=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Nq=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,Bq=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Fq=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,zq=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,Uq=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Hq=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Vq=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Gq=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Wq=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,jq=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,Yq=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,qq=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Xq=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Zq=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Jq=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Kq=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,$q=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,Qq=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,eX=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,tX=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,nX=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,iX=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,sX=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,rX=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,oX=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,aX=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,lX=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,cX=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,uX=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,fX=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,hX=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,dX=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,pX=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,mX=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,gX=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,_X=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,vX=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,bX=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,yX=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,wX=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,xX=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,MX=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,SX=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,EX=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,TX=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,AX=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,kX=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,CX=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,LX=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,PX=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,RX=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,DX=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,OX=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,IX=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,NX=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,BX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,FX=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,zX=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,UX=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,HX=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,VX=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,GX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,WX=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,jX=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,YX=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qX=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,XX=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZX=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JX=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KX=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,$X=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QX=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eZ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tZ=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nZ=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iZ=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sZ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,rZ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,oZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,aZ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,lZ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,cZ=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,fZ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const ln={alphamap_fragment:jY,alphamap_pars_fragment:YY,alphatest_fragment:qY,aomap_fragment:XY,aomap_pars_fragment:ZY,begin_vertex:JY,beginnormal_vertex:KY,bsdfs:$Y,bumpmap_pars_fragment:QY,clipping_planes_fragment:eq,clipping_planes_pars_fragment:tq,clipping_planes_pars_vertex:nq,clipping_planes_vertex:iq,color_fragment:sq,color_pars_fragment:rq,color_pars_vertex:oq,color_vertex:aq,common:lq,cube_uv_reflection_fragment:cq,defaultnormal_vertex:uq,displacementmap_pars_vertex:fq,displacementmap_vertex:hq,emissivemap_fragment:dq,emissivemap_pars_fragment:pq,encodings_fragment:mq,encodings_pars_fragment:gq,envmap_fragment:_q,envmap_common_pars_fragment:vq,envmap_pars_fragment:bq,envmap_pars_vertex:yq,envmap_physical_pars_fragment:Pq,envmap_vertex:wq,fog_vertex:xq,fog_pars_vertex:Mq,fog_fragment:Sq,fog_pars_fragment:Eq,gradientmap_pars_fragment:Tq,lightmap_fragment:Aq,lightmap_pars_fragment:kq,lights_lambert_vertex:Cq,lights_pars_begin:Lq,lights_toon_fragment:Rq,lights_toon_pars_fragment:Dq,lights_phong_fragment:Oq,lights_phong_pars_fragment:Iq,lights_physical_fragment:Nq,lights_physical_pars_fragment:Bq,lights_fragment_begin:Fq,lights_fragment_maps:zq,lights_fragment_end:Uq,logdepthbuf_fragment:Hq,logdepthbuf_pars_fragment:Vq,logdepthbuf_pars_vertex:Gq,logdepthbuf_vertex:Wq,map_fragment:jq,map_pars_fragment:Yq,map_particle_fragment:qq,map_particle_pars_fragment:Xq,metalnessmap_fragment:Zq,metalnessmap_pars_fragment:Jq,morphnormal_vertex:Kq,morphtarget_pars_vertex:$q,morphtarget_vertex:Qq,normal_fragment_begin:eX,normal_fragment_maps:tX,normalmap_pars_fragment:nX,clearcoat_normal_fragment_begin:iX,clearcoat_normal_fragment_maps:sX,clearcoat_pars_fragment:rX,packing:oX,premultiplied_alpha_fragment:aX,project_vertex:lX,dithering_fragment:cX,dithering_pars_fragment:uX,roughnessmap_fragment:fX,roughnessmap_pars_fragment:hX,shadowmap_pars_fragment:dX,shadowmap_pars_vertex:pX,shadowmap_vertex:mX,shadowmask_pars_fragment:gX,skinbase_vertex:_X,skinning_pars_vertex:vX,skinning_vertex:bX,skinnormal_vertex:yX,specularmap_fragment:wX,specularmap_pars_fragment:xX,tonemapping_fragment:MX,tonemapping_pars_fragment:SX,transmissionmap_fragment:EX,transmissionmap_pars_fragment:TX,uv_pars_fragment:AX,uv_pars_vertex:kX,uv_vertex:CX,uv2_pars_fragment:LX,uv2_pars_vertex:PX,uv2_vertex:RX,worldpos_vertex:DX,background_frag:OX,background_vert:IX,cube_frag:NX,cube_vert:BX,depth_frag:FX,depth_vert:zX,distanceRGBA_frag:UX,distanceRGBA_vert:HX,equirect_frag:VX,equirect_vert:GX,linedashed_frag:WX,linedashed_vert:jX,meshbasic_frag:YX,meshbasic_vert:qX,meshlambert_frag:XX,meshlambert_vert:ZX,meshmatcap_frag:JX,meshmatcap_vert:KX,meshtoon_frag:$X,meshtoon_vert:QX,meshphong_frag:eZ,meshphong_vert:tZ,meshphysical_frag:nZ,meshphysical_vert:iZ,normal_frag:sZ,normal_vert:rZ,points_frag:oZ,points_vert:aZ,shadow_frag:lZ,shadow_vert:cZ,sprite_frag:uZ,sprite_vert:fZ},ut={common:{diffuse:{value:new Mt(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new fs},uv2Transform:{value:new fs},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new We(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Mt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Mt(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new fs}},sprite:{diffuse:{value:new Mt(15658734)},opacity:{value:1},center:{value:new We(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new fs}}},Ur={basic:{uniforms:Ni([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.fog]),vertexShader:ln.meshbasic_vert,fragmentShader:ln.meshbasic_frag},lambert:{uniforms:Ni([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.fog,ut.lights,{emissive:{value:new Mt(0)}}]),vertexShader:ln.meshlambert_vert,fragmentShader:ln.meshlambert_frag},phong:{uniforms:Ni([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new Mt(0)},specular:{value:new Mt(1118481)},shininess:{value:30}}]),vertexShader:ln.meshphong_vert,fragmentShader:ln.meshphong_frag},standard:{uniforms:Ni([ut.common,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.roughnessmap,ut.metalnessmap,ut.fog,ut.lights,{emissive:{value:new Mt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag},toon:{uniforms:Ni([ut.common,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.gradientmap,ut.fog,ut.lights,{emissive:{value:new Mt(0)}}]),vertexShader:ln.meshtoon_vert,fragmentShader:ln.meshtoon_frag},matcap:{uniforms:Ni([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,{matcap:{value:null}}]),vertexShader:ln.meshmatcap_vert,fragmentShader:ln.meshmatcap_frag},points:{uniforms:Ni([ut.points,ut.fog]),vertexShader:ln.points_vert,fragmentShader:ln.points_frag},dashed:{uniforms:Ni([ut.common,ut.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ln.linedashed_vert,fragmentShader:ln.linedashed_frag},depth:{uniforms:Ni([ut.common,ut.displacementmap]),vertexShader:ln.depth_vert,fragmentShader:ln.depth_frag},normal:{uniforms:Ni([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,{opacity:{value:1}}]),vertexShader:ln.normal_vert,fragmentShader:ln.normal_frag},sprite:{uniforms:Ni([ut.sprite,ut.fog]),vertexShader:ln.sprite_vert,fragmentShader:ln.sprite_frag},background:{uniforms:{uvTransform:{value:new fs},t2D:{value:null}},vertexShader:ln.background_vert,fragmentShader:ln.background_frag},cube:{uniforms:Ni([ut.envmap,{opacity:{value:1}}]),vertexShader:ln.cube_vert,fragmentShader:ln.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ln.equirect_vert,fragmentShader:ln.equirect_frag},distanceRGBA:{uniforms:Ni([ut.common,ut.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ln.distanceRGBA_vert,fragmentShader:ln.distanceRGBA_frag},shadow:{uniforms:Ni([ut.lights,ut.fog,{color:{value:new Mt(0)},opacity:{value:1}}]),vertexShader:ln.shadow_vert,fragmentShader:ln.shadow_frag}};Ur.physical={uniforms:Ni([Ur.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new We(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Mt(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag};function hZ(t,e,n,i,s){const r=new Mt(0);let o=0,a,l,c=null,u=0,f=null;function h(p,_,m,v){let g=_.isScene===!0?_.background:null;g&&g.isTexture&&(g=e.get(g));const b=t.xr,y=b.getSession&&b.getSession();y&&y.environmentBlendMode==="additive"&&(g=null),g===null?d(r,o):g&&g.isColor&&(d(g,1),v=!0),(t.autoClear||v)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),g&&(g.isCubeTexture||g.isWebGLCubeRenderTarget||g.isWebGLCubeRenderTargetTexture||g.mapping===Ig)?(l===void 0&&(l=new xi(new Fg(1,1,1),new ps({name:"BackgroundCubeMaterial",uniforms:lu(Ur.cube.uniforms),vertexShader:Ur.cube.vertexShader,fragmentShader:Ur.cube.fragmentShader,side:Di,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(w,x,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),g.isWebGLCubeRenderTarget&&(g=g.texture),l.material.uniforms.envMap.value=g,l.material.uniforms.flipEnvMap.value=g.isCubeTexture?-1:1,(c!==g||u!==g.version||f!==t.toneMapping)&&(l.material.needsUpdate=!0,c=g,u=g.version,f=t.toneMapping),p.unshift(l,l.geometry,l.material,0,0,null)):g&&g.isTexture&&(a===void 0&&(a=new xi(new Ug(2,2),new ps({name:"BackgroundMaterial",uniforms:lu(Ur.background.uniforms),vertexShader:Ur.background.vertexShader,fragmentShader:Ur.background.fragmentShader,side:Pg,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=g,g.matrixAutoUpdate===!0&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),(c!==g||u!==g.version||f!==t.toneMapping)&&(a.material.needsUpdate=!0,c=g,u=g.version,f=t.toneMapping),p.unshift(a,a.geometry,a.material,0,0,null))}function d(p,_){n.buffers.color.setClear(p.r,p.g,p.b,_,s)}return{getClearColor:function(){return r},setClearColor:function(p,_){r.set(p),o=_!==void 0?_:1,d(r,o)},getClearAlpha:function(){return o},setClearAlpha:function(p){o=p,d(r,o)},render:h}}function dZ(t,e,n,i){const s=t.getParameter(34921),r=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||r!==null,a={},l=_(null);let c=l;function u(F,U,N,B,W){let ee=!1;if(o){const K=p(B,N,U);c!==K&&(c=K,h(c.object)),ee=m(B,W),ee&&v(B,W)}else{const K=U.wireframe===!0;(c.geometry!==B.id||c.program!==N.id||c.wireframe!==K)&&(c.geometry=B.id,c.program=N.id,c.wireframe=K,ee=!0)}F.isInstancedMesh===!0&&(ee=!0),W!==null&&n.update(W,34963),ee&&(S(F,U,N,B),W!==null&&t.bindBuffer(34963,n.get(W).buffer))}function f(){return i.isWebGL2?t.createVertexArray():r.createVertexArrayOES()}function h(F){return i.isWebGL2?t.bindVertexArray(F):r.bindVertexArrayOES(F)}function d(F){return i.isWebGL2?t.deleteVertexArray(F):r.deleteVertexArrayOES(F)}function p(F,U,N){const B=N.wireframe===!0;let W=a[F.id];W===void 0&&(W={},a[F.id]=W);let ee=W[U.id];ee===void 0&&(ee={},W[U.id]=ee);let K=ee[B];return K===void 0&&(K=_(f()),ee[B]=K),K}function _(F){const U=[],N=[],B=[];for(let W=0;W<s;W++)U[W]=0,N[W]=0,B[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:N,attributeDivisors:B,object:F,attributes:{},index:null}}function m(F,U){const N=c.attributes,B=F.attributes;if(Object.keys(N).length!==Object.keys(B).length)return!0;for(const W in B){const ee=N[W],K=B[W];if(ee===void 0||ee.attribute!==K||ee.data!==K.data)return!0}return c.index!==U}function v(F,U){const N={},B=F.attributes;for(const W in B){const ee=B[W],K={};K.attribute=ee,ee.data&&(K.data=ee.data),N[W]=K}c.attributes=N,c.index=U}function g(){const F=c.newAttributes;for(let U=0,N=F.length;U<N;U++)F[U]=0}function b(F){y(F,0)}function y(F,U){const N=c.newAttributes,B=c.enabledAttributes,W=c.attributeDivisors;N[F]=1,B[F]===0&&(t.enableVertexAttribArray(F),B[F]=1),W[F]!==U&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](F,U),W[F]=U)}function w(){const F=c.newAttributes,U=c.enabledAttributes;for(let N=0,B=U.length;N<B;N++)U[N]!==F[N]&&(t.disableVertexAttribArray(N),U[N]=0)}function x(F,U,N,B,W,ee){i.isWebGL2===!0&&(N===5124||N===5125)?t.vertexAttribIPointer(F,U,N,W,ee):t.vertexAttribPointer(F,U,N,B,W,ee)}function S(F,U,N,B){if(i.isWebGL2===!1&&(F.isInstancedMesh||B.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;g();const W=B.attributes,ee=N.getAttributes(),K=U.defaultAttributeValues;for(const ge in ee){const se=ee[ge];if(se>=0){const X=W[ge];if(X!==void 0){const q=X.normalized,Y=X.itemSize,$=n.get(X);if($===void 0)continue;const ze=$.buffer,_e=$.type,pe=$.bytesPerElement;if(X.isInterleavedBufferAttribute){const Te=X.data,De=Te.stride,je=X.offset;Te&&Te.isInstancedInterleavedBuffer?(y(se,Te.meshPerAttribute),B._maxInstanceCount===void 0&&(B._maxInstanceCount=Te.meshPerAttribute*Te.count)):b(se),t.bindBuffer(34962,ze),x(se,Y,_e,q,De*pe,je*pe)}else X.isInstancedBufferAttribute?(y(se,X.meshPerAttribute),B._maxInstanceCount===void 0&&(B._maxInstanceCount=X.meshPerAttribute*X.count)):b(se),t.bindBuffer(34962,ze),x(se,Y,_e,q,0,0)}else if(ge==="instanceMatrix"){const q=n.get(F.instanceMatrix);if(q===void 0)continue;const Y=q.buffer,$=q.type;y(se+0,1),y(se+1,1),y(se+2,1),y(se+3,1),t.bindBuffer(34962,Y),t.vertexAttribPointer(se+0,4,$,!1,64,0),t.vertexAttribPointer(se+1,4,$,!1,64,16),t.vertexAttribPointer(se+2,4,$,!1,64,32),t.vertexAttribPointer(se+3,4,$,!1,64,48)}else if(ge==="instanceColor"){const q=n.get(F.instanceColor);if(q===void 0)continue;const Y=q.buffer,$=q.type;y(se,1),t.bindBuffer(34962,Y),t.vertexAttribPointer(se,3,$,!1,12,0)}else if(K!==void 0){const q=K[ge];if(q!==void 0)switch(q.length){case 2:t.vertexAttrib2fv(se,q);break;case 3:t.vertexAttrib3fv(se,q);break;case 4:t.vertexAttrib4fv(se,q);break;default:t.vertexAttrib1fv(se,q)}}}}w()}function T(){k();for(const F in a){const U=a[F];for(const N in U){const B=U[N];for(const W in B)d(B[W].object),delete B[W];delete U[N]}delete a[F]}}function A(F){if(a[F.id]===void 0)return;const U=a[F.id];for(const N in U){const B=U[N];for(const W in B)d(B[W].object),delete B[W];delete U[N]}delete a[F.id]}function C(F){for(const U in a){const N=a[U];if(N[F.id]===void 0)continue;const B=N[F.id];for(const W in B)d(B[W].object),delete B[W];delete N[F.id]}}function k(){L(),c!==l&&(c=l,h(c.object))}function L(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:k,resetDefaultState:L,dispose:T,releaseStatesOfGeometry:A,releaseStatesOfProgram:C,initAttributes:g,enableAttribute:b,disableUnusedAttributes:w}}function pZ(t,e,n,i){const s=i.isWebGL2;let r;function o(c){r=c}function a(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function l(c,u,f){if(f===0)return;let h,d;if(s)h=t,d="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[d](r,c,u,f),n.update(u,r,f)}this.setMode=o,this.render=a,this.renderInstances=l}function mZ(t,e,n){let i;function s(){if(i!==void 0)return i;const x=e.get("EXT_texture_filter_anisotropic");return x!==null?i=t.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT):i=0,i}function r(x){if(x==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";x="mediump"}return x==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&t instanceof WebGL2ComputeRenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=r(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=n.logarithmicDepthBuffer===!0,u=t.getParameter(34930),f=t.getParameter(35660),h=t.getParameter(3379),d=t.getParameter(34076),p=t.getParameter(34921),_=t.getParameter(36347),m=t.getParameter(36348),v=t.getParameter(36349),g=f>0,b=o||!!e.get("OES_texture_float"),y=g&&b,w=o?t.getParameter(36183):0;return{isWebGL2:o,getMaxAnisotropy:s,getMaxPrecision:r,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:_,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:b,floatVertexTextures:y,maxSamples:w}}function gZ(t){const e=this;let n=null,i=0,s=!1,r=!1;const o=new vo,a=new fs,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h,d){const p=f.length!==0||h||i!==0||s;return s=h,n=u(f,d,0),i=f.length,p},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1,c()},this.setState=function(f,h,d){const p=f.clippingPlanes,_=f.clipIntersection,m=f.clipShadows,v=t.get(f);if(!s||p===null||p.length===0||r&&!m)r?u(null):c();else{const g=r?0:i,b=g*4;let y=v.clippingState||null;l.value=y,y=u(p,h,b,d);for(let w=0;w!==b;++w)y[w]=n[w];v.clippingState=y,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=g}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,h,d,p){const _=f!==null?f.length:0;let m=null;if(_!==0){if(m=l.value,p!==!0||m===null){const v=d+_*4,g=h.matrixWorldInverse;a.getNormalMatrix(g),(m===null||m.length<v)&&(m=new Float32Array(v));for(let b=0,y=d;b!==_;++b,y+=4)o.copy(f[b]).applyMatrix4(g,a),o.normal.toArray(m,y),m[y+3]=o.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,m}}function _Z(t){let e=new WeakMap;function n(r,o){return o===b_?r.mapping=Dg:o===y_&&(r.mapping=Og),r}function i(r){if(r&&r.isTexture){const o=r.mapping;if(o===b_||o===y_)if(e.has(r)){const a=e.get(r).texture;return n(a,r.mapping)}else{const a=r.image;if(a&&a.height>0){const l=t.getRenderList(),c=t.getRenderTarget(),u=t.getRenderState(),f=new cu(a.height/2);return f.fromEquirectangularTexture(t,r),e.set(r,f),t.setRenderTarget(c),t.setRenderList(l),t.setRenderState(u),n(f.texture,r.mapping)}else return null}}return r}function s(){e=new WeakMap}return{get:i,dispose:s}}function vZ(t){const e={};return{has:function(n){if(e[n]!==void 0)return e[n]!==null;let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i!==null},get:function(n){return this.has(n)||console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]}}}function bZ(t,e,n,i){const s=new WeakMap,r=new WeakMap;function o(f){const h=f.target,d=s.get(h);d.index!==null&&e.remove(d.index);for(const _ in d.attributes)e.remove(d.attributes[_]);h.removeEventListener("dispose",o),s.delete(h);const p=r.get(d);p&&(e.remove(p),r.delete(d)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(f,h){let d=s.get(h);return d||(h.addEventListener("dispose",o),h.isBufferGeometry?d=h:h.isGeometry&&(h._bufferGeometry===void 0&&(h._bufferGeometry=new Qt().setFromObject(f)),d=h._bufferGeometry),s.set(h,d),n.memory.geometries++,d)}function l(f){const h=f.attributes;for(const p in h)e.update(h[p],34962);const d=f.morphAttributes;for(const p in d){const _=d[p];for(let m=0,v=_.length;m<v;m++)e.update(_[m],34962)}}function c(f){const h=[],d=f.index,p=f.attributes.position;let _=0;if(d!==null){const g=d.array;_=d.version;for(let b=0,y=g.length;b<y;b+=3){const w=g[b+0],x=g[b+1],S=g[b+2];h.push(w,x,x,S,S,w)}}else{const g=p.array;_=p.version;for(let b=0,y=g.length/3-1;b<y;b+=3){const w=b+0,x=b+1,S=b+2;h.push(w,x,x,S,S,w)}}const m=new(Rk(h)>65535?fh:uh)(h,1);m.version=_;const v=r.get(f);v&&e.remove(v),r.set(f,m)}function u(f){const h=r.get(f);if(h){const d=f.index;d!==null&&h.version<d.version&&c(f)}else c(f);return r.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function yZ(t,e,n,i){const s=i.isWebGL2;let r;function o(h){r=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function u(h,d){t.drawElements(r,d,a,h*l),n.update(d,r,1)}function f(h,d,p){if(p===0)return;let _,m;if(s)_=t,m="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[m](r,d,a,h*l,p),n.update(d,r,p)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=f}function wZ(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(r/3);break;case 1:n.lines+=a*(r/2);break;case 3:n.lines+=a*(r-1);break;case 2:n.lines+=a*r;break;case 0:n.points+=a*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:s,update:i}}function xZ(t,e){return t[0]-e[0]}function MZ(t,e){return Math.abs(e[1])-Math.abs(t[1])}function SZ(t){const e={},n=new Float32Array(8),i=[];for(let r=0;r<8;r++)i[r]=[r,0];function s(r,o,a,l){const c=r.morphTargetInfluences,u=c===void 0?0:c.length;let f=e[o.id];if(f===void 0){f=[];for(let m=0;m<u;m++)f[m]=[m,0];e[o.id]=f}for(let m=0;m<u;m++){const v=f[m];v[0]=m,v[1]=c[m]}f.sort(MZ);for(let m=0;m<8;m++)m<u&&f[m][1]?(i[m][0]=f[m][0],i[m][1]=f[m][1]):(i[m][0]=Number.MAX_SAFE_INTEGER,i[m][1]=0);i.sort(xZ);const h=a.morphTargets&&o.morphAttributes.position,d=a.morphNormals&&o.morphAttributes.normal;let p=0;for(let m=0;m<8;m++){const v=i[m],g=v[0],b=v[1];g!==Number.MAX_SAFE_INTEGER&&b?(h&&o.getAttribute("morphTarget"+m)!==h[g]&&o.setAttribute("morphTarget"+m,h[g]),d&&o.getAttribute("morphNormal"+m)!==d[g]&&o.setAttribute("morphNormal"+m,d[g]),n[m]=b,p+=b):(h&&o.getAttribute("morphTarget"+m)!==void 0&&o.deleteAttribute("morphTarget"+m),d&&o.getAttribute("morphNormal"+m)!==void 0&&o.deleteAttribute("morphNormal"+m),n[m]=0)}const _=o.morphTargetsRelative?1:1-p;l.getUniforms().setValue(t,"morphTargetBaseInfluence",_),l.getUniforms().setValue(t,"morphTargetInfluences",n)}return{update:s}}function EZ(t,e,n,i){let s=new WeakMap;function r(a){const l=i.render.frame,c=a.geometry,u=e.get(a,c);return s.get(u)!==l&&(c.isGeometry&&u.updateFromObject(a),e.update(u),s.set(u,l)),a.isInstancedMesh&&(n.update(a.instanceMatrix,34962),a.instanceColor!==null&&n.update(a.instanceColor,34962)),u}function o(){s=new WeakMap}return{update:r,dispose:o}}function Aa(t,e,n,i,s,r,o,a,l,c){t=t!==void 0?t:[],e=e!==void 0?e:Dg,o=o!==void 0?o:fl,In.call(this,t,e,n,i,s,r,o,a,l,c),this.flipY=!1}Aa.prototype=Object.create(In.prototype);Aa.prototype.constructor=Aa;Aa.prototype.isCubeTexture=!0;Object.defineProperty(Aa.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});function dh(t,e,n,i){In.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.magFilter=Fi,this.minFilter=Fi,this.wrapR=us,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}dh.prototype=Object.create(In.prototype);dh.prototype.constructor=dh;dh.prototype.isDataTexture2DArray=!0;function ph(t,e,n,i){In.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.magFilter=Fi,this.minFilter=Fi,this.wrapR=us,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}ph.prototype=Object.create(In.prototype);ph.prototype.constructor=ph;ph.prototype.isDataTexture3D=!0;const Ik=new In,TZ=new dh,AZ=new ph,Nk=new Aa,ZM=[],JM=[],KM=new Float32Array(16),$M=new Float32Array(9),QM=new Float32Array(4);function Eu(t,e,n){const i=t[0];if(i<=0||i>0)return t;const s=e*n;let r=ZM[s];if(r===void 0&&(r=new Float32Array(s),ZM[s]=r),e!==0){i.toArray(r,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(r,a)}return r}function Ks(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Cs(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function Bk(t,e){let n=JM[e];n===void 0&&(n=new Int32Array(e),JM[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function kZ(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function CZ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ks(n,e))return;t.uniform2fv(this.addr,e),Cs(n,e)}}function LZ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ks(n,e))return;t.uniform3fv(this.addr,e),Cs(n,e)}}function PZ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ks(n,e))return;t.uniform4fv(this.addr,e),Cs(n,e)}}function RZ(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ks(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Cs(n,e)}else{if(Ks(n,i))return;QM.set(i),t.uniformMatrix2fv(this.addr,!1,QM),Cs(n,i)}}function DZ(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ks(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Cs(n,e)}else{if(Ks(n,i))return;$M.set(i),t.uniformMatrix3fv(this.addr,!1,$M),Cs(n,i)}}function OZ(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ks(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Cs(n,e)}else{if(Ks(n,i))return;KM.set(i),t.uniformMatrix4fv(this.addr,!1,KM),Cs(n,i)}}function IZ(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.safeSetTexture2D(e||Ik,s)}function NZ(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.setTexture2DArray(e||TZ,s)}function BZ(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.setTexture3D(e||AZ,s)}function FZ(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.safeSetTextureCube(e||Nk,s)}function zZ(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function UZ(t,e){const n=this.cache;Ks(n,e)||(t.uniform2iv(this.addr,e),Cs(n,e))}function HZ(t,e){const n=this.cache;Ks(n,e)||(t.uniform3iv(this.addr,e),Cs(n,e))}function VZ(t,e){const n=this.cache;Ks(n,e)||(t.uniform4iv(this.addr,e),Cs(n,e))}function GZ(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function WZ(t){switch(t){case 5126:return kZ;case 35664:return CZ;case 35665:return LZ;case 35666:return PZ;case 35674:return RZ;case 35675:return DZ;case 35676:return OZ;case 5124:case 35670:return zZ;case 35667:case 35671:return UZ;case 35668:case 35672:return HZ;case 35669:case 35673:return VZ;case 5125:return GZ;case 35678:case 36198:case 36298:case 36306:case 35682:return IZ;case 35679:case 36299:case 36307:return BZ;case 35680:case 36300:case 36308:case 36293:return FZ;case 36289:case 36303:case 36311:case 36292:return NZ}}function jZ(t,e){t.uniform1fv(this.addr,e)}function YZ(t,e){t.uniform1iv(this.addr,e)}function qZ(t,e){t.uniform2iv(this.addr,e)}function XZ(t,e){t.uniform3iv(this.addr,e)}function ZZ(t,e){t.uniform4iv(this.addr,e)}function JZ(t,e){const n=Eu(e,this.size,2);t.uniform2fv(this.addr,n)}function KZ(t,e){const n=Eu(e,this.size,3);t.uniform3fv(this.addr,n)}function $Z(t,e){const n=Eu(e,this.size,4);t.uniform4fv(this.addr,n)}function QZ(t,e){const n=Eu(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function eJ(t,e){const n=Eu(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function tJ(t,e){const n=Eu(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function nJ(t,e,n){const i=e.length,s=Bk(n,i);t.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)n.safeSetTexture2D(e[r]||Ik,s[r])}function iJ(t,e,n){const i=e.length,s=Bk(n,i);t.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)n.safeSetTextureCube(e[r]||Nk,s[r])}function sJ(t){switch(t){case 5126:return jZ;case 35664:return JZ;case 35665:return KZ;case 35666:return $Z;case 35674:return QZ;case 35675:return eJ;case 35676:return tJ;case 5124:case 35670:return YZ;case 35667:case 35671:return qZ;case 35668:case 35672:return XZ;case 35669:case 35673:return ZZ;case 35678:case 36198:case 36298:case 36306:case 35682:return nJ;case 35680:case 36300:case 36308:case 36293:return iJ}}function rJ(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=WZ(e.type)}function Fk(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=sJ(e.type)}Fk.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Cs(e,t)};function zk(t){this.id=t,this.seq=[],this.map={}}zk.prototype.setValue=function(t,e,n){const i=this.seq;for(let s=0,r=i.length;s!==r;++s){const o=i[s];o.setValue(t,e[o.id],n)}};const e1=/([\w\d_]+)(\])?(\[|\.)?/g;function e3(t,e){t.seq.push(e),t.map[e.id]=e}function oJ(t,e,n){const i=t.name,s=i.length;for(e1.lastIndex=0;;){const r=e1.exec(i),o=e1.lastIndex;let a=r[1];const l=r[2]==="]",c=r[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===s){e3(n,c===void 0?new rJ(a,t,e):new Fk(a,t,e));break}else{let f=n.map[a];f===void 0&&(f=new zk(a),e3(n,f)),n=f}}}function va(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){const s=t.getActiveUniform(e,i),r=t.getUniformLocation(e,s.name);oJ(s,r,this)}}va.prototype.setValue=function(t,e,n,i){const s=this.map[e];s!==void 0&&s.setValue(t,n,i)};va.prototype.setOptional=function(t,e,n){const i=e[n];i!==void 0&&this.setValue(t,n,i)};va.upload=function(t,e,n,i){for(let s=0,r=e.length;s!==r;++s){const o=e[s],a=n[o.id];a.needsUpdate!==!1&&o.setValue(t,a.value,i)}};va.seqWithValue=function(t,e){const n=[];for(let i=0,s=t.length;i!==s;++i){const r=t[i];r.id in e&&n.push(r)}return n};function t3(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let aJ=0;function lJ(t){const e=t.split(`
`);for(let n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join(`
`)}function Uk(t){switch(t){case Vh:return["Linear","( value )"];case Ck:return["sRGB","( value )"];case mY:return["RGBE","( value )"];case _Y:return["RGBM","( value, 7.0 )"];case vY:return["RGBM","( value, 16.0 )"];case bY:return["RGBD","( value, 256.0 )"];case pY:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case gY:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function n3(t,e,n){const i=t.getShaderParameter(e,35713),s=t.getShaderInfoLog(e).trim();if(i&&s==="")return"";const r=t.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+`
`+s+lJ(r)}function Wu(t,e){const n=Uk(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function cJ(t,e){const n=Uk(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function uJ(t,e){let n;switch(e){case pj:n="Linear";break;case mj:n="Reinhard";break;case gj:n="OptimizedCineon";break;case _j:n="ACESFilmic";break;case vj:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function fJ(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(of).join(`
`)}function hJ(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function dJ(t,e){const n={},i=t.getProgramParameter(e,35721);for(let s=0;s<i;s++){const o=t.getActiveAttrib(e,s).name;n[o]=t.getAttribLocation(e,o)}return n}function of(t){return t!==""}function i3(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function s3(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const pJ=/^[ \t]*#include +<([\w\d./]+)>/gm;function C_(t){return t.replace(pJ,mJ)}function mJ(t,e){const n=ln[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return C_(n)}const gJ=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,_J=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function r3(t){return t.replace(_J,Hk).replace(gJ,vJ)}function vJ(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Hk(t,e,n,i)}function Hk(t,e,n,i){let s="";for(let r=parseInt(e);r<parseInt(n);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function o3(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function bJ(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Mk?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===YW?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===rf&&(e="SHADOWMAP_TYPE_VSM"),e}function yJ(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Dg:case Og:e="ENVMAP_TYPE_CUBE";break;case Ig:case Ng:e="ENVMAP_TYPE_CUBE_UV";break}return e}function wJ(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Og:case Ng:e="ENVMAP_MODE_REFRACTION";break}return e}function xJ(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Rg:e="ENVMAP_BLENDING_MULTIPLY";break;case hj:e="ENVMAP_BLENDING_MIX";break;case dj:e="ENVMAP_BLENDING_ADD";break}return e}function MJ(t,e,n,i){const s=t.getContext(),r=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=bJ(n),c=yJ(n),u=wJ(n),f=xJ(n),h=t.gammaFactor>0?t.gammaFactor:1,d=n.isWebGL2?"":fJ(n),p=hJ(r),_=s.createProgram();let m,v,g=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(m=[p].filter(of).join(`
`),m.length>0&&(m+=`
`),v=[d,p].filter(of).join(`
`),v.length>0&&(v+=`
`)):(m=[o3(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+h,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(of).join(`
`),v=[d,o3(n),"#define SHADER_NAME "+n.shaderName,p,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+h,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Tf?"#define TONE_MAPPING":"",n.toneMapping!==Tf?ln.tonemapping_pars_fragment:"",n.toneMapping!==Tf?uJ("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",ln.encodings_pars_fragment,n.map?Wu("mapTexelToLinear",n.mapEncoding):"",n.matcap?Wu("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Wu("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Wu("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Wu("lightMapTexelToLinear",n.lightMapEncoding):"",cJ("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(of).join(`
`)),o=C_(o),o=i3(o,n),o=s3(o,n),a=C_(a),a=i3(a,n),a=s3(a,n),o=r3(o),a=r3(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(g=`#version 300 es
`,m=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,v=["#define varying in",n.glslVersion===FM?"":"out highp vec4 pc_fragColor;",n.glslVersion===FM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const b=g+m+o,y=g+v+a,w=t3(s,35633,b),x=t3(s,35632,y);if(s.attachShader(_,w),s.attachShader(_,x),n.index0AttributeName!==void 0?s.bindAttribLocation(_,0,n.index0AttributeName):n.morphTargets===!0&&s.bindAttribLocation(_,0,"position"),s.linkProgram(_),t.debug.checkShaderErrors){const A=s.getProgramInfoLog(_).trim(),C=s.getShaderInfoLog(w).trim(),k=s.getShaderInfoLog(x).trim();let L=!0,F=!0;if(s.getProgramParameter(_,35714)===!1){L=!1;const U=n3(s,w,"vertex"),N=n3(s,x,"fragment");console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(_,35715),"gl.getProgramInfoLog",A,U,N)}else A!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",A):(C===""||k==="")&&(F=!1);F&&(this.diagnostics={runnable:L,programLog:A,vertexShader:{log:C,prefix:m},fragmentShader:{log:k,prefix:v}})}s.deleteShader(w),s.deleteShader(x);let S;this.getUniforms=function(){return S===void 0&&(S=new va(s,_)),S};let T;return this.getAttributes=function(){return T===void 0&&(T=dJ(s,_)),T},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(_),this.program=void 0},this.name=n.shaderName,this.id=aJ++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=w,this.fragmentShader=x,this}function SJ(t,e,n,i,s,r){const o=[],a=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,u=i.maxVertexUniforms,f=i.vertexTextures;let h=i.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function _(x){const T=x.skeleton.bones;if(c)return 1024;{const C=Math.floor((u-20)/4),k=Math.min(C,T.length);return k<T.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+T.length+" bones. This GPU supports "+k+"."),0):k}}function m(x){let S;return x?x.isTexture?S=x.encoding:x.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),S=x.texture.encoding):S=Vh,S}function v(x,S,T,A,C){const k=A.fog,L=x.isMeshStandardMaterial?A.environment:null,F=e.get(x.envMap||L),U=d[x.type],N=C.isSkinnedMesh?_(C):0;x.precision!==null&&(h=i.getMaxPrecision(x.precision),h!==x.precision&&console.warn("THREE.WebGLProgram.getParameters:",x.precision,"not supported, using",h,"instead."));let B,W;if(U){const ge=Ur[U];B=ge.vertexShader,W=ge.fragmentShader}else B=x.vertexShader,W=x.fragmentShader;const ee=t.getRenderTarget();return{isWebGL2:a,shaderID:U,shaderName:x.type,vertexShader:B,fragmentShader:W,defines:x.defines,isRawShaderMaterial:x.isRawShaderMaterial===!0,glslVersion:x.glslVersion,precision:h,instancing:C.isInstancedMesh===!0,instancingColor:C.isInstancedMesh===!0&&C.instanceColor!==null,supportsVertexTextures:f,outputEncoding:ee!==null?m(ee.texture):t.outputEncoding,map:!!x.map,mapEncoding:m(x.map),matcap:!!x.matcap,matcapEncoding:m(x.matcap),envMap:!!F,envMapMode:F&&F.mapping,envMapEncoding:m(F),envMapCubeUV:!!F&&(F.mapping===Ig||F.mapping===Ng),lightMap:!!x.lightMap,lightMapEncoding:m(x.lightMap),aoMap:!!x.aoMap,emissiveMap:!!x.emissiveMap,emissiveMapEncoding:m(x.emissiveMap),bumpMap:!!x.bumpMap,normalMap:!!x.normalMap,objectSpaceNormalMap:x.normalMapType===xY,tangentSpaceNormalMap:x.normalMapType===Su,clearcoatMap:!!x.clearcoatMap,clearcoatRoughnessMap:!!x.clearcoatRoughnessMap,clearcoatNormalMap:!!x.clearcoatNormalMap,displacementMap:!!x.displacementMap,roughnessMap:!!x.roughnessMap,metalnessMap:!!x.metalnessMap,specularMap:!!x.specularMap,alphaMap:!!x.alphaMap,gradientMap:!!x.gradientMap,sheen:!!x.sheen,transmissionMap:!!x.transmissionMap,combine:x.combine,vertexTangents:x.normalMap&&x.vertexTangents,vertexColors:x.vertexColors,vertexUvs:!!x.map||!!x.bumpMap||!!x.normalMap||!!x.specularMap||!!x.alphaMap||!!x.emissiveMap||!!x.roughnessMap||!!x.metalnessMap||!!x.clearcoatMap||!!x.clearcoatRoughnessMap||!!x.clearcoatNormalMap||!!x.displacementMap||!!x.transmissionMap,uvsVertexOnly:!(!!x.map||!!x.bumpMap||!!x.normalMap||!!x.specularMap||!!x.alphaMap||!!x.emissiveMap||!!x.roughnessMap||!!x.metalnessMap||!!x.clearcoatNormalMap||!!x.transmissionMap)&&!!x.displacementMap,fog:!!k,useFog:x.fog,fogExp2:k&&k.isFogExp2,flatShading:x.flatShading,sizeAttenuation:x.sizeAttenuation,logarithmicDepthBuffer:l,skinning:x.skinning&&N>0,maxBones:N,useVertexTexture:c,morphTargets:x.morphTargets,morphNormals:x.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numClippingPlanes:r.numPlanes,numClipIntersection:r.numIntersection,dithering:x.dithering,shadowMapEnabled:t.shadowMap.enabled&&T.length>0,shadowMapType:t.shadowMap.type,toneMapping:x.toneMapped?t.toneMapping:Tf,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:x.premultipliedAlpha,alphaTest:x.alphaTest,doubleSided:x.side===wl,flipSided:x.side===Di,depthPacking:x.depthPacking!==void 0?x.depthPacking:!1,index0AttributeName:x.index0AttributeName,extensionDerivatives:x.extensions&&x.extensions.derivatives,extensionFragDepth:x.extensions&&x.extensions.fragDepth,extensionDrawBuffers:x.extensions&&x.extensions.drawBuffers,extensionShaderTextureLOD:x.extensions&&x.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:a||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||n.has("EXT_shader_texture_lod"),customProgramCacheKey:x.customProgramCacheKey()}}function g(x){const S=[];if(x.shaderID?S.push(x.shaderID):(S.push(x.fragmentShader),S.push(x.vertexShader)),x.defines!==void 0)for(const T in x.defines)S.push(T),S.push(x.defines[T]);if(x.isRawShaderMaterial===!1){for(let T=0;T<p.length;T++)S.push(x[p[T]]);S.push(t.outputEncoding),S.push(t.gammaFactor)}return S.push(x.customProgramCacheKey),S.join()}function b(x){const S=d[x.type];let T;if(S){const A=Ur[S];T=UY.clone(A.uniforms)}else T=x.uniforms;return T}function y(x,S){let T;for(let A=0,C=o.length;A<C;A++){const k=o[A];if(k.cacheKey===S){T=k,++T.usedTimes;break}}return T===void 0&&(T=new MJ(t,S,x,s),o.push(T)),T}function w(x){if(--x.usedTimes===0){const S=o.indexOf(x);o[S]=o[o.length-1],o.pop(),x.destroy()}}return{getParameters:v,getProgramCacheKey:g,getUniforms:b,acquireProgram:y,releaseProgram:w,programs:o}}function EJ(){let t=new WeakMap;function e(r){let o=t.get(r);return o===void 0&&(o={},t.set(r,o)),o}function n(r){t.delete(r)}function i(r,o,a){t.get(r)[o]=a}function s(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:s}}function TJ(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function AJ(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function a3(t){const e=[];let n=0;const i=[],s=[],r={id:-1};function o(){n=0,i.length=0,s.length=0}function a(h,d,p,_,m,v){let g=e[n];const b=t.get(p);return g===void 0?(g={id:h.id,object:h,geometry:d,material:p,program:b.program||r,groupOrder:_,renderOrder:h.renderOrder,z:m,group:v},e[n]=g):(g.id=h.id,g.object=h,g.geometry=d,g.material=p,g.program=b.program||r,g.groupOrder=_,g.renderOrder=h.renderOrder,g.z=m,g.group=v),n++,g}function l(h,d,p,_,m,v){const g=a(h,d,p,_,m,v);(p.transparent===!0?s:i).push(g)}function c(h,d,p,_,m,v){const g=a(h,d,p,_,m,v);(p.transparent===!0?s:i).unshift(g)}function u(h,d){i.length>1&&i.sort(h||TJ),s.length>1&&s.sort(d||AJ)}function f(){for(let h=n,d=e.length;h<d;h++){const p=e[h];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.program=null,p.group=null}}return{opaque:i,transparent:s,init:o,push:l,unshift:c,finish:f,sort:u}}function kJ(t){let e=new WeakMap;function n(s,r){const o=e.get(s);let a;return o===void 0?(a=new a3(t),e.set(s,new WeakMap),e.get(s).set(r,a)):(a=o.get(r),a===void 0&&(a=new a3(t),o.set(r,a))),a}function i(){e=new WeakMap}return{get:n,dispose:i}}function CJ(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new J,color:new Mt};break;case"SpotLight":n={position:new J,direction:new J,color:new Mt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new J,color:new Mt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new J,skyColor:new Mt,groundColor:new Mt};break;case"RectAreaLight":n={color:new Mt,position:new J,halfWidth:new J,halfHeight:new J};break}return t[e.id]=n,n}}}function LJ(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let PJ=0;function RJ(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function DJ(){const t=new CJ,e=LJ(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let a=0;a<9;a++)n.probe.push(new J);const i=new J,s=new nn,r=new nn;function o(a,l,c){let u=0,f=0,h=0;for(let S=0;S<9;S++)n.probe[S].set(0,0,0);let d=0,p=0,_=0,m=0,v=0,g=0,b=0,y=0;const w=c.matrixWorldInverse;a.sort(RJ);for(let S=0,T=a.length;S<T;S++){const A=a[S],C=A.color,k=A.intensity,L=A.distance,F=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)u+=C.r*k,f+=C.g*k,h+=C.b*k;else if(A.isLightProbe)for(let U=0;U<9;U++)n.probe[U].addScaledVector(A.sh.coefficients[U],k);else if(A.isDirectionalLight){const U=t.get(A);if(U.color.copy(A.color).multiplyScalar(A.intensity),U.direction.setFromMatrixPosition(A.matrixWorld),i.setFromMatrixPosition(A.target.matrixWorld),U.direction.sub(i),U.direction.transformDirection(w),A.castShadow){const N=A.shadow,B=e.get(A);B.shadowBias=N.bias,B.shadowNormalBias=N.normalBias,B.shadowRadius=N.radius,B.shadowMapSize=N.mapSize,n.directionalShadow[d]=B,n.directionalShadowMap[d]=F,n.directionalShadowMatrix[d]=A.shadow.matrix,g++}n.directional[d]=U,d++}else if(A.isSpotLight){const U=t.get(A);if(U.position.setFromMatrixPosition(A.matrixWorld),U.position.applyMatrix4(w),U.color.copy(C).multiplyScalar(k),U.distance=L,U.direction.setFromMatrixPosition(A.matrixWorld),i.setFromMatrixPosition(A.target.matrixWorld),U.direction.sub(i),U.direction.transformDirection(w),U.coneCos=Math.cos(A.angle),U.penumbraCos=Math.cos(A.angle*(1-A.penumbra)),U.decay=A.decay,A.castShadow){const N=A.shadow,B=e.get(A);B.shadowBias=N.bias,B.shadowNormalBias=N.normalBias,B.shadowRadius=N.radius,B.shadowMapSize=N.mapSize,n.spotShadow[_]=B,n.spotShadowMap[_]=F,n.spotShadowMatrix[_]=A.shadow.matrix,y++}n.spot[_]=U,_++}else if(A.isRectAreaLight){const U=t.get(A);U.color.copy(C).multiplyScalar(k),U.position.setFromMatrixPosition(A.matrixWorld),U.position.applyMatrix4(w),r.identity(),s.copy(A.matrixWorld),s.premultiply(w),r.extractRotation(s),U.halfWidth.set(A.width*.5,0,0),U.halfHeight.set(0,A.height*.5,0),U.halfWidth.applyMatrix4(r),U.halfHeight.applyMatrix4(r),n.rectArea[m]=U,m++}else if(A.isPointLight){const U=t.get(A);if(U.position.setFromMatrixPosition(A.matrixWorld),U.position.applyMatrix4(w),U.color.copy(A.color).multiplyScalar(A.intensity),U.distance=A.distance,U.decay=A.decay,A.castShadow){const N=A.shadow,B=e.get(A);B.shadowBias=N.bias,B.shadowNormalBias=N.normalBias,B.shadowRadius=N.radius,B.shadowMapSize=N.mapSize,B.shadowCameraNear=N.camera.near,B.shadowCameraFar=N.camera.far,n.pointShadow[p]=B,n.pointShadowMap[p]=F,n.pointShadowMatrix[p]=A.shadow.matrix,b++}n.point[p]=U,p++}else if(A.isHemisphereLight){const U=t.get(A);U.direction.setFromMatrixPosition(A.matrixWorld),U.direction.transformDirection(w),U.direction.normalize(),U.skyColor.copy(A.color).multiplyScalar(k),U.groundColor.copy(A.groundColor).multiplyScalar(k),n.hemi[v]=U,v++}}m>0&&(n.rectAreaLTC1=ut.LTC_1,n.rectAreaLTC2=ut.LTC_2),n.ambient[0]=u,n.ambient[1]=f,n.ambient[2]=h;const x=n.hash;(x.directionalLength!==d||x.pointLength!==p||x.spotLength!==_||x.rectAreaLength!==m||x.hemiLength!==v||x.numDirectionalShadows!==g||x.numPointShadows!==b||x.numSpotShadows!==y)&&(n.directional.length=d,n.spot.length=_,n.rectArea.length=m,n.point.length=p,n.hemi.length=v,n.directionalShadow.length=g,n.directionalShadowMap.length=g,n.pointShadow.length=b,n.pointShadowMap.length=b,n.spotShadow.length=y,n.spotShadowMap.length=y,n.directionalShadowMatrix.length=g,n.pointShadowMatrix.length=b,n.spotShadowMatrix.length=y,x.directionalLength=d,x.pointLength=p,x.spotLength=_,x.rectAreaLength=m,x.hemiLength=v,x.numDirectionalShadows=g,x.numPointShadows=b,x.numSpotShadows=y,n.version=PJ++)}return{setup:o,state:n}}function l3(){const t=new DJ,e=[],n=[];function i(){e.length=0,n.length=0}function s(l){e.push(l)}function r(l){n.push(l)}function o(l){t.setup(e,n,l)}return{init:i,state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:o,pushLight:s,pushShadow:r}}function OJ(){let t=new WeakMap;function e(i,s){let r;return t.has(i)===!1?(r=new l3,t.set(i,new WeakMap),t.get(i).set(s,r)):t.get(i).has(s)===!1?(r=new l3,t.get(i).set(s,r)):r=t.get(i).get(s),r}function n(){t=new WeakMap}return{get:e,dispose:n}}function Ml(t){Dt.call(this),this.type="MeshDepthMaterial",this.depthPacking=yY,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}Ml.prototype=Object.create(Dt.prototype);Ml.prototype.constructor=Ml;Ml.prototype.isMeshDepthMaterial=!0;Ml.prototype.copy=function(t){return Dt.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this};function Sl(t){Dt.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new J,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}Sl.prototype=Object.create(Dt.prototype);Sl.prototype.constructor=Sl;Sl.prototype.isMeshDistanceMaterial=!0;Sl.prototype.copy=function(t){return Dt.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var IJ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,NJ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function Vk(t,e,n){let i=new zg;const s=new We,r=new We,o=new On,a=[],l=[],c={},u={0:Di,1:Pg,2:wl},f=new ps({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new We},radius:{value:4}},vertexShader:NJ,fragmentShader:IJ}),h=f.clone();h.defines.HORIZONAL_PASS=1;const d=new Qt;d.setAttribute("position",new zt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new xi(d,f),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Mk,this.render=function(w,x,S){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||w.length===0)return;const T=t.getRenderTarget(),A=t.getActiveCubeFace(),C=t.getActiveMipmapLevel(),k=t.state;k.setBlending(Sf),k.buffers.color.setClear(1,1,1,1),k.buffers.depth.setTest(!0),k.setScissorTest(!1);for(let L=0,F=w.length;L<F;L++){const U=w[L],N=U.shadow;if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;if(N===void 0){console.warn("THREE.WebGLShadowMap:",U,"has no shadow.");continue}s.copy(N.mapSize);const B=N.getFrameExtents();if(s.multiply(B),r.copy(N.mapSize),(s.x>n||s.y>n)&&(s.x>n&&(r.x=Math.floor(n/B.x),s.x=r.x*B.x,N.mapSize.x=r.x),s.y>n&&(r.y=Math.floor(n/B.y),s.y=r.y*B.y,N.mapSize.y=r.y)),N.map===null&&!N.isPointLightShadow&&this.type===rf){const ee={minFilter:Ii,magFilter:Ii,format:Mr};N.map=new Sr(s.x,s.y,ee),N.map.texture.name=U.name+".shadowMap",N.mapPass=new Sr(s.x,s.y,ee),N.camera.updateProjectionMatrix()}if(N.map===null){const ee={minFilter:Fi,magFilter:Fi,format:Mr};N.map=new Sr(s.x,s.y,ee),N.map.texture.name=U.name+".shadowMap",N.camera.updateProjectionMatrix()}t.setRenderTarget(N.map),t.clear();const W=N.getViewportCount();for(let ee=0;ee<W;ee++){const K=N.getViewport(ee);o.set(r.x*K.x,r.y*K.y,r.x*K.z,r.y*K.w),k.viewport(o),N.updateMatrices(U,ee),i=N.getFrustum(),y(x,S,N.camera,U,this.type)}!N.isPointLightShadow&&this.type===rf&&m(N,S),N.needsUpdate=!1}_.needsUpdate=!1,t.setRenderTarget(T,A,C)};function m(w,x){const S=e.update(p);f.uniforms.shadow_pass.value=w.map.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,t.setRenderTarget(w.mapPass),t.clear(),t.renderBufferDirect(x,null,S,f,p,null),h.uniforms.shadow_pass.value=w.mapPass.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,t.setRenderTarget(w.map),t.clear(),t.renderBufferDirect(x,null,S,h,p,null)}function v(w,x,S){const T=w<<0|x<<1|S<<2;let A=a[T];return A===void 0&&(A=new Ml({depthPacking:wY,morphTargets:w,skinning:x}),a[T]=A),A}function g(w,x,S){const T=w<<0|x<<1|S<<2;let A=l[T];return A===void 0&&(A=new Sl({morphTargets:w,skinning:x}),l[T]=A),A}function b(w,x,S,T,A,C,k){let L=null,F=v,U=w.customDepthMaterial;if(T.isPointLight===!0&&(F=g,U=w.customDistanceMaterial),U===void 0){let N=!1;S.morphTargets===!0&&(N=x.morphAttributes&&x.morphAttributes.position&&x.morphAttributes.position.length>0);let B=!1;w.isSkinnedMesh===!0&&(S.skinning===!0?B=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",w));const W=w.isInstancedMesh===!0;L=F(N,B,W)}else L=U;if(t.localClippingEnabled&&S.clipShadows===!0&&S.clippingPlanes.length!==0){const N=L.uuid,B=S.uuid;let W=c[N];W===void 0&&(W={},c[N]=W);let ee=W[B];ee===void 0&&(ee=L.clone(),W[B]=ee),L=ee}return L.visible=S.visible,L.wireframe=S.wireframe,k===rf?L.side=S.shadowSide!==null?S.shadowSide:S.side:L.side=S.shadowSide!==null?S.shadowSide:u[S.side],L.clipShadows=S.clipShadows,L.clippingPlanes=S.clippingPlanes,L.clipIntersection=S.clipIntersection,L.wireframeLinewidth=S.wireframeLinewidth,L.linewidth=S.linewidth,T.isPointLight===!0&&L.isMeshDistanceMaterial===!0&&(L.referencePosition.setFromMatrixPosition(T.matrixWorld),L.nearDistance=A,L.farDistance=C),L}function y(w,x,S,T,A){if(w.visible===!1)return;if(w.layers.test(x.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&A===rf)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,w.matrixWorld);const L=e.update(w),F=w.material;if(Array.isArray(F)){const U=L.groups;for(let N=0,B=U.length;N<B;N++){const W=U[N],ee=F[W.materialIndex];if(ee&&ee.visible){const K=b(w,L,ee,T,S.near,S.far,A);t.renderBufferDirect(S,null,L,K,w,W)}}}else if(F.visible){const U=b(w,L,F,T,S.near,S.far,A);t.renderBufferDirect(S,null,L,U,w,null)}}const k=w.children;for(let L=0,F=k.length;L<F;L++)y(k[L],x,S,T,A)}}function BJ(t,e,n){const i=n.isWebGL2;function s(){let ie=!1;const ue=new On;let Re=null;const Ue=new On(0,0,0,0);return{setMask:function(Ee){Re!==Ee&&!ie&&(t.colorMask(Ee,Ee,Ee,Ee),Re=Ee)},setLocked:function(Ee){ie=Ee},setClear:function(Ee,Se,re,we,Me){Me===!0&&(Ee*=we,Se*=we,re*=we),ue.set(Ee,Se,re,we),Ue.equals(ue)===!1&&(t.clearColor(Ee,Se,re,we),Ue.copy(ue))},reset:function(){ie=!1,Re=null,Ue.set(-1,0,0,0)}}}function r(){let ie=!1,ue=null,Re=null,Ue=null;return{setTest:function(Ee){Ee?ge(2929):se(2929)},setMask:function(Ee){ue!==Ee&&!ie&&(t.depthMask(Ee),ue=Ee)},setFunc:function(Ee){if(Re!==Ee){if(Ee)switch(Ee){case rj:t.depthFunc(512);break;case oj:t.depthFunc(519);break;case aj:t.depthFunc(513);break;case v_:t.depthFunc(515);break;case lj:t.depthFunc(514);break;case cj:t.depthFunc(518);break;case uj:t.depthFunc(516);break;case fj:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);Re=Ee}},setLocked:function(Ee){ie=Ee},setClear:function(Ee){Ue!==Ee&&(t.clearDepth(Ee),Ue=Ee)},reset:function(){ie=!1,ue=null,Re=null,Ue=null}}}function o(){let ie=!1,ue=null,Re=null,Ue=null,Ee=null,Se=null,re=null,we=null,Me=null;return{setTest:function(Ne){ie||(Ne?ge(2960):se(2960))},setMask:function(Ne){ue!==Ne&&!ie&&(t.stencilMask(Ne),ue=Ne)},setFunc:function(Ne,Ze,pt){(Re!==Ne||Ue!==Ze||Ee!==pt)&&(t.stencilFunc(Ne,Ze,pt),Re=Ne,Ue=Ze,Ee=pt)},setOp:function(Ne,Ze,pt){(Se!==Ne||re!==Ze||we!==pt)&&(t.stencilOp(Ne,Ze,pt),Se=Ne,re=Ze,we=pt)},setLocked:function(Ne){ie=Ne},setClear:function(Ne){Me!==Ne&&(t.clearStencil(Ne),Me=Ne)},reset:function(){ie=!1,ue=null,Re=null,Ue=null,Ee=null,Se=null,re=null,we=null,Me=null}}}const a=new s,l=new r,c=new o;let u={},f=null,h=null,d=null,p=null,_=null,m=null,v=null,g=null,b=null,y=!1,w=null,x=null,S=null,T=null,A=null;const C=t.getParameter(35661);let k=!1,L=0;const F=t.getParameter(7938);F.indexOf("WebGL")!==-1?(L=parseFloat(/^WebGL\ ([0-9])/.exec(F)[1]),k=L>=1):F.indexOf("OpenGL ES")!==-1&&(L=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(F)[1]),k=L>=2);let U=null,N={};const B=new On,W=new On;function ee(ie,ue,Re){const Ue=new Uint8Array(4),Ee=t.createTexture();t.bindTexture(ie,Ee),t.texParameteri(ie,10241,9728),t.texParameteri(ie,10240,9728);for(let Se=0;Se<Re;Se++)t.texImage2D(ue+Se,0,6408,1,1,0,6408,5121,Ue);return Ee}const K={};K[3553]=ee(3553,3553,1),K[34067]=ee(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ge(2929),l.setFunc(v_),_e(!1),pe(xM),ge(2884),$(Sf);function ge(ie){u[ie]!==!0&&(t.enable(ie),u[ie]=!0)}function se(ie){u[ie]!==!1&&(t.disable(ie),u[ie]=!1)}function X(ie){return f!==ie?(t.useProgram(ie),f=ie,!0):!1}const q={[bc]:32774,[XW]:32778,[ZW]:32779};if(i)q[TM]=32775,q[AM]=32776;else{const ie=e.get("EXT_blend_minmax");ie!==null&&(q[TM]=ie.MIN_EXT,q[AM]=ie.MAX_EXT)}const Y={[JW]:0,[KW]:1,[$W]:768,[Ek]:770,[sj]:776,[nj]:774,[ej]:772,[QW]:769,[Tk]:771,[ij]:775,[tj]:773};function $(ie,ue,Re,Ue,Ee,Se,re,we){if(ie===Sf){h&&(se(3042),h=!1);return}if(h||(ge(3042),h=!0),ie!==qW){if(ie!==d||we!==y){if((p!==bc||v!==bc)&&(t.blendEquation(32774),p=bc,v=bc),we)switch(ie){case Ef:t.blendFuncSeparate(1,771,1,771);break;case MM:t.blendFunc(1,1);break;case SM:t.blendFuncSeparate(0,0,769,771);break;case EM:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}else switch(ie){case Ef:t.blendFuncSeparate(770,771,1,771);break;case MM:t.blendFunc(770,1);break;case SM:t.blendFunc(0,769);break;case EM:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}_=null,m=null,g=null,b=null,d=ie,y=we}return}Ee=Ee||ue,Se=Se||Re,re=re||Ue,(ue!==p||Ee!==v)&&(t.blendEquationSeparate(q[ue],q[Ee]),p=ue,v=Ee),(Re!==_||Ue!==m||Se!==g||re!==b)&&(t.blendFuncSeparate(Y[Re],Y[Ue],Y[Se],Y[re]),_=Re,m=Ue,g=Se,b=re),d=ie,y=null}function ze(ie,ue){ie.side===wl?se(2884):ge(2884);let Re=ie.side===Di;ue&&(Re=!Re),_e(Re),ie.blending===Ef&&ie.transparent===!1?$(Sf):$(ie.blending,ie.blendEquation,ie.blendSrc,ie.blendDst,ie.blendEquationAlpha,ie.blendSrcAlpha,ie.blendDstAlpha,ie.premultipliedAlpha),l.setFunc(ie.depthFunc),l.setTest(ie.depthTest),l.setMask(ie.depthWrite),a.setMask(ie.colorWrite);const Ue=ie.stencilWrite;c.setTest(Ue),Ue&&(c.setMask(ie.stencilWriteMask),c.setFunc(ie.stencilFunc,ie.stencilRef,ie.stencilFuncMask),c.setOp(ie.stencilFail,ie.stencilZFail,ie.stencilZPass)),De(ie.polygonOffset,ie.polygonOffsetFactor,ie.polygonOffsetUnits)}function _e(ie){w!==ie&&(ie?t.frontFace(2304):t.frontFace(2305),w=ie)}function pe(ie){ie!==WW?(ge(2884),ie!==x&&(ie===xM?t.cullFace(1029):ie===jW?t.cullFace(1028):t.cullFace(1032))):se(2884),x=ie}function Te(ie){ie!==S&&(k&&t.lineWidth(ie),S=ie)}function De(ie,ue,Re){ie?(ge(32823),(T!==ue||A!==Re)&&(t.polygonOffset(ue,Re),T=ue,A=Re)):se(32823)}function je(ie){ie?ge(3089):se(3089)}function de(ie){ie===void 0&&(ie=33984+C-1),U!==ie&&(t.activeTexture(ie),U=ie)}function Ae(ie,ue){U===null&&de();let Re=N[U];Re===void 0&&(Re={type:void 0,texture:void 0},N[U]=Re),(Re.type!==ie||Re.texture!==ue)&&(t.bindTexture(ie,ue||K[ie]),Re.type=ie,Re.texture=ue)}function Oe(){const ie=N[U];ie!==void 0&&ie.type!==void 0&&(t.bindTexture(ie.type,null),ie.type=void 0,ie.texture=void 0)}function Ye(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function fe(){try{t.texImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function R(){try{t.texImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function V(ie){B.equals(ie)===!1&&(t.scissor(ie.x,ie.y,ie.z,ie.w),B.copy(ie))}function ne(ie){W.equals(ie)===!1&&(t.viewport(ie.x,ie.y,ie.z,ie.w),W.copy(ie))}function he(){u={},U=null,N={},f=null,d=null,w=null,x=null,a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ge,disable:se,useProgram:X,setBlending:$,setMaterial:ze,setFlipSided:_e,setCullFace:pe,setLineWidth:Te,setPolygonOffset:De,setScissorTest:je,activeTexture:de,bindTexture:Ae,unbindTexture:Oe,compressedTexImage2D:Ye,texImage2D:fe,texImage3D:R,scissor:V,viewport:ne,reset:he}}function FJ(t,e,n,i,s,r,o){const a=s.isWebGL2,l=s.maxTextures,c=s.maxCubemapSize,u=s.maxTextureSize,f=s.maxSamples,h=new WeakMap;let d,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(R,V){return p?new OffscreenCanvas(R,V):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function m(R,V,ne,he){let ie=1;if((R.width>he||R.height>he)&&(ie=he/Math.max(R.width,R.height)),ie<1||V===!0)if(typeof HTMLImageElement<"u"&&R instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&R instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&R instanceof ImageBitmap){const ue=V?Zt.floorPowerOfTwo:Math.floor,Re=ue(ie*R.width),Ue=ue(ie*R.height);d===void 0&&(d=_(Re,Ue));const Ee=ne?_(Re,Ue):d;return Ee.width=Re,Ee.height=Ue,Ee.getContext("2d").drawImage(R,0,0,Re,Ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+R.width+"x"+R.height+") to ("+Re+"x"+Ue+")."),Ee}else return"data"in R&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+R.width+"x"+R.height+")."),R;return R}function v(R){return Zt.isPowerOfTwo(R.width)&&Zt.isPowerOfTwo(R.height)}function g(R){return a?!1:R.wrapS!==us||R.wrapT!==us||R.minFilter!==Fi&&R.minFilter!==Ii}function b(R,V){return R.generateMipmaps&&V&&R.minFilter!==Fi&&R.minFilter!==Ii}function y(R,V,ne,he){t.generateMipmap(R);const ie=i.get(V);ie.__maxMipLevel=Math.log(Math.max(ne,he))*Math.LOG2E}function w(R,V,ne){if(a===!1)return V;if(R!==null){if(t[R]!==void 0)return t[R];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+R+"'")}let he=V;return V===6403&&(ne===5126&&(he=33326),ne===5131&&(he=33325),ne===5121&&(he=33321)),V===6407&&(ne===5126&&(he=34837),ne===5131&&(he=34843),ne===5121&&(he=32849)),V===6408&&(ne===5126&&(he=34836),ne===5131&&(he=34842),ne===5121&&(he=32856)),(he===33325||he===33326||he===34842||he===34836)&&e.get("EXT_color_buffer_float"),he}function x(R){return R===Fi||R===w_||R===x_?9728:9729}function S(R){const V=R.target;V.removeEventListener("dispose",S),A(V),V.isVideoTexture&&h.delete(V),o.memory.textures--}function T(R){const V=R.target;V.removeEventListener("dispose",T),C(V),o.memory.textures--}function A(R){const V=i.get(R);V.__webglInit!==void 0&&(t.deleteTexture(V.__webglTexture),i.remove(R))}function C(R){const V=i.get(R),ne=i.get(R.texture);if(!!R){if(ne.__webglTexture!==void 0&&t.deleteTexture(ne.__webglTexture),R.depthTexture&&R.depthTexture.dispose(),R.isWebGLCubeRenderTarget)for(let he=0;he<6;he++)t.deleteFramebuffer(V.__webglFramebuffer[he]),V.__webglDepthbuffer&&t.deleteRenderbuffer(V.__webglDepthbuffer[he]);else t.deleteFramebuffer(V.__webglFramebuffer),V.__webglDepthbuffer&&t.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&t.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer&&t.deleteRenderbuffer(V.__webglColorRenderbuffer),V.__webglDepthRenderbuffer&&t.deleteRenderbuffer(V.__webglDepthRenderbuffer);i.remove(R.texture),i.remove(R)}}let k=0;function L(){k=0}function F(){const R=k;return R>=l&&console.warn("THREE.WebGLTextures: Trying to use "+R+" texture units while this GPU supports only "+l),k+=1,R}function U(R,V){const ne=i.get(R);if(R.isVideoTexture&&de(R),R.version>0&&ne.__version!==R.version){const he=R.image;if(he===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(he.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{q(ne,R,V);return}}n.activeTexture(33984+V),n.bindTexture(3553,ne.__webglTexture)}function N(R,V){const ne=i.get(R);if(R.version>0&&ne.__version!==R.version){q(ne,R,V);return}n.activeTexture(33984+V),n.bindTexture(35866,ne.__webglTexture)}function B(R,V){const ne=i.get(R);if(R.version>0&&ne.__version!==R.version){q(ne,R,V);return}n.activeTexture(33984+V),n.bindTexture(32879,ne.__webglTexture)}function W(R,V){if(R.image.length!==6)return;const ne=i.get(R);if(R.version>0&&ne.__version!==R.version){X(ne,R),n.activeTexture(33984+V),n.bindTexture(34067,ne.__webglTexture),t.pixelStorei(37440,R.flipY);const he=R&&(R.isCompressedTexture||R.image[0].isCompressedTexture),ie=R.image[0]&&R.image[0].isDataTexture,ue=[];for(let Me=0;Me<6;Me++)!he&&!ie?ue[Me]=m(R.image[Me],!1,!0,c):ue[Me]=ie?R.image[Me].image:R.image[Me];const Re=ue[0],Ue=v(Re)||a,Ee=r.convert(R.format),Se=r.convert(R.type),re=w(R.internalFormat,Ee,Se);se(34067,R,Ue);let we;if(he){for(let Me=0;Me<6;Me++){we=ue[Me].mipmaps;for(let Ne=0;Ne<we.length;Ne++){const Ze=we[Ne];R.format!==Mr&&R.format!==fl?Ee!==null?n.compressedTexImage2D(34069+Me,Ne,re,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+Me,Ne,re,Ze.width,Ze.height,0,Ee,Se,Ze.data)}}ne.__maxMipLevel=we.length-1}else{we=R.mipmaps;for(let Me=0;Me<6;Me++)if(ie){n.texImage2D(34069+Me,0,re,ue[Me].width,ue[Me].height,0,Ee,Se,ue[Me].data);for(let Ne=0;Ne<we.length;Ne++){const pt=we[Ne].image[Me].image;n.texImage2D(34069+Me,Ne+1,re,pt.width,pt.height,0,Ee,Se,pt.data)}}else{n.texImage2D(34069+Me,0,re,Ee,Se,ue[Me]);for(let Ne=0;Ne<we.length;Ne++){const Ze=we[Ne];n.texImage2D(34069+Me,Ne+1,re,Ee,Se,Ze.image[Me])}}ne.__maxMipLevel=we.length}b(R,Ue)&&y(34067,R,Re.width,Re.height),ne.__version=R.version,R.onUpdate&&R.onUpdate(R)}else n.activeTexture(33984+V),n.bindTexture(34067,ne.__webglTexture)}function ee(R,V){n.activeTexture(33984+V),n.bindTexture(34067,i.get(R).__webglTexture)}const K={[Nm]:10497,[us]:33071,[Bm]:33648},ge={[Fi]:9728,[w_]:9984,[x_]:9986,[Ii]:9729,[Ak]:9985,[Hh]:9987};function se(R,V,ne){ne?(t.texParameteri(R,10242,K[V.wrapS]),t.texParameteri(R,10243,K[V.wrapT]),(R===32879||R===35866)&&t.texParameteri(R,32882,K[V.wrapR]),t.texParameteri(R,10240,ge[V.magFilter]),t.texParameteri(R,10241,ge[V.minFilter])):(t.texParameteri(R,10242,33071),t.texParameteri(R,10243,33071),(R===32879||R===35866)&&t.texParameteri(R,32882,33071),(V.wrapS!==us||V.wrapT!==us)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(R,10240,x(V.magFilter)),t.texParameteri(R,10241,x(V.minFilter)),V.minFilter!==Fi&&V.minFilter!==Ii&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const he=e.get("EXT_texture_filter_anisotropic");if(he){if(V.type===ia&&e.get("OES_texture_float_linear")===null||V.type===zm&&(a||e.get("OES_texture_half_float_linear"))===null)return;(V.anisotropy>1||i.get(V).__currentAnisotropy)&&(t.texParameterf(R,he.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,s.getMaxAnisotropy())),i.get(V).__currentAnisotropy=V.anisotropy)}}function X(R,V){R.__webglInit===void 0&&(R.__webglInit=!0,V.addEventListener("dispose",S),R.__webglTexture=t.createTexture(),o.memory.textures++)}function q(R,V,ne){let he=3553;V.isDataTexture2DArray&&(he=35866),V.isDataTexture3D&&(he=32879),X(R,V),n.activeTexture(33984+ne),n.bindTexture(he,R.__webglTexture),t.pixelStorei(37440,V.flipY),t.pixelStorei(37441,V.premultiplyAlpha),t.pixelStorei(3317,V.unpackAlignment);const ie=g(V)&&v(V.image)===!1,ue=m(V.image,ie,!1,u),Re=v(ue)||a,Ue=r.convert(V.format);let Ee=r.convert(V.type),Se=w(V.internalFormat,Ue,Ee);se(he,V,Re);let re;const we=V.mipmaps;if(V.isDepthTexture)Se=6402,a?V.type===ia?Se=36012:V.type===Np?Se=33190:V.type===Af?Se=35056:Se=33189:V.type===ia&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),V.format===Xc&&Se===6402&&V.type!==Fm&&V.type!==Np&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),V.type=Fm,Ee=r.convert(V.type)),V.format===ah&&Se===6402&&(Se=34041,V.type!==Af&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),V.type=Af,Ee=r.convert(V.type))),n.texImage2D(3553,0,Se,ue.width,ue.height,0,Ue,Ee,null);else if(V.isDataTexture)if(we.length>0&&Re){for(let Me=0,Ne=we.length;Me<Ne;Me++)re=we[Me],n.texImage2D(3553,Me,Se,re.width,re.height,0,Ue,Ee,re.data);V.generateMipmaps=!1,R.__maxMipLevel=we.length-1}else n.texImage2D(3553,0,Se,ue.width,ue.height,0,Ue,Ee,ue.data),R.__maxMipLevel=0;else if(V.isCompressedTexture){for(let Me=0,Ne=we.length;Me<Ne;Me++)re=we[Me],V.format!==Mr&&V.format!==fl?Ue!==null?n.compressedTexImage2D(3553,Me,Se,re.width,re.height,0,re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,Me,Se,re.width,re.height,0,Ue,Ee,re.data);R.__maxMipLevel=we.length-1}else if(V.isDataTexture2DArray)n.texImage3D(35866,0,Se,ue.width,ue.height,ue.depth,0,Ue,Ee,ue.data),R.__maxMipLevel=0;else if(V.isDataTexture3D)n.texImage3D(32879,0,Se,ue.width,ue.height,ue.depth,0,Ue,Ee,ue.data),R.__maxMipLevel=0;else if(we.length>0&&Re){for(let Me=0,Ne=we.length;Me<Ne;Me++)re=we[Me],n.texImage2D(3553,Me,Se,Ue,Ee,re);V.generateMipmaps=!1,R.__maxMipLevel=we.length-1}else n.texImage2D(3553,0,Se,Ue,Ee,ue),R.__maxMipLevel=0;b(V,Re)&&y(he,V,ue.width,ue.height),R.__version=V.version,V.onUpdate&&V.onUpdate(V)}function Y(R,V,ne,he){const ie=r.convert(V.texture.format),ue=r.convert(V.texture.type),Re=w(V.texture.internalFormat,ie,ue);n.texImage2D(he,0,Re,V.width,V.height,0,ie,ue,null),t.bindFramebuffer(36160,R),t.framebufferTexture2D(36160,ne,he,i.get(V.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function $(R,V,ne){if(t.bindRenderbuffer(36161,R),V.depthBuffer&&!V.stencilBuffer){let he=33189;if(ne){const ie=V.depthTexture;ie&&ie.isDepthTexture&&(ie.type===ia?he=36012:ie.type===Np&&(he=33190));const ue=je(V);t.renderbufferStorageMultisample(36161,ue,he,V.width,V.height)}else t.renderbufferStorage(36161,he,V.width,V.height);t.framebufferRenderbuffer(36160,36096,36161,R)}else if(V.depthBuffer&&V.stencilBuffer){if(ne){const he=je(V);t.renderbufferStorageMultisample(36161,he,35056,V.width,V.height)}else t.renderbufferStorage(36161,34041,V.width,V.height);t.framebufferRenderbuffer(36160,33306,36161,R)}else{const he=r.convert(V.texture.format),ie=r.convert(V.texture.type),ue=w(V.texture.internalFormat,he,ie);if(ne){const Re=je(V);t.renderbufferStorageMultisample(36161,Re,ue,V.width,V.height)}else t.renderbufferStorage(36161,ue,V.width,V.height)}t.bindRenderbuffer(36161,null)}function ze(R,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,R),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(V.depthTexture).__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),U(V.depthTexture,0);const he=i.get(V.depthTexture).__webglTexture;if(V.depthTexture.format===Xc)t.framebufferTexture2D(36160,36096,3553,he,0);else if(V.depthTexture.format===ah)t.framebufferTexture2D(36160,33306,3553,he,0);else throw new Error("Unknown depthTexture format")}function _e(R){const V=i.get(R),ne=R.isWebGLCubeRenderTarget===!0;if(R.depthTexture){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");ze(V.__webglFramebuffer,R)}else if(ne){V.__webglDepthbuffer=[];for(let he=0;he<6;he++)t.bindFramebuffer(36160,V.__webglFramebuffer[he]),V.__webglDepthbuffer[he]=t.createRenderbuffer(),$(V.__webglDepthbuffer[he],R,!1)}else t.bindFramebuffer(36160,V.__webglFramebuffer),V.__webglDepthbuffer=t.createRenderbuffer(),$(V.__webglDepthbuffer,R,!1);t.bindFramebuffer(36160,null)}function pe(R){const V=i.get(R),ne=i.get(R.texture);R.addEventListener("dispose",T),ne.__webglTexture=t.createTexture(),o.memory.textures++;const he=R.isWebGLCubeRenderTarget===!0,ie=R.isWebGLMultisampleRenderTarget===!0,ue=v(R)||a;if(a&&R.texture.format===fl&&(R.texture.type===ia||R.texture.type===zm)&&(R.texture.format=Mr,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),he){V.__webglFramebuffer=[];for(let Re=0;Re<6;Re++)V.__webglFramebuffer[Re]=t.createFramebuffer()}else if(V.__webglFramebuffer=t.createFramebuffer(),ie)if(a){V.__webglMultisampledFramebuffer=t.createFramebuffer(),V.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,V.__webglColorRenderbuffer);const Re=r.convert(R.texture.format),Ue=r.convert(R.texture.type),Ee=w(R.texture.internalFormat,Re,Ue),Se=je(R);t.renderbufferStorageMultisample(36161,Se,Ee,R.width,R.height),t.bindFramebuffer(36160,V.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,V.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),R.depthBuffer&&(V.__webglDepthRenderbuffer=t.createRenderbuffer(),$(V.__webglDepthRenderbuffer,R,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(he){n.bindTexture(34067,ne.__webglTexture),se(34067,R.texture,ue);for(let Re=0;Re<6;Re++)Y(V.__webglFramebuffer[Re],R,36064,34069+Re);b(R.texture,ue)&&y(34067,R.texture,R.width,R.height),n.bindTexture(34067,null)}else n.bindTexture(3553,ne.__webglTexture),se(3553,R.texture,ue),Y(V.__webglFramebuffer,R,36064,3553),b(R.texture,ue)&&y(3553,R.texture,R.width,R.height),n.bindTexture(3553,null);R.depthBuffer&&_e(R)}function Te(R){const V=R.texture,ne=v(R)||a;if(b(V,ne)){const he=R.isWebGLCubeRenderTarget?34067:3553,ie=i.get(V).__webglTexture;n.bindTexture(he,ie),y(he,V,R.width,R.height),n.bindTexture(he,null)}}function De(R){if(R.isWebGLMultisampleRenderTarget)if(a){const V=i.get(R);t.bindFramebuffer(36008,V.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,V.__webglFramebuffer);const ne=R.width,he=R.height;let ie=16384;R.depthBuffer&&(ie|=256),R.stencilBuffer&&(ie|=1024),t.blitFramebuffer(0,0,ne,he,0,0,ne,he,ie,9728),t.bindFramebuffer(36160,V.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function je(R){return a&&R.isWebGLMultisampleRenderTarget?Math.min(f,R.samples):0}function de(R){const V=o.render.frame;h.get(R)!==V&&(h.set(R,V),R.update())}let Ae=!1,Oe=!1;function Ye(R,V){R&&R.isWebGLRenderTarget&&(Ae===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Ae=!0),R=R.texture),U(R,V)}function fe(R,V){R&&R.isWebGLCubeRenderTarget&&(Oe===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Oe=!0),R=R.texture),R&&R.isCubeTexture||Array.isArray(R.image)&&R.image.length===6?W(R,V):ee(R,V)}this.allocateTextureUnit=F,this.resetTextureUnits=L,this.setTexture2D=U,this.setTexture2DArray=N,this.setTexture3D=B,this.setTextureCube=W,this.setTextureCubeDynamic=ee,this.setupRenderTarget=pe,this.updateRenderTargetMipmap=Te,this.updateMultisampleRenderTarget=De,this.safeSetTexture2D=Ye,this.safeSetTextureCube=fe}function zJ(t,e,n){const i=n.isWebGL2;function s(r){let o;if(r===Nb)return 5121;if(r===xj)return 32819;if(r===Mj)return 32820;if(r===Sj)return 33635;if(r===bj)return 5120;if(r===yj)return 5122;if(r===Fm)return 5123;if(r===wj)return 5124;if(r===Np)return 5125;if(r===ia)return 5126;if(r===zm)return i?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(r===Ej)return 6406;if(r===fl)return 6407;if(r===Mr)return 6408;if(r===Tj)return 6409;if(r===Aj)return 6410;if(r===Xc)return 6402;if(r===ah)return 34041;if(r===kj)return 6403;if(r===Cj)return 36244;if(r===Lj)return 33319;if(r===Pj)return 33320;if(r===Rj)return 36248;if(r===Dj)return 36249;if(r===kM||r===CM||r===LM||r===PM)if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(r===kM)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===CM)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===LM)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===PM)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===RM||r===DM||r===OM||r===IM)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(r===RM)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===DM)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===OM)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===IM)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===Oj)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((r===NM||r===BM)&&(o=e.get("WEBGL_compressed_texture_etc"),o!==null)){if(r===NM)return o.COMPRESSED_RGB8_ETC2;if(r===BM)return o.COMPRESSED_RGBA8_ETC2_EAC}if(r===Ij||r===Nj||r===Bj||r===Fj||r===zj||r===Uj||r===Hj||r===Vj||r===Gj||r===Wj||r===jj||r===Yj||r===qj||r===Xj||r===Jj||r===Kj||r===$j||r===Qj||r===eY||r===tY||r===nY||r===iY||r===sY||r===rY||r===oY||r===aY||r===lY||r===cY)return o=e.get("WEBGL_compressed_texture_astc"),o!==null?r:null;if(r===Zj)return o=e.get("EXT_texture_compression_bptc"),o!==null?r:null;if(r===Af)return i?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:s}}function L_(t){bi.call(this),this.cameras=t||[]}L_.prototype=Object.assign(Object.create(bi.prototype),{constructor:L_,isArrayCamera:!0});function sl(){kt.call(this),this.type="Group"}sl.prototype=Object.assign(Object.create(kt.prototype),{constructor:sl,isGroup:!0});function Cf(){this._targetRay=null,this._grip=null,this._hand=null}Object.assign(Cf.prototype,{constructor:Cf,getHandSpace:function(){if(this._hand===null&&(this._hand=new sl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){const e=new sl;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new sl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new sl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(t,e,n){let i=null,s=null,r=null;const o=this._targetRay,a=this._grip,l=this._hand;if(t)if(l&&t.hand){r=!0;for(let c=0;c<=window.XRHand.LITTLE_PHALANX_TIP;c++)if(t.hand[c]){const u=e.getJointPose(t.hand[c],n),f=l.joints[c];u!==null&&(f.matrix.fromArray(u.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.jointRadius=u.radius),f.visible=u!==null;const h=l.joints[window.XRHand.INDEX_PHALANX_TIP],d=l.joints[window.XRHand.THUMB_PHALANX_TIP],p=h.position.distanceTo(d.position),_=.02,m=.005;l.inputState.pinching&&p>_+m?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&p<=_-m&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}}else o!==null&&(i=e.getPose(t.targetRaySpace,n),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),a!==null&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),s!==null&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)));return o!==null&&(o.visible=i!==null),a!==null&&(a.visible=s!==null),l!==null&&(l.visible=r!==null),this}});function Gk(t,e){const n=this;let i=null,s=1,r=null,o="local-floor",a=null;const l=[],c=new Map,u=new bi;u.layers.enable(1),u.viewport=new On;const f=new bi;f.layers.enable(2),f.viewport=new On;const h=[u,f],d=new L_;d.layers.enable(1),d.layers.enable(2);let p=null,_=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(k){let L=l[k];return L===void 0&&(L=new Cf,l[k]=L),L.getTargetRaySpace()},this.getControllerGrip=function(k){let L=l[k];return L===void 0&&(L=new Cf,l[k]=L),L.getGripSpace()},this.getHand=function(k){let L=l[k];return L===void 0&&(L=new Cf,l[k]=L),L.getHandSpace()};function m(k){const L=c.get(k.inputSource);L&&L.dispatchEvent({type:k.type})}function v(){c.forEach(function(k,L){k.disconnect(L)}),c.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),C.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function g(k){r=k,C.setContext(i),C.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(k){s=k,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(k){o=k,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return r},this.getSession=function(){return i},this.setSession=function(k){if(i=k,i!==null){i.addEventListener("select",m),i.addEventListener("selectstart",m),i.addEventListener("selectend",m),i.addEventListener("squeeze",m),i.addEventListener("squeezestart",m),i.addEventListener("squeezeend",m),i.addEventListener("end",v);const L=e.getContextAttributes();L.xrCompatible!==!0&&e.makeXRCompatible();const F={antialias:L.antialias,alpha:L.alpha,depth:L.depth,stencil:L.stencil,framebufferScaleFactor:s},U=new XRWebGLLayer(i,e,F);i.updateRenderState({baseLayer:U}),i.requestReferenceSpace(o).then(g),i.addEventListener("inputsourceschange",b)}};function b(k){const L=i.inputSources;for(let F=0;F<l.length;F++)c.set(L[F],l[F]);for(let F=0;F<k.removed.length;F++){const U=k.removed[F],N=c.get(U);N&&(N.dispatchEvent({type:"disconnected",data:U}),c.delete(U))}for(let F=0;F<k.added.length;F++){const U=k.added[F],N=c.get(U);N&&N.dispatchEvent({type:"connected",data:U})}}const y=new J,w=new J;function x(k,L,F){y.setFromMatrixPosition(L.matrixWorld),w.setFromMatrixPosition(F.matrixWorld);const U=y.distanceTo(w),N=L.projectionMatrix.elements,B=F.projectionMatrix.elements,W=N[14]/(N[10]-1),ee=N[14]/(N[10]+1),K=(N[9]+1)/N[5],ge=(N[9]-1)/N[5],se=(N[8]-1)/N[0],X=(B[8]+1)/B[0],q=W*se,Y=W*X,$=U/(-se+X),ze=$*-se;L.matrixWorld.decompose(k.position,k.quaternion,k.scale),k.translateX(ze),k.translateZ($),k.matrixWorld.compose(k.position,k.quaternion,k.scale),k.matrixWorldInverse.getInverse(k.matrixWorld);const _e=W+$,pe=ee+$,Te=q-ze,De=Y+(U-ze),je=K*ee/pe*_e,de=ge*ee/pe*_e;k.projectionMatrix.makePerspective(Te,De,je,de,_e,pe)}function S(k,L){L===null?k.matrixWorld.copy(k.matrix):k.matrixWorld.multiplyMatrices(L.matrixWorld,k.matrix),k.matrixWorldInverse.getInverse(k.matrixWorld)}this.getCamera=function(k){d.near=f.near=u.near=k.near,d.far=f.far=u.far=k.far,(p!==d.near||_!==d.far)&&(i.updateRenderState({depthNear:d.near,depthFar:d.far}),p=d.near,_=d.far);const L=k.parent,F=d.cameras;S(d,L);for(let N=0;N<F.length;N++)S(F[N],L);k.matrixWorld.copy(d.matrixWorld);const U=k.children;for(let N=0,B=U.length;N<B;N++)U[N].updateMatrixWorld(!0);return F.length===2?x(d,u,f):d.projectionMatrix.copy(u.projectionMatrix),d};let T=null;function A(k,L){if(a=L.getViewerPose(r),a!==null){const U=a.views,N=i.renderState.baseLayer;t.setFramebuffer(N.framebuffer);let B=!1;U.length!==d.cameras.length&&(d.cameras.length=0,B=!0);for(let W=0;W<U.length;W++){const ee=U[W],K=N.getViewport(ee),ge=h[W];ge.matrix.fromArray(ee.transform.matrix),ge.projectionMatrix.fromArray(ee.projectionMatrix),ge.viewport.set(K.x,K.y,K.width,K.height),W===0&&d.matrix.copy(ge.matrix),B===!0&&d.cameras.push(ge)}}const F=i.inputSources;for(let U=0;U<l.length;U++){const N=l[U],B=F[U];N.update(B,L,r)}T&&T(k,L)}const C=new Ok;C.setAnimationLoop(A),this.setAnimationLoop=function(k){T=k},this.dispose=function(){}}Object.assign(Gk.prototype,io.prototype);function UJ(t){function e(v,g){v.fogColor.value.copy(g.color),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function n(v,g,b,y){g.isMeshBasicMaterial?i(v,g):g.isMeshLambertMaterial?(i(v,g),l(v,g)):g.isMeshToonMaterial?(i(v,g),u(v,g)):g.isMeshPhongMaterial?(i(v,g),c(v,g)):g.isMeshStandardMaterial?(i(v,g),g.isMeshPhysicalMaterial?h(v,g):f(v,g)):g.isMeshMatcapMaterial?(i(v,g),d(v,g)):g.isMeshDepthMaterial?(i(v,g),p(v,g)):g.isMeshDistanceMaterial?(i(v,g),_(v,g)):g.isMeshNormalMaterial?(i(v,g),m(v,g)):g.isLineBasicMaterial?(s(v,g),g.isLineDashedMaterial&&r(v,g)):g.isPointsMaterial?o(v,g,b,y):g.isSpriteMaterial?a(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function i(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap),g.specularMap&&(v.specularMap.value=g.specularMap);const b=t.get(g).envMap;if(b){v.envMap.value=b,v.flipEnvMap.value=b.isCubeTexture?-1:1,v.reflectivity.value=g.reflectivity,v.refractionRatio.value=g.refractionRatio;const x=t.get(b).__maxMipLevel;x!==void 0&&(v.maxMipLevel.value=x)}g.lightMap&&(v.lightMap.value=g.lightMap,v.lightMapIntensity.value=g.lightMapIntensity),g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap&&(y=g.clearcoatRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),v.uvTransform.value.copy(y.matrix));let w;g.aoMap?w=g.aoMap:g.lightMap&&(w=g.lightMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),v.uv2Transform.value.copy(w.matrix))}function s(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity}function r(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function o(v,g,b,y){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*b,v.scale.value=y*.5,g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap);let w;g.map?w=g.map:g.alphaMap&&(w=g.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),v.uvTransform.value.copy(w.matrix))}function a(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap);let b;g.map?b=g.map:g.alphaMap&&(b=g.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),v.uvTransform.value.copy(b.matrix))}function l(v,g){g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap)}function c(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===Di&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===Di&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}function u(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===Di&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===Di&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}function f(v,g){v.roughness.value=g.roughness,v.metalness.value=g.metalness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===Di&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===Di&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),t.get(g).envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function h(v,g){f(v,g),v.reflectivity.value=g.reflectivity,v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.sheen&&v.sheen.value.copy(g.sheen),g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),v.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Di&&v.clearcoatNormalScale.value.negate()),v.transmission.value=g.transmission,g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap)}function d(v,g){g.matcap&&(v.matcap.value=g.matcap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===Di&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===Di&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}function p(v,g){g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}function _(v,g){g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),v.referencePosition.value.copy(g.referencePosition),v.nearDistance.value=g.nearDistance,v.farDistance.value=g.farDistance}function m(v,g){g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===Di&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===Di&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:n}}function jh(t){t=t||{};const e=t.canvas!==void 0?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=t.context!==void 0?t.context:null,i=t.alpha!==void 0?t.alpha:!1,s=t.depth!==void 0?t.depth:!0,r=t.stencil!==void 0?t.stencil:!0,o=t.antialias!==void 0?t.antialias:!1,a=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,l=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,c=t.powerPreference!==void 0?t.powerPreference:"default",u=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let f=null,h=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Vh,this.physicallyCorrectLights=!1,this.toneMapping=Tf,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const d=this;let p=!1,_=null,m=0,v=0,g=null,b=null,y=-1,w=null,x=null;const S=new On,T=new On;let A=null,C=e.width,k=e.height,L=1,F=null,U=null;const N=new On(0,0,C,k),B=new On(0,0,C,k);let W=!1;const ee=new zg;let K=!1,ge=!1;const se=new nn,X=new J,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Y(){return g===null?L:1}let $=n;function ze(Q,Be){for(let Le=0;Le<Q.length;Le++){const qe=Q[Le],st=e.getContext(qe,Be);if(st!==null)return st}return null}try{const Q={alpha:i,depth:s,stencil:r,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(e.addEventListener("webglcontextlost",Ze,!1),e.addEventListener("webglcontextrestored",pt,!1),$===null){const Be=["webgl2","webgl","experimental-webgl"];if(d.isWebGL1Renderer===!0&&Be.shift(),$=ze(Be,Q),$===null)throw ze(Be)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}$.getShaderPrecisionFormat===void 0&&($.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Q){throw console.error("THREE.WebGLRenderer: "+Q.message),Q}let _e,pe,Te,De,je,de,Ae,Oe,Ye,fe,R,V,ne,he,ie,ue,Re,Ue,Ee,Se,re;function we(){_e=new vZ($),pe=new mZ($,_e,t),pe.isWebGL2===!1&&(_e.get("WEBGL_depth_texture"),_e.get("OES_texture_float"),_e.get("OES_texture_half_float"),_e.get("OES_texture_half_float_linear"),_e.get("OES_standard_derivatives"),_e.get("OES_element_index_uint"),_e.get("OES_vertex_array_object"),_e.get("ANGLE_instanced_arrays")),_e.get("OES_texture_float_linear"),Se=new zJ($,_e,pe),Te=new BJ($,_e,pe),Te.scissor(T.copy(B).multiplyScalar(L).floor()),Te.viewport(S.copy(N).multiplyScalar(L).floor()),De=new wZ,je=new EJ,de=new FJ($,_e,Te,je,pe,Se,De),Ae=new _Z(d),Oe=new GY($,pe),re=new dZ($,_e,Oe,pe),Ye=new bZ($,Oe,De,re),fe=new EZ($,Ye,Oe,De),Re=new SZ($),ie=new gZ(je),R=new SJ(d,Ae,_e,pe,re,ie),V=new UJ(je),ne=new kJ(je),he=new OJ,ue=new hZ(d,Ae,Te,fe,a),Ue=new pZ($,_e,De,pe),Ee=new yZ($,_e,De,pe),De.programs=R.programs,d.capabilities=pe,d.extensions=_e,d.properties=je,d.renderLists=ne,d.state=Te,d.info=De}we();const Me=new Gk(d,$);this.xr=Me;const Ne=new Vk(d,fe,pe.maxTextureSize);this.shadowMap=Ne,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){const Q=_e.get("WEBGL_lose_context");Q&&Q.loseContext()},this.forceContextRestore=function(){const Q=_e.get("WEBGL_lose_context");Q&&Q.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(Q){Q!==void 0&&(L=Q,this.setSize(C,k,!1))},this.getSize=function(Q){return Q===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),Q=new We),Q.set(C,k)},this.setSize=function(Q,Be,Le){if(Me.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=Q,k=Be,e.width=Math.floor(Q*L),e.height=Math.floor(Be*L),Le!==!1&&(e.style.width=Q+"px",e.style.height=Be+"px"),this.setViewport(0,0,Q,Be)},this.getDrawingBufferSize=function(Q){return Q===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),Q=new We),Q.set(C*L,k*L).floor()},this.setDrawingBufferSize=function(Q,Be,Le){C=Q,k=Be,L=Le,e.width=Math.floor(Q*Le),e.height=Math.floor(Be*Le),this.setViewport(0,0,Q,Be)},this.getCurrentViewport=function(Q){return Q===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),Q=new On),Q.copy(S)},this.getViewport=function(Q){return Q.copy(N)},this.setViewport=function(Q,Be,Le,qe){Q.isVector4?N.set(Q.x,Q.y,Q.z,Q.w):N.set(Q,Be,Le,qe),Te.viewport(S.copy(N).multiplyScalar(L).floor())},this.getScissor=function(Q){return Q.copy(B)},this.setScissor=function(Q,Be,Le,qe){Q.isVector4?B.set(Q.x,Q.y,Q.z,Q.w):B.set(Q,Be,Le,qe),Te.scissor(T.copy(B).multiplyScalar(L).floor())},this.getScissorTest=function(){return W},this.setScissorTest=function(Q){Te.setScissorTest(W=Q)},this.setOpaqueSort=function(Q){F=Q},this.setTransparentSort=function(Q){U=Q},this.getClearColor=function(){return ue.getClearColor()},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(Q,Be,Le){let qe=0;(Q===void 0||Q)&&(qe|=16384),(Be===void 0||Be)&&(qe|=256),(Le===void 0||Le)&&(qe|=1024),$.clear(qe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ze,!1),e.removeEventListener("webglcontextrestored",pt,!1),ne.dispose(),he.dispose(),je.dispose(),Ae.dispose(),fe.dispose(),re.dispose(),Me.dispose(),Yt.stop()};function Ze(Q){Q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),p=!0}function pt(){console.log("THREE.WebGLRenderer: Context Restored."),p=!1,we()}function sn(Q){const Be=Q.target;Be.removeEventListener("dispose",sn),Gt(Be)}function Gt(Q){Wt(Q),je.remove(Q)}function Wt(Q){const Be=je.get(Q).program;Be!==void 0&&R.releaseProgram(Be)}function gn(Q,Be){Q.render(function(Le){d.renderBufferImmediate(Le,Be)})}this.renderBufferImmediate=function(Q,Be){re.initAttributes();const Le=je.get(Q);Q.hasPositions&&!Le.position&&(Le.position=$.createBuffer()),Q.hasNormals&&!Le.normal&&(Le.normal=$.createBuffer()),Q.hasUvs&&!Le.uv&&(Le.uv=$.createBuffer()),Q.hasColors&&!Le.color&&(Le.color=$.createBuffer());const qe=Be.getAttributes();Q.hasPositions&&($.bindBuffer(34962,Le.position),$.bufferData(34962,Q.positionArray,35048),re.enableAttribute(qe.position),$.vertexAttribPointer(qe.position,3,5126,!1,0,0)),Q.hasNormals&&($.bindBuffer(34962,Le.normal),$.bufferData(34962,Q.normalArray,35048),re.enableAttribute(qe.normal),$.vertexAttribPointer(qe.normal,3,5126,!1,0,0)),Q.hasUvs&&($.bindBuffer(34962,Le.uv),$.bufferData(34962,Q.uvArray,35048),re.enableAttribute(qe.uv),$.vertexAttribPointer(qe.uv,2,5126,!1,0,0)),Q.hasColors&&($.bindBuffer(34962,Le.color),$.bufferData(34962,Q.colorArray,35048),re.enableAttribute(qe.color),$.vertexAttribPointer(qe.color,3,5126,!1,0,0)),re.disableUnusedAttributes(),$.drawArrays(4,0,Q.count),Q.count=0},this.renderBufferDirect=function(Q,Be,Le,qe,st,Ht){Be===null&&(Be=q);const Bt=st.isMesh&&st.matrixWorld.determinant()<0,Vt=qt(Q,Be,qe,st);Te.setMaterial(qe,Bt);let Rt=Le.index;const Bn=Le.attributes.position;if(Rt===null){if(Bn===void 0||Bn.count===0)return}else if(Rt.count===0)return;let Ln=1;qe.wireframe===!0&&(Rt=Ye.getWireframeAttribute(Le),Ln=2),(qe.morphTargets||qe.morphNormals)&&Re.update(st,Le,qe,Vt),re.setup(st,qe,Vt,Le,Rt);let Ot,xe=Ue;Rt!==null&&(Ot=Oe.get(Rt),xe=Ee,xe.setIndex(Ot));const it=Rt!==null?Rt.count:Bn.count,Je=Le.drawRange.start*Ln,Tt=Le.drawRange.count*Ln,hn=Ht!==null?Ht.start*Ln:0,hi=Ht!==null?Ht.count*Ln:1/0,Tn=Math.max(Je,hn),Mi=Math.min(it,Je+Tt,hn+hi)-1,di=Math.max(0,Mi-Tn+1);if(di!==0){if(st.isMesh)qe.wireframe===!0?(Te.setLineWidth(qe.wireframeLinewidth*Y()),xe.setMode(1)):xe.setMode(4);else if(st.isLine){let qi=qe.linewidth;qi===void 0&&(qi=1),Te.setLineWidth(qi*Y()),st.isLineSegments?xe.setMode(1):st.isLineLoop?xe.setMode(2):xe.setMode(3)}else st.isPoints?xe.setMode(0):st.isSprite&&xe.setMode(4);if(st.isInstancedMesh)xe.renderInstances(Tn,di,st.count);else if(Le.isInstancedBufferGeometry){const qi=Math.min(Le.instanceCount,Le._maxInstanceCount);xe.renderInstances(Tn,di,qi)}else xe.render(Tn,di)}},this.compile=function(Q,Be){h=he.get(Q,Be),h.init(),Q.traverse(function(qe){qe.isLight&&(h.pushLight(qe),qe.castShadow&&h.pushShadow(qe))}),h.setupLights(Be);const Le=new WeakMap;Q.traverse(function(qe){const st=qe.material;if(st)if(Array.isArray(st))for(let Ht=0;Ht<st.length;Ht++){const Bt=st[Ht];Le.has(Bt)===!1&&(Qe(Bt,Q,qe),Le.set(Bt))}else Le.has(st)===!1&&(Qe(st,Q,qe),Le.set(st))})};let jt=null;function Jt(Q){Me.isPresenting||jt&&jt(Q)}const Yt=new Ok;Yt.setAnimationLoop(Jt),typeof window<"u"&&Yt.setContext(window),this.setAnimationLoop=function(Q){jt=Q,Me.setAnimationLoop(Q),Q===null?Yt.stop():Yt.start()},this.render=function(Q,Be){let Le,qe;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Le=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),qe=arguments[3]),Be!==void 0&&Be.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(p===!0)return;re.resetDefaultState(),y=-1,w=null,Q.autoUpdate===!0&&Q.updateMatrixWorld(),Be.parent===null&&Be.updateMatrixWorld(),Me.enabled===!0&&Me.isPresenting===!0&&(Be=Me.getCamera(Be)),Q.isScene===!0&&Q.onBeforeRender(d,Q,Be,Le||g),h=he.get(Q,Be),h.init(),se.multiplyMatrices(Be.projectionMatrix,Be.matrixWorldInverse),ee.setFromProjectionMatrix(se),ge=this.localClippingEnabled,K=ie.init(this.clippingPlanes,ge,Be),f=ne.get(Q,Be),f.init(),Kt(Q,Be,0,d.sortObjects),f.finish(),d.sortObjects===!0&&f.sort(F,U),K===!0&&ie.beginShadows();const st=h.state.shadowsArray;Ne.render(st,Q,Be),h.setupLights(Be),K===!0&&ie.endShadows(),this.info.autoReset===!0&&this.info.reset(),Le!==void 0&&this.setRenderTarget(Le),ue.render(f,Q,Be,qe);const Ht=f.opaque,Bt=f.transparent;Ht.length>0&&kn(Ht,Q,Be),Bt.length>0&&kn(Bt,Q,Be),Q.isScene===!0&&Q.onAfterRender(d,Q,Be),g!==null&&(de.updateRenderTargetMipmap(g),de.updateMultisampleRenderTarget(g)),Te.buffers.depth.setTest(!0),Te.buffers.depth.setMask(!0),Te.buffers.color.setMask(!0),Te.setPolygonOffset(!1),f=null,h=null};function Kt(Q,Be,Le,qe){if(Q.visible===!1)return;if(Q.layers.test(Be.layers)){if(Q.isGroup)Le=Q.renderOrder;else if(Q.isLOD)Q.autoUpdate===!0&&Q.update(Be);else if(Q.isLight)h.pushLight(Q),Q.castShadow&&h.pushShadow(Q);else if(Q.isSprite){if(!Q.frustumCulled||ee.intersectsSprite(Q)){qe&&X.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(se);const Bt=fe.update(Q),Vt=Q.material;Vt.visible&&f.push(Q,Bt,Vt,Le,X.z,null)}}else if(Q.isImmediateRenderObject)qe&&X.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(se),f.push(Q,null,Q.material,Le,X.z,null);else if((Q.isMesh||Q.isLine||Q.isPoints)&&(Q.isSkinnedMesh&&Q.skeleton.frame!==De.render.frame&&(Q.skeleton.update(),Q.skeleton.frame=De.render.frame),!Q.frustumCulled||ee.intersectsObject(Q))){qe&&X.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(se);const Bt=fe.update(Q),Vt=Q.material;if(Array.isArray(Vt)){const Rt=Bt.groups;for(let Bn=0,Ln=Rt.length;Bn<Ln;Bn++){const Ot=Rt[Bn],xe=Vt[Ot.materialIndex];xe&&xe.visible&&f.push(Q,Bt,xe,Le,X.z,Ot)}}else Vt.visible&&f.push(Q,Bt,Vt,Le,X.z,null)}}const Ht=Q.children;for(let Bt=0,Vt=Ht.length;Bt<Vt;Bt++)Kt(Ht[Bt],Be,Le,qe)}function kn(Q,Be,Le){const qe=Be.isScene===!0?Be.overrideMaterial:null;for(let st=0,Ht=Q.length;st<Ht;st++){const Bt=Q[st],Vt=Bt.object,Rt=Bt.geometry,Bn=qe===null?Bt.material:qe,Ln=Bt.group;if(Le.isArrayCamera){x=Le;const Ot=Le.cameras;for(let xe=0,it=Ot.length;xe<it;xe++){const Je=Ot[xe];Vt.layers.test(Je.layers)&&(Te.viewport(S.copy(Je.viewport)),h.setupLights(Je),xn(Vt,Be,Je,Rt,Bn,Ln))}}else x=null,xn(Vt,Be,Le,Rt,Bn,Ln)}}function xn(Q,Be,Le,qe,st,Ht){if(Q.onBeforeRender(d,Be,Le,qe,st,Ht),h=he.get(Be,x||Le),Q.modelViewMatrix.multiplyMatrices(Le.matrixWorldInverse,Q.matrixWorld),Q.normalMatrix.getNormalMatrix(Q.modelViewMatrix),Q.isImmediateRenderObject){const Bt=qt(Le,Be,st,Q);Te.setMaterial(st),re.reset(),gn(Q,Bt)}else d.renderBufferDirect(Le,Be,qe,st,Q,Ht);Q.onAfterRender(d,Be,Le,qe,st,Ht),h=he.get(Be,x||Le)}function Qe(Q,Be,Le){Be.isScene!==!0&&(Be=q);const qe=je.get(Q),st=h.state.lights,Ht=h.state.shadowsArray,Bt=st.state.version,Vt=R.getParameters(Q,st.state,Ht,Be,Le),Rt=R.getProgramCacheKey(Vt);let Bn=qe.program,Ln=!0;if(Bn===void 0)Q.addEventListener("dispose",sn);else if(Bn.cacheKey!==Rt)Wt(Q);else if(qe.lightsStateVersion!==Bt)Ln=!1;else if(Vt.shaderID!==void 0){const Je=Q.isMeshStandardMaterial?Be.environment:null;qe.envMap=Ae.get(Q.envMap||Je);return}else Ln=!1;Ln&&(Vt.uniforms=R.getUniforms(Q),Q.onBeforeCompile(Vt,d),Bn=R.acquireProgram(Vt,Rt),qe.program=Bn,qe.uniforms=Vt.uniforms,qe.outputEncoding=Vt.outputEncoding);const Ot=qe.uniforms;(!Q.isShaderMaterial&&!Q.isRawShaderMaterial||Q.clipping===!0)&&(qe.numClippingPlanes=ie.numPlanes,qe.numIntersection=ie.numIntersection,Ot.clippingPlanes=ie.uniform),qe.environment=Q.isMeshStandardMaterial?Be.environment:null,qe.fog=Be.fog,qe.envMap=Ae.get(Q.envMap||qe.environment),qe.needsLights=Os(Q),qe.lightsStateVersion=Bt,qe.needsLights&&(Ot.ambientLightColor.value=st.state.ambient,Ot.lightProbe.value=st.state.probe,Ot.directionalLights.value=st.state.directional,Ot.directionalLightShadows.value=st.state.directionalShadow,Ot.spotLights.value=st.state.spot,Ot.spotLightShadows.value=st.state.spotShadow,Ot.rectAreaLights.value=st.state.rectArea,Ot.ltc_1.value=st.state.rectAreaLTC1,Ot.ltc_2.value=st.state.rectAreaLTC2,Ot.pointLights.value=st.state.point,Ot.pointLightShadows.value=st.state.pointShadow,Ot.hemisphereLights.value=st.state.hemi,Ot.directionalShadowMap.value=st.state.directionalShadowMap,Ot.directionalShadowMatrix.value=st.state.directionalShadowMatrix,Ot.spotShadowMap.value=st.state.spotShadowMap,Ot.spotShadowMatrix.value=st.state.spotShadowMatrix,Ot.pointShadowMap.value=st.state.pointShadowMap,Ot.pointShadowMatrix.value=st.state.pointShadowMatrix);const xe=qe.program.getUniforms(),it=va.seqWithValue(xe.seq,Ot);qe.uniformsList=it}function qt(Q,Be,Le,qe){Be.isScene!==!0&&(Be=q),de.resetTextureUnits();const st=Be.fog,Ht=Le.isMeshStandardMaterial?Be.environment:null,Bt=g===null?d.outputEncoding:g.texture.encoding,Vt=Ae.get(Le.envMap||Ht),Rt=je.get(Le),Bn=h.state.lights;if(K===!0&&(ge===!0||Q!==w)){const hn=Q===w&&Le.id===y;ie.setState(Le,Q,hn)}Le.version===Rt.__version?(Le.fog&&Rt.fog!==st||Rt.environment!==Ht||Rt.needsLights&&Rt.lightsStateVersion!==Bn.state.version||Rt.numClippingPlanes!==void 0&&(Rt.numClippingPlanes!==ie.numPlanes||Rt.numIntersection!==ie.numIntersection)||Rt.outputEncoding!==Bt||Rt.envMap!==Vt)&&Qe(Le,Be,qe):(Qe(Le,Be,qe),Rt.__version=Le.version);let Ln=!1,Ot=!1,xe=!1;const it=Rt.program,Je=it.getUniforms(),Tt=Rt.uniforms;if(Te.useProgram(it.program)&&(Ln=!0,Ot=!0,xe=!0),Le.id!==y&&(y=Le.id,Ot=!0),Ln||w!==Q){if(Je.setValue($,"projectionMatrix",Q.projectionMatrix),pe.logarithmicDepthBuffer&&Je.setValue($,"logDepthBufFC",2/(Math.log(Q.far+1)/Math.LN2)),w!==Q&&(w=Q,Ot=!0,xe=!0),Le.isShaderMaterial||Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshStandardMaterial||Le.envMap){const hn=Je.map.cameraPosition;hn!==void 0&&hn.setValue($,X.setFromMatrixPosition(Q.matrixWorld))}(Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshLambertMaterial||Le.isMeshBasicMaterial||Le.isMeshStandardMaterial||Le.isShaderMaterial)&&Je.setValue($,"isOrthographic",Q.isOrthographicCamera===!0),(Le.isMeshPhongMaterial||Le.isMeshToonMaterial||Le.isMeshLambertMaterial||Le.isMeshBasicMaterial||Le.isMeshStandardMaterial||Le.isShaderMaterial||Le.isShadowMaterial||Le.skinning)&&Je.setValue($,"viewMatrix",Q.matrixWorldInverse)}if(Le.skinning){Je.setOptional($,qe,"bindMatrix"),Je.setOptional($,qe,"bindMatrixInverse");const hn=qe.skeleton;if(hn){const hi=hn.bones;if(pe.floatVertexTextures){if(hn.boneTexture===void 0){let Tn=Math.sqrt(hi.length*4);Tn=Zt.ceilPowerOfTwo(Tn),Tn=Math.max(Tn,4);const Mi=new Float32Array(Tn*Tn*4);Mi.set(hn.boneMatrices);const di=new uu(Mi,Tn,Tn,Mr,ia);hn.boneMatrices=Mi,hn.boneTexture=di,hn.boneTextureSize=Tn}Je.setValue($,"boneTexture",hn.boneTexture,de),Je.setValue($,"boneTextureSize",hn.boneTextureSize)}else Je.setOptional($,hn,"boneMatrices")}}return(Ot||Rt.receiveShadow!==qe.receiveShadow)&&(Rt.receiveShadow=qe.receiveShadow,Je.setValue($,"receiveShadow",qe.receiveShadow)),Ot&&(Je.setValue($,"toneMappingExposure",d.toneMappingExposure),Rt.needsLights&&Nn(Tt,xe),st&&Le.fog&&V.refreshFogUniforms(Tt,st),V.refreshMaterialUniforms(Tt,Le,L,k),va.upload($,Rt.uniformsList,Tt,de)),Le.isShaderMaterial&&Le.uniformsNeedUpdate===!0&&(va.upload($,Rt.uniformsList,Tt,de),Le.uniformsNeedUpdate=!1),Le.isSpriteMaterial&&Je.setValue($,"center",qe.center),Je.setValue($,"modelViewMatrix",qe.modelViewMatrix),Je.setValue($,"normalMatrix",qe.normalMatrix),Je.setValue($,"modelMatrix",qe.matrixWorld),it}function Nn(Q,Be){Q.ambientLightColor.needsUpdate=Be,Q.lightProbe.needsUpdate=Be,Q.directionalLights.needsUpdate=Be,Q.directionalLightShadows.needsUpdate=Be,Q.pointLights.needsUpdate=Be,Q.pointLightShadows.needsUpdate=Be,Q.spotLights.needsUpdate=Be,Q.spotLightShadows.needsUpdate=Be,Q.rectAreaLights.needsUpdate=Be,Q.hemisphereLights.needsUpdate=Be}function Os(Q){return Q.isMeshLambertMaterial||Q.isMeshToonMaterial||Q.isMeshPhongMaterial||Q.isMeshStandardMaterial||Q.isShadowMaterial||Q.isShaderMaterial&&Q.lights===!0}this.setFramebuffer=function(Q){_!==Q&&g===null&&$.bindFramebuffer(36160,Q),_=Q},this.getActiveCubeFace=function(){return m},this.getActiveMipmapLevel=function(){return v},this.getRenderList=function(){return f},this.setRenderList=function(Q){f=Q},this.getRenderState=function(){return h},this.setRenderState=function(Q){h=Q},this.getRenderTarget=function(){return g},this.setRenderTarget=function(Q,Be=0,Le=0){g=Q,m=Be,v=Le,Q&&je.get(Q).__webglFramebuffer===void 0&&de.setupRenderTarget(Q);let qe=_,st=!1;if(Q){const Ht=je.get(Q).__webglFramebuffer;Q.isWebGLCubeRenderTarget?(qe=Ht[Be],st=!0):Q.isWebGLMultisampleRenderTarget?qe=je.get(Q).__webglMultisampledFramebuffer:qe=Ht,S.copy(Q.viewport),T.copy(Q.scissor),A=Q.scissorTest}else S.copy(N).multiplyScalar(L).floor(),T.copy(B).multiplyScalar(L).floor(),A=W;if(b!==qe&&($.bindFramebuffer(36160,qe),b=qe),Te.viewport(S),Te.scissor(T),Te.setScissorTest(A),st){const Ht=je.get(Q.texture);$.framebufferTexture2D(36160,36064,34069+Be,Ht.__webglTexture,Le)}},this.readRenderTargetPixels=function(Q,Be,Le,qe,st,Ht,Bt){if(!(Q&&Q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Vt=je.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&Bt!==void 0&&(Vt=Vt[Bt]),Vt){let Rt=!1;Vt!==b&&($.bindFramebuffer(36160,Vt),Rt=!0);try{const Bn=Q.texture,Ln=Bn.format,Ot=Bn.type;if(Ln!==Mr&&Se.convert(Ln)!==$.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(Ot!==Nb&&Se.convert(Ot)!==$.getParameter(35738)&&!(Ot===ia&&(pe.isWebGL2||_e.get("OES_texture_float")||_e.get("WEBGL_color_buffer_float")))&&!(Ot===zm&&(pe.isWebGL2?_e.get("EXT_color_buffer_float"):_e.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}$.checkFramebufferStatus(36160)===36053?Be>=0&&Be<=Q.width-qe&&Le>=0&&Le<=Q.height-st&&$.readPixels(Be,Le,qe,st,Se.convert(Ln),Se.convert(Ot),Ht):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Rt&&$.bindFramebuffer(36160,b)}}},this.copyFramebufferToTexture=function(Q,Be,Le){Le===void 0&&(Le=0);const qe=Math.pow(2,-Le),st=Math.floor(Be.image.width*qe),Ht=Math.floor(Be.image.height*qe),Bt=Se.convert(Be.format);de.setTexture2D(Be,0),$.copyTexImage2D(3553,Le,Bt,Q.x,Q.y,st,Ht,0),Te.unbindTexture()},this.copyTextureToTexture=function(Q,Be,Le,qe){qe===void 0&&(qe=0);const st=Be.image.width,Ht=Be.image.height,Bt=Se.convert(Le.format),Vt=Se.convert(Le.type);de.setTexture2D(Le,0),$.pixelStorei(37440,Le.flipY),$.pixelStorei(37441,Le.premultiplyAlpha),$.pixelStorei(3317,Le.unpackAlignment),Be.isDataTexture?$.texSubImage2D(3553,qe,Q.x,Q.y,st,Ht,Bt,Vt,Be.image.data):Be.isCompressedTexture?$.compressedTexSubImage2D(3553,qe,Q.x,Q.y,Be.mipmaps[0].width,Be.mipmaps[0].height,Bt,Be.mipmaps[0].data):$.texSubImage2D(3553,qe,Q.x,Q.y,Bt,Vt,Be.image),qe===0&&Le.generateMipmaps&&$.generateMipmap(3553),Te.unbindTexture()},this.initTexture=function(Q){de.setTexture2D(Q,0),Te.unbindTexture()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function c3(t){jh.call(this,t)}c3.prototype=Object.assign(Object.create(jh.prototype),{constructor:c3,isWebGL1Renderer:!0});class Fb{constructor(e,n){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new Mt(e),this.density=n!==void 0?n:25e-5}clone(){return new Fb(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class zb{constructor(e,n,i){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new Mt(e),this.near=n!==void 0?n:1,this.far=i!==void 0?i:1e3}clone(){return new zb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Ub extends kt{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.background!==null&&(n.object.background=this.background.toJSON(e)),this.environment!==null&&(n.object.environment=this.environment.toJSON(e)),this.fog!==null&&(n.object.fog=this.fog.toJSON()),n}}function js(t,e){this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Bg,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Zt.generateUUID()}Object.defineProperty(js.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});Object.assign(js.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,s=this.stride;i<s;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return e===void 0&&(e=0),this.array.set(t,e),this},clone:function(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Zt.generateUUID()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new js(e,this.stride);return n.setUsage(this.usage),n},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Zt.generateUUID()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Ya=new J;function El(t,e,n,i){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i===!0}Object.defineProperties(El.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}});Object.assign(El.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(let e=0,n=this.data.count;e<n;e++)Ya.x=this.getX(e),Ya.y=this.getY(e),Ya.z=this.getZ(e),Ya.applyMatrix4(t),this.setXYZ(e,Ya.x,Ya.y,Ya.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,s){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=s,this},clone:function(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[i+s])}return new zt(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new El(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function Tl(t){Dt.call(this),this.type="SpriteMaterial",this.color=new Mt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}Tl.prototype=Object.create(Dt.prototype);Tl.prototype.constructor=Tl;Tl.prototype.isSpriteMaterial=!0;Tl.prototype.copy=function(t){return Dt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};let fc;const ju=new J,hc=new J,dc=new J,pc=new We,Yu=new We,Wk=new nn,zd=new J,qu=new J,Ud=new J,u3=new We,t1=new We,f3=new We;function P_(t){if(kt.call(this),this.type="Sprite",fc===void 0){fc=new Qt;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new js(e,5);fc.setIndex([0,1,2,0,2,3]),fc.setAttribute("position",new El(n,3,0,!1)),fc.setAttribute("uv",new El(n,2,3,!1))}this.geometry=fc,this.material=t!==void 0?t:new Tl,this.center=new We(.5,.5)}P_.prototype=Object.assign(Object.create(kt.prototype),{constructor:P_,isSprite:!0,raycast:function(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),hc.setFromMatrixScale(this.matrixWorld),Wk.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),dc.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&hc.multiplyScalar(-dc.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const r=this.center;Hd(zd.set(-.5,-.5,0),dc,r,hc,i,s),Hd(qu.set(.5,-.5,0),dc,r,hc,i,s),Hd(Ud.set(.5,.5,0),dc,r,hc,i,s),u3.set(0,0),t1.set(1,0),f3.set(1,1);let o=t.ray.intersectTriangle(zd,qu,Ud,!1,ju);if(o===null&&(Hd(qu.set(-.5,.5,0),dc,r,hc,i,s),t1.set(0,1),o=t.ray.intersectTriangle(zd,Ud,qu,!1,ju),o===null))return;const a=t.ray.origin.distanceTo(ju);a<t.near||a>t.far||e.push({distance:a,point:ju.clone(),uv:Qi.getUV(ju,zd,qu,Ud,u3,t1,f3,new We),face:null,object:this})},copy:function(t){return kt.prototype.copy.call(this,t),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}});function Hd(t,e,n,i,s,r){pc.subVectors(t,n).addScalar(.5).multiply(i),s!==void 0?(Yu.x=r*pc.x-s*pc.y,Yu.y=s*pc.x+r*pc.y):Yu.copy(pc),t.copy(e),t.x+=Yu.x,t.y+=Yu.y,t.applyMatrix4(Wk)}const Vd=new J,h3=new J;function Vm(){kt.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}Vm.prototype=Object.assign(Object.create(kt.prototype),{constructor:Vm,isLOD:!0,copy:function(t){kt.prototype.copy.call(this,t,!1);const e=t.levels;for(let n=0,i=e.length;n<i;n++){const s=e[n];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){e===void 0&&(e=0),e=Math.abs(e);const n=this.levels;let i;for(i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){const e=this.levels;if(e.length>0){let n,i;for(n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(this.levels.length>0){Vd.setFromMatrixPosition(this.matrixWorld);const i=t.ray.origin.distanceTo(Vd);this.getObjectForDistance(i).raycast(t,e)}},update:function(t){const e=this.levels;if(e.length>1){Vd.setFromMatrixPosition(t.matrixWorld),h3.setFromMatrixPosition(this.matrixWorld);const n=Vd.distanceTo(h3)/t.zoom;e[0].object.visible=!0;let i,s;for(i=1,s=e.length;i<s&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<s;i++)e[i].object.visible=!1}},toJSON:function(t){const e=kt.prototype.toJSON.call(this,t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const r=n[i];e.object.levels.push({object:r.object.uuid,distance:r.distance})}return e}});function R_(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),xi.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new nn,this.bindMatrixInverse=new nn}R_.prototype=Object.assign(Object.create(xi.prototype),{constructor:R_,isSkinnedMesh:!0,copy:function(t){return xi.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const t=new On,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){xi.prototype.updateMatrixWorld.call(this,t),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const t=new J,e=new On,n=new On,i=new J,s=new nn;return function(r,o){const a=this.skeleton,l=this.geometry;e.fromBufferAttribute(l.attributes.skinIndex,r),n.fromBufferAttribute(l.attributes.skinWeight,r),t.fromBufferAttribute(l.attributes.position,r).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(let c=0;c<4;c++){const u=n.getComponent(c);if(u!==0){const f=e.getComponent(c);s.multiplyMatrices(a.bones[f].matrixWorld,a.boneInverses[f]),o.addScaledVector(i.copy(t).applyMatrix4(s),u)}}return o.applyMatrix4(this.bindMatrixInverse)}}()});const d3=new nn,HJ=new nn;function D_(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,e===void 0)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new nn)}}Object.assign(D_.prototype,{calculateInverses:function(){this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++){const n=new nn;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.getInverse(this.boneInverses[t])}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.getInverse(n.parent.matrixWorld),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}},update:function(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,r=t.length;s<r;s++){const o=t[s]?t[s].matrixWorld:HJ;d3.multiplyMatrices(o,e[s]),d3.toArray(n,s*16)}i!==void 0&&(i.needsUpdate=!0)},clone:function(){return new D_(this.bones,this.boneInverses)},getBoneByName:function(t){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];if(i.name===t)return i}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function p3(){kt.call(this),this.type="Bone"}p3.prototype=Object.assign(Object.create(kt.prototype),{constructor:p3,isBone:!0});const m3=new nn,g3=new nn,Gd=[],Xu=new xi;function O_(t,e,n){xi.call(this,t,e),this.instanceMatrix=new zt(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}O_.prototype=Object.assign(Object.create(xi.prototype),{constructor:O_,isInstancedMesh:!0,copy:function(t){return xi.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},setColorAt:function(t,e){this.instanceColor===null&&(this.instanceColor=new zt(new Float32Array(this.count*3),3)),e.toArray(this.instanceColor.array,t*3)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,t*16)},raycast:function(t,e){const n=this.matrixWorld,i=this.count;if(Xu.geometry=this.geometry,Xu.material=this.material,Xu.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,m3),g3.multiplyMatrices(n,m3),Xu.matrixWorld=g3,Xu.raycast(t,Gd);for(let r=0,o=Gd.length;r<o;r++){const a=Gd[r];a.instanceId=s,a.object=this,e.push(a)}Gd.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,t*16)},updateMorphTargets:function(){}});function $s(t){Dt.call(this),this.type="LineBasicMaterial",this.color=new Mt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}$s.prototype=Object.create(Dt.prototype);$s.prototype.constructor=$s;$s.prototype.isLineBasicMaterial=!0;$s.prototype.copy=function(t){return Dt.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};const _3=new J,v3=new J,b3=new nn,Wd=new Gh,jd=new Ba;function Al(t,e,n){n===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),kt.call(this),this.type="Line",this.geometry=t!==void 0?t:new Qt,this.material=e!==void 0?e:new $s,this.updateMorphTargets()}Al.prototype=Object.assign(Object.create(kt.prototype),{constructor:Al,isLine:!0,copy:function(t){return kt.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(t.index===null){const e=t.attributes.position,n=[0];for(let i=1,s=e.count;i<s;i++)_3.fromBufferAttribute(e,i-1),v3.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=_3.distanceTo(v3);t.setAttribute("lineDistance",new St(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,n=t.lineDistances;n[0]=0;for(let i=1,s=e.length;i<s;i++)n[i]=n[i-1],n[i]+=e[i-1].distanceTo(e[i])}return this},raycast:function(t,e){const n=this.geometry,i=this.matrixWorld,s=t.params.Line.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),jd.copy(n.boundingSphere),jd.applyMatrix4(i),jd.radius+=s,t.ray.intersectsSphere(jd)===!1)return;b3.getInverse(i),Wd.copy(t.ray).applyMatrix4(b3);const r=s/((this.scale.x+this.scale.y+this.scale.z)/3),o=r*r,a=new J,l=new J,c=new J,u=new J,f=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){const h=n.index,p=n.attributes.position.array;if(h!==null){const _=h.array;for(let m=0,v=_.length-1;m<v;m+=f){const g=_[m],b=_[m+1];if(a.fromArray(p,g*3),l.fromArray(p,b*3),Wd.distanceSqToSegment(a,l,u,c)>o)continue;u.applyMatrix4(this.matrixWorld);const w=t.ray.origin.distanceTo(u);w<t.near||w>t.far||e.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else for(let _=0,m=p.length/3-1;_<m;_+=f){if(a.fromArray(p,3*_),l.fromArray(p,3*_+3),Wd.distanceSqToSegment(a,l,u,c)>o)continue;u.applyMatrix4(this.matrixWorld);const g=t.ray.origin.distanceTo(u);g<t.near||g>t.far||e.push({distance:g,point:c.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const h=n.vertices,d=h.length;for(let p=0;p<d-1;p+=f){if(Wd.distanceSqToSegment(h[p],h[p+1],u,c)>o)continue;u.applyMatrix4(this.matrixWorld);const m=t.ray.origin.distanceTo(u);m<t.near||m>t.far||e.push({distance:m,point:c.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=i.length;s<r;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Yd=new J,qd=new J;function mh(t,e){Al.call(this,t,e),this.type="LineSegments"}mh.prototype=Object.assign(Object.create(Al.prototype),{constructor:mh,isLineSegments:!0,computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(t.index===null){const e=t.attributes.position,n=[];for(let i=0,s=e.count;i<s;i+=2)Yd.fromBufferAttribute(e,i),qd.fromBufferAttribute(e,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Yd.distanceTo(qd);t.setAttribute("lineDistance",new St(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,n=t.lineDistances;for(let i=0,s=e.length;i<s;i+=2)Yd.copy(e[i]),qd.copy(e[i+1]),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Yd.distanceTo(qd)}return this}});function I_(t,e){Al.call(this,t,e),this.type="LineLoop"}I_.prototype=Object.assign(Object.create(Al.prototype),{constructor:I_,isLineLoop:!0});function kl(t){Dt.call(this),this.type="PointsMaterial",this.color=new Mt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}kl.prototype=Object.create(Dt.prototype);kl.prototype.constructor=kl;kl.prototype.isPointsMaterial=!0;kl.prototype.copy=function(t){return Dt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};const y3=new nn,N_=new Gh,Xd=new Ba,Zd=new J;function B_(t,e){kt.call(this),this.type="Points",this.geometry=t!==void 0?t:new Qt,this.material=e!==void 0?e:new kl,this.updateMorphTargets()}B_.prototype=Object.assign(Object.create(kt.prototype),{constructor:B_,isPoints:!0,copy:function(t){return kt.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){const n=this.geometry,i=this.matrixWorld,s=t.params.Points.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),Xd.copy(n.boundingSphere),Xd.applyMatrix4(i),Xd.radius+=s,t.ray.intersectsSphere(Xd)===!1)return;y3.getInverse(i),N_.copy(t.ray).applyMatrix4(y3);const r=s/((this.scale.x+this.scale.y+this.scale.z)/3),o=r*r;if(n.isBufferGeometry){const a=n.index,c=n.attributes.position.array;if(a!==null){const u=a.array;for(let f=0,h=u.length;f<h;f++){const d=u[f];Zd.fromArray(c,d*3),n1(Zd,d,o,i,t,e,this)}}else for(let u=0,f=c.length/3;u<f;u++)Zd.fromArray(c,u*3),n1(Zd,u,o,i,t,e,this)}else{const a=n.vertices;for(let l=0,c=a.length;l<c;l++)n1(a[l],l,o,i,t,e,this)}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=i.length;s<r;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function n1(t,e,n,i,s,r,o){const a=N_.distanceSqToPoint(t);if(a<n){const l=new J;N_.closestPointToPoint(t,l),l.applyMatrix4(i);const c=s.ray.origin.distanceTo(l);if(c<s.near||c>s.far)return;r.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}function w3(t,e,n,i,s,r,o,a,l){In.call(this,t,e,n,i,s,r,o,a,l),this.format=o!==void 0?o:fl,this.minFilter=r!==void 0?r:Ii,this.magFilter=s!==void 0?s:Ii,this.generateMipmaps=!1;const c=this;function u(){c.needsUpdate=!0,t.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(u)}w3.prototype=Object.assign(Object.create(In.prototype),{constructor:w3,isVideoTexture:!0,update:function(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function gh(t,e,n,i,s,r,o,a,l,c,u,f){In.call(this,null,r,o,a,l,c,i,s,u,f),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}gh.prototype=Object.create(In.prototype);gh.prototype.constructor=gh;gh.prototype.isCompressedTexture=!0;function Gm(t,e,n,i,s,r,o,a,l){In.call(this,t,e,n,i,s,r,o,a,l),this.needsUpdate=!0}Gm.prototype=Object.create(In.prototype);Gm.prototype.constructor=Gm;Gm.prototype.isCanvasTexture=!0;function Wm(t,e,n,i,s,r,o,a,l,c){if(c=c!==void 0?c:Xc,c!==Xc&&c!==ah)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===Xc&&(n=Fm),n===void 0&&c===ah&&(n=Af),In.call(this,null,i,s,r,o,a,c,n,l),this.image={width:t,height:e},this.magFilter=o!==void 0?o:Fi,this.minFilter=a!==void 0?a:Fi,this.flipY=!1,this.generateMipmaps=!1}Wm.prototype=Object.create(In.prototype);Wm.prototype.constructor=Wm;Wm.prototype.isDepthTexture=!0;class VJ extends Qt{constructor(e){super(),this.type="WireframeGeometry";const n=[],i=[0,0],s={},r=["a","b","c"];if(e&&e.isGeometry){const o=e.faces;for(let a=0,l=o.length;a<l;a++){const c=o[a];for(let u=0;u<3;u++){const f=c[r[u]],h=c[r[(u+1)%3]];i[0]=Math.min(f,h),i[1]=Math.max(f,h);const d=i[0]+","+i[1];s[d]===void 0&&(s[d]={index1:i[0],index2:i[1]})}}for(const a in s){const l=s[a];let c=e.vertices[l.index1];n.push(c.x,c.y,c.z),c=e.vertices[l.index2],n.push(c.x,c.y,c.z)}}else if(e&&e.isBufferGeometry){const o=new J;if(e.index!==null){const a=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let u=0,f=c.length;u<f;++u){const h=c[u],d=h.start,p=h.count;for(let _=d,m=d+p;_<m;_+=3)for(let v=0;v<3;v++){const g=l.getX(_+v),b=l.getX(_+(v+1)%3);i[0]=Math.min(g,b),i[1]=Math.max(g,b);const y=i[0]+","+i[1];s[y]===void 0&&(s[y]={index1:i[0],index2:i[1]})}}for(const u in s){const f=s[u];o.fromBufferAttribute(a,f.index1),n.push(o.x,o.y,o.z),o.fromBufferAttribute(a,f.index2),n.push(o.x,o.y,o.z)}}else{const a=e.attributes.position;for(let l=0,c=a.count/3;l<c;l++)for(let u=0;u<3;u++){const f=3*l+u;o.fromBufferAttribute(a,f),n.push(o.x,o.y,o.z);const h=3*l+(u+1)%3;o.fromBufferAttribute(a,h),n.push(o.x,o.y,o.z)}}}this.setAttribute("position",new St(n,3))}}function jm(t,e,n){An.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new _h(t,e,n)),this.mergeVertices()}jm.prototype=Object.create(An.prototype);jm.prototype.constructor=jm;function _h(t,e,n){Qt.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};const i=[],s=[],r=[],o=[],a=1e-5,l=new J,c=new J,u=new J,f=new J,h=new J;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const d=e+1;for(let p=0;p<=n;p++){const _=p/n;for(let m=0;m<=e;m++){const v=m/e;t(v,_,c),s.push(c.x,c.y,c.z),v-a>=0?(t(v-a,_,u),f.subVectors(c,u)):(t(v+a,_,u),f.subVectors(u,c)),_-a>=0?(t(v,_-a,u),h.subVectors(c,u)):(t(v,_+a,u),h.subVectors(u,c)),l.crossVectors(f,h).normalize(),r.push(l.x,l.y,l.z),o.push(v,_)}}for(let p=0;p<n;p++)for(let _=0;_<e;_++){const m=p*d+_,v=p*d+_+1,g=(p+1)*d+_+1,b=(p+1)*d+_;i.push(m,v,b),i.push(v,g,b)}this.setIndex(i),this.setAttribute("position",new St(s,3)),this.setAttribute("normal",new St(r,3)),this.setAttribute("uv",new St(o,2))}_h.prototype=Object.create(Qt.prototype);_h.prototype.constructor=_h;class GJ extends An{constructor(e,n,i,s){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:s},this.fromBufferGeometry(new Tu(e,n,i,s)),this.mergeVertices()}}class Tu extends Qt{constructor(e,n,i,s){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:s},i=i||1,s=s||0;const r=[],o=[];a(s),c(i),u(),this.setAttribute("position",new St(r,3)),this.setAttribute("normal",new St(r.slice(),3)),this.setAttribute("uv",new St(o,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function a(g){const b=new J,y=new J,w=new J;for(let x=0;x<n.length;x+=3)d(n[x+0],b),d(n[x+1],y),d(n[x+2],w),l(b,y,w,g)}function l(g,b,y,w){const x=Math.pow(2,w),S=[];for(let T=0;T<=x;T++){S[T]=[];const A=g.clone().lerp(y,T/x),C=b.clone().lerp(y,T/x),k=x-T;for(let L=0;L<=k;L++)L===0&&T===x?S[T][L]=A:S[T][L]=A.clone().lerp(C,L/k)}for(let T=0;T<x;T++)for(let A=0;A<2*(x-T)-1;A++){const C=Math.floor(A/2);A%2===0?(h(S[T][C+1]),h(S[T+1][C]),h(S[T][C])):(h(S[T][C+1]),h(S[T+1][C+1]),h(S[T+1][C]))}}function c(g){const b=new J;for(let y=0;y<r.length;y+=3)b.x=r[y+0],b.y=r[y+1],b.z=r[y+2],b.normalize().multiplyScalar(g),r[y+0]=b.x,r[y+1]=b.y,r[y+2]=b.z}function u(){const g=new J;for(let b=0;b<r.length;b+=3){g.x=r[b+0],g.y=r[b+1],g.z=r[b+2];const y=m(g)/2/Math.PI+.5,w=v(g)/Math.PI+.5;o.push(y,1-w)}p(),f()}function f(){for(let g=0;g<o.length;g+=6){const b=o[g+0],y=o[g+2],w=o[g+4],x=Math.max(b,y,w),S=Math.min(b,y,w);x>.9&&S<.1&&(b<.2&&(o[g+0]+=1),y<.2&&(o[g+2]+=1),w<.2&&(o[g+4]+=1))}}function h(g){r.push(g.x,g.y,g.z)}function d(g,b){const y=g*3;b.x=e[y+0],b.y=e[y+1],b.z=e[y+2]}function p(){const g=new J,b=new J,y=new J,w=new J,x=new We,S=new We,T=new We;for(let A=0,C=0;A<r.length;A+=9,C+=6){g.set(r[A+0],r[A+1],r[A+2]),b.set(r[A+3],r[A+4],r[A+5]),y.set(r[A+6],r[A+7],r[A+8]),x.set(o[C+0],o[C+1]),S.set(o[C+2],o[C+3]),T.set(o[C+4],o[C+5]),w.copy(g).add(b).add(y).divideScalar(3);const k=m(w);_(x,C+0,g,k),_(S,C+2,b,k),_(T,C+4,y,k)}}function _(g,b,y,w){w<0&&g.x===1&&(o[b]=g.x-1),y.x===0&&y.z===0&&(o[b]=w/2/Math.PI+.5)}function m(g){return Math.atan2(g.z,-g.x)}function v(g){return Math.atan2(-g.y,Math.sqrt(g.x*g.x+g.z*g.z))}}}class WJ extends An{constructor(e,n){super(),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n},this.fromBufferGeometry(new jk(e,n)),this.mergeVertices()}}class jk extends Tu{constructor(e,n){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,n),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:n}}}class jJ extends An{constructor(e,n){super(),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n},this.fromBufferGeometry(new Yk(e,n)),this.mergeVertices()}}class Yk extends Tu{constructor(e,n){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,n),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:n}}}class YJ extends An{constructor(e,n){super(),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n},this.fromBufferGeometry(new qk(e,n)),this.mergeVertices()}}class qk extends Tu{constructor(e,n){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,n),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:n}}}class qJ extends An{constructor(e,n){super(),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n},this.fromBufferGeometry(new Xk(e,n)),this.mergeVertices()}}class Xk extends Tu{constructor(e,n){const i=(1+Math.sqrt(5))/2,s=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,o,e,n),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:n}}}class XJ extends An{constructor(e,n,i,s,r,o){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:s,closed:r},o!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");const a=new Zk(e,n,i,s,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}}class Zk extends Qt{constructor(e,n,i,s,r){super(),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:s,closed:r},n=n||64,i=i||1,s=s||8,r=r||!1;const o=e.computeFrenetFrames(n,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new J,l=new J,c=new We;let u=new J;const f=[],h=[],d=[],p=[];_(),this.setIndex(p),this.setAttribute("position",new St(f,3)),this.setAttribute("normal",new St(h,3)),this.setAttribute("uv",new St(d,2));function _(){for(let b=0;b<n;b++)m(b);m(r===!1?n:0),g(),v()}function m(b){u=e.getPointAt(b/n,u);const y=o.normals[b],w=o.binormals[b];for(let x=0;x<=s;x++){const S=x/s*Math.PI*2,T=Math.sin(S),A=-Math.cos(S);l.x=A*y.x+T*w.x,l.y=A*y.y+T*w.y,l.z=A*y.z+T*w.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,f.push(a.x,a.y,a.z)}}function v(){for(let b=1;b<=n;b++)for(let y=1;y<=s;y++){const w=(s+1)*(b-1)+(y-1),x=(s+1)*b+(y-1),S=(s+1)*b+y,T=(s+1)*(b-1)+y;p.push(w,x,T),p.push(x,S,T)}}function g(){for(let b=0;b<=n;b++)for(let y=0;y<=s;y++)c.x=b/n,c.y=y/s,d.push(c.x,c.y)}}toJSON(){const e=Qt.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e}}class ZJ extends An{constructor(e,n,i,s,r,o,a){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:s,p:r,q:o},a!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Jk(e,n,i,s,r,o)),this.mergeVertices()}}class Jk extends Qt{constructor(e,n,i,s,r,o){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:s,p:r,q:o},e=e||1,n=n||.4,i=Math.floor(i)||64,s=Math.floor(s)||8,r=r||2,o=o||3;const a=[],l=[],c=[],u=[],f=new J,h=new J,d=new J,p=new J,_=new J,m=new J,v=new J;for(let b=0;b<=i;++b){const y=b/i*r*Math.PI*2;g(y,r,o,e,d),g(y+.01,r,o,e,p),m.subVectors(p,d),v.addVectors(p,d),_.crossVectors(m,v),v.crossVectors(_,m),_.normalize(),v.normalize();for(let w=0;w<=s;++w){const x=w/s*Math.PI*2,S=-n*Math.cos(x),T=n*Math.sin(x);f.x=d.x+(S*v.x+T*_.x),f.y=d.y+(S*v.y+T*_.y),f.z=d.z+(S*v.z+T*_.z),l.push(f.x,f.y,f.z),h.subVectors(f,d).normalize(),c.push(h.x,h.y,h.z),u.push(b/i),u.push(w/s)}}for(let b=1;b<=i;b++)for(let y=1;y<=s;y++){const w=(s+1)*(b-1)+(y-1),x=(s+1)*b+(y-1),S=(s+1)*b+y,T=(s+1)*(b-1)+y;a.push(w,x,T),a.push(x,S,T)}this.setIndex(a),this.setAttribute("position",new St(l,3)),this.setAttribute("normal",new St(c,3)),this.setAttribute("uv",new St(u,2));function g(b,y,w,x,S){const T=Math.cos(b),A=Math.sin(b),C=w/y*b,k=Math.cos(C);S.x=x*(2+k)*.5*T,S.y=x*(2+k)*A*.5,S.z=x*Math.sin(C)*.5}}}class JJ extends An{constructor(e,n,i,s,r){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:s,arc:r},this.fromBufferGeometry(new Kk(e,n,i,s,r)),this.mergeVertices()}}class Kk extends Qt{constructor(e,n,i,s,r){super(),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:s,arc:r},e=e||1,n=n||.4,i=Math.floor(i)||8,s=Math.floor(s)||6,r=r||Math.PI*2;const o=[],a=[],l=[],c=[],u=new J,f=new J,h=new J;for(let d=0;d<=i;d++)for(let p=0;p<=s;p++){const _=p/s*r,m=d/i*Math.PI*2;f.x=(e+n*Math.cos(m))*Math.cos(_),f.y=(e+n*Math.cos(m))*Math.sin(_),f.z=n*Math.sin(m),a.push(f.x,f.y,f.z),u.x=e*Math.cos(_),u.y=e*Math.sin(_),h.subVectors(f,u).normalize(),l.push(h.x,h.y,h.z),c.push(p/s),c.push(d/i)}for(let d=1;d<=i;d++)for(let p=1;p<=s;p++){const _=(s+1)*d+p-1,m=(s+1)*(d-1)+p-1,v=(s+1)*(d-1)+p,g=(s+1)*d+p;o.push(_,m,g),o.push(m,v,g)}this.setIndex(o),this.setAttribute("position",new St(a,3)),this.setAttribute("normal",new St(l,3)),this.setAttribute("uv",new St(c,2))}}const KJ={triangulate:function(t,e,n){n=n||2;const i=e&&e.length,s=i?e[0]*n:t.length;let r=$k(t,0,s,n,!0);const o=[];if(!r||r.next===r.prev)return o;let a,l,c,u,f,h,d;if(i&&(r=nK(t,e,r,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let p=n;p<s;p+=n)f=t[p],h=t[p+1],f<a&&(a=f),h<l&&(l=h),f>c&&(c=f),h>u&&(u=h);d=Math.max(c-a,u-l),d=d!==0?1/d:0}return vh(r,o,n,a,l,d),o}};function $k(t,e,n,i,s){let r,o;if(s===dK(t,e,n,i)>0)for(r=e;r<n;r+=i)o=x3(r,t[r],t[r+1],o);else for(r=n-i;r>=e;r-=i)o=x3(r,t[r],t[r+1],o);return o&&Hg(o,o.next)&&(yh(o),o=o.next),o}function ka(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(Hg(n,n.next)||ii(n.prev,n,n.next)===0)){if(yh(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function vh(t,e,n,i,s,r,o){if(!t)return;!o&&r&&aK(t,i,s,r);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,r?QJ(t,i,s,r):$J(t)){e.push(l.i/n),e.push(t.i/n),e.push(c.i/n),yh(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=eK(ka(t),e,n),vh(t,e,n,i,s,r,2)):o===2&&tK(t,e,n,i,s,r):vh(ka(t),e,n,i,s,r,1);break}}}function $J(t){const e=t.prev,n=t,i=t.next;if(ii(e,n,i)>=0)return!1;let s=t.next.next;for(;s!==t.prev;){if(Rc(e.x,e.y,n.x,n.y,i.x,i.y,s.x,s.y)&&ii(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function QJ(t,e,n,i){const s=t.prev,r=t,o=t.next;if(ii(s,r,o)>=0)return!1;const a=s.x<r.x?s.x<o.x?s.x:o.x:r.x<o.x?r.x:o.x,l=s.y<r.y?s.y<o.y?s.y:o.y:r.y<o.y?r.y:o.y,c=s.x>r.x?s.x>o.x?s.x:o.x:r.x>o.x?r.x:o.x,u=s.y>r.y?s.y>o.y?s.y:o.y:r.y>o.y?r.y:o.y,f=F_(a,l,e,n,i),h=F_(c,u,e,n,i);let d=t.prevZ,p=t.nextZ;for(;d&&d.z>=f&&p&&p.z<=h;){if(d!==t.prev&&d!==t.next&&Rc(s.x,s.y,r.x,r.y,o.x,o.y,d.x,d.y)&&ii(d.prev,d,d.next)>=0||(d=d.prevZ,p!==t.prev&&p!==t.next&&Rc(s.x,s.y,r.x,r.y,o.x,o.y,p.x,p.y)&&ii(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;d&&d.z>=f;){if(d!==t.prev&&d!==t.next&&Rc(s.x,s.y,r.x,r.y,o.x,o.y,d.x,d.y)&&ii(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==t.prev&&p!==t.next&&Rc(s.x,s.y,r.x,r.y,o.x,o.y,p.x,p.y)&&ii(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function eK(t,e,n){let i=t;do{const s=i.prev,r=i.next.next;!Hg(s,r)&&Qk(s,i,i.next,r)&&bh(s,r)&&bh(r,s)&&(e.push(s.i/n),e.push(i.i/n),e.push(r.i/n),yh(i),yh(i.next),i=t=r),i=i.next}while(i!==t);return ka(i)}function tK(t,e,n,i,s,r){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&uK(o,a)){let l=eC(o,a);o=ka(o,o.next),l=ka(l,l.next),vh(o,e,n,i,s,r),vh(l,e,n,i,s,r);return}a=a.next}o=o.next}while(o!==t)}function nK(t,e,n,i){const s=[];let r,o,a,l,c;for(r=0,o=e.length;r<o;r++)a=e[r]*i,l=r<o-1?e[r+1]*i:t.length,c=$k(t,a,l,i,!1),c===c.next&&(c.steiner=!0),s.push(cK(c));for(s.sort(iK),r=0;r<s.length;r++)sK(s[r],n),n=ka(n,n.next);return n}function iK(t,e){return t.x-e.x}function sK(t,e){if(e=rK(t,e),e){const n=eC(e,t);ka(e,e.next),ka(n,n.next)}}function rK(t,e){let n=e;const i=t.x,s=t.y;let r=-1/0,o;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const h=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=i&&h>r){if(r=h,h===i){if(s===n.y)return n;if(s===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(i===r)return o;const a=o,l=o.x,c=o.y;let u=1/0,f;n=o;do i>=n.x&&n.x>=l&&i!==n.x&&Rc(s<c?i:r,s,l,c,s<c?r:i,s,n.x,n.y)&&(f=Math.abs(s-n.y)/(i-n.x),bh(n,t)&&(f<u||f===u&&(n.x>o.x||n.x===o.x&&oK(o,n)))&&(o=n,u=f)),n=n.next;while(n!==a);return o}function oK(t,e){return ii(t.prev,t,e.prev)<0&&ii(e.next,t,t.next)<0}function aK(t,e,n,i){let s=t;do s.z===null&&(s.z=F_(s.x,s.y,e,n,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,lK(s)}function lK(t){let e,n,i,s,r,o,a,l,c=1;do{for(n=t,t=null,r=null,o=0;n;){for(o++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(s=n,n=n.nextZ,a--):(s=i,i=i.nextZ,l--),r?r.nextZ=s:t=s,s.prevZ=r,r=s;n=i}r.nextZ=null,c*=2}while(o>1);return t}function F_(t,e,n,i,s){return t=32767*(t-n)*s,e=32767*(e-i)*s,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function cK(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Rc(t,e,n,i,s,r,o,a){return(s-o)*(e-a)-(t-o)*(r-a)>=0&&(t-o)*(i-a)-(n-o)*(e-a)>=0&&(n-o)*(r-a)-(s-o)*(i-a)>=0}function uK(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!fK(t,e)&&(bh(t,e)&&bh(e,t)&&hK(t,e)&&(ii(t.prev,t,e.prev)||ii(t,e.prev,e))||Hg(t,e)&&ii(t.prev,t,t.next)>0&&ii(e.prev,e,e.next)>0)}function ii(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Hg(t,e){return t.x===e.x&&t.y===e.y}function Qk(t,e,n,i){const s=Kd(ii(t,e,n)),r=Kd(ii(t,e,i)),o=Kd(ii(n,i,t)),a=Kd(ii(n,i,e));return!!(s!==r&&o!==a||s===0&&Jd(t,n,e)||r===0&&Jd(t,i,e)||o===0&&Jd(n,t,i)||a===0&&Jd(n,e,i))}function Jd(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Kd(t){return t>0?1:t<0?-1:0}function fK(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Qk(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function bh(t,e){return ii(t.prev,t,t.next)<0?ii(t,e,t.next)>=0&&ii(t,t.prev,e)>=0:ii(t,e,t.prev)<0||ii(t,t.next,e)<0}function hK(t,e){let n=t,i=!1;const s=(t.x+e.x)/2,r=(t.y+e.y)/2;do n.y>r!=n.next.y>r&&n.next.y!==n.y&&s<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function eC(t,e){const n=new z_(t.i,t.x,t.y),i=new z_(e.i,e.x,e.y),s=t.next,r=e.prev;return t.next=e,e.prev=t,n.next=s,s.prev=n,i.next=n,n.prev=i,r.next=i,i.prev=r,i}function x3(t,e,n,i){const s=new z_(t,e,n);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function yh(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function z_(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function dK(t,e,n,i){let s=0;for(let r=e,o=n-i;r<n;r+=i)s+=(t[o]-t[r])*(t[r+1]+t[o+1]),o=r;return s}const ba={area:function(t){const e=t.length;let n=0;for(let i=e-1,s=0;s<e;i=s++)n+=t[i].x*t[s].y-t[s].x*t[i].y;return n*.5},isClockWise:function(t){return ba.area(t)<0},triangulateShape:function(t,e){const n=[],i=[],s=[];M3(t),S3(n,t);let r=t.length;e.forEach(M3);for(let a=0;a<e.length;a++)i.push(r),r+=e[a].length,S3(n,e[a]);const o=KJ.triangulate(n,i);for(let a=0;a<o.length;a+=3)s.push(o.slice(a,a+3));return s}};function M3(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function S3(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class tC extends An{constructor(e,n){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},this.fromBufferGeometry(new Vg(e,n)),this.mergeVertices()}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return nC(n,i,e)}}class Vg extends Qt{constructor(e,n){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,s=[],r=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new St(s,3)),this.setAttribute("uv",new St(r,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1;let f=n.depth!==void 0?n.depth:100,h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,d=n.bevelThickness!==void 0?n.bevelThickness:6,p=n.bevelSize!==void 0?n.bevelSize:d-2,_=n.bevelOffset!==void 0?n.bevelOffset:0,m=n.bevelSegments!==void 0?n.bevelSegments:3;const v=n.extrudePath,g=n.UVGenerator!==void 0?n.UVGenerator:pK;n.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),f=n.amount);let b,y=!1,w,x,S,T;v&&(b=v.getSpacedPoints(u),y=!0,h=!1,w=v.computeFrenetFrames(u,!1),x=new J,S=new J,T=new J),h||(m=0,d=0,p=0,_=0);const A=a.extractPoints(c);let C=A.shape;const k=A.holes;if(!ba.isClockWise(C)){C=C.reverse();for(let de=0,Ae=k.length;de<Ae;de++){const Oe=k[de];ba.isClockWise(Oe)&&(k[de]=Oe.reverse())}}const F=ba.triangulateShape(C,k),U=C;for(let de=0,Ae=k.length;de<Ae;de++){const Oe=k[de];C=C.concat(Oe)}function N(de,Ae,Oe){return Ae||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ae.clone().multiplyScalar(Oe).add(de)}const B=C.length,W=F.length;function ee(de,Ae,Oe){let Ye,fe,R;const V=de.x-Ae.x,ne=de.y-Ae.y,he=Oe.x-de.x,ie=Oe.y-de.y,ue=V*V+ne*ne,Re=V*ie-ne*he;if(Math.abs(Re)>Number.EPSILON){const Ue=Math.sqrt(ue),Ee=Math.sqrt(he*he+ie*ie),Se=Ae.x-ne/Ue,re=Ae.y+V/Ue,we=Oe.x-ie/Ee,Me=Oe.y+he/Ee,Ne=((we-Se)*ie-(Me-re)*he)/(V*ie-ne*he);Ye=Se+V*Ne-de.x,fe=re+ne*Ne-de.y;const Ze=Ye*Ye+fe*fe;if(Ze<=2)return new We(Ye,fe);R=Math.sqrt(Ze/2)}else{let Ue=!1;V>Number.EPSILON?he>Number.EPSILON&&(Ue=!0):V<-Number.EPSILON?he<-Number.EPSILON&&(Ue=!0):Math.sign(ne)===Math.sign(ie)&&(Ue=!0),Ue?(Ye=-ne,fe=V,R=Math.sqrt(ue)):(Ye=V,fe=ne,R=Math.sqrt(ue/2))}return new We(Ye/R,fe/R)}const K=[];for(let de=0,Ae=U.length,Oe=Ae-1,Ye=de+1;de<Ae;de++,Oe++,Ye++)Oe===Ae&&(Oe=0),Ye===Ae&&(Ye=0),K[de]=ee(U[de],U[Oe],U[Ye]);const ge=[];let se,X=K.concat();for(let de=0,Ae=k.length;de<Ae;de++){const Oe=k[de];se=[];for(let Ye=0,fe=Oe.length,R=fe-1,V=Ye+1;Ye<fe;Ye++,R++,V++)R===fe&&(R=0),V===fe&&(V=0),se[Ye]=ee(Oe[Ye],Oe[R],Oe[V]);ge.push(se),X=X.concat(se)}for(let de=0;de<m;de++){const Ae=de/m,Oe=d*Math.cos(Ae*Math.PI/2),Ye=p*Math.sin(Ae*Math.PI/2)+_;for(let fe=0,R=U.length;fe<R;fe++){const V=N(U[fe],K[fe],Ye);_e(V.x,V.y,-Oe)}for(let fe=0,R=k.length;fe<R;fe++){const V=k[fe];se=ge[fe];for(let ne=0,he=V.length;ne<he;ne++){const ie=N(V[ne],se[ne],Ye);_e(ie.x,ie.y,-Oe)}}}const q=p+_;for(let de=0;de<B;de++){const Ae=h?N(C[de],X[de],q):C[de];y?(S.copy(w.normals[0]).multiplyScalar(Ae.x),x.copy(w.binormals[0]).multiplyScalar(Ae.y),T.copy(b[0]).add(S).add(x),_e(T.x,T.y,T.z)):_e(Ae.x,Ae.y,0)}for(let de=1;de<=u;de++)for(let Ae=0;Ae<B;Ae++){const Oe=h?N(C[Ae],X[Ae],q):C[Ae];y?(S.copy(w.normals[de]).multiplyScalar(Oe.x),x.copy(w.binormals[de]).multiplyScalar(Oe.y),T.copy(b[de]).add(S).add(x),_e(T.x,T.y,T.z)):_e(Oe.x,Oe.y,f/u*de)}for(let de=m-1;de>=0;de--){const Ae=de/m,Oe=d*Math.cos(Ae*Math.PI/2),Ye=p*Math.sin(Ae*Math.PI/2)+_;for(let fe=0,R=U.length;fe<R;fe++){const V=N(U[fe],K[fe],Ye);_e(V.x,V.y,f+Oe)}for(let fe=0,R=k.length;fe<R;fe++){const V=k[fe];se=ge[fe];for(let ne=0,he=V.length;ne<he;ne++){const ie=N(V[ne],se[ne],Ye);y?_e(ie.x,ie.y+b[u-1].y,b[u-1].x+Oe):_e(ie.x,ie.y,f+Oe)}}}Y(),$();function Y(){const de=s.length/3;if(h){let Ae=0,Oe=B*Ae;for(let Ye=0;Ye<W;Ye++){const fe=F[Ye];pe(fe[2]+Oe,fe[1]+Oe,fe[0]+Oe)}Ae=u+m*2,Oe=B*Ae;for(let Ye=0;Ye<W;Ye++){const fe=F[Ye];pe(fe[0]+Oe,fe[1]+Oe,fe[2]+Oe)}}else{for(let Ae=0;Ae<W;Ae++){const Oe=F[Ae];pe(Oe[2],Oe[1],Oe[0])}for(let Ae=0;Ae<W;Ae++){const Oe=F[Ae];pe(Oe[0]+B*u,Oe[1]+B*u,Oe[2]+B*u)}}i.addGroup(de,s.length/3-de,0)}function $(){const de=s.length/3;let Ae=0;ze(U,Ae),Ae+=U.length;for(let Oe=0,Ye=k.length;Oe<Ye;Oe++){const fe=k[Oe];ze(fe,Ae),Ae+=fe.length}i.addGroup(de,s.length/3-de,1)}function ze(de,Ae){let Oe=de.length;for(;--Oe>=0;){const Ye=Oe;let fe=Oe-1;fe<0&&(fe=de.length-1);for(let R=0,V=u+m*2;R<V;R++){const ne=B*R,he=B*(R+1),ie=Ae+Ye+ne,ue=Ae+fe+ne,Re=Ae+fe+he,Ue=Ae+Ye+he;Te(ie,ue,Re,Ue)}}}function _e(de,Ae,Oe){l.push(de),l.push(Ae),l.push(Oe)}function pe(de,Ae,Oe){De(de),De(Ae),De(Oe);const Ye=s.length/3,fe=g.generateTopUV(i,s,Ye-3,Ye-2,Ye-1);je(fe[0]),je(fe[1]),je(fe[2])}function Te(de,Ae,Oe,Ye){De(de),De(Ae),De(Ye),De(Ae),De(Oe),De(Ye);const fe=s.length/3,R=g.generateSideWallUV(i,s,fe-6,fe-3,fe-2,fe-1);je(R[0]),je(R[1]),je(R[3]),je(R[1]),je(R[2]),je(R[3])}function De(de){s.push(l[de*3+0]),s.push(l[de*3+1]),s.push(l[de*3+2])}function je(de){r.push(de.x),r.push(de.y)}}}toJSON(){const e=Qt.prototype.toJSON.call(this),n=this.parameters.shapes,i=this.parameters.options;return nC(n,i,e)}}const pK={generateTopUV:function(t,e,n,i,s){const r=e[n*3],o=e[n*3+1],a=e[i*3],l=e[i*3+1],c=e[s*3],u=e[s*3+1];return[new We(r,o),new We(a,l),new We(c,u)]},generateSideWallUV:function(t,e,n,i,s,r){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[i*3],u=e[i*3+1],f=e[i*3+2],h=e[s*3],d=e[s*3+1],p=e[s*3+2],_=e[r*3],m=e[r*3+1],v=e[r*3+2];return Math.abs(a-u)<.01?[new We(o,1-l),new We(c,1-f),new We(h,1-p),new We(_,1-v)]:[new We(a,1-l),new We(u,1-f),new We(d,1-p),new We(m,1-v)]}};function nC(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,s=t.length;i<s;i++){const r=t[i];n.shapes.push(r.uuid)}else n.shapes.push(t.uuid);return e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class mK extends An{constructor(e,n){super(),this.type="TextGeometry",this.parameters={text:e,parameters:n},this.fromBufferGeometry(new iC(e,n)),this.mergeVertices()}}class iC extends Vg{constructor(e,n){n=n||{};const i=n.font;if(!(i&&i.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new An;const s=i.generateShapes(e,n.size);n.depth=n.height!==void 0?n.height:50,n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(s,n),this.type="TextBufferGeometry"}}class gK extends An{constructor(e,n,i,s,r,o,a){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:s,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new sC(e,n,i,s,r,o,a)),this.mergeVertices()}}class sC extends Qt{constructor(e,n,i,s,r,o,a){super(),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:s,phiLength:r,thetaStart:o,thetaLength:a},e=e||1,n=Math.max(3,Math.floor(n)||8),i=Math.max(2,Math.floor(i)||6),s=s!==void 0?s:0,r=r!==void 0?r:Math.PI*2,o=o!==void 0?o:0,a=a!==void 0?a:Math.PI;const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new J,h=new J,d=[],p=[],_=[],m=[];for(let v=0;v<=i;v++){const g=[],b=v/i;let y=0;v==0&&o==0?y=.5/n:v==i&&l==Math.PI&&(y=-.5/n);for(let w=0;w<=n;w++){const x=w/n;f.x=-e*Math.cos(s+x*r)*Math.sin(o+b*a),f.y=e*Math.cos(o+b*a),f.z=e*Math.sin(s+x*r)*Math.sin(o+b*a),p.push(f.x,f.y,f.z),h.copy(f).normalize(),_.push(h.x,h.y,h.z),m.push(x+y,1-b),g.push(c++)}u.push(g)}for(let v=0;v<i;v++)for(let g=0;g<n;g++){const b=u[v][g+1],y=u[v][g],w=u[v+1][g],x=u[v+1][g+1];(v!==0||o>0)&&d.push(b,y,x),(v!==i-1||l<Math.PI)&&d.push(y,w,x)}this.setIndex(d),this.setAttribute("position",new St(p,3)),this.setAttribute("normal",new St(_,3)),this.setAttribute("uv",new St(m,2))}}class _K extends An{constructor(e,n,i,s,r,o){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:s,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new rC(e,n,i,s,r,o)),this.mergeVertices()}}class rC extends Qt{constructor(e,n,i,s,r,o){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:s,thetaStart:r,thetaLength:o},e=e||.5,n=n||1,r=r!==void 0?r:0,o=o!==void 0?o:Math.PI*2,i=i!==void 0?Math.max(3,i):8,s=s!==void 0?Math.max(1,s):1;const a=[],l=[],c=[],u=[];let f=e;const h=(n-e)/s,d=new J,p=new We;for(let _=0;_<=s;_++){for(let m=0;m<=i;m++){const v=r+m/i*o;d.x=f*Math.cos(v),d.y=f*Math.sin(v),l.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/n+1)/2,p.y=(d.y/n+1)/2,u.push(p.x,p.y)}f+=h}for(let _=0;_<s;_++){const m=_*(i+1);for(let v=0;v<i;v++){const g=v+m,b=g,y=g+i+1,w=g+i+2,x=g+1;a.push(b,y,x),a.push(y,w,x)}}this.setIndex(a),this.setAttribute("position",new St(l,3)),this.setAttribute("normal",new St(c,3)),this.setAttribute("uv",new St(u,2))}}class vK extends An{constructor(e,n,i,s){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:s},this.fromBufferGeometry(new oC(e,n,i,s)),this.mergeVertices()}}class oC extends Qt{constructor(e,n,i,s){super(),this.type="LatheBufferGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:s},n=Math.floor(n)||12,i=i||0,s=s||Math.PI*2,s=Zt.clamp(s,0,Math.PI*2);const r=[],o=[],a=[],l=1/n,c=new J,u=new We;for(let f=0;f<=n;f++){const h=i+f*l*s,d=Math.sin(h),p=Math.cos(h);for(let _=0;_<=e.length-1;_++)c.x=e[_].x*d,c.y=e[_].y,c.z=e[_].x*p,o.push(c.x,c.y,c.z),u.x=f/n,u.y=_/(e.length-1),a.push(u.x,u.y)}for(let f=0;f<n;f++)for(let h=0;h<e.length-1;h++){const d=h+f*e.length,p=d,_=d+e.length,m=d+e.length+1,v=d+1;r.push(p,_,v),r.push(_,m,v)}if(this.setIndex(r),this.setAttribute("position",new St(o,3)),this.setAttribute("uv",new St(a,2)),this.computeVertexNormals(),s===Math.PI*2){const f=this.attributes.normal.array,h=new J,d=new J,p=new J,_=n*e.length*3;for(let m=0,v=0;m<e.length;m++,v+=3)h.x=f[v+0],h.y=f[v+1],h.z=f[v+2],d.x=f[_+v+0],d.y=f[_+v+1],d.z=f[_+v+2],p.addVectors(h,d).normalize(),f[v+0]=f[_+v+0]=p.x,f[v+1]=f[_+v+1]=p.y,f[v+2]=f[_+v+2]=p.z}}}class aC extends An{constructor(e,n){super(),this.type="ShapeGeometry",typeof n=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),n=n.curveSegments),this.parameters={shapes:e,curveSegments:n},this.fromBufferGeometry(new lC(e,n)),this.mergeVertices()}toJSON(){const e=An.prototype.toJSON.call(this),n=this.parameters.shapes;return cC(n,e)}}class lC extends Qt{constructor(e,n){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:n},n=n||12;const i=[],s=[],r=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new St(s,3)),this.setAttribute("normal",new St(r,3)),this.setAttribute("uv",new St(o,2));function c(u){const f=s.length/3,h=u.extractPoints(n);let d=h.shape;const p=h.holes;ba.isClockWise(d)===!1&&(d=d.reverse());for(let m=0,v=p.length;m<v;m++){const g=p[m];ba.isClockWise(g)===!0&&(p[m]=g.reverse())}const _=ba.triangulateShape(d,p);for(let m=0,v=p.length;m<v;m++){const g=p[m];d=d.concat(g)}for(let m=0,v=d.length;m<v;m++){const g=d[m];s.push(g.x,g.y,0),r.push(0,0,1),o.push(g.x,g.y)}for(let m=0,v=_.length;m<v;m++){const g=_[m],b=g[0]+f,y=g[1]+f,w=g[2]+f;i.push(b,y,w),l+=3}}}toJSON(){const e=Qt.prototype.toJSON.call(this),n=this.parameters.shapes;return cC(n,e)}}function cC(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const s=t[n];e.shapes.push(s.uuid)}else e.shapes.push(t.uuid);return e}class bK extends Qt{constructor(e,n){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:n},n=n!==void 0?n:1;const i=[],s=Math.cos(Zt.DEG2RAD*n),r=[0,0],o={};let a,l,c;const u=["a","b","c"];let f;e.isBufferGeometry?(f=new An,f.fromBufferGeometry(e)):f=e.clone(),f.mergeVertices(),f.computeFaceNormals();const h=f.vertices,d=f.faces;for(let p=0,_=d.length;p<_;p++){const m=d[p];for(let v=0;v<3;v++)a=m[u[v]],l=m[u[(v+1)%3]],r[0]=Math.min(a,l),r[1]=Math.max(a,l),c=r[0]+","+r[1],o[c]===void 0?o[c]={index1:r[0],index2:r[1],face1:p,face2:void 0}:o[c].face2=p}for(c in o){const p=o[c];if(p.face2===void 0||d[p.face1].normal.dot(d[p.face2].normal)<=s){let _=h[p.index1];i.push(_.x,_.y,_.z),_=h[p.index2],i.push(_.x,_.y,_.z)}}this.setAttribute("position",new St(i,3))}}class uC extends An{constructor(e,n,i,s,r,o,a,l){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:s,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:l},this.fromBufferGeometry(new Hb(e,n,i,s,r,o,a,l)),this.mergeVertices()}}class Hb extends Qt{constructor(e,n,i,s,r,o,a,l){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:s,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:l};const c=this;e=e!==void 0?e:1,n=n!==void 0?n:1,i=i||1,s=Math.floor(s)||8,r=Math.floor(r)||1,o=o!==void 0?o:!1,a=a!==void 0?a:0,l=l!==void 0?l:Math.PI*2;const u=[],f=[],h=[],d=[];let p=0;const _=[],m=i/2;let v=0;g(),o===!1&&(e>0&&b(!0),n>0&&b(!1)),this.setIndex(u),this.setAttribute("position",new St(f,3)),this.setAttribute("normal",new St(h,3)),this.setAttribute("uv",new St(d,2));function g(){const y=new J,w=new J;let x=0;const S=(n-e)/i;for(let T=0;T<=r;T++){const A=[],C=T/r,k=C*(n-e)+e;for(let L=0;L<=s;L++){const F=L/s,U=F*l+a,N=Math.sin(U),B=Math.cos(U);w.x=k*N,w.y=-C*i+m,w.z=k*B,f.push(w.x,w.y,w.z),y.set(N,S,B).normalize(),h.push(y.x,y.y,y.z),d.push(F,1-C),A.push(p++)}_.push(A)}for(let T=0;T<s;T++)for(let A=0;A<r;A++){const C=_[A][T],k=_[A+1][T],L=_[A+1][T+1],F=_[A][T+1];u.push(C,k,F),u.push(k,L,F),x+=6}c.addGroup(v,x,0),v+=x}function b(y){const w=p,x=new We,S=new J;let T=0;const A=y===!0?e:n,C=y===!0?1:-1;for(let L=1;L<=s;L++)f.push(0,m*C,0),h.push(0,C,0),d.push(.5,.5),p++;const k=p;for(let L=0;L<=s;L++){const U=L/s*l+a,N=Math.cos(U),B=Math.sin(U);S.x=A*B,S.y=m*C,S.z=A*N,f.push(S.x,S.y,S.z),h.push(0,C,0),x.x=N*.5+.5,x.y=B*.5*C+.5,d.push(x.x,x.y),p++}for(let L=0;L<s;L++){const F=w+L,U=k+L;y===!0?u.push(U,U+1,F):u.push(U+1,U,F),T+=3}c.addGroup(v,T,y===!0?1:2),v+=T}}}class yK extends uC{constructor(e,n,i,s,r,o,a){super(0,e,n,i,s,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:s,openEnded:r,thetaStart:o,thetaLength:a}}}class wK extends Hb{constructor(e,n,i,s,r,o,a){super(0,e,n,i,s,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:s,openEnded:r,thetaStart:o,thetaLength:a}}}class xK extends An{constructor(e,n,i,s){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:s},this.fromBufferGeometry(new fC(e,n,i,s)),this.mergeVertices()}}class fC extends Qt{constructor(e,n,i,s){super(),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:s},e=e||1,n=n!==void 0?Math.max(3,n):8,i=i!==void 0?i:0,s=s!==void 0?s:Math.PI*2;const r=[],o=[],a=[],l=[],c=new J,u=new We;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=n;f++,h+=3){const d=i+f/n*s;c.x=e*Math.cos(d),c.y=e*Math.sin(d),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=n;f++)r.push(f,f+1,0);this.setIndex(r),this.setAttribute("position",new St(o,3)),this.setAttribute("normal",new St(a,3)),this.setAttribute("uv",new St(l,2))}}var Zi=Object.freeze({__proto__:null,WireframeGeometry:VJ,ParametricGeometry:jm,ParametricBufferGeometry:_h,TetrahedronGeometry:WJ,TetrahedronBufferGeometry:jk,OctahedronGeometry:jJ,OctahedronBufferGeometry:Yk,IcosahedronGeometry:YJ,IcosahedronBufferGeometry:qk,DodecahedronGeometry:qJ,DodecahedronBufferGeometry:Xk,PolyhedronGeometry:GJ,PolyhedronBufferGeometry:Tu,TubeGeometry:XJ,TubeBufferGeometry:Zk,TorusKnotGeometry:ZJ,TorusKnotBufferGeometry:Jk,TorusGeometry:JJ,TorusBufferGeometry:Kk,TextGeometry:mK,TextBufferGeometry:iC,SphereGeometry:gK,SphereBufferGeometry:sC,RingGeometry:_K,RingBufferGeometry:rC,PlaneGeometry:WY,PlaneBufferGeometry:Ug,LatheGeometry:vK,LatheBufferGeometry:oC,ShapeGeometry:aC,ShapeBufferGeometry:lC,ExtrudeGeometry:tC,ExtrudeBufferGeometry:Vg,EdgesGeometry:bK,ConeGeometry:yK,ConeBufferGeometry:wK,CylinderGeometry:uC,CylinderBufferGeometry:Hb,CircleGeometry:xK,CircleBufferGeometry:fC,BoxGeometry:zY,BoxBufferGeometry:Fg});function fu(t){Dt.call(this),this.type="ShadowMaterial",this.color=new Mt(0),this.transparent=!0,this.setValues(t)}fu.prototype=Object.create(Dt.prototype);fu.prototype.constructor=fu;fu.prototype.isShadowMaterial=!0;fu.prototype.copy=function(t){return Dt.prototype.copy.call(this,t),this.color.copy(t.color),this};function wh(t){ps.call(this,t),this.type="RawShaderMaterial"}wh.prototype=Object.create(ps.prototype);wh.prototype.constructor=wh;wh.prototype.isRawShaderMaterial=!0;function Ro(t){Dt.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Mt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}Ro.prototype=Object.create(Dt.prototype);Ro.prototype.constructor=Ro;Ro.prototype.isMeshStandardMaterial=!0;Ro.prototype.copy=function(t){return Dt.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this};function Cl(t){Ro.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new We(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}Cl.prototype=Object.create(Ro.prototype);Cl.prototype.constructor=Cl;Cl.prototype.isMeshPhysicalMaterial=!0;Cl.prototype.copy=function(t){return Ro.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new Mt).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this};function Ll(t){Dt.call(this),this.type="MeshPhongMaterial",this.color=new Mt(16777215),this.specular=new Mt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}Ll.prototype=Object.create(Dt.prototype);Ll.prototype.constructor=Ll;Ll.prototype.isMeshPhongMaterial=!0;Ll.prototype.copy=function(t){return Dt.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function hu(t){Dt.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Mt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}hu.prototype=Object.create(Dt.prototype);hu.prototype.constructor=hu;hu.prototype.isMeshToonMaterial=!0;hu.prototype.copy=function(t){return Dt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function du(t){Dt.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}du.prototype=Object.create(Dt.prototype);du.prototype.constructor=du;du.prototype.isMeshNormalMaterial=!0;du.prototype.copy=function(t){return Dt.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function pu(t){Dt.call(this),this.type="MeshLambertMaterial",this.color=new Mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}pu.prototype=Object.create(Dt.prototype);pu.prototype.constructor=pu;pu.prototype.isMeshLambertMaterial=!0;pu.prototype.copy=function(t){return Dt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function mu(t){Dt.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Mt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}mu.prototype=Object.create(Dt.prototype);mu.prototype.constructor=mu;mu.prototype.isMeshMatcapMaterial=!0;mu.prototype.copy=function(t){return Dt.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function gu(t){$s.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}gu.prototype=Object.create($s.prototype);gu.prototype.constructor=gu;gu.prototype.isLineDashedMaterial=!0;gu.prototype.copy=function(t){return $s.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var MK=Object.freeze({__proto__:null,ShadowMaterial:fu,SpriteMaterial:Tl,RawShaderMaterial:wh,ShaderMaterial:ps,PointsMaterial:kl,MeshPhysicalMaterial:Cl,MeshStandardMaterial:Ro,MeshPhongMaterial:Ll,MeshToonMaterial:hu,MeshNormalMaterial:du,MeshLambertMaterial:pu,MeshDepthMaterial:Ml,MeshDistanceMaterial:Sl,MeshBasicMaterial:Xr,MeshMatcapMaterial:mu,LineDashedMaterial:gu,LineBasicMaterial:$s,Material:Dt});const Xn={arraySlice:function(t,e,n){return Xn.isTypedArray(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(s,r){return t[s]-t[r]}const n=t.length,i=new Array(n);for(let s=0;s!==n;++s)i[s]=s;return i.sort(e),i},sortedArray:function(t,e,n){const i=t.length,s=new t.constructor(i);for(let r=0,o=0;o!==i;++r){const a=n[r]*e;for(let l=0;l!==e;++l)s[o++]=t[a+l]}return s},flattenJSON:function(t,e,n,i){let s=1,r=t[0];for(;r!==void 0&&r[i]===void 0;)r=t[s++];if(r===void 0)return;let o=r[i];if(o!==void 0)if(Array.isArray(o))do o=r[i],o!==void 0&&(e.push(r.time),n.push.apply(n,o)),r=t[s++];while(r!==void 0);else if(o.toArray!==void 0)do o=r[i],o!==void 0&&(e.push(r.time),o.toArray(n,n.length)),r=t[s++];while(r!==void 0);else do o=r[i],o!==void 0&&(e.push(r.time),n.push(o)),r=t[s++];while(r!==void 0)},subclip:function(t,e,n,i,s){s=s||30;const r=t.clone();r.name=e;const o=[];for(let l=0;l<r.tracks.length;++l){const c=r.tracks[l],u=c.getValueSize(),f=[],h=[];for(let d=0;d<c.times.length;++d){const p=c.times[d]*s;if(!(p<n||p>=i)){f.push(c.times[d]);for(let _=0;_<u;++_)h.push(c.values[d*u+_])}}f.length!==0&&(c.times=Xn.convertArray(f,c.times.constructor),c.values=Xn.convertArray(h,c.values.constructor),o.push(c))}r.tracks=o;let a=1/0;for(let l=0;l<r.tracks.length;++l)a>r.tracks[l].times[0]&&(a=r.tracks[l].times[0]);for(let l=0;l<r.tracks.length;++l)r.tracks[l].shift(-1*a);return r.resetDuration(),r},makeClipAdditive:function(t,e,n,i){e===void 0&&(e=0),n===void 0&&(n=t),(i===void 0||i<=0)&&(i=30);const s=t.tracks.length,r=e/i;for(let o=0;o<s;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let h=0;const d=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);const p=a.times.length-1;let _;if(r<=a.times[0]){const v=u,g=f-u;_=Xn.arraySlice(a.values,v,g)}else if(r>=a.times[p]){const v=p*f+u,g=v+f-u;_=Xn.arraySlice(a.values,v,g)}else{const v=a.createInterpolant(),g=u,b=f-u;v.evaluate(r),_=Xn.arraySlice(v.resultBuffer,g,b)}l==="quaternion"&&new Hi().fromArray(_).normalize().conjugate().toArray(_);const m=c.times.length;for(let v=0;v<m;++v){const g=v*d+h;if(l==="quaternion")Hi.multiplyQuaternionsFlat(c.values,g,_,0,c.values,g);else{const b=d-h*2;for(let y=0;y<b;++y)c.values[g+y]-=_[y]}}}return t.blendMode=kk,t}};function Zs(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}Object.assign(Zs.prototype,{evaluate:function(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],s=e[n-1];e:{t:{let r;n:{i:if(!(t<i)){for(let o=n+2;;){if(i===void 0){if(t<s)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,s)}if(n===o)break;if(s=i,i=e[++n],t<i)break t}r=e.length;break n}if(!(t>=s)){const o=e[1];t<o&&(n=2,s=o);for(let a=n-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===a)break;if(i=s,s=e[--n-1],t>=s)break t}r=n,n=0;break n}break e}for(;n<r;){const o=n+r>>>1;t<e[o]?r=o:n=o+1}if(i=e[n],s=e[n-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(i===void 0)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,s,t)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=t*i;for(let r=0;r!==i;++r)e[r]=n[s+r];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Zs.prototype,{beforeStart_:Zs.prototype.copySampleValue_,afterEnd_:Zs.prototype.copySampleValue_});function U_(t,e,n,i){Zs.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}U_.prototype=Object.assign(Object.create(Zs.prototype),{constructor:U_,DefaultSettings_:{endingStart:Ac,endingEnd:Ac},intervalChanged_:function(t,e,n){const i=this.parameterPositions;let s=t-2,r=t+1,o=i[s],a=i[r];if(o===void 0)switch(this.getSettings_().endingStart){case kc:s=t,o=2*e-n;break;case Hm:s=i.length-2,o=e+i[s]-i[s+1];break;default:s=t,o=n}if(a===void 0)switch(this.getSettings_().endingEnd){case kc:r=t,a=2*n-e;break;case Hm:r=1,a=n+i[1]-i[0];break;default:r=t-1,a=e}const l=(n-e)*.5,c=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(a-n),this._offsetPrev=s*c,this._offsetNext=r*c},interpolate_:function(t,e,n,i){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,c=this._offsetPrev,u=this._offsetNext,f=this._weightPrev,h=this._weightNext,d=(n-e)/(i-e),p=d*d,_=p*d,m=-f*_+2*f*p-f*d,v=(1+f)*_+(-1.5-2*f)*p+(-.5+f)*d+1,g=(-1-h)*_+(1.5+h)*p+.5*d,b=h*_-h*p;for(let y=0;y!==o;++y)s[y]=m*r[c+y]+v*r[l+y]+g*r[a+y]+b*r[u+y];return s}});function Ym(t,e,n,i){Zs.call(this,t,e,n,i)}Ym.prototype=Object.assign(Object.create(Zs.prototype),{constructor:Ym,interpolate_:function(t,e,n,i){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,c=(n-e)/(i-e),u=1-c;for(let f=0;f!==o;++f)s[f]=r[l+f]*u+r[a+f]*c;return s}});function H_(t,e,n,i){Zs.call(this,t,e,n,i)}H_.prototype=Object.assign(Object.create(Zs.prototype),{constructor:H_,interpolate_:function(t){return this.copySampleValue_(t-1)}});function Wi(t,e,n,i){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Xn.convertArray(e,this.TimeBufferType),this.values=Xn.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}Object.assign(Wi,{toJSON:function(t){const e=t.constructor;let n;if(e.toJSON!==void 0)n=e.toJSON(t);else{n={name:t.name,times:Xn.convertArray(t.times,Array),values:Xn.convertArray(t.values,Array)};const i=t.getInterpolation();i!==t.DefaultInterpolation&&(n.interpolation=i)}return n.type=t.ValueTypeName,n}});Object.assign(Wi.prototype,{constructor:Wi,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Bp,InterpolantFactoryMethodDiscrete:function(t){return new H_(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Ym(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new U_(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){let e;switch(t){case Um:e=this.InterpolantFactoryMethodDiscrete;break;case Bp:e=this.InterpolantFactoryMethodLinear;break;case R0:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Um;case this.InterpolantFactoryMethodLinear:return Bp;case this.InterpolantFactoryMethodSmooth:return R0}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(t!==0){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this},scale:function(t){if(t!==1){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this},trim:function(t,e){const n=this.times,i=n.length;let s=0,r=i-1;for(;s!==i&&n[s]<t;)++s;for(;r!==-1&&n[r]>e;)--r;if(++r,s!==0||r!==i){s>=r&&(r=Math.max(r,1),s=r-1);const o=this.getValueSize();this.times=Xn.arraySlice(n,s,r),this.values=Xn.arraySlice(this.values,s*o,r*o)}return this},validate:function(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let r=null;for(let o=0;o!==s;o++){const a=n[o];if(typeof a=="number"&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),t=!1;break}if(r!==null&&r>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,r),t=!1;break}r=a}if(i!==void 0&&Xn.isTypedArray(i))for(let o=0,a=i.length;o!==a;++o){const l=i[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),t=!1;break}}return t},optimize:function(){const t=Xn.arraySlice(this.times),e=Xn.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===R0,s=t.length-1;let r=1;for(let o=1;o<s;++o){let a=!1;const l=t[o],c=t[o+1];if(l!==c&&(o!==1||l!==l[0]))if(i)a=!0;else{const u=o*n,f=u-n,h=u+n;for(let d=0;d!==n;++d){const p=e[u+d];if(p!==e[f+d]||p!==e[h+d]){a=!0;break}}}if(a){if(o!==r){t[r]=t[o];const u=o*n,f=r*n;for(let h=0;h!==n;++h)e[f+h]=e[u+h]}++r}}if(s>0){t[r]=t[s];for(let o=s*n,a=r*n,l=0;l!==n;++l)e[a+l]=e[o+l];++r}return r!==t.length?(this.times=Xn.arraySlice(t,0,r),this.values=Xn.arraySlice(e,0,r*n)):(this.times=t,this.values=e),this},clone:function(){const t=Xn.arraySlice(this.times,0),e=Xn.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}});function V_(t,e,n){Wi.call(this,t,e,n)}V_.prototype=Object.assign(Object.create(Wi.prototype),{constructor:V_,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Um,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function G_(t,e,n,i){Wi.call(this,t,e,n,i)}G_.prototype=Object.assign(Object.create(Wi.prototype),{constructor:G_,ValueTypeName:"color"});function xh(t,e,n,i){Wi.call(this,t,e,n,i)}xh.prototype=Object.assign(Object.create(Wi.prototype),{constructor:xh,ValueTypeName:"number"});function W_(t,e,n,i){Zs.call(this,t,e,n,i)}W_.prototype=Object.assign(Object.create(Zs.prototype),{constructor:W_,interpolate_:function(t,e,n,i){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=(n-e)/(i-e);let l=t*o;for(let c=l+o;l!==c;l+=4)Hi.slerpFlat(s,0,r,l-o,r,l,a);return s}});function qm(t,e,n,i){Wi.call(this,t,e,n,i)}qm.prototype=Object.assign(Object.create(Wi.prototype),{constructor:qm,ValueTypeName:"quaternion",DefaultInterpolation:Bp,InterpolantFactoryMethodLinear:function(t){return new W_(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0});function j_(t,e,n,i){Wi.call(this,t,e,n,i)}j_.prototype=Object.assign(Object.create(Wi.prototype),{constructor:j_,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Um,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function Mh(t,e,n,i){Wi.call(this,t,e,n,i)}Mh.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Mh,ValueTypeName:"vector"});function _r(t,e,n,i){this.name=t,this.tracks=n,this.duration=e!==void 0?e:-1,this.blendMode=i!==void 0?i:Bb,this.uuid=Zt.generateUUID(),this.duration<0&&this.resetDuration()}function SK(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return xh;case"vector":case"vector2":case"vector3":case"vector4":return Mh;case"color":return G_;case"quaternion":return qm;case"bool":case"boolean":return V_;case"string":return j_}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function EK(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=SK(t.type);if(t.times===void 0){const n=[],i=[];Xn.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(_r,{parse:function(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let s=0,r=n.length;s!==r;++s)e.push(EK(n[s]).scale(i));return new _r(t.name,t.duration,e,t.blendMode)},toJSON:function(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,r=n.length;s!==r;++s)e.push(Wi.toJSON(n[s]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){const s=e.length,r=[];for(let o=0;o<s;o++){let a=[],l=[];a.push((o+s-1)%s,o,(o+1)%s),l.push(0,1,0);const c=Xn.getKeyframeOrder(a);a=Xn.sortedArray(a,1,c),l=Xn.sortedArray(l,1,c),!i&&a[0]===0&&(a.push(s),l.push(l[0])),r.push(new xh(".morphTargetInfluences["+e[o].name+"]",a,l).scale(1/n))}return new _r(t,-1,r)},findByName:function(t,e){let n=t;if(!Array.isArray(t)){const i=t;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,a=t.length;o<a;o++){const l=t[o],c=l.name.match(s);if(c&&c.length>1){const u=c[1];let f=i[u];f||(i[u]=f=[]),f.push(l)}}const r=[];for(const o in i)r.push(_r.CreateFromMorphTargetSequence(o,i[o],e,n));return r},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,f,h,d,p){if(h.length!==0){const _=[],m=[];Xn.flattenJSON(h,_,m,d),_.length!==0&&p.push(new u(f,_,m))}},i=[],s=t.name||"default",r=t.fps||30,o=t.blendMode;let a=t.length||-1;const l=t.hierarchy||[];for(let u=0;u<l.length;u++){const f=l[u].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const h={};let d;for(d=0;d<f.length;d++)if(f[d].morphTargets)for(let p=0;p<f[d].morphTargets.length;p++)h[f[d].morphTargets[p]]=-1;for(const p in h){const _=[],m=[];for(let v=0;v!==f[d].morphTargets.length;++v){const g=f[d];_.push(g.time),m.push(g.morphTarget===p?1:0)}i.push(new xh(".morphTargetInfluence["+p+"]",_,m))}a=h.length*(r||1)}else{const h=".bones["+e[u].name+"]";n(Mh,h+".position",f,"pos",i),n(qm,h+".quaternion",f,"rot",i),n(Mh,h+".scale",f,"scl",i)}}return i.length===0?null:new _r(s,a,i,o)}});Object.assign(_r.prototype,{resetDuration:function(){const t=this.tracks;let e=0;for(let n=0,i=t.length;n!==i;++n){const s=this.tracks[n];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this},trim:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new _r(this.name,this.duration,t,this.blendMode)}});const _u={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function hC(t,e,n){const i=this;let s=!1,r=0,o=0,a;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(c){o++,s===!1&&i.onStart!==void 0&&i.onStart(c,r,o),s=!0},this.itemEnd=function(c){r++,i.onProgress!==void 0&&i.onProgress(c,r,o),r===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return a?a(c):c},this.setURLModifier=function(c){return a=c,this},this.addHandler=function(c,u){return l.push(c,u),this},this.removeHandler=function(c){const u=l.indexOf(c);return u!==-1&&l.splice(u,2),this},this.getHandler=function(c){for(let u=0,f=l.length;u<f;u+=2){const h=l[u],d=l[u+1];if(h.global&&(h.lastIndex=0),h.test(c))return d}return null}}const TK=new hC;function Cn(t){this.manager=t!==void 0?t:TK,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Cn.prototype,{load:function(){},loadAsync:function(t,e){const n=this;return new Promise(function(i,s){n.load(t,i,e,s)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});const cr={};function Zr(t){Cn.call(this,t)}Zr.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Zr,load:function(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,r=_u.get(t);if(r!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(r),s.manager.itemEnd(t)},0),r;if(cr[t]!==void 0){cr[t].push({onLoad:e,onProgress:n,onError:i});return}const o=/^data:(.*?)(;base64)?,(.*)$/,a=t.match(o);let l;if(a){const c=a[1],u=!!a[2];let f=a[3];f=decodeURIComponent(f),u&&(f=atob(f));try{let h;const d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":const p=new Uint8Array(f.length);for(let m=0;m<f.length;m++)p[m]=f.charCodeAt(m);d==="blob"?h=new Blob([p.buffer],{type:c}):h=p.buffer;break;case"document":h=new DOMParser().parseFromString(f,c);break;case"json":h=JSON.parse(f);break;default:h=f;break}setTimeout(function(){e&&e(h),s.manager.itemEnd(t)},0)}catch(h){setTimeout(function(){i&&i(h),s.manager.itemError(t),s.manager.itemEnd(t)},0)}}else{cr[t]=[],cr[t].push({onLoad:e,onProgress:n,onError:i}),l=new XMLHttpRequest,l.open("GET",t,!0),l.addEventListener("load",function(c){const u=this.response,f=cr[t];if(delete cr[t],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),_u.add(t,u);for(let h=0,d=f.length;h<d;h++){const p=f[h];p.onLoad&&p.onLoad(u)}s.manager.itemEnd(t)}else{for(let h=0,d=f.length;h<d;h++){const p=f[h];p.onError&&p.onError(c)}s.manager.itemError(t),s.manager.itemEnd(t)}},!1),l.addEventListener("progress",function(c){const u=cr[t];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onProgress&&d.onProgress(c)}},!1),l.addEventListener("error",function(c){const u=cr[t];delete cr[t];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onError&&d.onError(c)}s.manager.itemError(t),s.manager.itemEnd(t)},!1),l.addEventListener("abort",function(c){const u=cr[t];delete cr[t];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onError&&d.onError(c)}s.manager.itemError(t),s.manager.itemEnd(t)},!1),this.responseType!==void 0&&(l.responseType=this.responseType),this.withCredentials!==void 0&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const c in this.requestHeader)l.setRequestHeader(c,this.requestHeader[c]);l.send(null)}return s.manager.itemStart(t),l},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}});function E3(t){Cn.call(this,t)}E3.prototype=Object.assign(Object.create(Cn.prototype),{constructor:E3,load:function(t,e,n,i){const s=this,r=new Zr(s.manager);r.setPath(s.path),r.setRequestHeader(s.requestHeader),r.load(t,function(o){try{e(s.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),s.manager.itemError(t)}},n,i)},parse:function(t){const e=[];for(let n=0;n<t.length;n++){const i=_r.parse(t[n]);e.push(i)}return e}});function T3(t){Cn.call(this,t)}T3.prototype=Object.assign(Object.create(Cn.prototype),{constructor:T3,load:function(t,e,n,i){const s=this,r=[],o=new gh;o.image=r;const a=new Zr(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader);let l=0;function c(u){a.load(t[u],function(f){const h=s.parse(f,!0);r[u]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},l+=1,l===6&&(h.mipmapCount===1&&(o.minFilter=Ii),o.format=h.format,o.needsUpdate=!0,e&&e(o))},n,i)}if(Array.isArray(t))for(let u=0,f=t.length;u<f;++u)c(u);else a.load(t,function(u){const f=s.parse(u,!0);if(f.isCubemap){const h=f.mipmaps.length/f.mipmapCount;for(let d=0;d<h;d++){r[d]={mipmaps:[]};for(let p=0;p<f.mipmapCount;p++)r[d].mipmaps.push(f.mipmaps[d*f.mipmapCount+p]),r[d].format=f.format,r[d].width=f.width,r[d].height=f.height}}else o.image.width=f.width,o.image.height=f.height,o.mipmaps=f.mipmaps;f.mipmapCount===1&&(o.minFilter=Ii),o.format=f.format,o.needsUpdate=!0,e&&e(o)},n,i);return o}});function Sh(t){Cn.call(this,t)}Sh.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Sh,load:function(t,e,n,i){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,r=_u.get(t);if(r!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(r),s.manager.itemEnd(t)},0),r;const o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),_u.add(t,this),e&&e(this),s.manager.itemEnd(t)}function l(c){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),i&&i(c),s.manager.itemError(t),s.manager.itemEnd(t)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(t),o.src=t,o}});function Y_(t){Cn.call(this,t)}Y_.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Y_,load:function(t,e,n,i){const s=new Aa,r=new Sh(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);let o=0;function a(l){r.load(t[l],function(c){s.images[l]=c,o++,o===6&&(s.needsUpdate=!0,e&&e(s))},void 0,i)}for(let l=0;l<t.length;++l)a(l);return s}});function A3(t){Cn.call(this,t)}A3.prototype=Object.assign(Object.create(Cn.prototype),{constructor:A3,load:function(t,e,n,i){const s=this,r=new uu,o=new Zr(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.load(t,function(a){const l=s.parse(a);!l||(l.image!==void 0?r.image=l.image:l.data!==void 0&&(r.image.width=l.width,r.image.height=l.height,r.image.data=l.data),r.wrapS=l.wrapS!==void 0?l.wrapS:us,r.wrapT=l.wrapT!==void 0?l.wrapT:us,r.magFilter=l.magFilter!==void 0?l.magFilter:Ii,r.minFilter=l.minFilter!==void 0?l.minFilter:Ii,r.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.format!==void 0&&(r.format=l.format),l.type!==void 0&&(r.type=l.type),l.mipmaps!==void 0&&(r.mipmaps=l.mipmaps,r.minFilter=Hh),l.mipmapCount===1&&(r.minFilter=Ii),r.needsUpdate=!0,e&&e(r,l))},n,i),r}});function q_(t){Cn.call(this,t)}q_.prototype=Object.assign(Object.create(Cn.prototype),{constructor:q_,load:function(t,e,n,i){const s=new In,r=new Sh(this.manager);return r.setCrossOrigin(this.crossOrigin),r.setPath(this.path),r.load(t,function(o){s.image=o;const a=t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0;s.format=a?fl:Mr,s.needsUpdate=!0,e!==void 0&&e(s)},n,i),s}});function Ct(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Ct.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){t===void 0&&(t=5);const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){t===void 0&&(t=5);const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){const t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t===void 0&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),s=0;e.push(0);for(let r=1;r<=t;r++)n=this.getPoint(r/t),s+=n.distanceTo(i),e.push(s),i=n;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){const n=this.getLengths();let i=0;const s=n.length;let r;e?r=e:r=t*n[s-1];let o=0,a=s-1,l;for(;o<=a;)if(i=Math.floor(o+(a-o)/2),l=n[i]-r,l<0)o=i+1;else if(l>0)a=i-1;else{a=i;break}if(i=a,n[i]===r)return i/(s-1);const c=n[i],f=n[i+1]-c,h=(r-c)/f;return(i+h)/(s-1)},getTangent:function(t,e){let i=t-1e-4,s=t+1e-4;i<0&&(i=0),s>1&&(s=1);const r=this.getPoint(i),o=this.getPoint(s),a=e||(r.isVector2?new We:new J);return a.copy(o).sub(r).normalize(),a},getTangentAt:function(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){const n=new J,i=[],s=[],r=[],o=new J,a=new nn;for(let h=0;h<=t;h++){const d=h/t;i[h]=this.getTangentAt(d,new J),i[h].normalize()}s[0]=new J,r[0]=new J;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),f=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),f<=l&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],o),r[0].crossVectors(i[0],s[0]);for(let h=1;h<=t;h++){if(s[h]=s[h-1].clone(),r[h]=r[h-1].clone(),o.crossVectors(i[h-1],i[h]),o.length()>Number.EPSILON){o.normalize();const d=Math.acos(Zt.clamp(i[h-1].dot(i[h]),-1,1));s[h].applyMatrix4(a.makeRotationAxis(o,d))}r[h].crossVectors(i[h],s[h])}if(e===!0){let h=Math.acos(Zt.clamp(s[0].dot(s[t]),-1,1));h/=t,i[0].dot(o.crossVectors(s[0],s[t]))>0&&(h=-h);for(let d=1;d<=t;d++)s[d].applyMatrix4(a.makeRotationAxis(i[d],h*d)),r[d].crossVectors(i[d],s[d])}return{tangents:i,normals:s,binormals:r}},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}});function Qs(t,e,n,i,s,r,o,a){Ct.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=s||0,this.aEndAngle=r||2*Math.PI,this.aClockwise=o||!1,this.aRotation=a||0}Qs.prototype=Object.create(Ct.prototype);Qs.prototype.constructor=Qs;Qs.prototype.isEllipseCurve=!0;Qs.prototype.getPoint=function(t,e){const n=e||new We,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const r=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(r?s=0:s=i),this.aClockwise===!0&&!r&&(s===i?s=-i:s=s-i);const o=this.aStartAngle+t*s;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),f=a-this.aX,h=l-this.aY;a=f*c-h*u+this.aX,l=f*u+h*c+this.aY}return n.set(a,l)};Qs.prototype.copy=function(t){return Ct.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this};Qs.prototype.toJSON=function(){const t=Ct.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t};Qs.prototype.fromJSON=function(t){return Ct.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this};function Eh(t,e,n,i,s,r){Qs.call(this,t,e,n,n,i,s,r),this.type="ArcCurve"}Eh.prototype=Object.create(Qs.prototype);Eh.prototype.constructor=Eh;Eh.prototype.isArcCurve=!0;function Vb(){let t=0,e=0,n=0,i=0;function s(r,o,a,l){t=r,e=a,n=-3*r+3*o-2*a-l,i=2*r-2*o+a+l}return{initCatmullRom:function(r,o,a,l,c){s(o,a,c*(a-r),c*(l-o))},initNonuniformCatmullRom:function(r,o,a,l,c,u,f){let h=(o-r)/c-(a-r)/(c+u)+(a-o)/u,d=(a-o)/u-(l-o)/(u+f)+(l-a)/f;h*=u,d*=u,s(o,a,h,d)},calc:function(r){const o=r*r,a=o*r;return t+e*r+n*o+i*a}}}const $d=new J,i1=new Vb,s1=new Vb,r1=new Vb;function Ls(t,e,n,i){Ct.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=i!==void 0?i:.5}Ls.prototype=Object.create(Ct.prototype);Ls.prototype.constructor=Ls;Ls.prototype.isCatmullRomCurve3=!0;Ls.prototype.getPoint=function(t,e){const n=e||new J,i=this.points,s=i.length,r=(s-(this.closed?0:1))*t;let o=Math.floor(r),a=r-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:a===0&&o===s-1&&(o=s-2,a=1);let l,c;this.closed||o>0?l=i[(o-1)%s]:($d.subVectors(i[0],i[1]).add(i[0]),l=$d);const u=i[o%s],f=i[(o+1)%s];if(this.closed||o+2<s?c=i[(o+2)%s]:($d.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=$d),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let d=Math.pow(l.distanceToSquared(u),h),p=Math.pow(u.distanceToSquared(f),h),_=Math.pow(f.distanceToSquared(c),h);p<1e-4&&(p=1),d<1e-4&&(d=p),_<1e-4&&(_=p),i1.initNonuniformCatmullRom(l.x,u.x,f.x,c.x,d,p,_),s1.initNonuniformCatmullRom(l.y,u.y,f.y,c.y,d,p,_),r1.initNonuniformCatmullRom(l.z,u.z,f.z,c.z,d,p,_)}else this.curveType==="catmullrom"&&(i1.initCatmullRom(l.x,u.x,f.x,c.x,this.tension),s1.initCatmullRom(l.y,u.y,f.y,c.y,this.tension),r1.initCatmullRom(l.z,u.z,f.z,c.z,this.tension));return n.set(i1.calc(a),s1.calc(a),r1.calc(a)),n};Ls.prototype.copy=function(t){Ct.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this};Ls.prototype.toJSON=function(){const t=Ct.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++){const i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t};Ls.prototype.fromJSON=function(t){Ct.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(new J().fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this};function k3(t,e,n,i,s){const r=(i-e)*.5,o=(s-n)*.5,a=t*t,l=t*a;return(2*n-2*i+r+o)*l+(-3*n+3*i-2*r-o)*a+r*t+n}function AK(t,e){const n=1-t;return n*n*e}function kK(t,e){return 2*(1-t)*t*e}function CK(t,e){return t*t*e}function Lf(t,e,n,i){return AK(t,e)+kK(t,n)+CK(t,i)}function LK(t,e){const n=1-t;return n*n*n*e}function PK(t,e){const n=1-t;return 3*n*n*t*e}function RK(t,e){return 3*(1-t)*t*t*e}function DK(t,e){return t*t*t*e}function Pf(t,e,n,i,s){return LK(t,e)+PK(t,n)+RK(t,i)+DK(t,s)}function Jr(t,e,n,i){Ct.call(this),this.type="CubicBezierCurve",this.v0=t||new We,this.v1=e||new We,this.v2=n||new We,this.v3=i||new We}Jr.prototype=Object.create(Ct.prototype);Jr.prototype.constructor=Jr;Jr.prototype.isCubicBezierCurve=!0;Jr.prototype.getPoint=function(t,e){const n=e||new We,i=this.v0,s=this.v1,r=this.v2,o=this.v3;return n.set(Pf(t,i.x,s.x,r.x,o.x),Pf(t,i.y,s.y,r.y,o.y)),n};Jr.prototype.copy=function(t){return Ct.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this};Jr.prototype.toJSON=function(){const t=Ct.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t};Jr.prototype.fromJSON=function(t){return Ct.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this};function Do(t,e,n,i){Ct.call(this),this.type="CubicBezierCurve3",this.v0=t||new J,this.v1=e||new J,this.v2=n||new J,this.v3=i||new J}Do.prototype=Object.create(Ct.prototype);Do.prototype.constructor=Do;Do.prototype.isCubicBezierCurve3=!0;Do.prototype.getPoint=function(t,e){const n=e||new J,i=this.v0,s=this.v1,r=this.v2,o=this.v3;return n.set(Pf(t,i.x,s.x,r.x,o.x),Pf(t,i.y,s.y,r.y,o.y),Pf(t,i.z,s.z,r.z,o.z)),n};Do.prototype.copy=function(t){return Ct.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this};Do.prototype.toJSON=function(){const t=Ct.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t};Do.prototype.fromJSON=function(t){return Ct.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this};function Ps(t,e){Ct.call(this),this.type="LineCurve",this.v1=t||new We,this.v2=e||new We}Ps.prototype=Object.create(Ct.prototype);Ps.prototype.constructor=Ps;Ps.prototype.isLineCurve=!0;Ps.prototype.getPoint=function(t,e){const n=e||new We;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n};Ps.prototype.getPointAt=function(t,e){return this.getPoint(t,e)};Ps.prototype.getTangent=function(t,e){const n=e||new We;return n.copy(this.v2).sub(this.v1).normalize(),n};Ps.prototype.copy=function(t){return Ct.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this};Ps.prototype.toJSON=function(){const t=Ct.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};Ps.prototype.fromJSON=function(t){return Ct.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function Kr(t,e){Ct.call(this),this.type="LineCurve3",this.v1=t||new J,this.v2=e||new J}Kr.prototype=Object.create(Ct.prototype);Kr.prototype.constructor=Kr;Kr.prototype.isLineCurve3=!0;Kr.prototype.getPoint=function(t,e){const n=e||new J;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n};Kr.prototype.getPointAt=function(t,e){return this.getPoint(t,e)};Kr.prototype.copy=function(t){return Ct.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this};Kr.prototype.toJSON=function(){const t=Ct.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};Kr.prototype.fromJSON=function(t){return Ct.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function $r(t,e,n){Ct.call(this),this.type="QuadraticBezierCurve",this.v0=t||new We,this.v1=e||new We,this.v2=n||new We}$r.prototype=Object.create(Ct.prototype);$r.prototype.constructor=$r;$r.prototype.isQuadraticBezierCurve=!0;$r.prototype.getPoint=function(t,e){const n=e||new We,i=this.v0,s=this.v1,r=this.v2;return n.set(Lf(t,i.x,s.x,r.x),Lf(t,i.y,s.y,r.y)),n};$r.prototype.copy=function(t){return Ct.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this};$r.prototype.toJSON=function(){const t=Ct.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};$r.prototype.fromJSON=function(t){return Ct.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function Oo(t,e,n){Ct.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new J,this.v1=e||new J,this.v2=n||new J}Oo.prototype=Object.create(Ct.prototype);Oo.prototype.constructor=Oo;Oo.prototype.isQuadraticBezierCurve3=!0;Oo.prototype.getPoint=function(t,e){const n=e||new J,i=this.v0,s=this.v1,r=this.v2;return n.set(Lf(t,i.x,s.x,r.x),Lf(t,i.y,s.y,r.y),Lf(t,i.z,s.z,r.z)),n};Oo.prototype.copy=function(t){return Ct.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this};Oo.prototype.toJSON=function(){const t=Ct.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};Oo.prototype.fromJSON=function(t){return Ct.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function Qr(t){Ct.call(this),this.type="SplineCurve",this.points=t||[]}Qr.prototype=Object.create(Ct.prototype);Qr.prototype.constructor=Qr;Qr.prototype.isSplineCurve=!0;Qr.prototype.getPoint=function(t,e){const n=e||new We,i=this.points,s=(i.length-1)*t,r=Math.floor(s),o=s-r,a=i[r===0?r:r-1],l=i[r],c=i[r>i.length-2?i.length-1:r+1],u=i[r>i.length-3?i.length-1:r+2];return n.set(k3(o,a.x,l.x,c.x,u.x),k3(o,a.y,l.y,c.y,u.y)),n};Qr.prototype.copy=function(t){Ct.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(i.clone())}return this};Qr.prototype.toJSON=function(){const t=Ct.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++){const i=this.points[e];t.points.push(i.toArray())}return t};Qr.prototype.fromJSON=function(t){Ct.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(new We().fromArray(i))}return this};var X_=Object.freeze({__proto__:null,ArcCurve:Eh,CatmullRomCurve3:Ls,CubicBezierCurve:Jr,CubicBezierCurve3:Do,EllipseCurve:Qs,LineCurve:Ps,LineCurve3:Kr,QuadraticBezierCurve:$r,QuadraticBezierCurve3:Oo,SplineCurve:Qr});function ma(){Ct.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}ma.prototype=Object.assign(Object.create(Ct.prototype),{constructor:ma,add:function(t){this.curves.push(t)},closePath:function(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ps(e,t))},getPoint:function(t){const e=t*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=e){const s=n[i]-e,r=this.curves[i],o=r.getLength(),a=o===0?0:1-s/o;return r.getPointAt(a)}i++}return null},getLength:function(){const t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){t===void 0&&(t=40);const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;const e=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const r=s[i],o=r&&r.isEllipseCurve?t*2:r&&(r.isLineCurve||r.isLineCurve3)?1:r&&r.isSplineCurve?t*r.points.length:t,a=r.getPoints(o);for(let l=0;l<a.length;l++){const c=a[l];n&&n.equals(c)||(e.push(c),n=c)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(t){Ct.prototype.copy.call(this,t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){const t=Ct.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){Ct.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const i=t.curves[e];this.curves.push(new X_[i.type]().fromJSON(i))}return this}});function Gr(t){ma.call(this),this.type="Path",this.currentPoint=new We,t&&this.setFromPoints(t)}Gr.prototype=Object.assign(Object.create(ma.prototype),{constructor:Gr,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){const n=new Ps(this.currentPoint.clone(),new We(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,i){const s=new $r(this.currentPoint.clone(),new We(t,e),new We(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this},bezierCurveTo:function(t,e,n,i,s,r){const o=new Jr(this.currentPoint.clone(),new We(t,e),new We(n,i),new We(s,r));return this.curves.push(o),this.currentPoint.set(s,r),this},splineThru:function(t){const e=[this.currentPoint.clone()].concat(t),n=new Qr(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,i,s,r){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,n,i,s,r),this},absarc:function(t,e,n,i,s,r){return this.absellipse(t,e,n,n,i,s,r),this},ellipse:function(t,e,n,i,s,r,o,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,s,r,o,a),this},absellipse:function(t,e,n,i,s,r,o,a){const l=new Qs(t,e,n,i,s,r,o,a);if(this.curves.length>0){const u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(t){return ma.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){const t=ma.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return ma.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}});function hl(t){Gr.call(this,t),this.uuid=Zt.generateUUID(),this.type="Shape",this.holes=[]}hl.prototype=Object.assign(Object.create(Gr.prototype),{constructor:hl,getPointsHoles:function(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Gr.prototype.copy.call(this,t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){const t=Gr.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){Gr.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const i=t.holes[e];this.holes.push(new Gr().fromJSON(i))}return this}});function Vn(t,e){kt.call(this),this.type="Light",this.color=new Mt(t),this.intensity=e!==void 0?e:1,this.receiveShadow=void 0}Vn.prototype=Object.assign(Object.create(kt.prototype),{constructor:Vn,isLight:!0,copy:function(t){return kt.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){const e=kt.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}});function Z_(t,e,n){Vn.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(kt.DefaultUp),this.updateMatrix(),this.groundColor=new Mt(e)}Z_.prototype=Object.assign(Object.create(Vn.prototype),{constructor:Z_,isHemisphereLight:!0,copy:function(t){return Vn.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}});function Io(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new We(512,512),this.map=null,this.mapPass=null,this.matrix=new nn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new zg,this._frameExtents=new We(1,1),this._viewportCount=1,this._viewports=[new On(0,0,1,1)]}Object.assign(Io.prototype,{_projScreenMatrix:new nn,_lightPositionWorld:new J,_lookTarget:new J,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){const e=this.camera,n=this.matrix,i=this._projScreenMatrix,s=this._lookTarget,r=this._lightPositionWorld;r.setFromMatrixPosition(t.matrixWorld),e.position.copy(r),s.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(s),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}});function J_(){Io.call(this,new bi(50,1,.5,500))}J_.prototype=Object.assign(Object.create(Io.prototype),{constructor:J_,isSpotLightShadow:!0,updateMatrices:function(t){const e=this.camera,n=Zt.RAD2DEG*2*t.angle,i=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||i!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=i,e.far=s,e.updateProjectionMatrix()),Io.prototype.updateMatrices.call(this,t)}});function K_(t,e,n,i,s,r){Vn.call(this,t,e),this.type="SpotLight",this.position.copy(kt.DefaultUp),this.updateMatrix(),this.target=new kt,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(o){this.intensity=o/Math.PI}}),this.distance=n!==void 0?n:0,this.angle=i!==void 0?i:Math.PI/3,this.penumbra=s!==void 0?s:0,this.decay=r!==void 0?r:1,this.shadow=new J_}K_.prototype=Object.assign(Object.create(Vn.prototype),{constructor:K_,isSpotLight:!0,copy:function(t){return Vn.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});function $_(){Io.call(this,new bi(90,1,.5,500)),this._frameExtents=new We(4,2),this._viewportCount=6,this._viewports=[new On(2,1,1,1),new On(0,1,1,1),new On(3,1,1,1),new On(1,1,1,1),new On(3,0,1,1),new On(1,0,1,1)],this._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],this._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)]}$_.prototype=Object.assign(Object.create(Io.prototype),{constructor:$_,isPointLightShadow:!0,updateMatrices:function(t,e){e===void 0&&(e=0);const n=this.camera,i=this.matrix,s=this._lightPositionWorld,r=this._lookTarget,o=this._projScreenMatrix;s.setFromMatrixPosition(t.matrixWorld),n.position.copy(s),r.copy(n.position),r.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(r),n.updateMatrixWorld(),i.makeTranslation(-s.x,-s.y,-s.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}});function Xm(t,e,n,i){Vn.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(s){this.intensity=s/(4*Math.PI)}}),this.distance=n!==void 0?n:0,this.decay=i!==void 0?i:1,this.shadow=new $_}Xm.prototype=Object.assign(Object.create(Vn.prototype),{constructor:Xm,isPointLight:!0,copy:function(t){return Vn.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}});function Th(t,e,n,i,s,r){Po.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t!==void 0?t:-1,this.right=e!==void 0?e:1,this.top=n!==void 0?n:1,this.bottom=i!==void 0?i:-1,this.near=s!==void 0?s:.1,this.far=r!==void 0?r:2e3,this.updateProjectionMatrix()}Th.prototype=Object.assign(Object.create(Po.prototype),{constructor:Th,isOrthographicCamera:!0,copy:function(t,e){return Po.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,s,r){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-t,r=n+t,o=i+e,a=i-e;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,r=s+l*this.view.width,o-=c*this.view.offsetY,a=o-c*this.view.height}this.projectionMatrix.makeOrthographic(s,r,o,a,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){const e=kt.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}});function Q_(){Io.call(this,new Th(-5,5,5,-5,.5,500))}Q_.prototype=Object.assign(Object.create(Io.prototype),{constructor:Q_,isDirectionalLightShadow:!0,updateMatrices:function(t){Io.prototype.updateMatrices.call(this,t)}});function ev(t,e){Vn.call(this,t,e),this.type="DirectionalLight",this.position.copy(kt.DefaultUp),this.updateMatrix(),this.target=new kt,this.shadow=new Q_}ev.prototype=Object.assign(Object.create(Vn.prototype),{constructor:ev,isDirectionalLight:!0,copy:function(t){return Vn.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});function tv(t,e){Vn.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}tv.prototype=Object.assign(Object.create(Vn.prototype),{constructor:tv,isAmbientLight:!0});function nv(t,e,n,i){Vn.call(this,t,e),this.type="RectAreaLight",this.width=n!==void 0?n:10,this.height=i!==void 0?i:10}nv.prototype=Object.assign(Object.create(Vn.prototype),{constructor:nv,isRectAreaLight:!0,copy:function(t){return Vn.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){const e=Vn.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});class OK{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new J)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,s=e.y,r=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*s),n.addScaledVector(o[2],.488603*r),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*s)),n.addScaledVector(o[5],1.092548*(s*r)),n.addScaledVector(o[6],.315392*(3*r*r-1)),n.addScaledVector(o[7],1.092548*(i*r)),n.addScaledVector(o[8],.546274*(i*i-s*s)),n}getIrradianceAt(e,n){const i=e.x,s=e.y,r=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*s),n.addScaledVector(o[2],2*.511664*r),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*s),n.addScaledVector(o[5],2*.429043*s*r),n.addScaledVector(o[6],.743125*r*r-.247708),n.addScaledVector(o[7],2*.429043*i*r),n.addScaledVector(o[8],.429043*(i*i-s*s)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n){n===void 0&&(n=0);const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,n+s*3);return this}toArray(e,n){e===void 0&&(e=[]),n===void 0&&(n=0);const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,n+s*3);return e}static getBasisAt(e,n){const i=e.x,s=e.y,r=e.z;n[0]=.282095,n[1]=.488603*s,n[2]=.488603*r,n[3]=.488603*i,n[4]=1.092548*i*s,n[5]=1.092548*s*r,n[6]=.315392*(3*r*r-1),n[7]=1.092548*i*r,n[8]=.546274*(i*i-s*s)}}function Er(t,e){Vn.call(this,void 0,e),this.type="LightProbe",this.sh=t!==void 0?t:new OK}Er.prototype=Object.assign(Object.create(Vn.prototype),{constructor:Er,isLightProbe:!0,copy:function(t){return Vn.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){const e=Vn.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}});function iv(t){Cn.call(this,t),this.textures={}}iv.prototype=Object.assign(Object.create(Cn.prototype),{constructor:iv,load:function(t,e,n,i){const s=this,r=new Zr(s.manager);r.setPath(s.path),r.setRequestHeader(s.requestHeader),r.load(t,function(o){try{e(s.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),s.manager.itemError(t)}},n,i)},parse:function(t){const e=this.textures;function n(s){return e[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),e[s]}const i=new MK[t.type];if(t.uuid!==void 0&&(i.uuid=t.uuid),t.name!==void 0&&(i.name=t.name),t.color!==void 0&&i.color.setHex(t.color),t.roughness!==void 0&&(i.roughness=t.roughness),t.metalness!==void 0&&(i.metalness=t.metalness),t.sheen!==void 0&&(i.sheen=new Mt().setHex(t.sheen)),t.emissive!==void 0&&i.emissive.setHex(t.emissive),t.specular!==void 0&&i.specular.setHex(t.specular),t.shininess!==void 0&&(i.shininess=t.shininess),t.clearcoat!==void 0&&(i.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=t.clearcoatRoughness),t.fog!==void 0&&(i.fog=t.fog),t.flatShading!==void 0&&(i.flatShading=t.flatShading),t.blending!==void 0&&(i.blending=t.blending),t.combine!==void 0&&(i.combine=t.combine),t.side!==void 0&&(i.side=t.side),t.opacity!==void 0&&(i.opacity=t.opacity),t.transparent!==void 0&&(i.transparent=t.transparent),t.alphaTest!==void 0&&(i.alphaTest=t.alphaTest),t.depthTest!==void 0&&(i.depthTest=t.depthTest),t.depthWrite!==void 0&&(i.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(i.colorWrite=t.colorWrite),t.stencilWrite!==void 0&&(i.stencilWrite=t.stencilWrite),t.stencilWriteMask!==void 0&&(i.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(i.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(i.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(i.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(i.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(i.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(i.stencilZPass=t.stencilZPass),t.wireframe!==void 0&&(i.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(i.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(i.rotation=t.rotation),t.linewidth!==1&&(i.linewidth=t.linewidth),t.dashSize!==void 0&&(i.dashSize=t.dashSize),t.gapSize!==void 0&&(i.gapSize=t.gapSize),t.scale!==void 0&&(i.scale=t.scale),t.polygonOffset!==void 0&&(i.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=t.polygonOffsetUnits),t.skinning!==void 0&&(i.skinning=t.skinning),t.morphTargets!==void 0&&(i.morphTargets=t.morphTargets),t.morphNormals!==void 0&&(i.morphNormals=t.morphNormals),t.dithering!==void 0&&(i.dithering=t.dithering),t.vertexTangents!==void 0&&(i.vertexTangents=t.vertexTangents),t.visible!==void 0&&(i.visible=t.visible),t.toneMapped!==void 0&&(i.toneMapped=t.toneMapped),t.userData!==void 0&&(i.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const s in t.uniforms){const r=t.uniforms[s];switch(i.uniforms[s]={},r.type){case"t":i.uniforms[s].value=n(r.value);break;case"c":i.uniforms[s].value=new Mt().setHex(r.value);break;case"v2":i.uniforms[s].value=new We().fromArray(r.value);break;case"v3":i.uniforms[s].value=new J().fromArray(r.value);break;case"v4":i.uniforms[s].value=new On().fromArray(r.value);break;case"m3":i.uniforms[s].value=new fs().fromArray(r.value);break;case"m4":i.uniforms[s].value=new nn().fromArray(r.value);break;default:i.uniforms[s].value=r.value}}if(t.defines!==void 0&&(i.defines=t.defines),t.vertexShader!==void 0&&(i.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(i.fragmentShader=t.fragmentShader),t.extensions!==void 0)for(const s in t.extensions)i.extensions[s]=t.extensions[s];if(t.shading!==void 0&&(i.flatShading=t.shading===1),t.size!==void 0&&(i.size=t.size),t.sizeAttenuation!==void 0&&(i.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(i.map=n(t.map)),t.matcap!==void 0&&(i.matcap=n(t.matcap)),t.alphaMap!==void 0&&(i.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(i.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(i.bumpScale=t.bumpScale),t.normalMap!==void 0&&(i.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(i.normalMapType=t.normalMapType),t.normalScale!==void 0){let s=t.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new We().fromArray(s)}return t.displacementMap!==void 0&&(i.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(i.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(i.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(i.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(i.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(i.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(i.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(i.specularMap=n(t.specularMap)),t.envMap!==void 0&&(i.envMap=n(t.envMap)),t.envMapIntensity!==void 0&&(i.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(i.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(i.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(i.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(i.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(i.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(i.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(i.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(i.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new We().fromArray(t.clearcoatNormalScale)),t.transmission!==void 0&&(i.transmission=t.transmission),t.transmissionMap!==void 0&&(i.transmissionMap=n(t.transmissionMap)),i},setTextures:function(t){return this.textures=t,this}});const dC={decodeText:function(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}},extractUrlBase:function(t){const e=t.lastIndexOf("/");return e===-1?"./":t.substr(0,e+1)}};function Zm(){Qt.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}Zm.prototype=Object.assign(Object.create(Qt.prototype),{constructor:Zm,isInstancedBufferGeometry:!0,copy:function(t){return Qt.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const t=Qt.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}});function sv(t,e,n,i){typeof n=="number"&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),zt.call(this,t,e,n),this.meshPerAttribute=i||1}sv.prototype=Object.assign(Object.create(zt.prototype),{constructor:sv,isInstancedBufferAttribute:!0,copy:function(t){return zt.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){const t=zt.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}});function rv(t){Cn.call(this,t)}rv.prototype=Object.assign(Object.create(Cn.prototype),{constructor:rv,load:function(t,e,n,i){const s=this,r=new Zr(s.manager);r.setPath(s.path),r.setRequestHeader(s.requestHeader),r.load(t,function(o){try{e(s.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),s.manager.itemError(t)}},n,i)},parse:function(t){const e={},n={};function i(h,d){if(e[d]!==void 0)return e[d];const _=h.interleavedBuffers[d],m=s(h,_.buffer),v=new Qd[_.type](m),g=new js(v,_.stride);return g.uuid=_.uuid,e[d]=g,g}function s(h,d){if(n[d]!==void 0)return n[d];const _=h.arrayBuffers[d],m=new Uint32Array(_).buffer;return n[d]=m,m}const r=t.isInstancedBufferGeometry?new Zm:new Qt,o=t.data.index;if(o!==void 0){const h=new Qd[o.type](o.array);r.setIndex(new zt(h,1))}const a=t.data.attributes;for(const h in a){const d=a[h];let p;if(d.isInterleavedBufferAttribute){const _=i(t.data,d.data);p=new El(_,d.itemSize,d.offset,d.normalized)}else{const _=new Qd[d.type](d.array),m=d.isInstancedBufferAttribute?sv:zt;p=new m(_,d.itemSize,d.normalized)}d.name!==void 0&&(p.name=d.name),r.setAttribute(h,p)}const l=t.data.morphAttributes;if(l)for(const h in l){const d=l[h],p=[];for(let _=0,m=d.length;_<m;_++){const v=d[_];let g;if(v.isInterleavedBufferAttribute){const b=i(t.data,v.data);g=new El(b,v.itemSize,v.offset,v.normalized)}else{const b=new Qd[v.type](v.array);g=new zt(b,v.itemSize,v.normalized)}v.name!==void 0&&(g.name=v.name),p.push(g)}r.morphAttributes[h]=p}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const u=t.data.groups||t.data.drawcalls||t.data.offsets;if(u!==void 0)for(let h=0,d=u.length;h!==d;++h){const p=u[h];r.addGroup(p.start,p.count,p.materialIndex)}const f=t.data.boundingSphere;if(f!==void 0){const h=new J;f.center!==void 0&&h.fromArray(f.center),r.boundingSphere=new Ba(h,f.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}});const Qd={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ov(t){Cn.call(this,t)}ov.prototype=Object.assign(Object.create(Cn.prototype),{constructor:ov,load:function(t,e,n,i){const s=this,r=this.path===""?dC.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||r;const o=new Zr(s.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.load(t,function(a){let l=null;try{l=JSON.parse(a)}catch(u){i!==void 0&&i(u),console.error("THREE:ObjectLoader: Can't parse "+t+".",u.message);return}const c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+t);return}s.parse(l,e)},n,i)},parse:function(t,e){const n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),s=this.parseImages(t.images,function(){e!==void 0&&e(a)}),r=this.parseTextures(t.textures,s),o=this.parseMaterials(t.materials,r),a=this.parseObject(t.object,i,o);return t.animations&&(a.animations=this.parseAnimations(t.animations)),(t.images===void 0||t.images.length===0)&&e!==void 0&&e(a),a},parseShape:function(t){const e={};if(t!==void 0)for(let n=0,i=t.length;n<i;n++){const s=new hl().fromJSON(t[n]);e[s.uuid]=s}return e},parseGeometries:function(t,e){const n={};let i;if(t!==void 0){const s=new rv;for(let r=0,o=t.length;r<o;r++){let a;const l=t[r];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Zi[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Zi[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Zi[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Zi[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Zi[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Zi[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Zi[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Zi[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Zi[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Zi[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Zi[l.type](new X_[l.path.type]().fromJSON(l.path),l.tubularSegments,l.radius,l.radialSegments,l.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Zi[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Zi[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":i=[];for(let u=0,f=l.shapes.length;u<f;u++){const h=e[l.shapes[u]];i.push(h)}a=new Zi[l.type](i,l.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":i=[];for(let u=0,f=l.shapes.length;u<f;u++){const h=e[l.shapes[u]];i.push(h)}const c=l.options.extrudePath;c!==void 0&&(l.options.extrudePath=new X_[c.type]().fromJSON(c)),a=new Zi[l.type](i,l.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=s.parse(l);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),n[l.uuid]=a}}return n},parseMaterials:function(t,e){const n={},i={};if(t!==void 0){const s=new iv;s.setTextures(e);for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a.type==="MultiMaterial"){const l=[];for(let c=0;c<a.materials.length;c++){const u=a.materials[c];n[u.uuid]===void 0&&(n[u.uuid]=s.parse(u)),l.push(n[u.uuid])}i[a.uuid]=l}else n[a.uuid]===void 0&&(n[a.uuid]=s.parse(a)),i[a.uuid]=n[a.uuid]}}return i},parseAnimations:function(t){const e=[];for(let n=0;n<t.length;n++){const i=t[n],s=_r.parse(i);i.uuid!==void 0&&(s.uuid=i.uuid),e.push(s)}return e},parseImages:function(t,e){const n=this,i={};let s;function r(o){return n.manager.itemStart(o),s.load(o,function(){n.manager.itemEnd(o)},void 0,function(){n.manager.itemError(o),n.manager.itemEnd(o)})}if(t!==void 0&&t.length>0){const o=new hC(e);s=new Sh(o),s.setCrossOrigin(this.crossOrigin);for(let a=0,l=t.length;a<l;a++){const c=t[a],u=c.url;if(Array.isArray(u)){i[c.uuid]=[];for(let f=0,h=u.length;f<h;f++){const d=u[f],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;i[c.uuid].push(r(p))}}else{const f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.resourcePath+c.url;i[c.uuid]=r(f)}}}return i},parseTextures:function(t,e){function n(s,r){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),r[s])}const i={};if(t!==void 0)for(let s=0,r=t.length;s<r;s++){const o=t[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),e[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);let a;Array.isArray(e[o.image])?a=new Aa(e[o.image]):a=new In(e[o.image]),a.needsUpdate=!0,a.uuid=o.uuid,o.name!==void 0&&(a.name=o.name),o.mapping!==void 0&&(a.mapping=n(o.mapping,IK)),o.offset!==void 0&&a.offset.fromArray(o.offset),o.repeat!==void 0&&a.repeat.fromArray(o.repeat),o.center!==void 0&&a.center.fromArray(o.center),o.rotation!==void 0&&(a.rotation=o.rotation),o.wrap!==void 0&&(a.wrapS=n(o.wrap[0],C3),a.wrapT=n(o.wrap[1],C3)),o.format!==void 0&&(a.format=o.format),o.type!==void 0&&(a.type=o.type),o.encoding!==void 0&&(a.encoding=o.encoding),o.minFilter!==void 0&&(a.minFilter=n(o.minFilter,L3)),o.magFilter!==void 0&&(a.magFilter=n(o.magFilter,L3)),o.anisotropy!==void 0&&(a.anisotropy=o.anisotropy),o.flipY!==void 0&&(a.flipY=o.flipY),o.premultiplyAlpha!==void 0&&(a.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(a.unpackAlignment=o.unpackAlignment),i[o.uuid]=a}return i},parseObject:function(t,e,n){let i;function s(l){return e[l]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",l),e[l]}function r(l){if(l!==void 0){if(Array.isArray(l)){const c=[];for(let u=0,f=l.length;u<f;u++){const h=l[u];n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),c.push(n[h])}return c}return n[l]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",l),n[l]}}let o,a;switch(t.type){case"Scene":i=new Ub,t.background!==void 0&&Number.isInteger(t.background)&&(i.background=new Mt(t.background)),t.fog!==void 0&&(t.fog.type==="Fog"?i.fog=new zb(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(i.fog=new Fb(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new bi(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(i.focus=t.focus),t.zoom!==void 0&&(i.zoom=t.zoom),t.filmGauge!==void 0&&(i.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(i.filmOffset=t.filmOffset),t.view!==void 0&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new Th(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(i.zoom=t.zoom),t.view!==void 0&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new tv(t.color,t.intensity);break;case"DirectionalLight":i=new ev(t.color,t.intensity);break;case"PointLight":i=new Xm(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new nv(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new K_(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new Z_(t.color,t.groundColor,t.intensity);break;case"LightProbe":i=new Er().fromJSON(t);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":o=s(t.geometry),a=r(t.material),i=new xi(o,a);break;case"InstancedMesh":o=s(t.geometry),a=r(t.material);const l=t.count,c=t.instanceMatrix;i=new O_(o,a,l),i.instanceMatrix=new zt(new Float32Array(c.array),16);break;case"LOD":i=new Vm;break;case"Line":i=new Al(s(t.geometry),r(t.material),t.mode);break;case"LineLoop":i=new I_(s(t.geometry),r(t.material));break;case"LineSegments":i=new mh(s(t.geometry),r(t.material));break;case"PointCloud":case"Points":i=new B_(s(t.geometry),r(t.material));break;case"Sprite":i=new P_(r(t.material));break;case"Group":i=new sl;break;default:i=new kt}if(i.uuid=t.uuid,t.name!==void 0&&(i.name=t.name),t.matrix!==void 0?(i.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(t.position!==void 0&&i.position.fromArray(t.position),t.rotation!==void 0&&i.rotation.fromArray(t.rotation),t.quaternion!==void 0&&i.quaternion.fromArray(t.quaternion),t.scale!==void 0&&i.scale.fromArray(t.scale)),t.castShadow!==void 0&&(i.castShadow=t.castShadow),t.receiveShadow!==void 0&&(i.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.bias!==void 0&&(i.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(i.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(i.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&i.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(i.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(i.visible=t.visible),t.frustumCulled!==void 0&&(i.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(i.renderOrder=t.renderOrder),t.userData!==void 0&&(i.userData=t.userData),t.layers!==void 0&&(i.layers.mask=t.layers),t.children!==void 0){const l=t.children;for(let c=0;c<l.length;c++)i.add(this.parseObject(l[c],e,n))}if(t.type==="LOD"){t.autoUpdate!==void 0&&(i.autoUpdate=t.autoUpdate);const l=t.levels;for(let c=0;c<l.length;c++){const u=l[c],f=i.getObjectByProperty("uuid",u.object);f!==void 0&&i.addLevel(f,u.distance)}}return i}});const IK={UVMapping:Ib,CubeReflectionMapping:Dg,CubeRefractionMapping:Og,EquirectangularReflectionMapping:b_,EquirectangularRefractionMapping:y_,CubeUVReflectionMapping:Ig,CubeUVRefractionMapping:Ng},C3={RepeatWrapping:Nm,ClampToEdgeWrapping:us,MirroredRepeatWrapping:Bm},L3={NearestFilter:Fi,NearestMipmapNearestFilter:w_,NearestMipmapLinearFilter:x_,LinearFilter:Ii,LinearMipmapNearestFilter:Ak,LinearMipmapLinearFilter:Hh};function P3(t){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Cn.call(this,t),this.options={premultiplyAlpha:"none"}}P3.prototype=Object.assign(Object.create(Cn.prototype),{constructor:P3,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,r=_u.get(t);if(r!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(r),s.manager.itemEnd(t)},0),r;fetch(t).then(function(o){return o.blob()}).then(function(o){return createImageBitmap(o,s.options)}).then(function(o){_u.add(t,o),e&&e(o),s.manager.itemEnd(t)}).catch(function(o){i&&i(o),s.manager.itemError(t),s.manager.itemEnd(t)}),s.manager.itemStart(t)}});function pC(){this.type="ShapePath",this.color=new Mt,this.subPaths=[],this.currentPath=null}Object.assign(pC.prototype,{moveTo:function(t,e){return this.currentPath=new Gr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this},bezierCurveTo:function(t,e,n,i,s,r){return this.currentPath.bezierCurveTo(t,e,n,i,s,r),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(v){const g=[];for(let b=0,y=v.length;b<y;b++){const w=v[b],x=new hl;x.curves=w.curves,g.push(x)}return g}function i(v,g){const b=g.length;let y=!1;for(let w=b-1,x=0;x<b;w=x++){let S=g[w],T=g[x],A=T.x-S.x,C=T.y-S.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(S=g[x],A=-A,T=g[w],C=-C),v.y<S.y||v.y>T.y)continue;if(v.y===S.y){if(v.x===S.x)return!0}else{const k=C*(v.x-S.x)-A*(v.y-S.y);if(k===0)return!0;if(k<0)continue;y=!y}}else{if(v.y!==S.y)continue;if(T.x<=v.x&&v.x<=S.x||S.x<=v.x&&v.x<=T.x)return!0}}return y}const s=ba.isClockWise,r=this.subPaths;if(r.length===0)return[];if(e===!0)return n(r);let o,a,l;const c=[];if(r.length===1)return a=r[0],l=new hl,l.curves=a.curves,c.push(l),c;let u=!s(r[0].getPoints());u=t?!u:u;const f=[],h=[];let d=[],p=0,_;h[p]=void 0,d[p]=[];for(let v=0,g=r.length;v<g;v++)a=r[v],_=a.getPoints(),o=s(_),o=t?!o:o,o?(!u&&h[p]&&p++,h[p]={s:new hl,p:_},h[p].s.curves=a.curves,u&&p++,d[p]=[]):d[p].push({h:a,p:_[0]});if(!h[0])return n(r);if(h.length>1){let v=!1;const g=[];for(let b=0,y=h.length;b<y;b++)f[b]=[];for(let b=0,y=h.length;b<y;b++){const w=d[b];for(let x=0;x<w.length;x++){const S=w[x];let T=!0;for(let A=0;A<h.length;A++)i(S.p,h[A].p)&&(b!==A&&g.push({froms:b,tos:A,hole:x}),T?(T=!1,f[A].push(S)):v=!0);T&&f[b].push(S)}}g.length>0&&(v||(d=f))}let m;for(let v=0,g=h.length;v<g;v++){l=h[v].s,c.push(l),m=d[v];for(let b=0,y=m.length;b<y;b++)l.holes.push(m[b].h)}return c}});function mC(t){this.type="Font",this.data=t}Object.assign(mC.prototype,{isFont:!0,generateShapes:function(t,e){e===void 0&&(e=100);const n=[],i=NK(t,e,this.data);for(let s=0,r=i.length;s<r;s++)Array.prototype.push.apply(n,i[s].toShapes());return n}});function NK(t,e,n){const i=Array.from?Array.from(t):String(t).split(""),s=e/n.resolution,r=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*s,o=[];let a=0,l=0;for(let c=0;c<i.length;c++){const u=i[c];if(u===`
`)a=0,l-=r;else{const f=BK(u,s,a,l,n);a+=f.offsetX,o.push(f.path)}}return o}function BK(t,e,n,i,s){const r=s.glyphs[t]||s.glyphs["?"];if(!r){console.error('THREE.Font: character "'+t+'" does not exists in font family '+s.familyName+".");return}const o=new pC;let a,l,c,u,f,h,d,p;if(r.o){const _=r._cachedOutline||(r._cachedOutline=r.o.split(" "));for(let m=0,v=_.length;m<v;)switch(_[m++]){case"m":a=_[m++]*e+n,l=_[m++]*e+i,o.moveTo(a,l);break;case"l":a=_[m++]*e+n,l=_[m++]*e+i,o.lineTo(a,l);break;case"q":c=_[m++]*e+n,u=_[m++]*e+i,f=_[m++]*e+n,h=_[m++]*e+i,o.quadraticCurveTo(f,h,c,u);break;case"b":c=_[m++]*e+n,u=_[m++]*e+i,f=_[m++]*e+n,h=_[m++]*e+i,d=_[m++]*e+n,p=_[m++]*e+i,o.bezierCurveTo(f,h,d,p,c,u);break}}return{offsetX:r.ha*e,path:o}}function R3(t){Cn.call(this,t)}R3.prototype=Object.assign(Object.create(Cn.prototype),{constructor:R3,load:function(t,e,n,i){const s=this,r=new Zr(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.load(t,function(o){let a;try{a=JSON.parse(o)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),a=JSON.parse(o.substring(65,o.length-2))}const l=s.parse(a);e&&e(l)},n,i)},parse:function(t){return new mC(t)}});let ep;const FK={getContext:function(){return ep===void 0&&(ep=new(window.AudioContext||window.webkitAudioContext)),ep},setContext:function(t){ep=t}};function D3(t){Cn.call(this,t)}D3.prototype=Object.assign(Object.create(Cn.prototype),{constructor:D3,load:function(t,e,n,i){const s=this,r=new Zr(s.manager);r.setResponseType("arraybuffer"),r.setPath(s.path),r.setRequestHeader(s.requestHeader),r.load(t,function(o){try{const a=o.slice(0);FK.getContext().decodeAudioData(a,function(c){e(c)})}catch(a){i?i(a):console.error(a),s.manager.itemError(t)}},n,i)}});function O3(t,e,n){Er.call(this,void 0,n);const i=new Mt().set(t),s=new Mt().set(e),r=new J(i.r,i.g,i.b),o=new J(s.r,s.g,s.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(r).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(r).sub(o).multiplyScalar(l)}O3.prototype=Object.assign(Object.create(Er.prototype),{constructor:O3,isHemisphereLightProbe:!0,copy:function(t){return Er.prototype.copy.call(this,t),this},toJSON:function(t){return Er.prototype.toJSON.call(this,t)}});function I3(t,e){Er.call(this,void 0,e);const n=new Mt().set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}I3.prototype=Object.assign(Object.create(Er.prototype),{constructor:I3,isAmbientLightProbe:!0,copy:function(t){return Er.prototype.copy.call(this,t),this},toJSON:function(t){return Er.prototype.toJSON.call(this,t)}});const N3=new nn,B3=new nn;function zK(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new bi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new bi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(zK.prototype,{update:function(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;const i=t.projectionMatrix.clone(),s=e.eyeSep/2,r=s*e.near/e.focus,o=e.near*Math.tan(Zt.DEG2RAD*e.fov*.5)/e.zoom;let a,l;B3.elements[12]=-s,N3.elements[12]=s,a=-o*e.aspect+r,l=o*e.aspect+r,i.elements[0]=2*e.near/(l-a),i.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(i),a=-o*e.aspect-r,l=o*e.aspect-r,i.elements[0]=2*e.near/(l-a),i.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(B3),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(N3)}});new J;new Hi;new J;new J;new J;new Hi;new J;new J;function gC(t,e,n){this.binding=t,this.valueSize=n;let i,s,r;switch(e){case"quaternion":i=this._slerp,s=this._slerpAdditive,r=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,r=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,r=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=r,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(gC.prototype,{accumulate:function(t,e){const n=this.buffer,i=this.valueSize,s=t*i+i;let r=this.cumulativeWeight;if(r===0){for(let o=0;o!==i;++o)n[s+o]=n[o];r=e}else{r+=e;const o=e/r;this._mixBufferRegion(n,s,0,o,i)}this.cumulativeWeight=r},accumulateAdditive:function(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){const e=this.valueSize,n=this.buffer,i=t*e+e,s=this.cumulativeWeight,r=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const a=e*this._origIndex;this._mixBufferRegion(n,i,a,1-s,e)}r>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let a=e,l=e+e;a!==l;++a)if(n[a]!==n[a+e]){o.setValue(n,i);break}},saveOriginalState:function(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let s=n,r=i;s!==r;++s)e[s]=e[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,i,s){if(i>=.5)for(let r=0;r!==s;++r)t[e+r]=t[n+r]},_slerp:function(t,e,n,i){Hi.slerpFlat(t,e,t,e,t,n,i)},_slerpAdditive:function(t,e,n,i,s){const r=this._workIndex*s;Hi.multiplyQuaternionsFlat(t,r,t,e,t,n),Hi.slerpFlat(t,e,t,e,t,r,i)},_lerp:function(t,e,n,i,s){const r=1-i;for(let o=0;o!==s;++o){const a=e+o;t[a]=t[a]*r+t[n+o]*i}},_lerpAdditive:function(t,e,n,i,s){for(let r=0;r!==s;++r){const o=e+r;t[o]=t[o]+t[n+r]*i}}});const Gb="\\[\\]\\.:\\/",UK=new RegExp("["+Gb+"]","g"),Wb="[^"+Gb+"]",HK="[^"+Gb.replace("\\.","")+"]",VK=/((?:WC+[\/:])*)/.source.replace("WC",Wb),GK=/(WCOD+)?/.source.replace("WCOD",HK),WK=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Wb),jK=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Wb),YK=new RegExp("^"+VK+GK+WK+jK+"$"),qK=["material","materials","bones"];function _C(t,e,n){const i=n||ns.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}Object.assign(_C.prototype,{getValue:function(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(t,e)},setValue:function(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(t,e)},bind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}});function ns(t,e,n){this.path=e,this.parsedPath=n||ns.parseTrackName(e),this.node=ns.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}Object.assign(ns,{Composite:_C,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new ns.Composite(t,e,n):new ns(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(UK,"")},parseTrackName:function(t){const e=YK.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);qK.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(s){for(let r=0;r<s.length;r++){const o=s[r];if(o.name===e||o.uuid===e)return o;const a=n(o.children);if(a)return a}return null},i=n(t.children);if(i)return i}return null}});Object.assign(ns.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,n){e[n]=this.node[this.propertyName]},function(e,n){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)e[n++]=i[s]},function(e,n){e[n]=this.resolvedProperty[this.propertyIndex]},function(e,n){this.resolvedProperty.toArray(e,n)}],SetterByBindingTypeAndVersioning:[[function(e,n){this.targetObject[this.propertyName]=e[n]},function(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0},function(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,n){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[n++]},function(e,n){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[n++];this.targetObject.needsUpdate=!0},function(e,n){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,n){this.resolvedProperty[this.propertyIndex]=e[n]},function(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0},function(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,n){this.resolvedProperty.fromArray(e,n)},function(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0},function(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,n){this.bind(),this.getValue(e,n)},setValue:function(e,n){this.bind(),this.setValue(e,n)},bind:function(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let s=e.propertyIndex;if(t||(t=ns.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let l=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let c=0;c<t.length;c++)if(t[c].name===l){l=c;break}break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(l!==void 0){if(t[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[l]}}const r=t[i];if(r===void 0){const l=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",t);return}let o=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}a=this.BindingType.ArrayElement,this.resolvedProperty=r,this.propertyIndex=s}else r.fromArray!==void 0&&r.toArray!==void 0?(a=this.BindingType.HasFromToArray,this.resolvedProperty=r):Array.isArray(r)?(a=this.BindingType.EntireArray,this.resolvedProperty=r):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(ns.prototype,{_getValue_unbound:ns.prototype.getValue,_setValue_unbound:ns.prototype.setValue});function XK(){this.uuid=Zt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Object.assign(XK.prototype,{isAnimationObjectGroup:!0,add:function(){const t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,r=s.length;let o,a=t.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const f=arguments[c],h=f.uuid;let d=e[h];if(d===void 0){d=a++,e[h]=d,t.push(f);for(let p=0,_=r;p!==_;++p)s[p].push(new ns(f,n[p],i[p]))}else if(d<l){o=t[d];const p=--l,_=t[p];e[_.uuid]=d,t[d]=_,e[h]=p,t[p]=f;for(let m=0,v=r;m!==v;++m){const g=s[m],b=g[p];let y=g[d];g[d]=b,y===void 0&&(y=new ns(f,n[m],i[m])),g[p]=y}}else t[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let r=0,o=arguments.length;r!==o;++r){const a=arguments[r],l=a.uuid,c=e[l];if(c!==void 0&&c>=s){const u=s++,f=t[u];e[f.uuid]=c,t[c]=f,e[l]=u,t[u]=a;for(let h=0,d=i;h!==d;++h){const p=n[h],_=p[u],m=p[c];p[c]=_,p[u]=m}}}this.nCachedObjects_=s},uncache:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,r=t.length;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=e[c];if(u!==void 0)if(delete e[c],u<s){const f=--s,h=t[f],d=--r,p=t[d];e[h.uuid]=u,t[u]=h,e[p.uuid]=f,t[f]=p,t.pop();for(let _=0,m=i;_!==m;++_){const v=n[_],g=v[f],b=v[d];v[u]=g,v[f]=b,v.pop()}}else{const f=--r,h=t[f];e[h.uuid]=u,t[u]=h,t.pop();for(let d=0,p=i;d!==p;++d){const _=n[d];_[u]=_[f],_.pop()}}}this.nCachedObjects_=s},subscribe_:function(t,e){const n=this._bindingsIndicesByPath;let i=n[t];const s=this._bindings;if(i!==void 0)return s[i];const r=this._paths,o=this._parsedPaths,a=this._objects,l=a.length,c=this.nCachedObjects_,u=new Array(l);i=s.length,n[t]=i,r.push(t),o.push(e),s.push(u);for(let f=c,h=a.length;f!==h;++f){const d=a[f];u[f]=new ns(d,t,e)}return u},unsubscribe_:function(t){const e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){const i=this._paths,s=this._parsedPaths,r=this._bindings,o=r.length-1,a=r[o],l=t[o];e[l]=n,r[n]=a,r.pop(),s[n]=s[o],s.pop(),i[n]=i[o],i.pop()}}});class ZK{constructor(e,n,i,s){this._mixer=e,this._clip=n,this._localRoot=i||null,this.blendMode=s||n.blendMode;const r=n.tracks,o=r.length,a=new Array(o),l={endingStart:Ac,endingEnd:Ac};for(let c=0;c!==o;++c){const u=r[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=fY,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const s=this._clip.duration,r=e._clip.duration,o=r/s,a=s/r;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const s=this._mixer,r=s.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=s._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=r,l[1]=r+i,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const l=(e-r)*i;if(l<0||i===0)return;this._startTime=null,n=i*l}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case kk:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case Bb:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(s,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];n*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const s=i.evaluate(e)[0];n*=s,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let s=this.time+e,r=this._loopCount;const o=i===hY;if(e===0)return r===-1?s:o&&(r&1)===1?n-s:s;if(i===uY){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=n)s=n;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),s>=n||s<0){const a=Math.floor(s/n);s-=n*a,r+=Math.abs(a);const l=this.repetitions-r;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?n:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=s;if(o&&(r&1)===1)return n-s}return s}_setEndings(e,n,i){const s=this._interpolantSettings;i?(s.endingStart=kc,s.endingEnd=kc):(e?s.endingStart=this.zeroSlopeAtStart?kc:Ac:s.endingStart=Hm,n?s.endingEnd=this.zeroSlopeAtEnd?kc:Ac:s.endingEnd=Hm)}_scheduleFading(e,n,i){const s=this._mixer,r=s.time;let o=this._weightInterpolant;o===null&&(o=s._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=r,l[0]=n,a[1]=r+e,l[1]=i,this}}function F3(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}F3.prototype=Object.assign(Object.create(io.prototype),{constructor:F3,_bindAction:function(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,s=i.length,r=t._propertyBindings,o=t._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let c=l[a];c===void 0&&(c={},l[a]=c);for(let u=0;u!==s;++u){const f=i[u],h=f.name;let d=c[h];if(d!==void 0)r[u]=d;else{if(d=r[u],d!==void 0){d._cacheIndex===null&&(++d.referenceCount,this._addInactiveBinding(d,a,h));continue}const p=e&&e._propertyBindings[u].binding.parsedPath;d=new gC(ns.create(n,h,p),f.ValueTypeName,f.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,a,h),r[u]=d}o[u].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,i=t._clip.uuid,s=this._actionsByClip[i];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,i,n)}const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const s=e[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const s=e[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){const i=this._actions,s=this._actionsByClip;let r=s[e];if(r===void 0)r={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,s[e]=r;else{const o=r.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=i.length,i.push(t),r.actionByRoot[n]=t},_removeInactiveAction:function(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const s=t._clip.uuid,r=this._actionsByClip,o=r[s],a=o.knownActions,l=a[a.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),t._byClipCacheIndex=null;const u=o.actionByRoot,f=(t._localRoot||this._root).uuid;delete u[f],a.length===0&&delete r[s],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const s=e[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}},_lendAction:function(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s},_takeBackAction:function(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s},_addInactiveBinding:function(t,e,n){const i=this._bindingsByRootAndName,s=this._bindings;let r=i[e];r===void 0&&(r={},i[e]=r),r[n]=t,t._cacheIndex=s.length,s.push(t)},_removeInactiveBinding:function(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,s=n.path,r=this._bindingsByRootAndName,o=r[i],a=e[e.length-1],l=t._cacheIndex;a._cacheIndex=l,e[l]=a,e.pop(),delete o[s],Object.keys(o).length===0&&delete r[i]},_lendBinding:function(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s},_takeBackBinding:function(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s},_lendControlInterpolant:function(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new Ym(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,s=e[i];t.__cacheIndex=i,e[i]=t,s.__cacheIndex=n,e[n]=s},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){const i=e||this._root,s=i.uuid;let r=typeof t=="string"?_r.findByName(i,t):t;const o=r!==null?r.uuid:t,a=this._actionsByClip[o];let l=null;if(n===void 0&&(r!==null?n=r.blendMode:n=Bb),a!==void 0){const u=a.actionByRoot[s];if(u!==void 0&&u.blendMode===n)return u;l=a.knownActions[0],r===null&&(r=l._clip)}if(r===null)return null;const c=new ZK(this,r,e,n);return this._bindAction(c,l),this._addInactiveAction(c,o,s),c},existingAction:function(t,e){const n=e||this._root,i=n.uuid,s=typeof t=="string"?_r.findByName(n,t):t,r=s?s.uuid:t,o=this._actionsByClip[r];return o!==void 0&&o.actionByRoot[i]||null},stopAllAction:function(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this},update:function(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,s=Math.sign(t),r=this._accuIndex^=1;for(let l=0;l!==n;++l)e[l]._update(i,t,s,r);const o=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)o[l].apply(r);return this},setTime:function(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const r=s.knownActions;for(let o=0,a=r.length;o!==a;++o){const l=r[o];this._deactivateAction(l);const c=l._cacheIndex,u=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,e[c]=u,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(t){const e=t.uuid,n=this._actionsByClip;for(const r in n){const o=n[r].actionByRoot,a=o[e];a!==void 0&&(this._deactivateAction(a),this._removeInactiveAction(a))}const i=this._bindingsByRootAndName,s=i[e];if(s!==void 0)for(const r in s){const o=s[r];o.restoreOriginalState(),this._removeInactiveBinding(o)}},uncacheAction:function(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}});function z3(t,e,n){js.call(this,t,e),this.meshPerAttribute=n||1}z3.prototype=Object.assign(Object.create(js.prototype),{constructor:z3,isInstancedInterleavedBuffer:!0,copy:function(t){return js.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){const e=js.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){const e=js.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}});function vC(t,e,n,i,s){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}Object.defineProperty(vC.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});Object.assign(vC.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}});function jb(t,e,n,i){this.ray=new Gh(t,e),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new Lk,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function U3(t,e){return t.distance-e.distance}function av(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const s=t.children;for(let r=0,o=s.length;r<o;r++)av(s[r],e,n,!0)}}Object.assign(jb.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){const i=n||[];return av(t,this,i,e),i.sort(U3),i},intersectObjects:function(t,e,n){const i=n||[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let s=0,r=t.length;s<r;s++)av(t[s],this,i,e);return i.sort(U3),i}});const H3=new We;class JK{constructor(e,n){Object.defineProperty(this,"isBox2",{value:!0}),this.min=e!==void 0?e:new We(1/0,1/0),this.max=n!==void 0?n:new We(-1/0,-1/0)}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=H3.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new We),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new We),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),n=new We),n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),n=new We),n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return H3.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}new J;new J;function Jm(t){kt.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Jm.prototype=Object.create(kt.prototype);Jm.prototype.constructor=Jm;Jm.prototype.isImmediateRenderObject=!0;new J;const Zo=new J,tp=new nn,o1=new nn;class KK extends mh{constructor(e){const n=bC(e),i=new Qt,s=[],r=[],o=new Mt(0,0,1),a=new Mt(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}i.setAttribute("position",new St(s,3)),i.setAttribute("color",new St(r,3));const l=new $s({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,s=i.getAttribute("position");o1.getInverse(this.root.matrixWorld);for(let r=0,o=0;r<n.length;r++){const a=n[r];a.parent&&a.parent.isBone&&(tp.multiplyMatrices(o1,a.matrixWorld),Zo.setFromMatrixPosition(tp),s.setXYZ(o,Zo.x,Zo.y,Zo.z),tp.multiplyMatrices(o1,a.parent.matrixWorld),Zo.setFromMatrixPosition(tp),s.setXYZ(o+1,Zo.x,Zo.y,Zo.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function bC(t){const e=[];t&&t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,bC(t.children[n]));return e}new J;new Mt;new Mt;class $K extends mh{constructor(e,n,i,s){e=e||10,n=n||10,i=new Mt(i!==void 0?i:4473924),s=new Mt(s!==void 0?s:8947848);const r=n/2,o=e/n,a=e/2,l=[],c=[];for(let h=0,d=0,p=-a;h<=n;h++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const _=h===r?i:s;_.toArray(c,d),d+=3,_.toArray(c,d),d+=3,_.toArray(c,d),d+=3,_.toArray(c,d),d+=3}const u=new Qt;u.setAttribute("position",new St(l,3)),u.setAttribute("color",new St(c,3));const f=new $s({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}}new J;new J;new J;new J;new Po;new zo;new J;const Fp=4,zp=8,yC=[.125,.215,.35,.446,.526,.582],QK=zp-Fp+1+yC.length;new Th;e$();const Za=(1+Math.sqrt(5))/2,mc=1/Za;new J(1,1,1),new J(-1,1,1),new J(1,1,-1),new J(-1,1,-1),new J(0,Za,mc),new J(0,Za,-mc),new J(mc,0,Za),new J(-mc,0,Za),new J(Za,mc,0),new J(-Za,mc,0);function e$(){const t=[],e=[],n=[];let i=zp;for(let s=0;s<QK;s++){const r=Math.pow(2,i);e.push(r);let o=1/r;s>zp-Fp?o=yC[s-zp+Fp-1]:s==0&&(o=0),n.push(o);const a=1/(r-1),l=-a/2,c=1+a/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],f=6,h=6,d=3,p=2,_=1,m=new Float32Array(d*h*f),v=new Float32Array(p*h*f),g=new Float32Array(_*h*f);for(let y=0;y<f;y++){const w=y%3*2/3-1,x=y>2?0:-1,S=[w,x,0,w+2/3,x,0,w+2/3,x+1,0,w,x,0,w+2/3,x+1,0,w,x+1,0];m.set(S,d*h*y),v.set(u,p*h*y);const T=[y,y,y,y,y,y];g.set(T,_*h*y)}const b=new Qt;b.setAttribute("position",new zt(m,d)),b.setAttribute("uv",new zt(v,p)),b.setAttribute("faceIndex",new zt(g,_)),t.push(b),i>Fp&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}Ct.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Ct.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t};Object.assign(ma.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=new An;for(let n=0,i=t.length;n<i;n++){const s=t[n];e.vertices.push(new J(s.x,s.y,s.z||0))}return e}});Object.assign(Gr.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}});Object.create(Ls.prototype);Object.create(Ls.prototype);function wC(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ls.call(this,t),this.type="catmullrom"}wC.prototype=Object.create(Ls.prototype);Object.assign(wC.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});$K.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};KK.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Cn.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),dC.extractUrlBase(t)}});Cn.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Object.assign(ov.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}});Object.assign(JK.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}});Object.assign(zo.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}});Object.assign(Ba.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});zg.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)};Object.assign(Zt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Zt.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Zt.ceilPowerOfTwo(t)}});Object.assign(fs.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(nn.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new J().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,s,r){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,s,r)}});vo.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)};Hi.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)};Object.assign(Gh.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}});Object.assign(Qi.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}});Object.assign(Qi,{barycoordFromPoint:function(t,e,n,i,s){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Qi.getBarycoord(t,e,n,i,s)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Qi.getNormal(t,e,n,i)}});Object.assign(hl.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new tC(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new aC(this,t)}});Object.assign(We.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(J.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(On.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(An.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}});Object.assign(kt.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}});Object.defineProperties(kt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(xi.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(xi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),dY},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(Vm.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(D_.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});R_.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Ct.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}});bi.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(t)};Object.defineProperties(Vn.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}});Object.defineProperties(zt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===lh},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(lh)}}});Object.assign(zt.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?lh:Bg),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(Qt.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new zt(arguments[1],arguments[2]))):t==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e)},addDrawCall:function(t,e,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}});Object.defineProperties(Qt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(Zm.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}});Object.defineProperties(jb.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}});Object.defineProperties(js.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===lh},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}});Object.assign(js.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?lh:Bg),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(Vg.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.assign(Ub.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(Dt.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Mt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===Sk}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}});Object.defineProperties(Ll.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Cl.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}});Object.defineProperties(ps.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}});Object.assign(jh.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(jh.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=t===!0?Ck:Vh}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Vk.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Sr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}});hh.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};xl.crossOrigin=void 0;xl.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const s=new q_;s.setCrossOrigin(this.crossOrigin);const r=s.load(t,n,void 0,i);return e&&(r.mapping=e),r};xl.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const s=new Y_;s.setCrossOrigin(this.crossOrigin);const r=s.load(t,n,void 0,i);return e&&(r.mapping=e),r};xl.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};xl.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:GW}}));var Km=function(t,e){e===void 0&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var n=this,i={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=t,this.domElement=e,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:P0.ROTATE,MIDDLE:P0.ZOOM,RIGHT:P0.PAN},this.target=new J;var s=1e-6,r=new J,o=1,a=i.NONE,l=i.NONE,c=new J,u=new We,f=new We,h=new J,d=0,p=new We,_=new We,m=0,v=0,g=new We,b=new We;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var y={type:"change"},w={type:"start"},x={type:"end"};this.handleResize=function(){var X=n.domElement.getBoundingClientRect(),q=n.domElement.ownerDocument.documentElement;n.screen.left=X.left+window.pageXOffset-q.clientLeft,n.screen.top=X.top+window.pageYOffset-q.clientTop,n.screen.width=X.width,n.screen.height=X.height};var S=function(){var X=new We;return function(Y,$){return X.set((Y-n.screen.left)/n.screen.width,($-n.screen.top)/n.screen.height),X}}(),T=function(){var X=new We;return function(Y,$){return X.set((Y-n.screen.width*.5-n.screen.left)/(n.screen.width*.5),(n.screen.height+2*(n.screen.top-$))/n.screen.width),X}}();this.rotateCamera=function(){var X=new J,q=new Hi,Y=new J,$=new J,ze=new J,_e=new J,pe;return function(){_e.set(f.x-u.x,f.y-u.y,0),pe=_e.length(),pe?(c.copy(n.object.position).sub(n.target),Y.copy(c).normalize(),$.copy(n.object.up).normalize(),ze.crossVectors($,Y).normalize(),$.setLength(f.y-u.y),ze.setLength(f.x-u.x),_e.copy($.add(ze)),X.crossVectors(_e,c).normalize(),pe*=n.rotateSpeed,q.setFromAxisAngle(X,pe),c.applyQuaternion(q),n.object.up.applyQuaternion(q),h.copy(X),d=pe):!n.staticMoving&&d&&(d*=Math.sqrt(1-n.dynamicDampingFactor),c.copy(n.object.position).sub(n.target),q.setFromAxisAngle(h,d),c.applyQuaternion(q),n.object.up.applyQuaternion(q)),u.copy(f)}}(),this.zoomCamera=function(){var X;a===i.TOUCH_ZOOM_PAN?(X=m/v,m=v,n.object.isPerspectiveCamera?c.multiplyScalar(X):n.object.isOrthographicCamera?(n.object.zoom*=X,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(X=1+(_.y-p.y)*n.zoomSpeed,X!==1&&X>0&&(n.object.isPerspectiveCamera?c.multiplyScalar(X):n.object.isOrthographicCamera?(n.object.zoom/=X,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?p.copy(_):p.y+=(_.y-p.y)*this.dynamicDampingFactor)},this.panCamera=function(){var X=new We,q=new J,Y=new J;return function(){if(X.copy(b).sub(g),X.lengthSq()){if(n.object.isOrthographicCamera){var ze=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,_e=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;X.x*=ze,X.y*=_e}X.multiplyScalar(c.length()*n.panSpeed),Y.copy(c).cross(n.object.up).setLength(X.x),Y.add(q.copy(n.object.up).setLength(X.y)),n.object.position.add(Y),n.target.add(Y),n.staticMoving?g.copy(b):g.add(X.subVectors(b,g).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!n.noZoom||!n.noPan)&&(c.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,c.setLength(n.maxDistance)),p.copy(_)),c.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,c.setLength(n.minDistance)),p.copy(_)))},this.update=function(){c.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,c),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),r.distanceToSquared(n.object.position)>s&&(n.dispatchEvent(y),r.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(r.distanceToSquared(n.object.position)>s||o!==n.object.zoom)&&(n.dispatchEvent(y),r.copy(n.object.position),o=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){a=i.NONE,l=i.NONE,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),c.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(y),r.copy(n.object.position),o=n.object.zoom};function A(X){if(n.enabled!==!1)switch(X.pointerType){case"mouse":U(X);break}}function C(X){if(n.enabled!==!1)switch(X.pointerType){case"mouse":N(X);break}}function k(X){if(n.enabled!==!1)switch(X.pointerType){case"mouse":B(X);break}}function L(X){n.enabled!==!1&&(window.removeEventListener("keydown",L),l===i.NONE&&(X.keyCode===n.keys[i.ROTATE]&&!n.noRotate?l=i.ROTATE:X.keyCode===n.keys[i.ZOOM]&&!n.noZoom?l=i.ZOOM:X.keyCode===n.keys[i.PAN]&&!n.noPan&&(l=i.PAN)))}function F(){n.enabled!==!1&&(l=i.NONE,window.addEventListener("keydown",L,!1))}function U(X){if(X.preventDefault(),X.stopPropagation(),a===i.NONE)switch(X.button){case n.mouseButtons.LEFT:a=i.ROTATE;break;case n.mouseButtons.MIDDLE:a=i.ZOOM;break;case n.mouseButtons.RIGHT:a=i.PAN;break;default:a=i.NONE}var q=l!==i.NONE?l:a;q===i.ROTATE&&!n.noRotate?(f.copy(T(X.pageX,X.pageY)),u.copy(f)):q===i.ZOOM&&!n.noZoom?(p.copy(S(X.pageX,X.pageY)),_.copy(p)):q===i.PAN&&!n.noPan&&(g.copy(S(X.pageX,X.pageY)),b.copy(g)),n.domElement.ownerDocument.addEventListener("pointermove",C,!1),n.domElement.ownerDocument.addEventListener("pointerup",k,!1),n.dispatchEvent(w)}function N(X){if(n.enabled!==!1){X.preventDefault(),X.stopPropagation();var q=l!==i.NONE?l:a;q===i.ROTATE&&!n.noRotate?(u.copy(f),f.copy(T(X.pageX,X.pageY))):q===i.ZOOM&&!n.noZoom?_.copy(S(X.pageX,X.pageY)):q===i.PAN&&!n.noPan&&b.copy(S(X.pageX,X.pageY))}}function B(X){n.enabled!==!1&&(X.preventDefault(),X.stopPropagation(),a=i.NONE,n.domElement.ownerDocument.removeEventListener("pointermove",C),n.domElement.ownerDocument.removeEventListener("pointerup",k),n.dispatchEvent(x))}function W(X){if(n.enabled!==!1&&n.noZoom!==!0){switch(X.preventDefault(),X.stopPropagation(),X.deltaMode){case 2:p.y-=X.deltaY*.025;break;case 1:p.y-=X.deltaY*.01;break;default:p.y-=X.deltaY*25e-5;break}n.dispatchEvent(w),n.dispatchEvent(x)}}function ee(X){if(n.enabled!==!1){switch(X.preventDefault(),X.touches.length){case 1:a=i.TOUCH_ROTATE,f.copy(T(X.touches[0].pageX,X.touches[0].pageY)),u.copy(f);break;default:a=i.TOUCH_ZOOM_PAN;var q=X.touches[0].pageX-X.touches[1].pageX,Y=X.touches[0].pageY-X.touches[1].pageY;v=m=Math.sqrt(q*q+Y*Y);var $=(X.touches[0].pageX+X.touches[1].pageX)/2,ze=(X.touches[0].pageY+X.touches[1].pageY)/2;g.copy(S($,ze)),b.copy(g);break}n.dispatchEvent(w)}}function K(X){if(n.enabled!==!1)switch(X.preventDefault(),X.stopPropagation(),X.touches.length){case 1:u.copy(f),f.copy(T(X.touches[0].pageX,X.touches[0].pageY));break;default:var q=X.touches[0].pageX-X.touches[1].pageX,Y=X.touches[0].pageY-X.touches[1].pageY;v=Math.sqrt(q*q+Y*Y);var $=(X.touches[0].pageX+X.touches[1].pageX)/2,ze=(X.touches[0].pageY+X.touches[1].pageY)/2;b.copy(S($,ze));break}}function ge(X){if(n.enabled!==!1){switch(X.touches.length){case 0:a=i.NONE;break;case 1:a=i.TOUCH_ROTATE,f.copy(T(X.touches[0].pageX,X.touches[0].pageY)),u.copy(f);break}n.dispatchEvent(x)}}function se(X){n.enabled!==!1&&X.preventDefault()}this.dispose=function(){n.domElement.removeEventListener("contextmenu",se,!1),n.domElement.removeEventListener("pointerdown",A,!1),n.domElement.removeEventListener("wheel",W,!1),n.domElement.removeEventListener("touchstart",ee,!1),n.domElement.removeEventListener("touchend",ge,!1),n.domElement.removeEventListener("touchmove",K,!1),n.domElement.ownerDocument.removeEventListener("pointermove",C,!1),n.domElement.ownerDocument.removeEventListener("pointerup",k,!1),window.removeEventListener("keydown",L,!1),window.removeEventListener("keyup",F,!1)},this.domElement.addEventListener("contextmenu",se,!1),this.domElement.addEventListener("pointerdown",A,!1),this.domElement.addEventListener("wheel",W,!1),this.domElement.addEventListener("touchstart",ee,!1),this.domElement.addEventListener("touchend",ge,!1),this.domElement.addEventListener("touchmove",K,!1),this.domElement.ownerDocument.addEventListener("pointermove",C,!1),this.domElement.ownerDocument.addEventListener("pointerup",k,!1),window.addEventListener("keydown",L,!1),window.addEventListener("keyup",F,!1),this.handleResize(),this.update()};Km.prototype=Object.create(io.prototype);Km.prototype.constructor=Km;function t$(t,e=1){let n=t;sF(n.p,...n.p.roundParams);let i=new kt,s=n.pieces,r=[];for(let o=0,a=s.length;o<a;o+=1){let l=s[o].stickers,c=new kt;c.userData=s[o];for(let u=0,f=l.length;u<f;u+=1){let h=l[u].mul(e),d=n.getHexColor(h.color),p=new An,_;if(p.vertices.push(...h.points.map(v=>new J(v.x,v.y,v.z))),h instanceof su){_=new Xr({color:16777215,side:wl,vertexColors:!0});let v=h.faces;for(let g=0,b=v.length;g<b;g+=1){let y=new ch(v[g][0],v[g][1],v[g][2],null);y.color.setHex(d),p.faces.push(y)}p.colorsNeedUpdate=!0}else{_=new Xr({color:d,side:wl});for(let v=2,g=h.points.length;v<g;v+=1)p.faces.push(new ch(0,v-1,v))}let m=new xi(p,_);m.userData=l[u],c.add(m),r.push(m)}i.add(c)}return i.rotation.x=n.rotation.x,i.rotation.y=n.rotation.y,i.rotation.z=n.rotation.z,{group:i,meshes:r,nc:n}}const{window:V3}=KC;function n$(t){let e,n;return e=new eA({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p:Ve,i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function G3(t){let e,n,i,s,r;function o(l){t[12](l)}let a={type:"number",min:1,class:"bg-white bg-opacity-10 text-gray-400"};return t[1]!==void 0&&(a.value=t[1]),i=new oi({props:a}),wt.push(()=>Nt(i,"value",o)),{c(){e=D("span"),e.textContent="Order",n=z(),ce(i.$$.fragment)},m(l,c){I(l,e,c),I(l,n,c),ae(i,l,c),r=!0},p(l,c){const u={};!s&&c[0]&2&&(s=!0,u.value=l[1],It(()=>s=!1)),i.$set(u)},i(l){r||(P(i.$$.fragment,l),r=!0)},o(l){H(i.$$.fragment,l),r=!1},d(l){l&&O(e),l&&O(n),le(i,l)}}}function i$(t){let e;return{c(){e=ye("Cancel")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function s$(t){let e;return{c(){e=ye("Set puzzle")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function r$(t){let e,n,i,s,r,o,a,l,c,u,f,h,d;function p(v){t[11](v)}let _={items:t[4],label:c$,onChange:t[8],class:"text-gray-400 w-full max-w-[unset]"};t[0]!==void 0&&(_.value=t[0]),o=new ks({props:_}),wt.push(()=>Nt(o,"value",p));let m=t[2]&&G3(t);return u=new At({props:{$$slots:{default:[i$]},$$scope:{ctx:t}}}),u.$on("click",t[9]),h=new At({props:{class:"bg-green-700 hover:bg-green-600 text-gray-300",$$slots:{default:[s$]},$$scope:{ctx:t}}}),h.$on("click",t[13]),{c(){e=D("h1"),e.textContent="Puzzle settings",n=z(),i=D("div"),s=D("span"),s.textContent="Puzzle",r=z(),ce(o.$$.fragment),l=z(),m&&m.c(),c=z(),ce(u.$$.fragment),f=z(),ce(h.$$.fragment),M(e,"class","text-3xl text-gray-300 text-center m-4"),M(i,"class","grid grid-cols-2 gap-4 place-items-center text-gray-400")},m(v,g){I(v,e,g),I(v,n,g),I(v,i,g),E(i,s),E(i,r),ae(o,i,null),E(i,l),m&&m.m(i,null),E(i,c),ae(u,i,null),E(i,f),ae(h,i,null),d=!0},p(v,g){const b={};!a&&g[0]&1&&(a=!0,b.value=v[0],It(()=>a=!1)),o.$set(b),v[2]?m?(m.p(v,g),g[0]&4&&P(m,1)):(m=G3(v),m.c(),P(m,1),m.m(i,c)):m&&(at(),H(m,1,1,()=>{m=null}),lt());const y={};g[1]&262144&&(y.$$scope={dirty:g,ctx:v}),u.$set(y);const w={};g[1]&262144&&(w.$$scope={dirty:g,ctx:v}),h.$set(w)},i(v){d||(P(o.$$.fragment,v),P(m),P(u.$$.fragment,v),P(h.$$.fragment,v),d=!0)},o(v){H(o.$$.fragment,v),H(m),H(u.$$.fragment,v),H(h.$$.fragment,v),d=!1},d(v){v&&O(e),v&&O(n),v&&O(i),le(o),m&&m.d(),le(u),le(h)}}}function o$(t){let e,n,i,s,r,o,a,l,c,u;s=new Vi({props:{text:"Settings [S]",position:"left",class:"absolute right-4 text-gray-400 z-20 hover:text-gray-300 transition-all duration-100 cursor-pointer",$$slots:{default:[n$]},$$scope:{ctx:t}}}),s.$on("click",t[10]);function f(d){t[14](d)}let h={$$slots:{default:[r$]},$$scope:{ctx:t}};return t[3]!==void 0&&(h.show=t[3]),o=new Ma({props:h}),wt.push(()=>Nt(o,"show",f)),{c(){e=D("img"),i=z(),ce(s.$$.fragment),r=z(),ce(o.$$.fragment),gi(e.src,n=l$)||M(e,"src",n),M(e,"alt","")},m(d,p){I(d,e,p),I(d,i,p),ae(s,d,p),I(d,r,p),ae(o,d,p),l=!0,c||(u=[tt(V3,"resize",t[6]),tt(V3,"keydown",t[7])],c=!0)},p(d,p){const _={};p[1]&262144&&(_.$$scope={dirty:p,ctx:d}),s.$set(_);const m={};p[0]&7|p[1]&262144&&(m.$$scope={dirty:p,ctx:d}),!a&&p[0]&8&&(a=!0,m.show=d[3],It(()=>a=!1)),o.$set(m)},i(d){l||(P(s.$$.fragment,d),P(o.$$.fragment,d),l=!0)},o(d){H(s.$$.fragment,d),H(o.$$.fragment,d),l=!1},d(d){d&&O(e),d&&O(i),le(s,d),d&&O(r),le(o,d),c=!1,Jn(u)}}}const W3=200;let a$="",l$="";const c$=t=>t.name;function u$(t,e,n){let i,s=!1,r,o=[],a="rubik",l=3,c=!0,u=!1,f=!1,h,d=[],p=[],_=[],m,v,g;function b(fe,R){return fe.map(V=>{let ne=new J(V.x,V.y,V.z).project(R);return new $e(ne.x,-ne.y,0)})}function y(fe,R,V,ne){let he=new We(fe,R),ie=new jb;return ie.setFromCamera(he,ne),ie.intersectObjects(V)}function w(fe,R,V,ne,he,ie){ie.updateMatrix(),ie.updateMatrixWorld(),ie.updateProjectionMatrix();let ue=[fe.object.parent.userData,fe.object.userData],Re=ue[1].getOrientation(),Ue=ue[1].vecs.filter(jt=>jt.cross(Re).abs()>1e-6),Ee=V.clone().sub(R),Se=new $e(Ee.x,Ee.y,0),re=b(Ue,ie),we,Me;if(re.reduce((jt,Jt,Yt)=>{let Kt=Se.cross(Jt);return Kt.abs()>jt?(Me=Ue[Yt],we=-Math.sign(Kt.z),Kt.abs()):jt},-1/0),!Me)return null;let Ne=[],Ze=[],pt=[],sn=[],Gt=ne.p.toMove(ue[0],ue[1],Me),Wt=Array.isArray(Gt)?Gt:[Gt],gn=(jt,Jt)=>{for(let Yt=0,Kt=Jt.length;Yt<Kt;Yt+=1)if(Jt[Yt].equal(jt))return!0;return!1};return Wt.forEach(jt=>{let Jt=jt.pieces,Yt=[],Kt=[];he.children.forEach(kn=>{gn(kn.userData,Jt)&&(Kt.push(kn.userData),Yt.push(kn))}),Ze.push(Kt),Ne.push(Yt),pt.push(jt.ang),sn.push(jt.animationTime)}),{buffer:Ne,userData:Ze,u:Me,dir:we,ang:pt,animationTime:sn}}let x=new jh({antialias:!0,alpha:!0,powerPreference:"high-performance"});x.setSize(window.innerWidth,window.innerHeight),x.setPixelRatio(window.devicePixelRatio);let S=new Ub,T=new Ug(4,4,3,3),A=new Xr({color:"0xffffff",side:wl}),C=new xi(T,A);S.add(C);let k=x.domElement;k.style.position="absolute",k.style.top="0",k.style.left="0";let L=new bi(40,window.innerWidth/window.innerHeight,1,14),F=new Km(L,k);F.rotateSpeed=3,F.noPan=!0,F.minDistance=3,F.maxDistance=9;function U(){L.position.set(5.296722614625655,2.6519943868108236,5.045980364854634),L.rotation.set(0,0,0),L.up.set(0,1,0),L.lookAt(0,0,0),L.updateProjectionMatrix()}function N(fe){let R=S.children;S.remove(...R),i=wr.fromSequence(a$,{type:a,view:"trans",order:Array.isArray(l)?l:[l,l,l],mode:si.NORMAL}),fe&&i.p.scramble&&i.p.scramble();let V=t$(i);r=V.group,i=V.nc,S.add(r);let ne=new Xm("#ffffff",1,2,3);ne.position.set(2,2,2),S.add(ne),r.rotation.x=0,r.rotation.y=0,r.rotation.z=0,U()}for(let[fe,R]of gb)fe!="clock"&&o.push({name:R.name,value:fe,order:R.order});N();let B=null,W=null,ee=null,K,ge,se=fe=>{if(fe.preventDefault&&fe.preventDefault(),f){F.enabled=!1;return}s=!0,W=new We(fe.clientX,fe.clientY),ee=new J(fe.clientX/window.innerWidth*2-1,-(fe.clientY/window.innerHeight)*2+1);let R=[];r.children.forEach(ne=>{R.push(...ne.children)});let V=y(ee.x,ee.y,R,L);B=null,V.length>0&&(V[0].object.material.color.getHex()&&(B=V[0]),F.enabled=!1)},X=()=>{s=!1,F.enabled=!0},q=fe=>{if(fe.preventDefault&&fe.preventDefault(),K=fe.clientX,ge=fe.clientY,!s)return;let R=new We(fe.clientX,fe.clientY);if(B&&R.clone().sub(W).length()>40){let V=w(B,W,R,i,r,L);V&&(_=V.buffer,m=V.userData,v=V.u,g=V.ang.map(ne=>ne*V.dir),p=_.map(ne=>ne.map(he=>he.matrixWorld.clone())),d=V.animationTime.map(ne=>ne||W3),f=!0,h=performance.now()),s=!1}};k.addEventListener("pointerdown",se),k.addEventListener("pointerup",X),k.addEventListener("pointermove",q),k.addEventListener("touchstart",fe=>se(fe.touches[0]),{passive:!0}),k.addEventListener("touchend",X),k.addEventListener("touchmove",fe=>q(fe.touches[0]),{passive:!0}),document.body.appendChild(k);let Y=(fe,R,V,ne)=>{let he=new J(v.x,v.y,v.z).normalize(),ie=i.p.center,ue=new J(ie.x,ie.y,ie.z);ne.forEach((Re,Ue)=>{let Ee=fe[Ue];Ee.rotation.setFromRotationMatrix(R[Ue]),Ee.position.setFromMatrixPosition(R[Ue]),Re.hasCallback?Re.callback(Ee,new J(0,0,0),v,V,!0,J):(Ee.parent.localToWorld(Ee.position),Ee.position.sub(ue),Ee.position.applyAxisAngle(he,V),Ee.position.add(ue),Ee.parent.worldToLocal(Ee.position),Ee.rotateOnWorldAxis(he,V))})},$=()=>{if(f){let fe=_.length,R=_.map(ne=>!1),V=0;for(let ne=0;ne<fe;ne+=1){if(R[ne])continue;let he=d[ne],ie=(performance.now()-h)/he;ie>1?(Y(_[ne],p[ne],g[ne],m[ne]),m[ne].forEach(ue=>{ue.hasCallback?ue.callback(ue,i.p.center,v,g[ne]):ue.rotate(i.p.center,v,g[ne],!0)}),m[ne].length=0,_[ne].length=0,p[ne].length=0,R[ne]=!0):(V+=1,Y(_[ne],p[ne],g[ne]*ie,m[ne]))}V===0&&(f=!1)}F.update(),x.render(S,L),requestAnimationFrame($)};$();let ze=()=>{x.setSize(window.innerWidth,window.innerHeight),L.aspect=window.innerWidth/window.innerHeight,L.updateProjectionMatrix(),F.handleResize()};ze();function _e(fe){if(f)return;let R=[];r.children.forEach(ie=>{R.push(...ie.children)});let V=new J(K/window.innerWidth*2-1,-(ge/window.innerHeight)*2+1),ne=y(V.x,V.y,R,L);if(B=null,ne.length>0&&(ne[0].object.material.color.getHex()&&(B=ne[0]),F.enabled=!1),!B)return;let he=w(B,new We(K,ge),fe,i,r,L);he&&(_=he.buffer,m=he.userData,v=he.u,g=he.ang.map(ie=>ie*he.dir),p=_.map(ie=>ie.map(ue=>ue.matrixWorld.clone())),d=he.animationTime.map(ie=>ie||W3),f=!0,h=performance.now())}function pe(fe){let R=new We(K,ge);switch(fe.code){case"ArrowUp":{_e(R.add(new We(0,-50)));break}case"ArrowDown":{_e(R.add(new We(0,50)));break}case"ArrowLeft":{_e(R.add(new We(-50,0)));break}case"ArrowRight":{_e(R.add(new We(50,0)));break}}}er(()=>{x.domElement.remove(),x.dispose(),F.dispose()});function Te(){n(2,c=o.find(fe=>fe.value===a).order)}function De(){n(3,u=!1)}function je(){n(3,u=!0)}function de(fe){a=fe,n(0,a)}function Ae(fe){l=fe,n(1,l)}const Oe=()=>{N(),De()};function Ye(fe){u=fe,n(3,u)}return[a,l,c,u,o,N,ze,pe,Te,De,je,de,Ae,Oe,Ye]}class f$ extends dt{constructor(e){super(),ht(this,e,u$,o$,ft,{},null,[-1,-1])}}function h$(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M4,10V14H13L9.5,17.5L11.92,19.92L19.84,12L11.92,4.08L9.5,6.5L13,10H4Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function d$(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class xC extends dt{constructor(e){super(),ht(this,e,d$,h$,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function j3(t,e,n){const i=t.slice();return i[3]=e[n],i[28]=e,i[29]=n,i}function Y3(t,e,n){const i=t.slice();return i[30]=e[n],i}function q3(t){let e,n=t[3].content+"",i;return{c(){e=D("h1"),i=ye(n),M(e,"class","text-3xl text-gray-300 text-center font-bold")},m(s,r){I(s,e,r),E(e,i)},p(s,r){r[0]&1&&n!==(n=s[3].content+"")&&nt(i,n)},d(s){s&&O(e)}}}function X3(t){let e,n=t[3].content+"",i;return{c(){e=D("h2"),i=ye(n),M(e,"class","text-2xl text-gray-300 font-bold text-center")},m(s,r){I(s,e,r),E(e,i)},p(s,r){r[0]&1&&n!==(n=s[3].content+"")&&nt(i,n)},d(s){s&&O(e)}}}function Z3(t){let e,n,i;function s(){t[19].call(e,t[28],t[29])}return{c(){e=D("p"),M(e,"class","text-justify"),M(e,"contenteditable","false"),t[3].content===void 0&&Jc(s)},m(r,o){I(r,e,o),t[3].content!==void 0&&(e.innerHTML=t[3].content),n||(i=tt(e,"input",s),n=!0)},p(r,o){t=r,o[0]&1&&t[3].content!==e.innerHTML&&(e.innerHTML=t[3].content)},d(r){r&&O(e),n=!1,i()}}}function J3(t){let e,n,i=t[3].cubes,s=[];for(let o=0;o<i.length;o+=1)s[o]=K3(Y3(t,i,o));const r=o=>H(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=ms()},m(o,a){for(let l=0;l<s.length;l+=1)s[l].m(o,a);I(o,e,a),n=!0},p(o,a){if(a[0]&1){i=o[3].cubes;let l;for(l=0;l<i.length;l+=1){const c=Y3(o,i,l);s[l]?(s[l].p(c,a),P(s[l],1)):(s[l]=K3(c),s[l].c(),P(s[l],1),s[l].m(e.parentNode,e))}for(at(),l=i.length;l<s.length;l+=1)r(l);lt()}},i(o){if(!n){for(let a=0;a<i.length;a+=1)P(s[a]);n=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)H(s[a]);n=!1},d(o){en(s,o),o&&O(e)}}}function p$(t){let e,n;return e=new Vi({props:{text:t[30].text,class:"cursor-help",$$slots:{default:[g$]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s[0]&1&&(r.text=i[30].text),s[1]&4&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function m$(t){let e,n;return{c(){e=D("img"),M(e,"class","puzzle-img-mini"),gi(e.src,n=t[30].img||"")||M(e,"src",n),M(e,"alt","")},m(i,s){I(i,e,s)},p(i,s){s[0]&1&&!gi(e.src,n=i[30].img||"")&&M(e,"src",n)},i:Ve,o:Ve,d(i){i&&O(e)}}}function g$(t){let e,n,i;return e=new xC({props:{width:"1.5rem",height:"1.5rem"}}),{c(){ce(e.$$.fragment),n=z()},m(s,r){ae(e,s,r),I(s,n,r),i=!0},p:Ve,i(s){i||(P(e.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),i=!1},d(s){le(e,s),s&&O(n)}}}function K3(t){let e,n,i,s;const r=[m$,p$],o=[];function a(l,c){return l[30].type!="arrow"?0:1}return e=a(t),n=o[e]=r[e](t),{c(){n.c(),i=ms()},m(l,c){o[e].m(l,c),I(l,i,c),s=!0},p(l,c){let u=e;e=a(l),e===u?o[e].p(l,c):(at(),H(o[u],1,1,()=>{o[u]=null}),lt(),n=o[e],n?n.p(l,c):(n=o[e]=r[e](l),n.c()),P(n,1),n.m(i.parentNode,i))},i(l){s||(P(n),s=!0)},o(l){H(n),s=!1},d(l){o[e].d(l),l&&O(i)}}}function $3(t){let e,n,i,s,r,o,a,l=MC,c=t[3].type==="title"&&q3(t),u=t[3].type==="subtitle"&&X3(t),f=t[3].type==="text"&&Z3(t),h=t[3].type==="cubes"&&J3(t);return{c(){e=D("div"),n=z(),c&&c.c(),i=z(),u&&u.c(),s=z(),f&&f.c(),r=z(),h&&h.c(),o=z(),M(e,"class","container-mini bg-white bg-opacity-10 rounded-md py-4 relative svelte-1wt3g5p"),bt(e,"cube",t[3].type==="cubes")},m(d,p){I(d,e,p),E(e,n),c&&c.m(e,null),E(e,i),u&&u.m(e,null),E(e,s),f&&f.m(e,null),E(e,r),h&&h.m(e,null),E(e,o),a=!0},p(d,p){d[3].type==="title"?c?c.p(d,p):(c=q3(d),c.c(),c.m(e,i)):c&&(c.d(1),c=null),d[3].type==="subtitle"?u?u.p(d,p):(u=X3(d),u.c(),u.m(e,s)):u&&(u.d(1),u=null),d[3].type==="text"?f?f.p(d,p):(f=Z3(d),f.c(),f.m(e,r)):f&&(f.d(1),f=null),d[3].type==="cubes"?h?(h.p(d,p),p[0]&1&&P(h,1)):(h=J3(d),h.c(),P(h,1),h.m(e,o)):h&&(at(),H(h,1,1,()=>{h=null}),lt()),(!a||p[0]&1)&&bt(e,"cube",d[3].type==="cubes")},i(d){a||(P(l),P(h),a=!0)},o(d){H(l),H(h),a=!1},d(d){d&&O(e),c&&c.d(),u&&u.d(),f&&f.d(),h&&h.d()}}}function _$(t){let e,n,i;function s(o){t[20](o)}let r={placeholder:"Title..."};return t[3].content.content!==void 0&&(r.value=t[3].content.content),e=new oi({props:r}),wt.push(()=>Nt(e,"value",s)),{c(){ce(e.$$.fragment)},m(o,a){ae(e,o,a),i=!0},p(o,a){const l={};!n&&a[0]&8&&(n=!0,l.value=o[3].content.content,It(()=>n=!1)),e.$set(l)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){H(e.$$.fragment,o),i=!1},d(o){le(e,o)}}}function v$(t){let e,n,i;function s(o){t[21](o)}let r={placeholder:"Subtitle..."};return t[3].content.content!==void 0&&(r.value=t[3].content.content),e=new oi({props:r}),wt.push(()=>Nt(e,"value",s)),{c(){ce(e.$$.fragment)},m(o,a){ae(e,o,a),i=!0},p(o,a){const l={};!n&&a[0]&8&&(n=!0,l.value=o[3].content.content,It(()=>n=!1)),e.$set(l)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){H(e.$$.fragment,o),i=!1},d(o){le(e,o)}}}function b$(t){let e,n,i;function s(o){t[22](o)}let r={placeholder:"Text..."};return t[3].content.content!==void 0&&(r.value=t[3].content.content),e=new Nh({props:r}),wt.push(()=>Nt(e,"value",s)),{c(){ce(e.$$.fragment)},m(o,a){ae(e,o,a),i=!0},p(o,a){const l={};!n&&a[0]&8&&(n=!0,l.value=o[3].content.content,It(()=>n=!1)),e.$set(l)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){H(e.$$.fragment,o),i=!1},d(o){le(e,o)}}}function y$(t){let e;return{c(){e=ye("Add cube")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function w$(t){let e;return{c(){e=ye("Add arrow")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function x$(t){let e,n,i,s,r,o,a;return n=new At({props:{$$slots:{default:[y$]},$$scope:{ctx:t}}}),s=new At({props:{$$slots:{default:[w$]},$$scope:{ctx:t}}}),{c(){e=D("section"),ce(n.$$.fragment),i=z(),ce(s.$$.fragment),r=z(),o=D("section"),o.textContent="Cubes goes here",M(e,"class","flex mt-4"),M(o,"class","flex mt-4")},m(l,c){I(l,e,c),ae(n,e,null),E(e,i),ae(s,e,null),I(l,r,c),I(l,o,c),a=!0},p(l,c){const u={};c[1]&4&&(u.$$scope={dirty:c,ctx:l}),n.$set(u);const f={};c[1]&4&&(f.$$scope={dirty:c,ctx:l}),s.$set(f)},i(l){a||(P(n.$$.fragment,l),P(s.$$.fragment,l),a=!0)},o(l){H(n.$$.fragment,l),H(s.$$.fragment,l),a=!1},d(l){l&&O(e),le(n),le(s),l&&O(r),l&&O(o)}}}function M$(t){let e,n,i,s,r,o,a,l;return e=new il({props:{name:"Title",$$slots:{default:[_$]},$$scope:{ctx:t}}}),i=new il({props:{name:"Subtitle",$$slots:{default:[v$]},$$scope:{ctx:t}}}),r=new il({props:{name:"Text",$$slots:{default:[b$]},$$scope:{ctx:t}}}),a=new il({props:{name:"Cubes",$$slots:{default:[x$]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment),n=z(),ce(i.$$.fragment),s=z(),ce(r.$$.fragment),o=z(),ce(a.$$.fragment)},m(c,u){ae(e,c,u),I(c,n,u),ae(i,c,u),I(c,s,u),ae(r,c,u),I(c,o,u),ae(a,c,u),l=!0},p(c,u){const f={};u[0]&8|u[1]&4&&(f.$$scope={dirty:u,ctx:c}),e.$set(f);const h={};u[0]&8|u[1]&4&&(h.$$scope={dirty:u,ctx:c}),i.$set(h);const d={};u[0]&8|u[1]&4&&(d.$$scope={dirty:u,ctx:c}),r.$set(d);const p={};u[1]&4&&(p.$$scope={dirty:u,ctx:c}),a.$set(p)},i(c){l||(P(e.$$.fragment,c),P(i.$$.fragment,c),P(r.$$.fragment,c),P(a.$$.fragment,c),l=!0)},o(c){H(e.$$.fragment,c),H(i.$$.fragment,c),H(r.$$.fragment,c),H(a.$$.fragment,c),l=!1},d(c){le(e,c),c&&O(n),le(i,c),c&&O(s),le(r,c),c&&O(o),le(a,c)}}}function S$(t){let e,n;return e=new QT({props:{$$slots:{default:[M$]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s[0]&8|s[1]&4&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function E$(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p=MC;const _=[t[4]];let m={};for(let y=0;y<_.length;y+=1)m=ya(m,_[y]);a=new xC({props:m});let v=t[0],g=[];for(let y=0;y<v.length;y+=1)g[y]=$3(j3(t,v,y));const b=y=>H(g[y],1,1,()=>{g[y]=null});return u=new Ma({props:{show:t[1],onClose:t[5],$$slots:{default:[S$]},$$scope:{ctx:t}}}),{c(){e=D("div"),n=D("span"),i=z(),s=z(),r=D("div"),o=D("a"),ce(a.$$.fragment),l=z();for(let y=0;y<g.length;y+=1)g[y].c();c=z(),ce(u.$$.fragment),M(n,"id","TOP"),M(n,"class","opacity-0 pointer-events-none"),M(o,"href","#TOP"),M(r,"class","fixed -bottom-16 right-4 w-10 h-10 rounded-full bg-purple-600 text-gray-300 z-10 -rotate-90 shadow-lg flex items-center justify-center to-top transition-all duration-200 svelte-1wt3g5p"),bt(r,"visible",t[2]),M(e,"class","main-container container-mini text-gray-400 scroll-smooth svelte-1wt3g5p")},m(y,w){I(y,e,w),E(e,n),E(e,i),E(e,s),E(e,r),E(r,o),ae(a,o,null),E(e,l);for(let x=0;x<g.length;x+=1)g[x].m(e,null);I(y,c,w),ae(u,y,w),f=!0,h||(d=tt(e,"scroll",t[10]),h=!0)},p(y,w){const x=w[0]&16?mv(_,[f1(y[4])]):{};if(a.$set(x),(!f||w[0]&4)&&bt(r,"visible",y[2]),w[0]&401){v=y[0];let T;for(T=0;T<v.length;T+=1){const A=j3(y,v,T);g[T]?(g[T].p(A,w),P(g[T],1)):(g[T]=$3(A),g[T].c(),P(g[T],1),g[T].m(e,null))}for(at(),T=v.length;T<g.length;T+=1)b(T);lt()}const S={};w[0]&2&&(S.show=y[1]),w[0]&8|w[1]&4&&(S.$$scope={dirty:w,ctx:y}),u.$set(S)},i(y){if(!f){P(p),P(a.$$.fragment,y);for(let w=0;w<v.length;w+=1)P(g[w]);P(u.$$.fragment,y),f=!0}},o(y){H(p),H(a.$$.fragment,y),g=g.filter(Boolean);for(let w=0;w<g.length;w+=1)H(g[w]);H(u.$$.fragment,y),f=!1},d(y){y&&O(e),le(a),en(g,y),y&&O(c),le(u,y),h=!1,d()}}}let MC=!1;function T$(t,e,n){let{location:i,puzzle:s,tutorial:r}=e;const o=Ys.getInstance(),a={width:"1.5rem",height:"1.5rem"};let l=[],c=null,u=null,f=!1,h=null,d=!1,p;function _(N){n(0,l.length=0,l);let B=[];for(let W=0,ee=N.length;W<ee;W+=1)switch(N[W].type||N[W].t){case"tl":case"title":case"s":case"tx":case"subtitle":case"text":{l.push({type:N[W].type||N[W].t,content:(N[W].content||N[W].c).replace(/\n/g,"<br>"),cubes:[]});break}case"c":case"cubes":{let K=[],ge=N[W].cubes||[];for(let se=0,X=ge.length;se<X;se+=1){let q=ge[se];switch(q.type||q.t){case"$":{if(B.length>0){let Y=B[B.length-1],$=q.mode?si[q.mode]:Y.mode,ze=Y.clone($);ze.move(q.scramble),ze.p.rotation=q.rotation||ze.p.rotation,ze.rotation=ze.p.rotation,K.push(ze),B.push(ze)}break}case"arrow":{K.push({type:"arrow",text:q.text||q.tt});break}default:{let Y=wr.fromSequence(q.scramble||q.s||"",{type:q.type||q.t,order:Array.isArray(q.order)?q.order:[q.order],mode:typeof q.mode=="number"?q.mode:si[q.mode],tips:q.tips||[],view:q.view});Y.rotation=q.rotation||q.r||Y.rotation,K.push(Y),B.push(Y)}}}l.push({type:"cubes",cubes:K});break}}Dl(B,150,!1,!0).then(W=>{let ee=W.subscribe(K=>{K!=="__initial__"&&K===null&&(n(0,l),ee())})})}function m(N){if(N){N.content.type=["title","subtitle","text","cubes"][N.tab];let B=c.content.find(W=>W.type==="title");N.content.type==="cubes"&&N.content.cubes.forEach(W=>{W.type!="arrow"&&(W.rotation.x=W.rotation.x*Math.PI/180,W.rotation.y=W.rotation.y*Math.PI/180,W.rotation.z=W.rotation.z*Math.PI/180)}),N.tab===0&&B||(c.content.splice(h,0,N.content),_(c.content))}}function v(N){n(1,f=!0),h=N,n(3,u={tab:0,content:{type:"title",content:"",cubes:[]}})}function g(N,B){let W=l[N];l.splice(N,1,l[B]),l.splice(B,1,W),n(0,l)}function b(N){l.splice(N,1),n(0,l)}function y(){c&&o.addTutorial(c)}function w(N){n(2,d=N.target.scrollTop>100)}gs(()=>{p=o.tutSub.subscribe(N=>{if(!N)return;const B=N[0],W=N[1],ee=xk(i.search).get("id");if(B==="get-tutorials"){let K=W.find(ge=>ge._id===ee);K&&(c=K,c.content=c.content||[],_(c.content))}}),o.getTutorials()}),er(()=>{p()});const x=()=>v(0),S=()=>y(),T=N=>g(N,N-1),A=N=>g(N,N+1),C=N=>b(N);function k(N,B){N[B].content=this.innerHTML,n(0,l)}function L(N){t.$$.not_equal(u.content.content,N)&&(u.content.content=N,n(3,u))}function F(N){t.$$.not_equal(u.content.content,N)&&(u.content.content=N,n(3,u))}function U(N){t.$$.not_equal(u.content.content,N)&&(u.content.content=N,n(3,u))}return t.$$set=N=>{"location"in N&&n(11,i=N.location),"puzzle"in N&&n(12,s=N.puzzle),"tutorial"in N&&n(13,r=N.tutorial)},[l,f,d,u,a,m,v,g,b,y,w,i,s,r,x,S,T,A,C,k,L,F,U]}class A$ extends dt{constructor(e){super(),ht(this,e,T$,E$,ft,{location:11,puzzle:12,tutorial:13},null,[-1,-1])}}function Q3(t,e,n){const i=t.slice();return i[88]=e[n],i}function eS(t,e,n){const i=t.slice();return i[72]=e[n],i}function tS(t,e,n){const i=t.slice();return i[75]=e[n],i[77]=n,i}function nS(t,e,n){const i=t.slice();return i[60]=e[n],i}function iS(t,e,n){const i=t.slice();return i[80]=e[n],i[81]=e,i[82]=n,i}function sS(t,e,n){const i=t.slice();return i[83]=e[n],i}function rS(t,e,n){const i=t.slice();return i[86]=e[n],i[77]=n,i}function oS(t,e,n){const i=t.slice();return i[60]=e[n],i[61]=e,i[62]=n,i}function aS(t,e,n){const i=t.slice();return i[63]=e[n],i[65]=n,i}function lS(t,e,n){const i=t.slice();return i[66]=e[n],i}function cS(t,e,n){const i=t.slice();return i[69]=e[n],i[70]=e,i[71]=n,i}function k$(t){let e,n,i,s,r,o,a;s=new At({props:{class:"bg-green-800 text-gray-300 mx-auto my-4",$$slots:{default:[L$]},$$scope:{ctx:t}}}),s.$on("click",t[10]);let l=t[6],c=[];for(let u=0;u<l.length;u+=1)c[u]=uS(Q3(t,l,u));return{c(){e=D("article"),n=D("h1"),n.textContent="Seleccione el evento",i=z(),ce(s.$$.fragment),r=z(),o=D("ul");for(let u=0;u<c.length;u+=1)c[u].c();M(n,"class","text-3xl text-center font-bold mt-2 text-gray-300"),M(o,"class","max-w-lg grid m-auto bg-white bg-opacity-10 p-4 mt-4 rounded-md"),M(e,"class","text-gray-400 bg-white bg-opacity-10 py-8 rounded-md max-w-5xl mx-auto")},m(u,f){I(u,e,f),E(e,n),E(e,i),ae(s,e,null),E(e,r),E(e,o);for(let h=0;h<c.length;h+=1)c[h].m(o,null);a=!0},p(u,f){const h={};if(f[2]&536870912&&(h.$$scope={dirty:f,ctx:u}),s.$set(h),f[0]&65632){l=u[6];let d;for(d=0;d<l.length;d+=1){const p=Q3(u,l,d);c[d]?c[d].p(p,f):(c[d]=uS(p),c[d].c(),c[d].m(o,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=l.length}},i(u){a||(P(s.$$.fragment,u),a=!0)},o(u){H(s.$$.fragment,u),a=!1},d(u){u&&O(e),le(s),en(c,u)}}}function C$(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p;const _=[R$,P$],m=[];function v(w,x){return w[5].status==="editing"?0:1}n=v(t),i=m[n]=_[n](t),o=new At({props:{class:"bg-purple-800 text-gray-300",$$slots:{default:[W$]},$$scope:{ctx:t}}}),o.$on("click",t[40]);const g=[Y$,j$],b=[];function y(w,x){return w[5].status==="editing"?0:1}return l=y(t),c=b[l]=g[l](t),f=new At({props:{class:"bg-green-800 text-gray-300",$$slots:{default:[Z$]},$$scope:{ctx:t}}}),f.$on("click",t[21]),d=new At({props:{class:"bg-red-800 text-gray-300",$$slots:{default:[J$]},$$scope:{ctx:t}}}),d.$on("click",t[41]),{c(){e=D("article"),i.c(),s=z(),r=D("div"),ce(o.$$.fragment),a=z(),c.c(),u=z(),ce(f.$$.fragment),h=z(),ce(d.$$.fragment),M(r,"class","flex gap-4 mx-auto py-4 items-center justify-center sticky bg-gray-500 bg-opacity-80 bottom-0"),M(e,"class","text-gray-400 bg-white bg-opacity-10 py-8 rounded-md max-w-5xl mx-auto")},m(w,x){I(w,e,x),m[n].m(e,null),E(e,s),E(e,r),ae(o,r,null),E(r,a),b[l].m(r,null),E(r,u),ae(f,r,null),E(r,h),ae(d,r,null),p=!0},p(w,x){let S=n;n=v(w),n===S?m[n].p(w,x):(at(),H(m[S],1,1,()=>{m[S]=null}),lt(),i=m[n],i?i.p(w,x):(i=m[n]=_[n](w),i.c()),P(i,1),i.m(e,s));const T={};x[0]&32|x[2]&536870912&&(T.$$scope={dirty:x,ctx:w}),o.$set(T);let A=l;l=y(w),l===A?b[l].p(w,x):(at(),H(b[A],1,1,()=>{b[A]=null}),lt(),c=b[l],c?c.p(w,x):(c=b[l]=g[l](w),c.c()),P(c,1),c.m(r,u));const C={};x[2]&536870912&&(C.$$scope={dirty:x,ctx:w}),f.$set(C);const k={};x[2]&536870912&&(k.$$scope={dirty:x,ctx:w}),d.$set(k)},i(w){p||(P(i),P(o.$$.fragment,w),P(c),P(f.$$.fragment,w),P(d.$$.fragment,w),p=!0)},o(w){H(i),H(o.$$.fragment,w),H(c),H(f.$$.fragment,w),H(d.$$.fragment,w),p=!1},d(w){w&&O(e),m[n].d(),le(o),b[l].d(),le(f),le(d)}}}function L$(t){let e;return{c(){e=ye("Crear evento")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function uS(t){let e,n=t[88].name+"",i,s,r=t[88].place+"",o,a,l,c;function u(){return t[42](t[88])}return{c(){e=D("li"),i=ye(n),s=ye(" - "),o=ye(r),a=z(),M(e,"class","p-2 rounded-md cursor-pointer transition-all duration-200 mb-2 bg-white bg-opacity-10 text-gray-300 hover:bg-blue-300 hover:bg-opacity-50 hover:shadow-md hover:text-black")},m(f,h){I(f,e,h),E(e,i),E(e,s),E(e,o),E(e,a),l||(c=tt(e,"click",u),l=!0)},p(f,h){t=f,h[0]&64&&n!==(n=t[88].name+"")&&nt(i,n),h[0]&64&&r!==(r=t[88].place+"")&&nt(o,r)},d(f){f&&O(e),l=!1,c()}}}function P$(t){let e,n=t[5].name+"",i,s,r,o,a,l,c,u,f,h=t[1],d=[];for(let v=0;v<h.length;v+=1)d[v]=mS(iS(t,h,v));const p=v=>H(d[v],1,1,()=>{d[v]=null});let _=t[0],m=[];for(let v=0;v<_.length;v+=1)m[v]=vS(eS(t,_,v));return{c(){e=D("h1"),i=ye(n),s=z(),r=D("section"),o=D("h2"),o.textContent="Desempe\xF1o individual",a=z();for(let v=0;v<d.length;v+=1)d[v].c();l=z(),c=D("h2"),c.textContent="Desempe\xF1o	por categor\xEDas",u=z();for(let v=0;v<m.length;v+=1)m[v].c();M(e,"class","text-3xl text-center font-bold mb-6 mt-2 text-gray-300"),M(o,"class","text-2xl text-gray-300 font-bold text-center border-t border-gray-500 py-4"),M(c,"class","text-2xl text-gray-300 font-bold text-center border-t border-gray-500 py-4 mt-6")},m(v,g){I(v,e,g),E(e,i),I(v,s,g),I(v,r,g),E(r,o),E(r,a);for(let b=0;b<d.length;b+=1)d[b].m(r,null);E(r,l),E(r,c),E(r,u);for(let b=0;b<m.length;b+=1)m[b].m(r,null);f=!0},p(v,g){if((!f||g[0]&32)&&n!==(n=v[5].name+"")&&nt(i,n),g[0]&33306){h=v[1];let b;for(b=0;b<h.length;b+=1){const y=iS(v,h,b);d[b]?(d[b].p(y,g),P(d[b],1)):(d[b]=mS(y),d[b].c(),P(d[b],1),d[b].m(r,l))}for(at(),b=h.length;b<d.length;b+=1)p(b);lt()}if(g[0]&16897){_=v[0];let b;for(b=0;b<_.length;b+=1){const y=eS(v,_,b);m[b]?m[b].p(y,g):(m[b]=vS(y),m[b].c(),m[b].m(r,null))}for(;b<m.length;b+=1)m[b].d(1);m.length=_.length}},i(v){if(!f){for(let g=0;g<h.length;g+=1)P(d[g]);f=!0}},o(v){d=d.filter(Boolean);for(let g=0;g<d.length;g+=1)H(d[g]);f=!1},d(v){v&&O(e),v&&O(s),v&&O(r),en(d,v),en(m,v)}}}function R$(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w,x,S,T,A,C,k,L,F,U,N,B,W,ee,K,ge=Object.keys(t[5].rounds).length,se,X,q,Y,$;function ze(ue){t[22](ue)}let _e={};t[5].name!==void 0&&(_e.value=t[5].name),l=new oi({props:_e}),wt.push(()=>Nt(l,"value",ze));function pe(ue){t[23](ue)}let Te={};t[5].place!==void 0&&(Te.value=t[5].place),d=new oi({props:Te}),wt.push(()=>Nt(d,"value",pe));function De(ue){t[24](ue)}let je={type:"date"};t[5].date!==void 0&&(je.value=t[5].date),g=new oi({props:je}),wt.push(()=>Nt(g,"value",De));function de(ue){t[25](ue)}let Ae={type:"date"};t[5].inscriptionI!==void 0&&(Ae.value=t[5].inscriptionI),S=new oi({props:Ae}),wt.push(()=>Nt(S,"value",de));function Oe(ue){t[26](ue)}let Ye={type:"date"};t[5].inscriptionF!==void 0&&(Ye.value=t[5].inscriptionF),L=new oi({props:Ye}),wt.push(()=>Nt(L,"value",Oe));function fe(ue){t[27](ue)}let R={type:"number"};t[5].inscriptionCost!==void 0&&(R.value=t[5].inscriptionCost),W=new oi({props:R}),wt.push(()=>Nt(W,"value",fe));let V=ge&&bS(t),ne=t[5].contestants,he=[];for(let ue=0;ue<ne.length;ue+=1)he[ue]=MS(oS(t,ne,ue));const ie=ue=>H(he[ue],1,1,()=>{he[ue]=null});return{c(){e=D("h1"),e.textContent="Organizador de Eventos",n=z(),i=D("h2"),i.textContent="Datos generales",s=z(),r=D("section"),o=D("span"),o.textContent="Nombre del evento",a=z(),ce(l.$$.fragment),u=z(),f=D("span"),f.textContent="Lugar",h=z(),ce(d.$$.fragment),_=z(),m=D("span"),m.textContent="Fecha",v=z(),ce(g.$$.fragment),y=z(),w=D("span"),w.textContent="Inicio de la inscripci\xF3n",x=z(),ce(S.$$.fragment),A=z(),C=D("span"),C.textContent="Fin de la inscripci\xF3n",k=z(),ce(L.$$.fragment),U=z(),N=D("span"),N.textContent="Costo de inscripci\xF3n",B=z(),ce(W.$$.fragment),K=z(),V&&V.c(),se=z(),X=D("section"),q=D("h2"),q.textContent="Datos de los competidores",Y=z();for(let ue=0;ue<he.length;ue+=1)he[ue].c();M(e,"class","text-3xl text-center font-bold mt-2 text-gray-300"),M(i,"class","text-2xl text-center font-bold mb-6 mt-2 text-gray-300"),M(o,"class","flex mr-2 items-center justify-end"),M(f,"class","flex mr-2 items-center justify-end"),M(m,"class","flex mr-2 items-center justify-end"),M(w,"class","flex mr-2 items-center justify-end"),M(C,"class","flex mr-2 items-center justify-end"),M(N,"class","flex mr-2 items-center justify-end"),M(r,"class","max-w-3xl mx-auto svelte-14tnh9"),M(r,"id","event-data"),M(q,"class","text-2xl text-center font-bold mb-6 mt-2 text-gray-300")},m(ue,Re){I(ue,e,Re),I(ue,n,Re),I(ue,i,Re),I(ue,s,Re),I(ue,r,Re),E(r,o),E(r,a),ae(l,r,null),E(r,u),E(r,f),E(r,h),ae(d,r,null),E(r,_),E(r,m),E(r,v),ae(g,r,null),E(r,y),E(r,w),E(r,x),ae(S,r,null),E(r,A),E(r,C),E(r,k),ae(L,r,null),E(r,U),E(r,N),E(r,B),ae(W,r,null),I(ue,K,Re),V&&V.m(ue,Re),I(ue,se,Re),I(ue,X,Re),E(X,q),E(X,Y);for(let Ue=0;Ue<he.length;Ue+=1)he[Ue].m(X,null);$=!0},p(ue,Re){const Ue={};!c&&Re[0]&32&&(c=!0,Ue.value=ue[5].name,It(()=>c=!1)),l.$set(Ue);const Ee={};!p&&Re[0]&32&&(p=!0,Ee.value=ue[5].place,It(()=>p=!1)),d.$set(Ee);const Se={};!b&&Re[0]&32&&(b=!0,Se.value=ue[5].date,It(()=>b=!1)),g.$set(Se);const re={};!T&&Re[0]&32&&(T=!0,re.value=ue[5].inscriptionI,It(()=>T=!1)),S.$set(re);const we={};!F&&Re[0]&32&&(F=!0,we.value=ue[5].inscriptionF,It(()=>F=!1)),L.$set(we);const Me={};if(!ee&&Re[0]&32&&(ee=!0,Me.value=ue[5].inscriptionCost,It(()=>ee=!1)),W.$set(Me),Re[0]&32&&(ge=Object.keys(ue[5].rounds).length),ge?V?(V.p(ue,Re),Re[0]&32&&P(V,1)):(V=bS(ue),V.c(),P(V,1),V.m(se.parentNode,se)):V&&(at(),H(V,1,1,()=>{V=null}),lt()),Re[0]&12576){ne=ue[5].contestants;let Ne;for(Ne=0;Ne<ne.length;Ne+=1){const Ze=oS(ue,ne,Ne);he[Ne]?(he[Ne].p(Ze,Re),P(he[Ne],1)):(he[Ne]=MS(Ze),he[Ne].c(),P(he[Ne],1),he[Ne].m(X,null))}for(at(),Ne=ne.length;Ne<he.length;Ne+=1)ie(Ne);lt()}},i(ue){if(!$){P(l.$$.fragment,ue),P(d.$$.fragment,ue),P(g.$$.fragment,ue),P(S.$$.fragment,ue),P(L.$$.fragment,ue),P(W.$$.fragment,ue),P(V);for(let Re=0;Re<ne.length;Re+=1)P(he[Re]);$=!0}},o(ue){H(l.$$.fragment,ue),H(d.$$.fragment,ue),H(g.$$.fragment,ue),H(S.$$.fragment,ue),H(L.$$.fragment,ue),H(W.$$.fragment,ue),H(V),he=he.filter(Boolean);for(let Re=0;Re<he.length;Re+=1)H(he[Re]);$=!1},d(ue){ue&&O(e),ue&&O(n),ue&&O(i),ue&&O(s),ue&&O(r),le(l),le(d),le(g),le(S),le(L),le(W),ue&&O(K),V&&V.d(ue),ue&&O(se),ue&&O(X),en(he,ue)}}}function D$(t){let e,n;return e=new Bv({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function O$(t){let e,n;return e=new Nv({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function I$(t){let e,n,i,s,r,o;const a=[O$,D$],l=[];function c(f,h){return f[80].cnt.expanded?0:1}n=c(t),i=l[n]=a[n](t);function u(){return t[38](t[80],t[81],t[82])}return{c(){e=D("div"),i.c(),M(e,"class","w-8 h-8 rounded-full grid place-items-center transition-all duration-200 bg-gray-600 hover:bg-gray-600 hover:text-gray-200")},m(f,h){I(f,e,h),l[n].m(e,null),s=!0,r||(o=tt(e,"click",u),r=!0)},p(f,h){t=f;let d=n;n=c(t),n!==d&&(at(),H(l[d],1,1,()=>{l[d]=null}),lt(),i=l[n],i||(i=l[n]=a[n](t),i.c()),P(i,1),i.m(e,null))},i(f){s||(P(i),s=!0)},o(f){H(i),s=!1},d(f){f&&O(e),l[n].d(),r=!1,o()}}}function fS(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w,x=t[80].results,S=[];for(let T=0;T<x.length;T+=1)S[T]=pS(sS(t,x,T));return{c(){e=D("div"),n=D("span"),n.textContent="Categor\xEDa",i=z(),s=D("span"),s.textContent="Ronda",r=z(),o=D("span"),o.textContent="T1",a=z(),l=D("span"),l.textContent="T2",c=z(),u=D("span"),u.textContent="T3",f=z(),h=D("span"),h.textContent="T4",d=z(),p=D("span"),p.textContent="T5",_=z(),m=D("span"),m.textContent="Ao5",v=z(),g=D("span"),g.textContent="Mejor",b=z(),y=D("span"),y.textContent="Peor",w=z();for(let T=0;T<S.length;T+=1)S[T].c();M(n,"class","font-bold text-lg"),M(s,"class","font-bold text-lg"),M(o,"class","font-bold text-lg"),M(l,"class","font-bold text-lg"),M(u,"class","font-bold text-lg"),M(h,"class","font-bold text-lg"),M(p,"class","font-bold text-lg"),M(m,"class","font-bold text-lg"),M(g,"class","font-bold text-lg"),M(y,"class","font-bold text-lg"),M(e,"class","result-table text-gray-300 mt-4 border-t border-gray-500 pt-2 overflow-scroll svelte-14tnh9")},m(T,A){I(T,e,A),E(e,n),E(e,i),E(e,s),E(e,r),E(e,o),E(e,a),E(e,l),E(e,c),E(e,u),E(e,f),E(e,h),E(e,d),E(e,p),E(e,_),E(e,m),E(e,v),E(e,g),E(e,b),E(e,y),E(e,w);for(let C=0;C<S.length;C+=1)S[C].m(e,null)},p(T,A){if(A[0]&33306){x=T[80].results;let C;for(C=0;C<x.length;C+=1){const k=sS(T,x,C);S[C]?S[C].p(k,A):(S[C]=pS(k),S[C].c(),S[C].m(e,null))}for(;C<S.length;C+=1)S[C].d(1);S.length=x.length}},d(T){T&&O(e),en(S,T)}}}function hS(t){let e;return{c(){e=D("span"),e.textContent="+2",M(e,"class","font-small")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function dS(t){let e,n,i=(t[77]<5?t[15](t[86]).time:t[86].time)+"",s,r,o,a,l,c=t[77]!=5&&t[86].p2&&hS();function u(){return t[39](t[86])}return{c(){e=D("div"),n=D("span"),s=ye(i),r=z(),o=D("div"),c&&c.c(),M(n,"class","time font-bold "+(t[77]===5?"text-blue-400":t[77]===6?"text-green-400":t[77]===7?"text-orange-400":"")),M(o,"class","absolute right-1 top-0 h-full flex flex-col items-center justify-evenly"),M(e,"class",is(t[77]<5?"select-none cursor-pointer hover:text-yellow-100 transition-all duration-200":"pointer-events-none")+" svelte-14tnh9")},m(f,h){I(f,e,h),E(e,n),E(n,s),E(e,r),E(e,o),c&&c.m(o,null),a||(l=tt(e,"click",u),a=!0)},p(f,h){t=f,h[0]&2&&i!==(i=(t[77]<5?t[15](t[86]).time:t[86].time)+"")&&nt(s,i),t[77]!=5&&t[86].p2?c||(c=hS(),c.c(),c.m(o,null)):c&&(c.d(1),c=null)},d(f){f&&O(e),c&&c.d(),a=!1,l()}}}function pS(t){let e,n,i,s=t[9].get(t[83].category)[0]+"",r,o,a,l=t[83].round+"",c,u,f,h=t[83].times,d=[];for(let p=0;p<h.length;p+=1)d[p]=dS(rS(t,h,p));return{c(){e=D("hr"),n=z(),i=D("span"),r=ye(s),o=z(),a=D("span"),c=ye(l),u=z();for(let p=0;p<d.length;p+=1)d[p].c();f=ms(),M(e,"class","col-span-full border-0 border-t border-t-gray-400 h-0 w-full"),M(i,"class","text-lg text-gray-300 font-bold"),M(a,"class","text-lg text-gray-300 font-bold")},m(p,_){I(p,e,_),I(p,n,_),I(p,i,_),E(i,r),I(p,o,_),I(p,a,_),E(a,c),I(p,u,_);for(let m=0;m<d.length;m+=1)d[m].m(p,_);I(p,f,_)},p(p,_){if(_[0]&2&&s!==(s=p[9].get(p[83].category)[0]+"")&&nt(r,s),_[0]&2&&l!==(l=p[83].round+"")&&nt(c,l),_[0]&32794){h=p[83].times;let m;for(m=0;m<h.length;m+=1){const v=rS(p,h,m);d[m]?d[m].p(v,_):(d[m]=dS(v),d[m].c(),d[m].m(f.parentNode,f))}for(;m<d.length;m+=1)d[m].d(1);d.length=h.length}},d(p){p&&O(e),p&&O(n),p&&O(i),p&&O(o),p&&O(a),p&&O(u),en(d,p),p&&O(f)}}}function mS(t){let e,n,i=t[80].contestant+"",s,r,o,a,l,c;a=new Vi({props:{class:"text-gray-400 cursor-pointer",text:t[80].cnt.expanded?"Contraer":"Expandir",position:"top",$$slots:{default:[I$]},$$scope:{ctx:t}}});let u=t[80].cnt.expanded&&fS(t);return{c(){e=D("div"),n=D("h2"),s=ye(i),r=z(),o=D("div"),ce(a.$$.fragment),l=z(),u&&u.c(),M(n,"class","text-2xl text-green-400 font-bold"),M(o,"class","options absolute right-4 top-2 flex"),M(e,"class","bg-white bg-opacity-10 rounded-md p-4 shadow-sm mb-8 mx-4 relative")},m(f,h){I(f,e,h),E(e,n),E(n,s),E(e,r),E(e,o),ae(a,o,null),E(e,l),u&&u.m(e,null),c=!0},p(f,h){(!c||h[0]&2)&&i!==(i=f[80].contestant+"")&&nt(s,i);const d={};h[0]&2&&(d.text=f[80].cnt.expanded?"Contraer":"Expandir"),h[0]&2|h[2]&536870912&&(d.$$scope={dirty:h,ctx:f}),a.$set(d),f[80].cnt.expanded?u?u.p(f,h):(u=fS(f),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(f){c||(P(a.$$.fragment,f),c=!0)},o(f){H(a.$$.fragment,f),c=!1},d(f){f&&O(e),le(a),u&&u.d()}}}function gS(t){let e,n=t[60].name+"",i,s,r,o=t[60].Ao5+"",a,l,c,u=t[60].best+"",f;return{c(){e=D("span"),i=ye(n),s=z(),r=D("span"),a=ye(o),l=z(),c=D("span"),f=ye(u),M(e,"class","text-lg")},m(h,d){I(h,e,d),E(e,i),I(h,s,d),I(h,r,d),E(r,a),I(h,l,d),I(h,c,d),E(c,f)},p(h,d){d[0]&1&&n!==(n=h[60].name+"")&&nt(i,n),d[0]&1&&o!==(o=h[60].Ao5+"")&&nt(a,o),d[0]&1&&u!==(u=h[60].best+"")&&nt(f,u)},d(h){h&&O(e),h&&O(s),h&&O(r),h&&O(l),h&&O(c)}}}function _S(t){let e,n,i=t[77]+1+"",s,r,o,a,l,c,u,f,h,d=t[75],p=[];for(let _=0;_<d.length;_+=1)p[_]=gS(nS(t,d,_));return{c(){e=D("h2"),n=ye("Ronda "),s=ye(i),r=z(),o=D("div"),a=D("span"),a.textContent="Nombre",l=z(),c=D("span"),c.textContent="Ao5",u=z(),f=D("span"),f.textContent="Mejor tiempo",h=z();for(let _=0;_<p.length;_+=1)p[_].c();M(e,"class","text-xl text-gray-300 font-bold text-center "+(t[77]?"mt-8":"mt-2")),M(a,"class","font-bold text-xl text-blue-400"),M(c,"class","font-bold text-xl text-blue-400"),M(f,"class","font-bold text-xl text-blue-400"),M(o,"class","result-table-c text-gray-300 mt-4 border-t border-gray-500 pt-2 svelte-14tnh9")},m(_,m){I(_,e,m),E(e,n),E(e,s),I(_,r,m),I(_,o,m),E(o,a),E(o,l),E(o,c),E(o,u),E(o,f),E(o,h);for(let v=0;v<p.length;v+=1)p[v].m(o,null)},p(_,m){if(m[0]&16385){d=_[75];let v;for(v=0;v<d.length;v+=1){const g=nS(_,d,v);p[v]?p[v].p(g,m):(p[v]=gS(g),p[v].c(),p[v].m(o,null))}for(;v<p.length;v+=1)p[v].d(1);p.length=d.length}},d(_){_&&O(e),_&&O(r),_&&O(o),en(p,_)}}}function vS(t){let e,n,i=t[9].get(t[72])[0]+"",s,r,o,a=t[14](t[72]),l=[];for(let c=0;c<a.length;c+=1)l[c]=_S(tS(t,a,c));return{c(){e=D("div"),n=D("h2"),s=ye(i),r=z();for(let c=0;c<l.length;c+=1)l[c].c();o=z(),M(n,"class","text-2xl text-center text-green-400 font-bold"),M(e,"class","bg-white bg-opacity-10 rounded-md p-4 shadow-sm mb-8 mx-4 relative")},m(c,u){I(c,e,u),E(e,n),E(n,s),E(e,r);for(let f=0;f<l.length;f+=1)l[f].m(e,null);E(e,o)},p(c,u){if(u[0]&1&&i!==(i=c[9].get(c[72])[0]+"")&&nt(s,i),u[0]&16385){a=c[14](c[72]);let f;for(f=0;f<a.length;f+=1){const h=tS(c,a,f);l[f]?l[f].p(h,u):(l[f]=_S(h),l[f].c(),l[f].m(e,o))}for(;f<l.length;f+=1)l[f].d(1);l.length=a.length}},d(c){c&&O(e),en(l,c)}}}function bS(t){let e,n,i,s,r=t[0],o=[];for(let l=0;l<r.length;l+=1)o[l]=yS(cS(t,r,l));const a=l=>H(o[l],1,1,()=>{o[l]=null});return{c(){e=D("h2"),e.textContent="Rondas por categor\xEDas",n=z(),i=D("div");for(let l=0;l<o.length;l+=1)o[l].c();M(e,"class","text-2xl text-center font-bold mb-2 mt-6 text-gray-300"),M(i,"id","rounds-container"),M(i,"class","text-gray-300 svelte-14tnh9")},m(l,c){I(l,e,c),I(l,n,c),I(l,i,c);for(let u=0;u<o.length;u+=1)o[u].m(i,null);s=!0},p(l,c){if(c[0]&66081){r=l[0];let u;for(u=0;u<r.length;u+=1){const f=cS(l,r,u);o[u]?(o[u].p(f,c),P(o[u],1)):(o[u]=yS(f),o[u].c(),P(o[u],1),o[u].m(i,null))}for(at(),u=r.length;u<o.length;u+=1)a(u);lt()}},i(l){if(!s){for(let c=0;c<r.length;c+=1)P(o[c]);s=!0}},o(l){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)H(o[c]);s=!1},d(l){l&&O(e),l&&O(n),l&&O(i),en(o,l)}}}function yS(t){let e,n,i=t[9].get(t[69])[0]+"",s,r,o,a,l,c,u,f;function h(p){t[28](p,t[69])}let d={class:"bg-transparent",inpClass:"text-center",type:"number",min:"1",max:"10"};return t[5].rounds[t[69]]!==void 0&&(d.value=t[5].rounds[t[69]]),l=new oi({props:d}),wt.push(()=>Nt(l,"value",h)),l.$on("change",t[16]),{c(){e=D("div"),n=D("span"),s=ye(i),r=z(),o=D("span"),o.textContent="Rounds",a=z(),ce(l.$$.fragment),u=z(),M(e,"class","card w-24 h-32 grid place-items-center bg-white bg-opacity-10 rounded-md shadow-md")},m(p,_){I(p,e,_),E(e,n),E(n,s),E(e,r),E(e,o),E(e,a),ae(l,e,null),E(e,u),f=!0},p(p,_){t=p,(!f||_[0]&1)&&i!==(i=t[9].get(t[69])[0]+"")&&nt(s,i);const m={};!c&&_[0]&33&&(c=!0,m.value=t[5].rounds[t[69]],It(()=>c=!1)),l.$set(m)},i(p){f||(P(l.$$.fragment,p),f=!0)},o(p){H(l.$$.fragment,p),f=!1},d(p){p&&O(e),le(l)}}}function N$(t){let e,n;return e=new Bv({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function B$(t){let e,n;return e=new Nv({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function F$(t){let e,n,i,s,r,o;const a=[B$,N$],l=[];function c(f,h){return f[60].expanded?0:1}n=c(t),i=l[n]=a[n](t);function u(){return t[29](t[60],t[61],t[62])}return{c(){e=D("div"),i.c(),M(e,"class","w-8 h-8 rounded-full grid place-items-center transition-all duration-200 hover:bg-gray-700 hover:text-gray-200 ")},m(f,h){I(f,e,h),l[n].m(e,null),s=!0,r||(o=tt(e,"click",u),r=!0)},p(f,h){t=f;let d=n;n=c(t),n!==d&&(at(),H(l[d],1,1,()=>{l[d]=null}),lt(),i=l[n],i||(i=l[n]=a[n](t),i.c()),P(i,1),i.m(e,null))},i(f){s||(P(i),s=!0)},o(f){H(i),s=!1},d(f){f&&O(e),l[n].d(),r=!1,o()}}}function z$(t){let e,n,i,s,r;n=new Eg({props:{width:"1.2rem",height:"1.2rem"}});function o(){return t[30](t[62])}return{c(){e=D("div"),ce(n.$$.fragment),M(e,"class","w-8 h-8 rounded-full grid place-items-center transition-all duration-200 hover:bg-red-700 hover:text-gray-200 ")},m(a,l){I(a,e,l),ae(n,e,null),i=!0,s||(r=tt(e,"click",o),s=!0)},p(a,l){t=a},i(a){i||(P(n.$$.fragment,a),i=!0)},o(a){H(n.$$.fragment,a),i=!1},d(a){a&&O(e),le(n),s=!1,r()}}}function U$(t){let e,n=t[60].fullname+"",i,s,r=t[60].oid+"",o,a,l=t[60].age+"",c,u;return{c(){e=D("h2"),i=ye(n),s=ye(" ("),o=ye(r),a=ye("), "),c=ye(l),u=ye(" a\xF1os."),M(e,"class","text-gray-300 font-bold text-center")},m(f,h){I(f,e,h),E(e,i),E(e,s),E(e,o),E(e,a),E(e,c),E(e,u)},p(f,h){h[0]&32&&n!==(n=f[60].fullname+"")&&nt(i,n),h[0]&32&&r!==(r=f[60].oid+"")&&nt(o,r),h[0]&32&&l!==(l=f[60].age+"")&&nt(c,l)},i:Ve,o:Ve,d(f){f&&O(e)}}}function H$(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w,x,S,T,A,C,k,L,F,U,N,B,W,ee,K,ge;function se(R){t[31](R,t[60])}let X={class:"bg-gray-600 w-80 text-gray-300"};t[60].fullname!==void 0&&(X.value=t[60].fullname),s=new oi({props:X}),wt.push(()=>Nt(s,"value",se));function q(R){t[32](R,t[60])}let Y={items:["Hombre","Mujer"],transform:rQ,class:"border border-gray-400 text-gray-300 rounded-md"};t[60].gender!==void 0&&(Y.value=t[60].gender),c=new ks({props:Y}),wt.push(()=>Nt(c,"value",q));function $(R){t[33](R,t[60])}let ze={class:"bg-gray-600 w-80 text-gray-300"};t[60].oid!==void 0&&(ze.value=t[60].oid),_=new oi({props:ze}),wt.push(()=>Nt(_,"value",$));function _e(R){t[34](R,t[60])}let pe={class:"bg-gray-600 w-20 text-gray-300",type:"number",min:"10",max:"100"};t[60].age!==void 0&&(pe.value=t[60].age),y=new oi({props:pe}),wt.push(()=>Nt(y,"value",_e));function Te(R){t[35](R,t[60])}let De={class:"bg-gray-600 w-80 text-gray-300"};t[60].otherData!==void 0&&(De.value=t[60].otherData),C=new Nh({props:De}),wt.push(()=>Nt(C,"value",Te));let je=t[8],de=[];for(let R=0;R<je.length;R+=1)de[R]=wS(lS(t,je,R));const Ae=R=>H(de[R],1,1,()=>{de[R]=null});let Oe=m2,Ye=[];for(let R=0;R<Oe.length;R+=1)Ye[R]=xS(aS(t,Oe,R));const fe=R=>H(Ye[R],1,1,()=>{Ye[R]=null});return{c(){e=D("div"),n=D("span"),n.textContent="Nombre completo",i=z(),ce(s.$$.fragment),o=z(),a=D("span"),a.textContent="Sexo",l=z(),ce(c.$$.fragment),f=z(),h=D("div"),d=D("span"),d.textContent="Identificaci\xF3n oficial",p=z(),ce(_.$$.fragment),v=z(),g=D("span"),g.textContent="Edad",b=z(),ce(y.$$.fragment),x=z(),S=D("div"),T=D("span"),T.textContent="Otros datos",A=z(),ce(C.$$.fragment),L=z(),F=D("div"),U=D("span"),U.textContent="Modalidades:",N=z();for(let R=0;R<de.length;R+=1)de[R].c();B=z(),W=D("div"),ee=D("span"),ee.textContent="Roles:",K=z();for(let R=0;R<Ye.length;R+=1)Ye[R].c();M(n,"class","text-gray-300 font-bold flex items-center"),M(a,"class","text-gray-300 font-bold flex items-center ml-4"),M(e,"class","flex gap-2"),M(d,"class","text-gray-300 font-bold flex items-center"),M(g,"class","text-gray-300 font-bold flex items-center ml-4"),M(h,"class","flex gap-2 mt-4"),M(T,"class","text-gray-300 font-bold flex items-center"),M(S,"class","flex gap-2 mt-4"),M(U,"class","text-gray-300 font-bold flex items-center"),M(F,"class","flex gap-2 my-10 flex-wrap justify-around"),M(ee,"class","text-gray-300 font-bold flex items-center"),M(W,"class","flex gap-2 mt-4")},m(R,V){I(R,e,V),E(e,n),E(e,i),ae(s,e,null),E(e,o),E(e,a),E(e,l),ae(c,e,null),I(R,f,V),I(R,h,V),E(h,d),E(h,p),ae(_,h,null),E(h,v),E(h,g),E(h,b),ae(y,h,null),I(R,x,V),I(R,S,V),E(S,T),E(S,A),ae(C,S,null),I(R,L,V),I(R,F,V),E(F,U),E(F,N);for(let ne=0;ne<de.length;ne+=1)de[ne].m(F,null);I(R,B,V),I(R,W,V),E(W,ee),E(W,K);for(let ne=0;ne<Ye.length;ne+=1)Ye[ne].m(W,null);ge=!0},p(R,V){t=R;const ne={};!r&&V[0]&32&&(r=!0,ne.value=t[60].fullname,It(()=>r=!1)),s.$set(ne);const he={};!u&&V[0]&32&&(u=!0,he.value=t[60].gender,It(()=>u=!1)),c.$set(he);const ie={};!m&&V[0]&32&&(m=!0,ie.value=t[60].oid,It(()=>m=!1)),_.$set(ie);const ue={};!w&&V[0]&32&&(w=!0,ue.value=t[60].age,It(()=>w=!1)),y.$set(ue);const Re={};if(!k&&V[0]&32&&(k=!0,Re.value=t[60].otherData,It(()=>k=!1)),C.$set(Re),V[0]&8480){je=t[8];let Ue;for(Ue=0;Ue<je.length;Ue+=1){const Ee=lS(t,je,Ue);de[Ue]?(de[Ue].p(Ee,V),P(de[Ue],1)):(de[Ue]=wS(Ee),de[Ue].c(),P(de[Ue],1),de[Ue].m(F,null))}for(at(),Ue=je.length;Ue<de.length;Ue+=1)Ae(Ue);lt()}if(V[0]&32){Oe=m2;let Ue;for(Ue=0;Ue<Oe.length;Ue+=1){const Ee=aS(t,Oe,Ue);Ye[Ue]?(Ye[Ue].p(Ee,V),P(Ye[Ue],1)):(Ye[Ue]=xS(Ee),Ye[Ue].c(),P(Ye[Ue],1),Ye[Ue].m(W,null))}for(at(),Ue=Oe.length;Ue<Ye.length;Ue+=1)fe(Ue);lt()}},i(R){if(!ge){P(s.$$.fragment,R),P(c.$$.fragment,R),P(_.$$.fragment,R),P(y.$$.fragment,R),P(C.$$.fragment,R);for(let V=0;V<je.length;V+=1)P(de[V]);for(let V=0;V<Oe.length;V+=1)P(Ye[V]);ge=!0}},o(R){H(s.$$.fragment,R),H(c.$$.fragment,R),H(_.$$.fragment,R),H(y.$$.fragment,R),H(C.$$.fragment,R),de=de.filter(Boolean);for(let V=0;V<de.length;V+=1)H(de[V]);Ye=Ye.filter(Boolean);for(let V=0;V<Ye.length;V+=1)H(Ye[V]);ge=!1},d(R){R&&O(e),le(s),le(c),R&&O(f),R&&O(h),le(_),le(y),R&&O(x),R&&O(S),le(C),R&&O(L),R&&O(F),en(de,R),R&&O(B),R&&O(W),en(Ye,R)}}}function V$(t){let e,n=t[66][0]+"",i,s,r,o;function a(){return t[36](t[60],t[66],t[61],t[62])}return{c(){e=D("span"),i=ye(n),s=z(),M(e,"class","mod flex w-max svelte-14tnh9"),bt(e,"selected",lv(t[60].categories,t[66][1]))},m(l,c){I(l,e,c),E(e,i),I(l,s,c),r||(o=tt(e,"click",a),r=!0)},p(l,c){t=l,c[0]&288&&bt(e,"selected",lv(t[60].categories,t[66][1]))},d(l){l&&O(e),l&&O(s),r=!1,o()}}}function wS(t){let e,n;return e=new Vi({props:{text:"Toca para activar o desactivar",position:"top",$$slots:{default:[V$]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s[0]&32|s[2]&536870912&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function G$(t){let e,n=t[63]+"",i,s,r,o;function a(){return t[37](t[60],t[65],t[61],t[62])}return{c(){e=D("span"),i=ye(n),s=z(),M(e,"class","role svelte-14tnh9"),bt(e,"selected",t[60].role&1<<t[65])},m(l,c){I(l,e,c),E(e,i),I(l,s,c),r||(o=tt(e,"click",a),r=!0)},p(l,c){t=l,c[0]&32&&bt(e,"selected",t[60].role&1<<t[65])},d(l){l&&O(e),l&&O(s),r=!1,o()}}}function xS(t){let e,n;return e=new Vi({props:{text:"Toca para activar o desactivar",position:"top",$$slots:{default:[G$]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s[0]&32|s[2]&536870912&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function MS(t){let e,n,i,s,r,o,a,l,c,u;i=new Vi({props:{class:"text-gray-400 cursor-pointer",text:t[60].expanded?"Contraer":"Expandir",position:"top",$$slots:{default:[F$]},$$scope:{ctx:t}}}),r=new Vi({props:{class:"text-gray-400 cursor-pointer",text:"Eliminar",position:"top",$$slots:{default:[z$]},$$scope:{ctx:t}}});const f=[H$,U$],h=[];function d(p,_){return p[60].expanded?0:1}return a=d(t),l=h[a]=f[a](t),{c(){e=D("div"),n=D("div"),ce(i.$$.fragment),s=z(),ce(r.$$.fragment),o=z(),l.c(),c=z(),M(n,"class","options absolute right-4 flex"),M(e,"class","bg-white bg-opacity-10 rounded-md p-4 shadow-sm mb-8 mx-4 relative")},m(p,_){I(p,e,_),E(e,n),ae(i,n,null),E(n,s),ae(r,n,null),E(e,o),h[a].m(e,null),E(e,c),u=!0},p(p,_){const m={};_[0]&32&&(m.text=p[60].expanded?"Contraer":"Expandir"),_[0]&32|_[2]&536870912&&(m.$$scope={dirty:_,ctx:p}),i.$set(m);const v={};_[2]&536870912&&(v.$$scope={dirty:_,ctx:p}),r.$set(v);let g=a;a=d(p),a===g?h[a].p(p,_):(at(),H(h[g],1,1,()=>{h[g]=null}),lt(),l=h[a],l?l.p(p,_):(l=h[a]=f[a](p),l.c()),P(l,1),l.m(e,c))},i(p){u||(P(i.$$.fragment,p),P(r.$$.fragment,p),P(l),u=!0)},o(p){H(i.$$.fragment,p),H(r.$$.fragment,p),H(l),u=!1},d(p){p&&O(e),le(i),le(r),h[a].d()}}}function W$(t){let e,n=t[5].status==="editing"?"ejecuci\xF3n":"edici\xF3n",i;return{c(){e=ye("Cambiar a "),i=ye(n)},m(s,r){I(s,e,r),I(s,i,r)},p(s,r){r[0]&32&&n!==(n=s[5].status==="editing"?"ejecuci\xF3n":"edici\xF3n")&&nt(i,n)},d(s){s&&O(e),s&&O(i)}}}function j$(t){let e,n;return e=new At({props:{class:"bg-orange-800 text-gray-300",$$slots:{default:[q$]},$$scope:{ctx:t}}}),e.$on("click",t[17]),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s[2]&536870912&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Y$(t){let e,n;return e=new At({props:{class:"bg-blue-800 text-gray-300",$$slots:{default:[X$]},$$scope:{ctx:t}}}),e.$on("click",t[11]),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s[2]&536870912&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function q$(t){let e;return{c(){e=ye("Generar scrambles")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function X$(t){let e;return{c(){e=ye("Agregar persona")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function Z$(t){let e;return{c(){e=ye("Guardar")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function J$(t){let e;return{c(){e=ye("Salir")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function K$(t){let e;return{c(){e=ye("Asignar")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function $$(t){let e,n,i;return e=new Oa({}),{c(){ce(e.$$.fragment),n=ye(" Cerrar")},m(s,r){ae(e,s,r),I(s,n,r),i=!0},i(s){i||(P(e.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),i=!1},d(s){le(e,s),s&&O(n)}}}function Q$(t){let e;return{c(){e=ye("+2")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function eQ(t){let e;return{c(){e=ye("DNF")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function tQ(t){let e;return{c(){e=ye("Sin penalizaci\xF3n")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function nQ(t){let e,n,i=xt(t[4].time,!0,!0)+"",s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w,x,S,T;function A(k){t[43](k)}let C={class:"w-[20ch]",focus:t[3]};return t[4].comments!==void 0&&(C.value=t[4].comments),c=new oi({props:C}),wt.push(()=>Nt(c,"value",A)),c.$on("UENTER",t[20]),h=new At({props:{$$slots:{default:[K$]},$$scope:{ctx:t}}}),h.$on("click",t[20]),v=new At({props:{flat:!0,$$slots:{default:[$$]},$$scope:{ctx:t}}}),v.$on("click",t[44]),b=new At({props:{flat:!0,class:t[4].penalty===ct.P2?"text-red-500":"",$$slots:{default:[Q$]},$$scope:{ctx:t}}}),b.$on("click",t[45]),w=new At({props:{flat:!0,class:t[4].penalty===ct.DNF?"text-red-500":"",$$slots:{default:[eQ]},$$scope:{ctx:t}}}),w.$on("click",t[46]),S=new At({props:{flat:!0,class:t[4].penalty===ct.NONE?"text-green-500":"",$$slots:{default:[tQ]},$$scope:{ctx:t}}}),S.$on("click",t[47]),{c(){e=D("div"),n=D("h2"),s=ye(i),r=z(),o=D("div"),a=D("span"),a.textContent="Time",l=z(),ce(c.$$.fragment),f=z(),ce(h.$$.fragment),d=z(),p=D("span"),p.innerHTML=`El tiempo debe darse en el formato de los timers pero sin s\xEDmbolos. Por ejemplo
        <mark>1:23.45</mark> en el timer, se debe escribir como <mark>12345</mark>.`,_=z(),m=D("div"),ce(v.$$.fragment),g=z(),ce(b.$$.fragment),y=z(),ce(w.$$.fragment),x=z(),ce(S.$$.fragment),M(n,"class","m-1 w-full text-center text-gray-300 text-2xl font-bold"),M(o,"class","flex w-full gap-4 items-center justify-center"),M(p,"class","w-full max-w-[40ch] text-justify text-gray-500 italic mt-4"),M(e,"class","flex flex-col justify-between items-center text-gray-400 m-2"),M(m,"class","mt-2 flex justify-center")},m(k,L){I(k,e,L),E(e,n),E(n,s),E(e,r),E(e,o),E(o,a),E(o,l),ae(c,o,null),E(o,f),ae(h,o,null),E(e,d),E(e,p),I(k,_,L),I(k,m,L),ae(v,m,null),E(m,g),ae(b,m,null),E(m,y),ae(w,m,null),E(m,x),ae(S,m,null),T=!0},p(k,L){(!T||L[0]&16)&&i!==(i=xt(k[4].time,!0,!0)+"")&&nt(s,i);const F={};L[0]&8&&(F.focus=k[3]),!u&&L[0]&16&&(u=!0,F.value=k[4].comments,It(()=>u=!1)),c.$set(F);const U={};L[2]&536870912&&(U.$$scope={dirty:L,ctx:k}),h.$set(U);const N={};L[2]&536870912&&(N.$$scope={dirty:L,ctx:k}),v.$set(N);const B={};L[0]&16&&(B.class=k[4].penalty===ct.P2?"text-red-500":""),L[2]&536870912&&(B.$$scope={dirty:L,ctx:k}),b.$set(B);const W={};L[0]&16&&(W.class=k[4].penalty===ct.DNF?"text-red-500":""),L[2]&536870912&&(W.$$scope={dirty:L,ctx:k}),w.$set(W);const ee={};L[0]&16&&(ee.class=k[4].penalty===ct.NONE?"text-green-500":""),L[2]&536870912&&(ee.$$scope={dirty:L,ctx:k}),S.$set(ee)},i(k){T||(P(c.$$.fragment,k),P(h.$$.fragment,k),P(v.$$.fragment,k),P(b.$$.fragment,k),P(w.$$.fragment,k),P(S.$$.fragment,k),T=!0)},o(k){H(c.$$.fragment,k),H(h.$$.fragment,k),H(v.$$.fragment,k),H(b.$$.fragment,k),H(w.$$.fragment,k),H(S.$$.fragment,k),T=!1},d(k){k&&O(e),le(c),le(h),k&&O(_),k&&O(m),le(v),le(b),le(w),le(S)}}}function iQ(t){let e,n,i,s,r,o,a;const l=[C$,k$],c=[];function u(d,p){return d[5]?0:1}n=u(t),i=c[n]=l[n](t);function f(d){t[49](d)}let h={onClose:t[18],$$slots:{default:[nQ]},$$scope:{ctx:t}};return t[3]!==void 0&&(h.show=t[3]),r=new Ma({props:h}),t[48](r),wt.push(()=>Nt(r,"show",f)),{c(){e=D("main"),i.c(),s=z(),ce(r.$$.fragment),M(e,"class","container-mini pt-4 svelte-14tnh9")},m(d,p){I(d,e,p),c[n].m(e,null),E(e,s),ae(r,e,null),a=!0},p(d,p){let _=n;n=u(d),n===_?c[n].p(d,p):(at(),H(c[_],1,1,()=>{c[_]=null}),lt(),i=c[n],i?i.p(d,p):(i=c[n]=l[n](d),i.c()),P(i,1),i.m(e,s));const m={};p[0]&28|p[2]&536870912&&(m.$$scope={dirty:p,ctx:d}),!o&&p[0]&8&&(o=!0,m.show=d[3],It(()=>o=!1)),r.$set(m)},i(d){a||(P(i),P(r.$$.fragment,d),a=!0)},o(d){H(i),H(r.$$.fragment,d),a=!1},d(d){d&&O(e),c[n].d(),t[48](null),le(r)}}}function lv(t,e){return t.indexOf(e)>-1}function sQ(t){let e=[];return e.push(t%100),t=~~(t/100),e.push(t%100),t=~~(t/100),e.push(t),e[2]*6e4+e[1]*1e3+e[0]*10}const rQ=t=>t;function oQ(t,e,n){const i=Ys.getInstance(),s=la[0][1].map(re=>[re[0].replace(/(\d)x(\d)x(\d)(.*)$/,"$1x$2$4"),re[1],re[2],re[3],re[4]]),r=la[0][1].map(re=>[re[0],re[1],re[2],re[3],re[4]]),o=new Map,a=new Map,l=new Map;s.forEach(re=>o.set(re[1],[re[0],re[2],re[3],re[4]])),r.forEach(re=>a.set(re[1],[re[0],re[2],re[3],re[4]]));let c=[],u=[],f,h,d,p=!1,_,m=null,v=[],g={count:0,total:0,sheets:[],clear:()=>g.sheets.length=g.count=g.total=0,addSheet:re=>{g.sheets.push(re),g.count+=1,g.count===g.total&&g.save()},addCount:re=>g.count+=re,addTotal:re=>g.total+=re,save:()=>{i.zipPDF({name:(m||{name:"Contest"}).name,files:g.sheets})}};function b(){n(5,m={_id:"",name:"",place:"",date:"",inscriptionCost:0,inscriptionI:"",inscriptionF:"",contestants:[],rounds:{},status:"editing"})}function y(re,we){return{date:0,penalty:ct.NONE,scramble:"",selected:!1,session:"",time:re,mode:we}}function w(){m==null||m.contestants.push({fullname:"",age:15,categories:[],gender:"Hombre",oid:"",role:AB.CONTESTANT,expanded:!0,results:{},otherData:""}),n(5,m),L()}function x(re){m==null||m.contestants.splice(re,1),n(5,m),L()}function S(re,we){let Me=re.categories;lv(Me,we)?(Me.splice(Me.indexOf(we),1),delete re.results[we]):(Me.push(we),re.results[we]=new Array(m==null?void 0:m.rounds[we]).fill(0).map((Ne,Ze)=>({mode:we,round:Ze+1,solves:[0,0,0,0,0].map(pt=>y(pt,we))}))),n(5,m),L()}function T(re){return re.reduce((we,Me)=>[Me.penalty===ct.DNF?we[0]:Me.time<we[0].time?Me:we[0],Me.penalty===ct.DNF?we[1]:Me.time>we[1].time?Me:we[1]],[y(1/0,""),y(-1/0,"")])}function A(re){return m.contestants.reduce((we,Me)=>(Me.categories.indexOf(re)>-1&&Me.results[re].forEach(Ne=>{Array.isArray(we[Ne.round-1])||(we[Ne.round-1]=[]),we[Ne.round-1].push({name:Me.fullname,Ao5:$f(5,Ne.solves,kr.SEQUENTIAL)[4],best:C(Ne.solves.map(Ze=>Ze.penalty===ct.DNF?1/0:Ze.time).sort((Ze,pt)=>Ze-pt)[0])})}),we),[]).map(we=>we.sort((Me,Ne)=>Me.Ao5-Ne.Ao5).map(Me=>(Me.Ao5=C(Me.Ao5),Me)))}function C(re){return re?xt(re,!0):"--"}function k(re){return{time:re.penalty===ct.DNF?"DNF":C(re.time),p2:re.penalty===ct.P2}}function L(){l.clear(),n(0,c=[...m.contestants.map(we=>we.categories).reduce((we,Me)=>(Me.forEach(Ne=>{we.add(Ne),l.set(Ne,~~l.get(Ne)+1)}),we),new Set)]);let re={};for(let we=0,Me=c.length;we<Me;we+=1)Object.keys(m.rounds).indexOf(c[we])>-1?re[c[we]]=m.rounds[c[we]]:re[c[we]]=1;n(5,m.rounds=re,m);for(let we=0,Me=m.contestants.length;we<Me;we+=1){let Ne=m.contestants[we],Ze=Ne.categories;for(let pt=0,sn=Ze.length;pt<sn;pt+=1){const Gt=Ze[pt];if(c.indexOf(Gt)<0)delete Ne.results[Gt];else{let Wt=Ne.results[Gt].slice(0,m.rounds[Gt]);for(let gn=Wt.length,jt=m.rounds[Gt];gn<jt;gn+=1)Wt.push({round:gn+1,solves:new Array(5).fill(0).map(Jt=>y(Jt,Gt))});Ne.results[Gt]=Wt}}}n(1,u=m.contestants.reduce((we,Me)=>{let Ne={contestant:Me.fullname,results:[],cnt:Me};return Object.keys(Me.results).forEach(Ze=>{Me.results[Ze].forEach(sn=>{Ne.results.push({category:Ze,round:sn.round,times:[...sn.solves,{time:C($f(5,sn.solves,kr.SEQUENTIAL)[4])},...T(sn.solves).map(k)]})})}),we.push(Ne),we},[]))}function F(re,we,Me){const Ne=1.291666666666667,Ze=21.6,pt=Ze*Ne,sn=1,Gt=(pt-re.length*sn)*(/^(666|777)wca$/.test(we)?.8:.9)/re.length;let Wt=[],gn=o.get(we)[2],jt=o.get(we)[3];const Jt=function(){i.generatePDF({width:Ze,height:pt,mode:a.get(we)[0],round:Me,html:`
        <!DOCTYPE html>
          <html>
          <body>
            <h1 style="text-align: center;">${m.name}</h1>
            <p style="text-align: center;">${(a.get(we)||[])[0]} Ronda ${Me}</p>
            <table>
              ${Wt.map((Kt,kn)=>`
                  ${kn+2===Wt.length?'<tr><td colspan="3" style="text-align: center;"><h3>Extra scrambles</h3></td></tr>':""}
                  <tr>
                    <td style="width: 20px; padding-inline: 16px; text-align: center;">
                      ${kn+2>=Wt.length?"E"+(kn-Wt.length+3):kn+1}
                    </td>
                    <td>
                      <div class="scramble">
                        ${re[kn].replaceAll("<br>","").split(/\s+/).reduce((xn,Qe,qt)=>[...xn,...(Qe+" ".repeat(jt[qt%jt.length]-Qe.length)).split("")],[]).map((xn,Qe)=>`<span class="${~~(Qe/gn)%2===0?"":"bg-gray"}">${xn}</span>`).join("")}
                      </div>
                    </td>
                    <td style="width: 0cm;"><img src="${Kt}" style="height: ${Gt}cm;"></td>
                  </tr>
                `).join(" ")}
            </table>
            <p style="text-align: center;">Generated by CubeDB</p>
          </body>
          <style>
            @font-face {
              font-family: 'Cqmono';
              src: url('http://127.0.0.1:5000/assets/fonts/CQMono.otf');
            }

            * {
              font-family: "Arial";
            }

            table, th, td {
              border: 1px solid black;
              border-collapse: collapse;
              width: 100%;
            }

            .scramble {
              display: grid;
              grid-template-columns: repeat(${gn}, 1fr);
              padding-inline: 1rem;
            }

            .scramble span {
              font-size: ${oA(we==="sqrs"?40:gn,30,48,1.2,.85)}rem;
            }

            .scramble span.bg-gray {
              background: #ededff;
            }
          </style>
        </html>`})};let Yt=re.map(Kt=>wr.fromSequence(Kt,{...Kc.get(we),rounded:!0,headless:!0}));Dl(Yt,1e3,!0,!1,!0).then(Kt=>{let kn=Kt.subscribe(xn=>{if(console.log("GETTING IMG: ",xn),xn!=="__initial__"){if(xn===null)return kn();Wt=xn,console.log("IMAGE READY, DRAWING"),Jt()}})})}async function U(){const re=await u4(()=>import("./scrambleWorker.538b51c9.js"),[],import.meta.url),we=new re.default;we.onmessage=Ne=>{const{data:Ze}=Ne;if(Ze.type==="done"){let pt=n(5,m.rounds[Ze.mode]--,m);n(5,m.rounds[Ze.mode]=Math.max(1,m.rounds[Ze.mode]),m),F(Ze.batch,Ze.mode,pt)}};const Me=["666wca","777wca"];c.map(Ne=>{for(let Ze=1,pt=m.rounds[Ne];Ze<=pt;Ze+=1)g.addTotal(1),we.postMessage([Ne,a.get(Ne)[1],Me.indexOf(Ne)>-1?5:7])})}function N(){n(3,p=!1),L()}function B(re){re===ct.P2?_.penalty!=ct.P2&&n(4,_.time+=2e3,_):_.penalty===ct.P2&&n(4,_.time-=2e3,_),n(4,_.penalty=re,_)}function W(){/^\s*\d{1,6}\s*$/.test(_.comments)?n(4,_.time=sQ(+_.comments),_):n(4,_.comments="",_)}function ee(){m._id?i.updateContest(m):(delete m._id,i.addContest(m))}gs(()=>{f=i.anySub.subscribe(re=>{if(!!re)switch(re.type){case"generate-pdf":{console.log("GENERATE_PDF"),g.addSheet(re.data);break}case"generate-pdf-error":{console.error("Error generating PDF");break}case"zip-pdf":{console.log("ZIP_PDF"),i.revealFile(re.data);break}case"zip-pdf-error":{console.error("Error generating ZIP file");break}}}),h=i.contestSub.subscribe(re=>{if(!!re)switch(re.type){case"get-contests":{let we=re.data||[];n(6,v=we);break}case"add-contest":{n(5,m._id=re.data._id,m);break}}}),i.getContests()}),er(()=>{f(),h()});function K(re){t.$$.not_equal(m.name,re)&&(m.name=re,n(5,m))}function ge(re){t.$$.not_equal(m.place,re)&&(m.place=re,n(5,m))}function se(re){t.$$.not_equal(m.date,re)&&(m.date=re,n(5,m))}function X(re){t.$$.not_equal(m.inscriptionI,re)&&(m.inscriptionI=re,n(5,m))}function q(re){t.$$.not_equal(m.inscriptionF,re)&&(m.inscriptionF=re,n(5,m))}function Y(re){t.$$.not_equal(m.inscriptionCost,re)&&(m.inscriptionCost=re,n(5,m))}function $(re,we){t.$$.not_equal(m.rounds[we],re)&&(m.rounds[we]=re,n(5,m))}const ze=(re,we,Me)=>n(5,we[Me].expanded=!re.expanded,m),_e=re=>x(re);function pe(re,we){t.$$.not_equal(we.fullname,re)&&(we.fullname=re,n(5,m))}function Te(re,we){t.$$.not_equal(we.gender,re)&&(we.gender=re,n(5,m))}function De(re,we){t.$$.not_equal(we.oid,re)&&(we.oid=re,n(5,m))}function je(re,we){t.$$.not_equal(we.age,re)&&(we.age=re,n(5,m))}function de(re,we){t.$$.not_equal(we.otherData,re)&&(we.otherData=re,n(5,m))}const Ae=(re,we,Me,Ne)=>{S(re,we[1]),n(5,Me[Ne].categories=re.categories,m)},Oe=(re,we,Me,Ne)=>n(5,Me[Ne].role^=1<<we,m),Ye=(re,we,Me)=>n(1,we[Me].cnt.expanded=!re.cnt.expanded,u),fe=re=>{n(4,_=re),n(4,_.comments=xt(re.time,!0).replace(/\D/g,""),_),n(3,p=!0)},R=()=>n(5,m.status=m.status==="editing"?"running":"editing",m),V=()=>{n(5,m=null),i.getContests()},ne=re=>{n(5,m=re),L()};function he(re){t.$$.not_equal(_.comments,re)&&(_.comments=re,n(4,_))}const ie=()=>d.close(),ue=()=>B(ct.P2),Re=()=>B(ct.DNF),Ue=()=>B(ct.NONE);function Ee(re){wt[re?"unshift":"push"](()=>{d=re,n(2,d)})}function Se(re){p=re,n(3,p)}return[c,u,d,p,_,m,v,i,s,o,b,w,x,S,A,k,L,U,N,B,W,ee,K,ge,se,X,q,Y,$,ze,_e,pe,Te,De,je,de,Ae,Oe,Ye,fe,R,V,ne,he,ie,ue,Re,Ue,Ee,Se]}class aQ extends dt{constructor(e){super(),ht(this,e,oQ,iQ,ft,{},null,[-1,-1,-1])}}let lQ=[0,0,70,0,0,10,0,40,60,80,100],cQ=["sqrs","clkwca","mgmp","222so","skbso","pyrso","333","444wca","555wca","666wca","777wca"];function SC(t){let e=[11,11,12,16,44,60,80,100],n=[11,11,15,22,46,62,80,100];if(t.indexOf("/")>-1)return{mode:"sqrs",len:0};if(t.indexOf("++")>-1||t.indexOf("--")>-1)return{mode:"mgmp",len:70};if(t.indexOf("ALL")>-1)return{mode:"clkwca",len:0};let i=t.split(" ").length,s=-1;if(i===11)s=/^[LRBU\s']+$/.test(t)?4:3;else for(let r=0,o=e.length;r<o;r+=1)if(e[r]<=i&&i<=n[r]){s=r;break}return{mode:cQ[s+3],len:lQ[s+3]}}function $m(){return{calcAoX:kr.SEQUENTIAL,genImage:!0,hasInspection:!0,inspection:15,scrambleAfterCancel:!0,showElapsedTime:!0}}const uQ=new Map([["333","333"]]);class fQ{constructor(){ke(this,"modes");this.modes=["From backup","From txt"]}get name(){return"Twisty Timer"}toCubeDB(e,n){let i=Em(n||0,0,this.modes.length-1);return i===0?this.fromBackup(e):i===1?this.fromTXT(e):null}fromBackup(e){let n=new Map,i={sessions:[],solves:[]},s=e.split(`
`).slice(1);for(let r=0,o=s.length;r<o;r+=1){let a=s[r].trim().split(";");if(a.length<7)continue;let l=a.shift().slice(1,-1),c=a.shift().slice(1,-1),u=+a.shift().slice(1,-1),f=+a.shift().slice(1,-1),h=a.shift().slice(1,-1),d=+a.shift().slice(1,-1),p=a.join(";").slice(1,-1);n.has(c)||(n.set(c,crypto.randomUUID()),i.sessions.push({_id:n.get(c),name:c,settings:$m()})),i.solves.push({date:f,penalty:[ct.NONE,ct.P2,ct.DNF][d],scramble:h,selected:!1,session:n.get(c),time:u,_id:crypto.randomUUID(),comments:p,mode:uQ.get(l)})}return i}fromTXT(e){let n={sessions:[],solves:[]},i=e.split(`
`),s={_id:crypto.randomUUID(),name:"My session",settings:$m()};n.sessions.push(s);for(let r=0,o=i.length;r<o;r+=1){let a=i[r].trim().split(";");if(a.length<3)continue;let l=+a.shift().slice(1,-1)*1e3,c=a.shift().slice(1,-1),u=rt(a.shift().slice(1,-1)).toDate().getDate(),f=a.shift(),h=SC(c);n.solves.push({date:u,penalty:/DNF/.test(f)?ct.DNF:ct.NONE,scramble:c,selected:!1,session:s._id,time:l,_id:crypto.randomUUID(),comments:"",mode:h.mode,len:h.len})}return n}fromCubeDB(e,n){let i=Em(n||0,0,this.modes.length-1);return i===0?this.toBackup(e):i===1?this.toTXT(e):""}toBackup(e){return"<not implemented yet>"}toTXT(e){return"<not implemented yet>"}}class hQ{constructor(){ke(this,"modes");this.modes=["Normal"]}get name(){return"CSTimer"}toCubeDB(e){let n=JSON.parse(e),i=Object.keys(n).filter(o=>o!="properties"),s={sessions:[],solves:[]},r=JSON.parse(n.properties.sessionData);for(let o=0,a=i.length;o<a;o+=1){let l=r[(o+1).toString()],c=i[o],u=typeof l.name=="number"?c:l.name.trim(),f=l.opt.scrType,h=crypto.randomUUID(),d=n[c];s.sessions.push({_id:h,name:u,settings:$m()});for(let p=0,_=d.length;p<_;p+=1){let m=SC(d[p][1]);s.solves.push({date:d[p][3]*1e3,penalty:d[p][0][0]<0?ct.DNF:ct.NONE,scramble:d[p][1],selected:!1,session:h,time:d[p][0][1],comments:d[p][2],mode:f||m.mode,len:m.len})}}return s}fromCubeDB(e){return""}}const dQ=new Map([["222","222so"],["222oh","222so"],["333","333"],["333bl","333ni"],["333oh","333oh"],["333mirror","333"],["444","444wca"],["555","555wca"],["666","666wca"],["777","777wca"],["clock","clkwca"],["skewb","skbso"],["pyram","pyrso"],["minx","mgmp"],["sq1","sqrs"]]);class pQ{constructor(){ke(this,"modes");this.modes=["Normal"]}get name(){return"CubeDesk"}toCubeDB(e){let{solves:n,sessions:i}=JSON.parse(e);return{sessions:i.map(s=>({_id:s.id,name:s.name,settings:$m()})),solves:n.filter(s=>s.cube_type!="other").map(s=>({date:s.started_at,penalty:s.dnf?ct.DNF:s.plus_two?ct.P2:ct.NONE,scramble:s.scramble,selected:!1,session:s.session_id,time:s.time*1e3,comments:s.notes||"",mode:dQ.get(s.cube_type)}))}}fromCubeDB(e){return""}}const Zc=[new fQ,new hQ,new pQ];function SS(t,e,n){const i=t.slice();return i[20]=e[n],i[22]=n,i}function ES(t,e,n){const i=t.slice();return i[20]=e[n],i[23]=e,i[24]=n,i}function mQ(t){let e;return{c(){e=ye("Import")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function gQ(t){let e;return{c(){e=ye("Export")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function _Q(t){let e;return{c(){e=D("section")},m(n,i){I(n,e,i)},p:Ve,i:Ve,o:Ve,d(n){n&&O(e)}}}function vQ(t){let e,n,i,s,r,o,a,l,c,u,f,h,d;function p(b){t[12](b)}let _={items:Zc,label:EQ,transform:TQ};t[2]!==void 0&&(_.value=t[2]),r=new ks({props:_}),wt.push(()=>Nt(r,"value",p));let m=Zc[t[2]].modes.length>1&&TS(t);c=new At({props:{class:"bg-purple-800 text-gray-300",file:!0,$$slots:{default:[bQ]},$$scope:{ctx:t}}}),c.$on("files",t[14]);let v=t[0]&&AS(t),g=t[0]&&kS(t);return{c(){e=D("section"),n=D("div"),i=D("span"),i.textContent="From:",s=z(),ce(r.$$.fragment),a=z(),m&&m.c(),l=z(),ce(c.$$.fragment),u=z(),v&&v.c(),f=z(),g&&g.c(),h=ms(),M(n,"class","flex mx-auto items-center gap-2 justify-center")},m(b,y){I(b,e,y),E(e,n),E(n,i),E(n,s),ae(r,n,null),E(n,a),m&&m.m(n,null),E(n,l),ae(c,n,null),E(n,u),v&&v.m(n,null),I(b,f,y),g&&g.m(b,y),I(b,h,y),d=!0},p(b,y){const w={};!o&&y&4&&(o=!0,w.value=b[2],It(()=>o=!1)),r.$set(w),Zc[b[2]].modes.length>1?m?(m.p(b,y),y&4&&P(m,1)):(m=TS(b),m.c(),P(m,1),m.m(n,l)):m&&(at(),H(m,1,1,()=>{m=null}),lt());const x={};y&33554432&&(x.$$scope={dirty:y,ctx:b}),c.$set(x),b[0]?v?(v.p(b,y),y&1&&P(v,1)):(v=AS(b),v.c(),P(v,1),v.m(n,null)):v&&(at(),H(v,1,1,()=>{v=null}),lt()),b[0]?g?(g.p(b,y),y&1&&P(g,1)):(g=kS(b),g.c(),P(g,1),g.m(h.parentNode,h)):g&&(at(),H(g,1,1,()=>{g=null}),lt())},i(b){d||(P(r.$$.fragment,b),P(m),P(c.$$.fragment,b),P(v),P(g),d=!0)},o(b){H(r.$$.fragment,b),H(m),H(c.$$.fragment,b),H(v),H(g),d=!1},d(b){b&&O(e),le(r),m&&m.d(),le(c),v&&v.d(),b&&O(f),g&&g.d(b),b&&O(h)}}}function TS(t){let e,n,i;function s(o){t[13](o)}let r={items:Zc[t[2]].modes,transform:AQ};return t[3]!==void 0&&(r.value=t[3]),e=new ks({props:r}),wt.push(()=>Nt(e,"value",s)),{c(){ce(e.$$.fragment)},m(o,a){ae(e,o,a),i=!0},p(o,a){const l={};a&4&&(l.items=Zc[o[2]].modes),!n&&a&8&&(n=!0,l.value=o[3],It(()=>n=!1)),e.$set(l)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){H(e.$$.fragment,o),i=!1},d(o){le(e,o)}}}function bQ(t){let e;return{c(){e=ye("Select file")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function AS(t){let e,n,i,s,r,o;return e=new At({props:{class:"bg-orange-800 text-gray-300",$$slots:{default:[yQ]},$$scope:{ctx:t}}}),e.$on("click",t[8]),i=new At({props:{class:"bg-orange-800 text-gray-300",$$slots:{default:[wQ]},$$scope:{ctx:t}}}),i.$on("click",t[9]),r=new At({props:{class:"bg-green-800 text-gray-300",$$slots:{default:[xQ]},$$scope:{ctx:t}}}),r.$on("click",t[7]),{c(){ce(e.$$.fragment),n=z(),ce(i.$$.fragment),s=z(),ce(r.$$.fragment)},m(a,l){ae(e,a,l),I(a,n,l),ae(i,a,l),I(a,s,l),ae(r,a,l),o=!0},p(a,l){const c={};l&33554432&&(c.$$scope={dirty:l,ctx:a}),e.$set(c);const u={};l&33554432&&(u.$$scope={dirty:l,ctx:a}),i.$set(u);const f={};l&33554432&&(f.$$scope={dirty:l,ctx:a}),r.$set(f)},i(a){o||(P(e.$$.fragment,a),P(i.$$.fragment,a),P(r.$$.fragment,a),o=!0)},o(a){H(e.$$.fragment,a),H(i.$$.fragment,a),H(r.$$.fragment,a),o=!1},d(a){le(e,a),a&&O(n),le(i,a),a&&O(s),le(r,a)}}}function yQ(t){let e;return{c(){e=ye("Select All")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function wQ(t){let e;return{c(){e=ye("Select None")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function xQ(t){let e;return{c(){e=ye("Save")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function kS(t){let e,n,i,s,r,o=t[0].sessions,a=[];for(let h=0;h<o.length;h+=1)a[h]=CS(ES(t,o,h));const l=h=>H(a[h],1,1,()=>{a[h]=null});let c=t[1]&&LS(t),u=t[4].slice(0,50),f=[];for(let h=0;h<u.length;h+=1)f[h]=PS(SS(t,u,h));return{c(){e=D("ul");for(let h=0;h<a.length;h+=1)a[h].c();n=z(),i=D("ul"),c&&c.c(),s=z();for(let h=0;h<f.length;h+=1)f[h].c();M(e,"class","flex flex-wrap mt-4 gap-2 justify-center"),$i(e,"row-gap","1rem"),M(i,"class","text-center mt-4 max-h-96 overflow-scroll")},m(h,d){I(h,e,d);for(let p=0;p<a.length;p+=1)a[p].m(e,null);I(h,n,d),I(h,i,d),c&&c.m(i,null),E(i,s);for(let p=0;p<f.length;p+=1)f[p].m(i,null);r=!0},p(h,d){if(d&3){o=h[0].sessions;let p;for(p=0;p<o.length;p+=1){const _=ES(h,o,p);a[p]?(a[p].p(_,d),P(a[p],1)):(a[p]=CS(_),a[p].c(),P(a[p],1),a[p].m(e,null))}for(at(),p=o.length;p<a.length;p+=1)l(p);lt()}if(h[1]?c?c.p(h,d):(c=LS(h),c.c(),c.m(i,s)):c&&(c.d(1),c=null),d&16){u=h[4].slice(0,50);let p;for(p=0;p<u.length;p+=1){const _=SS(h,u,p);f[p]?f[p].p(_,d):(f[p]=PS(_),f[p].c(),f[p].m(i,null))}for(;p<f.length;p+=1)f[p].d(1);f.length=u.length}},i(h){if(!r){for(let d=0;d<o.length;d+=1)P(a[d]);r=!0}},o(h){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)H(a[d]);r=!1},d(h){h&&O(e),en(a,h),h&&O(n),h&&O(i),c&&c.d(),en(f,h)}}}function MQ(t){let e=t[20].name+"",n;return{c(){n=ye(e)},m(i,s){I(i,n,s)},p(i,s){s&1&&e!==(e=i[20].name+"")&&nt(n,e)},d(i){i&&O(n)}}}function CS(t){let e,n,i,s,r,o,a;function l(f){t[15](f,t[20])}let c={};t[20].editing!==void 0&&(c.checked=t[20].editing),n=new xc({props:c}),wt.push(()=>Nt(n,"checked",l));function u(){return t[16](t[20])}return r=new At({props:{class:`p-2 bg-blue-700 bg-opacity-40 text-gray-300 rounded-md font-bold shadow-md cursor-pointer\r
              `+(t[20]===t[1]?"bg-opacity-100 underline":"")+`\r
              `,$$slots:{default:[MQ]},$$scope:{ctx:t}}}),r.$on("click",u),{c(){e=D("li"),ce(n.$$.fragment),s=z(),ce(r.$$.fragment),o=z(),M(e,"class","flex gap-1 mr-2")},m(f,h){I(f,e,h),ae(n,e,null),E(e,s),ae(r,e,null),E(e,o),a=!0},p(f,h){t=f;const d={};!i&&h&1&&(i=!0,d.checked=t[20].editing,It(()=>i=!1)),n.$set(d);const p={};h&3&&(p.class=`p-2 bg-blue-700 bg-opacity-40 text-gray-300 rounded-md font-bold shadow-md cursor-pointer\r
              `+(t[20]===t[1]?"bg-opacity-100 underline":"")+`\r
              `),h&33554433&&(p.$$scope={dirty:h,ctx:t}),r.$set(p)},i(f){a||(P(n.$$.fragment,f),P(r.$$.fragment,f),a=!0)},o(f){H(n.$$.fragment,f),H(r.$$.fragment,f),a=!1},d(f){f&&O(e),le(n),le(r)}}}function LS(t){let e,n,i=t[4].length+"",s,r,o=t[4].length>50?"(showing only 50)":"",a;return{c(){e=D("span"),n=ye("Total: "),s=ye(i),r=z(),a=ye(o),M(e,"class","text-xl text-gray-300")},m(l,c){I(l,e,c),E(e,n),E(e,s),E(e,r),E(e,a)},p(l,c){c&16&&i!==(i=l[4].length+"")&&nt(s,i),c&16&&o!==(o=l[4].length>50?"(showing only 50)":"")&&nt(a,o)},d(l){l&&O(e)}}}function PS(t){let e,n,i=t[22]+1+"",s,r,o,a=(f2.get(t[20].mode||"")||"--")+"",l,c,u,f=xt(t[20].time,!0,!0)+"",h,d,p,_=t[20].scramble+"",m,v;return{c(){e=D("li"),n=D("span"),s=ye(i),r=z(),o=D("span"),l=ye(a),c=z(),u=D("span"),h=ye(f),d=z(),p=D("span"),m=ye(_),v=z(),M(p,"class","overflow-hidden text-ellipsis whitespace-nowrap col-span-3 text-left"),M(e,"class","grid grid-cols-6 border-none border-b border-gray-500")},m(g,b){I(g,e,b),E(e,n),E(n,s),E(e,r),E(e,o),E(o,l),E(e,c),E(e,u),E(u,h),E(e,d),E(e,p),E(p,m),E(e,v)},p(g,b){b&16&&a!==(a=(f2.get(g[20].mode||"")||"--")+"")&&nt(l,a),b&16&&f!==(f=xt(g[20].time,!0,!0)+"")&&nt(h,f),b&16&&_!==(_=g[20].scramble+"")&&nt(m,_)},d(g){g&&O(e)}}}function SQ(t){let e,n,i,s,r,o,a,l,c,u,f;r=new At({props:{class:"bg-"+(t[5]?"green":"gray")+"-800 text-gray-300",$$slots:{default:[mQ]},$$scope:{ctx:t}}}),r.$on("click",t[10]),a=new At({props:{class:"bg-"+(t[5]?"gray":"green")+"-800 text-gray-300",$$slots:{default:[gQ]},$$scope:{ctx:t}}}),a.$on("click",t[11]);const h=[vQ,_Q],d=[];function p(_,m){return _[5]?0:1}return c=p(t),u=d[c]=h[c](t),{c(){e=D("main"),n=D("h1"),n.textContent="Import/Export",i=z(),s=D("section"),ce(r.$$.fragment),o=z(),ce(a.$$.fragment),l=z(),u.c(),M(n,"class","text-center text-3xl text-gray-300"),M(s,"class","flex items-center gap-2 justify-center my-4"),M(e,"class","container-mini mx-auto max-w-4xl bg-white bg-opacity-10 rounded-md text-gray-400 p-4")},m(_,m){I(_,e,m),E(e,n),E(e,i),E(e,s),ae(r,s,null),E(s,o),ae(a,s,null),E(e,l),d[c].m(e,null),f=!0},p(_,[m]){const v={};m&32&&(v.class="bg-"+(_[5]?"green":"gray")+"-800 text-gray-300"),m&33554432&&(v.$$scope={dirty:m,ctx:_}),r.$set(v);const g={};m&32&&(g.class="bg-"+(_[5]?"gray":"green")+"-800 text-gray-300"),m&33554432&&(g.$$scope={dirty:m,ctx:_}),a.$set(g);let b=c;c=p(_),c===b?d[c].p(_,m):(at(),H(d[b],1,1,()=>{d[b]=null}),lt(),u=d[c],u?u.p(_,m):(u=d[c]=h[c](_),u.c()),P(u,1),u.m(e,null))},i(_){f||(P(r.$$.fragment,_),P(a.$$.fragment,_),P(u),f=!0)},o(_){H(r.$$.fragment,_),H(a.$$.fragment,_),H(u),f=!1},d(_){_&&O(e),le(r),le(a),d[c].d()}}}const EQ=t=>t.name,TQ=(t,e)=>e,AQ=(t,e)=>e;function kQ(t,e,n){let i=Ys.getInstance(),s=0,r=0,o=null,a,l=[],c,u=!0,f=0;function h(S){let T=new FileReader;T.addEventListener("loadend",A=>{n(0,o=Zc[s].toCubeDB(T.result,r)),n(0,o.sessions=o.sessions.filter(C=>o==null?void 0:o.solves.reduce((k,L)=>k+(L.session===C._id?1:0),0)),o),o.sessions.length===0?n(0,o=null):(o.sessions.forEach(C=>C.editing=!0),n(1,a=o.sessions[0]))}),T.readAsText(S[0])}function d(){if(o)for(let S=0,T=o.sessions.length;S<T;S+=1){let A=o.sessions[S];!A.editing||(A.tName=A._id,A._id="",f+=1,i.addSession(A))}}function p(){o==null||o.sessions.forEach(S=>S.editing=!0),n(0,o)}function _(){o==null||o.sessions.forEach(S=>S.editing=!1),n(0,o)}gs(()=>{c=i.sessSub.subscribe(S=>{if(!!S)switch(S.type){case"add-session":{let T=S.data;if(f-=1,o)for(let A=0,C=o.solves.length;A<C;A+=1){let k=o.solves[A];T.tName===k.session&&(k.session=T._id,i.addSolve(k))}f===0&&n(0,o=null);break}}})}),er(()=>{c()});const m=()=>n(5,u=!0),v=()=>n(5,u=!1);function g(S){s=S,n(2,s)}function b(S){r=S,n(3,r)}const y=S=>h(S.detail);function w(S,T){t.$$.not_equal(T.editing,S)&&(T.editing=S,n(0,o))}const x=S=>console.log(n(1,a=S));return t.$$.update=()=>{t.$$.dirty&3&&n(4,l=(o==null?void 0:o.solves.filter(S=>S.session===(a==null?void 0:a._id)))||[])},[o,a,s,r,l,u,h,d,p,_,m,v,g,b,y,w,x]}class CQ extends dt{constructor(e){super(),ht(this,e,kQ,SQ,ft,{})}}const eo=Object.create(null);eo.open="0";eo.close="1";eo.ping="2";eo.pong="3";eo.message="4";eo.upgrade="5";eo.noop="6";const Up=Object.create(null);Object.keys(eo).forEach(t=>{Up[eo[t]]=t});const LQ={type:"error",data:"parser error"},PQ=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",RQ=typeof ArrayBuffer=="function",DQ=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,EC=({type:t,data:e},n,i)=>PQ&&e instanceof Blob?n?i(e):RS(e,i):RQ&&(e instanceof ArrayBuffer||DQ(e))?n?i(e):RS(new Blob([e]),i):i(eo[t]+(e||"")),RS=(t,e)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];e("b"+(i||""))},n.readAsDataURL(t)},DS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",af=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<DS.length;t++)af[DS.charCodeAt(t)]=t;const OQ=t=>{let e=t.length*.75,n=t.length,i,s=0,r,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(i=0;i<n;i+=4)r=af[t.charCodeAt(i)],o=af[t.charCodeAt(i+1)],a=af[t.charCodeAt(i+2)],l=af[t.charCodeAt(i+3)],u[s++]=r<<2|o>>4,u[s++]=(o&15)<<4|a>>2,u[s++]=(a&3)<<6|l&63;return c},IQ=typeof ArrayBuffer=="function",TC=(t,e)=>{if(typeof t!="string")return{type:"message",data:AC(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:NQ(t.substring(1),e)}:Up[n]?t.length>1?{type:Up[n],data:t.substring(1)}:{type:Up[n]}:LQ},NQ=(t,e)=>{if(IQ){const n=OQ(t);return AC(n,e)}else return{base64:!0,data:t}},AC=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}},kC=String.fromCharCode(30),BQ=(t,e)=>{const n=t.length,i=new Array(n);let s=0;t.forEach((r,o)=>{EC(r,!1,a=>{i[o]=a,++s===n&&e(i.join(kC))})})},FQ=(t,e)=>{const n=t.split(kC),i=[];for(let s=0;s<n.length;s++){const r=TC(n[s],e);if(i.push(r),r.type==="error")break}return i},CC=4;function mi(t){if(t)return zQ(t)}function zQ(t){for(var e in mi.prototype)t[e]=mi.prototype[e];return t}mi.prototype.on=mi.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};mi.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};mi.prototype.off=mi.prototype.removeListener=mi.prototype.removeAllListeners=mi.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,s=0;s<n.length;s++)if(i=n[s],i===e||i.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};mi.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,s=n.length;i<s;++i)n[i].apply(this,e)}return this};mi.prototype.emitReserved=mi.prototype.emit;mi.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};mi.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Ws=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function LC(t,...e){return e.reduce((n,i)=>(t.hasOwnProperty(i)&&(n[i]=t[i]),n),{})}const UQ=Ws.setTimeout,HQ=Ws.clearTimeout;function Gg(t,e){e.useNativeTimers?(t.setTimeoutFn=UQ.bind(Ws),t.clearTimeoutFn=HQ.bind(Ws)):(t.setTimeoutFn=Ws.setTimeout.bind(Ws),t.clearTimeoutFn=Ws.clearTimeout.bind(Ws))}const VQ=1.33;function GQ(t){return typeof t=="string"?WQ(t):Math.ceil((t.byteLength||t.size)*VQ)}function WQ(t){let e=0,n=0;for(let i=0,s=t.length;i<s;i++)e=t.charCodeAt(i),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(i++,n+=4);return n}class jQ extends Error{constructor(e,n,i){super(e),this.description=n,this.context=i,this.type="TransportError"}}class PC extends mi{constructor(e){super(),this.writable=!1,Gg(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,i){return super.emitReserved("error",new jQ(e,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=TC(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const RC="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),cv=64,YQ={};let OS=0,np=0,IS;function NS(t){let e="";do e=RC[t%cv]+e,t=Math.floor(t/cv);while(t>0);return e}function DC(){const t=NS(+new Date);return t!==IS?(OS=0,IS=t):t+"."+NS(OS++)}for(;np<cv;np++)YQ[RC[np]]=np;function OC(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function qQ(t){let e={},n=t.split("&");for(let i=0,s=n.length;i<s;i++){let r=n[i].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}let IC=!1;try{IC=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const XQ=IC;function NC(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||XQ))return new XMLHttpRequest}catch{}if(!e)try{return new Ws[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function ZQ(){}const JQ=function(){return new NC({xdomain:!1}).responseType!=null}();class KQ extends PC{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let s=location.port;s||(s=i?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port,this.xs=e.secure!==i}const n=e&&e.forceBase64;this.supportsBinary=JQ&&!n}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||n()})),this.writable||(i++,this.once("drain",function(){--i||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};FQ(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,BQ(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const n=this.opts.secure?"https":"http";let i="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=DC()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(n==="https"&&Number(this.opts.port)!==443||n==="http"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port);const s=OC(e),r=this.opts.hostname.indexOf(":")!==-1;return n+"://"+(r?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(s.length?"?"+s:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Wr(this.uri(),e)}doWrite(e,n){const i=this.request({method:"POST",data:e});i.on("success",n),i.on("error",(s,r)=>{this.onError("xhr post error",s,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=e}}class Wr extends mi{constructor(e,n){super(),Gg(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.async=n.async!==!1,this.data=n.data!==void 0?n.data:null,this.create()}create(){const e=LC(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const n=this.xhr=new NC(e);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=Wr.requestsCount++,Wr.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=ZQ,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Wr.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Wr.requestsCount=0;Wr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",BS);else if(typeof addEventListener=="function"){const t="onpagehide"in Ws?"pagehide":"unload";addEventListener(t,BS,!1)}}function BS(){for(let t in Wr.requests)Wr.requests.hasOwnProperty(t)&&Wr.requests[t].abort()}const BC=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0))(),ip=Ws.WebSocket||Ws.MozWebSocket,FS=!0,$Q="arraybuffer",zS=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class QQ extends PC{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,i=zS?{}:LC(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=FS&&!zS?n?new ip(e,n):new ip(e):new ip(e,n,i)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType||$Q,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],s=n===e.length-1;EC(i,this.supportsBinary,r=>{const o={};try{FS&&this.ws.send(r)}catch{}s&&BC(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const n=this.opts.secure?"wss":"ws";let i="";this.opts.port&&(n==="wss"&&Number(this.opts.port)!==443||n==="ws"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=DC()),this.supportsBinary||(e.b64=1);const s=OC(e),r=this.opts.hostname.indexOf(":")!==-1;return n+"://"+(r?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(s.length?"?"+s:"")}check(){return!!ip}}const eee={websocket:QQ,polling:KQ},tee=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,nee=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function uv(t){const e=t,n=t.indexOf("["),i=t.indexOf("]");n!=-1&&i!=-1&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length));let s=tee.exec(t||""),r={},o=14;for(;o--;)r[nee[o]]=s[o]||"";return n!=-1&&i!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=iee(r,r.path),r.queryKey=see(r,r.query),r}function iee(t,e){const n=/\/{2,9}/g,i=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function see(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,s,r){s&&(n[s]=r)}),n}class sa extends mi{constructor(e,n={}){super(),this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=uv(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=uv(n.host).host),Gg(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=qQ(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=CC,n.transport=e,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts.transportOptions[e],this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new eee[e](i)}open(){let e;if(this.opts.rememberUpgrade&&sa.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),i=!1;sa.priorWebsocketSuccess=!1;const s=()=>{i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!i)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;sa.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function r(){i||(i=!0,u(),n.close(),n=null)}const o=f=>{const h=new Error("probe error: "+f);h.transport=n.name,r(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function l(){o("socket closed")}function c(f){n&&f.name!==n.name&&r()}const u=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",s),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",c),n.open()}onOpen(){if(this.readyState="open",sa.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let i=0;i<this.writeBuffer.length;i++){const s=this.writeBuffer[i].data;if(s&&(n+=GQ(s)),i>0&&n>this.maxPayload)return this.writeBuffer.slice(0,i);n+=2}return this.writeBuffer}write(e,n,i){return this.sendPacket("message",e,n,i),this}send(e,n,i){return this.sendPacket("message",e,n,i),this}sendPacket(e,n,i,s){if(typeof n=="function"&&(s=n,n=void 0),typeof i=="function"&&(s=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const r={type:e,data:n,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}onError(e){sa.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let i=0;const s=e.length;for(;i<s;i++)~this.transports.indexOf(e[i])&&n.push(e[i]);return n}}sa.protocol=CC;function ree(t,e="",n){let i=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),i=uv(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+e,i.href=i.protocol+"://"+r+(n&&n.port===i.port?"":":"+i.port),i}const oee=typeof ArrayBuffer=="function",aee=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,FC=Object.prototype.toString,lee=typeof Blob=="function"||typeof Blob<"u"&&FC.call(Blob)==="[object BlobConstructor]",cee=typeof File=="function"||typeof File<"u"&&FC.call(File)==="[object FileConstructor]";function Yb(t){return oee&&(t instanceof ArrayBuffer||aee(t))||lee&&t instanceof Blob||cee&&t instanceof File}function Hp(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,i=t.length;n<i;n++)if(Hp(t[n]))return!0;return!1}if(Yb(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Hp(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Hp(t[n]))return!0;return!1}function uee(t){const e=[],n=t.data,i=t;return i.data=fv(n,e),i.attachments=e.length,{packet:i,buffers:e}}function fv(t,e){if(!t)return t;if(Yb(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=fv(t[i],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=fv(t[i],e));return n}return t}function fee(t,e){return t.data=hv(t.data,e),delete t.attachments,t}function hv(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=hv(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=hv(t[n],e));return t}const hee=5;var mn;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(mn||(mn={}));class dee{constructor(e){this.replacer=e}encode(e){return(e.type===mn.EVENT||e.type===mn.ACK)&&Hp(e)?this.encodeAsBinary({type:e.type===mn.EVENT?mn.BINARY_EVENT:mn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===mn.BINARY_EVENT||e.type===mn.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=uee(e),i=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(i),s}}class qb extends mi{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const i=n.type===mn.BINARY_EVENT;i||n.type===mn.BINARY_ACK?(n.type=i?mn.EVENT:mn.ACK,this.reconstructor=new pee(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Yb(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const i={type:Number(e.charAt(0))};if(mn[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===mn.BINARY_EVENT||i.type===mn.BINARY_ACK){const r=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(r,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(e.charAt(n+1)==="/"){const r=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););i.nsp=e.substring(r,n)}else i.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const r=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}i.id=Number(e.substring(r,n+1))}if(e.charAt(++n)){const r=this.tryParse(e.substr(n));if(qb.isPayloadValid(i.type,r))i.data=r;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case mn.CONNECT:return typeof n=="object";case mn.DISCONNECT:return n===void 0;case mn.CONNECT_ERROR:return typeof n=="string"||typeof n=="object";case mn.EVENT:case mn.BINARY_EVENT:return Array.isArray(n)&&n.length>0;case mn.ACK:case mn.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class pee{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=fee(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const mee=Object.freeze(Object.defineProperty({__proto__:null,protocol:hee,get PacketType(){return mn},Encoder:dee,Decoder:qb},Symbol.toStringTag,{value:"Module"}));function dr(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const gee=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class zC extends mi{constructor(e,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[dr(e,"open",this.onopen.bind(this)),dr(e,"packet",this.onpacket.bind(this)),dr(e,"error",this.onerror.bind(this)),dr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(gee.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:mn.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const o=this.ids++,a=n.pop();this._registerAckCallback(o,a),i.id=o}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,n){var i;const s=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},s);this.acks[e]=(...o)=>{this.io.clearTimeoutFn(r),n.apply(this,[null,...o])}}emitWithAck(e,...n){const i=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((s,r)=>{n.push((o,a)=>i?o?r(o):s(a):s(o)),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const i={id:this.ids++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...r)=>i!==this._queue[0]?void 0:(s!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...r)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(){if(this._queue.length===0)return;const e=this._queue[0];if(e.pending)return;e.pending=!0,e.tryCount++;const n=this.ids;this.ids=e.id,this.flags=e.flags,this.emit.apply(this,e.args),this.ids=n}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:mn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case mn.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case mn.EVENT:case mn.BINARY_EVENT:this.onevent(e);break;case mn.ACK:case mn.BINARY_ACK:this.onack(e);break;case mn.DISCONNECT:this.ondisconnect();break;case mn.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let i=!1;return function(...s){i||(i=!0,n.packet({type:mn.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:mn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,e.data)}}}function Au(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Au.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};Au.prototype.reset=function(){this.attempts=0};Au.prototype.setMin=function(t){this.ms=t};Au.prototype.setMax=function(t){this.max=t};Au.prototype.setJitter=function(t){this.jitter=t};class dv extends mi{constructor(e,n){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Gg(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Au({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||mee;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new sa(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const s=dr(n,"open",function(){i.onopen(),e&&e()}),r=dr(n,"error",o=>{i.cleanup(),i._readyState="closed",this.emitReserved("error",o),e?e(o):i.maybeReconnectOnOpen()});if(this._timeout!==!1){const o=this._timeout;o===0&&s();const a=this.setTimeoutFn(()=>{s(),n.close(),n.emit("error",new Error("timeout"))},o);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}return this.subs.push(s),this.subs.push(r),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(dr(e,"ping",this.onping.bind(this)),dr(e,"data",this.ondata.bind(this)),dr(e,"error",this.onerror.bind(this)),dr(e,"close",this.onclose.bind(this)),dr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){BC(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let i=this.nsps[e];return i||(i=new zC(this,e,n),this.nsps[e]=i),this._autoConnect&&i.connect(),i}_destroy(e){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let i=0;i<n.length;i++)this.engine.write(n[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(function(){clearTimeout(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Zu={};function Vp(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=ree(t,e.path||"/socket.io"),i=n.source,s=n.id,r=n.path,o=Zu[s]&&r in Zu[s].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new dv(i,e):(Zu[s]||(Zu[s]=new dv(i,e)),l=Zu[s]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(Vp,{Manager:dv,Socket:zC,io:Vp,connect:Vp});function _ee(t){let e,n;return{c(){e=ot("svg"),n=ot("path"),M(n,"d","M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){I(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:Ve,o:Ve,d(i){i&&O(e)}}}function vee(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class bee extends dt{constructor(e){super(),ht(this,e,vee,_ee,ft,{size:4,width:0,height:1,color:2,viewBox:3})}}function US(t,e,n){const i=t.slice();return i[42]=e[n],i}function HS(t,e,n){const i=t.slice();return i[45]=e[n],i[47]=n,i}function VS(t,e,n){const i=t.slice();return i[48]=e[n],i}function GS(t,e,n){const i=t.slice();return i[45]=e[n],i[47]=n,i}function WS(t,e,n){const i=t.slice();return i[48]=e[n],i}function jS(t){let e,n,i,s,r;return n=new At({props:{class:"bg-green-700 text-gray-300",$$slots:{default:[yee]},$$scope:{ctx:t}}}),n.$on("click",t[20]),s=new At({props:{class:"bg-blue-700 text-gray-300",$$slots:{default:[wee]},$$scope:{ctx:t}}}),s.$on("click",t[21]),{c(){e=D("div"),ce(n.$$.fragment),i=z(),ce(s.$$.fragment),M(e,"class","flex items-center justify-center gap-4")},m(o,a){I(o,e,a),ae(n,e,null),E(e,i),ae(s,e,null),r=!0},p(o,a){const l={};a[1]&8388608&&(l.$$scope={dirty:a,ctx:o}),n.$set(l);const c={};a[1]&8388608&&(c.$$scope={dirty:a,ctx:o}),s.$set(c)},i(o){r||(P(n.$$.fragment,o),P(s.$$.fragment,o),r=!0)},o(o){H(n.$$.fragment,o),H(s.$$.fragment,o),r=!1},d(o){o&&O(e),le(n),le(s)}}}function yee(t){let e;return{c(){e=ye("Create")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function wee(t){let e;return{c(){e=ye("Join")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function YS(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g;function b(S){t[22](S)}let y={size:50,focus:!0};t[4]!==void 0&&(y.value=t[4]),r=new oi({props:y}),wt.push(()=>Nt(r,"value",b));function w(S){t[23](S)}let x={class:"w-full",items:t[14],label:Bee,transform:Fee};return t[8]!==void 0&&(x.value=t[8]),f=new ks({props:x}),wt.push(()=>Nt(f,"value",w)),_=new At({props:{class:"bg-red-700 text-gray-300",$$slots:{default:[xee]},$$scope:{ctx:t}}}),_.$on("click",t[24]),v=new At({props:{class:"bg-blue-700 text-gray-300",$$slots:{default:[Mee]},$$scope:{ctx:t}}}),v.$on("click",t[25]),{c(){e=D("div"),n=D("span"),n.textContent="Name:",i=z(),s=D("div"),ce(r.$$.fragment),a=z(),l=D("span"),l.textContent="Mode:",c=z(),u=D("div"),ce(f.$$.fragment),d=z(),p=D("div"),ce(_.$$.fragment),m=z(),ce(v.$$.fragment),M(n,"class","col-span-1 flex justify-end items-center"),M(s,"class","col-span-2"),M(l,"class","col-span-1 flex justify-end items-center"),M(u,"class","col-span-2"),M(e,"class","max-w-xs justify-center mx-auto grid gap-4 grid-cols-3 mb-6"),M(p,"class","flex items-center justify-center gap-4")},m(S,T){I(S,e,T),E(e,n),E(e,i),E(e,s),ae(r,s,null),E(e,a),E(e,l),E(e,c),E(e,u),ae(f,u,null),I(S,d,T),I(S,p,T),ae(_,p,null),E(p,m),ae(v,p,null),g=!0},p(S,T){const A={};!o&&T[0]&16&&(o=!0,A.value=S[4],It(()=>o=!1)),r.$set(A);const C={};!h&&T[0]&256&&(h=!0,C.value=S[8],It(()=>h=!1)),f.$set(C);const k={};T[1]&8388608&&(k.$$scope={dirty:T,ctx:S}),_.$set(k);const L={};T[1]&8388608&&(L.$$scope={dirty:T,ctx:S}),v.$set(L)},i(S){g||(P(r.$$.fragment,S),P(f.$$.fragment,S),P(_.$$.fragment,S),P(v.$$.fragment,S),g=!0)},o(S){H(r.$$.fragment,S),H(f.$$.fragment,S),H(_.$$.fragment,S),H(v.$$.fragment,S),g=!1},d(S){S&&O(e),le(r),le(f),S&&O(d),S&&O(p),le(_),le(v)}}}function xee(t){let e;return{c(){e=ye("Back")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function Mee(t){let e;return{c(){e=ye("Create")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function qS(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w,x;function S(k){t[26](k)}let T={size:50,focus:!0};t[4]!==void 0&&(T.value=t[4]),r=new oi({props:T}),wt.push(()=>Nt(r,"value",S));function A(k){t[27](k)}let C={size:50};return t[5]!==void 0&&(C.value=t[5]),f=new oi({props:C}),wt.push(()=>Nt(f,"value",A)),_=new xc({props:{checked:t[2]}}),_.$on("change",t[28]),b=new At({props:{class:"bg-red-700 text-gray-300",$$slots:{default:[See]},$$scope:{ctx:t}}}),b.$on("click",t[29]),w=new At({props:{class:"bg-blue-700 text-gray-300",$$slots:{default:[Eee]},$$scope:{ctx:t}}}),w.$on("click",t[30]),{c(){e=D("div"),n=D("span"),n.textContent="Name:",i=z(),s=D("div"),ce(r.$$.fragment),a=z(),l=D("span"),l.textContent="Game ID:",c=z(),u=D("div"),ce(f.$$.fragment),d=z(),p=D("span"),ce(_.$$.fragment),m=ye(" Join as observer"),v=z(),g=D("div"),ce(b.$$.fragment),y=z(),ce(w.$$.fragment),M(n,"class","col-span-1 flex justify-end items-center"),M(s,"class","col-span-2"),M(l,"class","col-span-1 flex justify-end items-center"),M(u,"class","col-span-2"),M(p,"class","col-span-3 flex justify-center gap-2"),M(e,"class","max-w-xs justify-center mx-auto grid gap-4 grid-cols-3 mb-6"),M(g,"class","flex items-center justify-center gap-4 my-6")},m(k,L){I(k,e,L),E(e,n),E(e,i),E(e,s),ae(r,s,null),E(e,a),E(e,l),E(e,c),E(e,u),ae(f,u,null),E(e,d),E(e,p),ae(_,p,null),E(p,m),I(k,v,L),I(k,g,L),ae(b,g,null),E(g,y),ae(w,g,null),x=!0},p(k,L){const F={};!o&&L[0]&16&&(o=!0,F.value=k[4],It(()=>o=!1)),r.$set(F);const U={};!h&&L[0]&32&&(h=!0,U.value=k[5],It(()=>h=!1)),f.$set(U);const N={};L[0]&4&&(N.checked=k[2]),_.$set(N);const B={};L[1]&8388608&&(B.$$scope={dirty:L,ctx:k}),b.$set(B);const W={};L[1]&8388608&&(W.$$scope={dirty:L,ctx:k}),w.$set(W)},i(k){x||(P(r.$$.fragment,k),P(f.$$.fragment,k),P(_.$$.fragment,k),P(b.$$.fragment,k),P(w.$$.fragment,k),x=!0)},o(k){H(r.$$.fragment,k),H(f.$$.fragment,k),H(_.$$.fragment,k),H(b.$$.fragment,k),H(w.$$.fragment,k),x=!1},d(k){k&&O(e),le(r),le(f),le(_),k&&O(v),k&&O(g),le(b),le(w)}}}function See(t){let e;return{c(){e=ye("Back")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function Eee(t){let e;return{c(){e=ye("Join")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function XS(t){let e,n,i,s,r;return s=new At({props:{class:"bg-red-700 text-gray-300",$$slots:{default:[Tee]},$$scope:{ctx:t}}}),s.$on("click",t[31]),{c(){e=D("h2"),e.textContent="Waiting...",n=z(),i=D("div"),ce(s.$$.fragment),M(e,"class","text-gray-300 text-2xl text-center mb-6"),M(i,"class","flex items-center justify-center gap-4")},m(o,a){I(o,e,a),I(o,n,a),I(o,i,a),ae(s,i,null),r=!0},p(o,a){const l={};a[1]&8388608&&(l.$$scope={dirty:a,ctx:o}),s.$set(l)},i(o){r||(P(s.$$.fragment,o),r=!0)},o(o){H(s.$$.fragment,o),r=!1},d(o){o&&O(e),o&&O(n),o&&O(i),le(s)}}}function Tee(t){let e;return{c(){e=ye("Back")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function ZS(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w,x,S,T,A,C,k,L,F,U,N,B,W;l=new Vi({props:{position:"top",text:"Observers",$$slots:{default:[Aee]},$$scope:{ctx:t}}}),f=new Vi({props:{position:"top",text:"Exit",$$slots:{default:[kee]},$$scope:{ctx:t}}});let ee=t[9]&&JS(t),K=t[7].started&&KS(t),ge=t[3]&&$S(),se=t[7].players,X=[];for(let q=0;q<se.length;q+=1)X[q]=eE(GS(t,se,q));return{c(){e=D("h2"),n=ye(`Game ID:\r
      `),i=D("span"),s=ye(t[5]),r=z(),o=D("ul"),a=D("li"),ce(l.$$.fragment),c=z(),u=D("li"),ce(f.$$.fragment),h=z(),ee&&ee.c(),d=z(),K&&K.c(),p=z(),ge&&ge.c(),_=z(),m=D("ul"),v=D("li"),g=z(),b=D("li"),b.textContent="Player",y=z(),w=D("li"),w.textContent="T1",x=z(),S=D("li"),S.textContent="T2",T=z(),A=D("li"),A.textContent="T3",C=z(),k=D("li"),k.textContent="T4",L=z(),F=D("li"),F.textContent="T5",U=z();for(let q=0;q<X.length;q+=1)X[q].c();M(i,"class","bg-violet-700 text-gray-300 px-2 py-1 rounded-md"),M(e,"class","text-gray-300 text-xl text-center mb-6"),M(a,"class","bg-gray-500 text-gray-300 svelte-ts44cs"),M(u,"class","bg-red-700 text-gray-300 svelte-ts44cs"),M(o,"id","actions"),M(o,"class","absolute top-2 right-2 flex items-center gap-2 svelte-ts44cs"),M(v,"class","header svelte-ts44cs"),M(b,"class","header svelte-ts44cs"),M(w,"class","header svelte-ts44cs"),M(S,"class","header svelte-ts44cs"),M(A,"class","header svelte-ts44cs"),M(k,"class","header svelte-ts44cs"),M(F,"class","header svelte-ts44cs"),M(m,"id","players"),M(m,"class","svelte-ts44cs")},m(q,Y){I(q,e,Y),E(e,n),E(e,i),E(i,s),I(q,r,Y),I(q,o,Y),E(o,a),ae(l,a,null),E(o,c),E(o,u),ae(f,u,null),I(q,h,Y),ee&&ee.m(q,Y),I(q,d,Y),K&&K.m(q,Y),I(q,p,Y),ge&&ge.m(q,Y),I(q,_,Y),I(q,m,Y),E(m,v),E(m,g),E(m,b),E(m,y),E(m,w),E(m,x),E(m,S),E(m,T),E(m,A),E(m,C),E(m,k),E(m,L),E(m,F),E(m,U);for(let $=0;$<X.length;$+=1)X[$].m(m,null);N=!0,B||(W=tt(u,"click",t[19]),B=!0)},p(q,Y){(!N||Y[0]&32)&&nt(s,q[5]);const $={};Y[0]&128|Y[1]&8388608&&($.$$scope={dirty:Y,ctx:q}),l.$set($);const ze={};if(Y[1]&8388608&&(ze.$$scope={dirty:Y,ctx:q}),f.$set(ze),q[9]?ee?(ee.p(q,Y),Y[0]&512&&P(ee,1)):(ee=JS(q),ee.c(),P(ee,1),ee.m(d.parentNode,d)):ee&&(at(),H(ee,1,1,()=>{ee=null}),lt()),q[7].started?K?(K.p(q,Y),Y[0]&128&&P(K,1)):(K=KS(q),K.c(),P(K,1),K.m(p.parentNode,p)):K&&(at(),H(K,1,1,()=>{K=null}),lt()),q[3]?ge||(ge=$S(),ge.c(),ge.m(_.parentNode,_)):ge&&(ge.d(1),ge=null),Y[0]&128){se=q[7].players;let _e;for(_e=0;_e<se.length;_e+=1){const pe=GS(q,se,_e);X[_e]?X[_e].p(pe,Y):(X[_e]=eE(pe),X[_e].c(),X[_e].m(m,null))}for(;_e<X.length;_e+=1)X[_e].d(1);X.length=se.length}},i(q){N||(P(l.$$.fragment,q),P(f.$$.fragment,q),P(ee),P(K),N=!0)},o(q){H(l.$$.fragment,q),H(f.$$.fragment,q),H(ee),H(K),N=!1},d(q){q&&O(e),q&&O(r),q&&O(o),le(l),le(f),q&&O(h),ee&&ee.d(q),q&&O(d),K&&K.d(q),q&&O(p),ge&&ge.d(q),q&&O(_),q&&O(m),en(X,q),B=!1,W()}}}function Aee(t){let e,n,i,s=t[7].observers.length+"",r,o;return n=new bee({props:{size:"1.2rem"}}),{c(){e=D("div"),ce(n.$$.fragment),i=z(),r=ye(s),M(e,"class","flex items-center gap-1")},m(a,l){I(a,e,l),ae(n,e,null),E(e,i),E(e,r),o=!0},p(a,l){(!o||l[0]&128)&&s!==(s=a[7].observers.length+"")&&nt(r,s)},i(a){o||(P(n.$$.fragment,a),o=!0)},o(a){H(n.$$.fragment,a),o=!1},d(a){a&&O(e),le(n)}}}function kee(t){let e,n,i;return n=new Oa({props:{size:"1.2rem"}}),{c(){e=D("div"),ce(n.$$.fragment),M(e,"class","flex items-center")},m(s,r){I(s,e,r),ae(n,e,null),i=!0},p:Ve,i(s){i||(P(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&O(e),le(n)}}}function JS(t){let e,n,i,s;const r=[Lee,Cee],o=[];function a(l,c){return!l[7].started&&l[7].players.length>1?0:1}return e=a(t),n=o[e]=r[e](t),{c(){n.c(),i=ms()},m(l,c){o[e].m(l,c),I(l,i,c),s=!0},p(l,c){let u=e;e=a(l),e===u?o[e].p(l,c):(at(),H(o[u],1,1,()=>{o[u]=null}),lt(),n=o[e],n?n.p(l,c):(n=o[e]=r[e](l),n.c()),P(n,1),n.m(i.parentNode,i))},i(l){s||(P(n),s=!0)},o(l){H(n),s=!1},d(l){o[e].d(l),l&&O(i)}}}function Cee(t){let e;return{c(){e=D("span"),e.textContent="Share the game ID with your friends!",M(e,"class","flex justify-center text-yellow-300")},m(n,i){I(n,e,i)},p:Ve,i:Ve,o:Ve,d(n){n&&O(e)}}}function Lee(t){let e,n;return e=new At({props:{class:"bg-violet-700 text-gray-300 my-8 mx-auto",$$slots:{default:[Pee]},$$scope:{ctx:t}}}),e.$on("click",t[32]),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s[1]&8388608&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Pee(t){let e;return{c(){e=ye("Start!")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function KS(t){let e,n,i;return n=new wk({props:{battle:!0,useScramble:t[6],useMode:t[8],genScramble:!1,enableKeyboard:!(t[11]||t[10]||t[3])}}),n.$on("solve",t[18]),{c(){e=D("div"),ce(n.$$.fragment),M(e,"class","h-96 rounded-md relative")},m(s,r){I(s,e,r),ae(n,e,null),i=!0},p(s,r){const o={};r[0]&64&&(o.useScramble=s[6]),r[0]&256&&(o.useMode=s[8]),r[0]&3080&&(o.enableKeyboard=!(s[11]||s[10]||s[3])),n.$set(o)},i(s){i||(P(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&O(e),le(n)}}}function $S(t){let e;return{c(){e=D("span"),e.textContent="Ending game...",M(e,"class","flex justify-center text-yellow-300")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function QS(t){let e,n=(t[45][1].times[t[48]]===null?"DNF":t[45][1].times[t[48]]?xt(t[45][1].times[t[48]],!0):"-")+"",i;return{c(){e=D("li"),i=ye(n)},m(s,r){I(s,e,r),E(e,i)},p(s,r){r[0]&128&&n!==(n=(s[45][1].times[s[48]]===null?"DNF":s[45][1].times[s[48]]?xt(s[45][1].times[s[48]],!0):"-")+"")&&nt(i,n)},d(s){s&&O(e)}}}function eE(t){let e,n=t[47]+1+"",i,s,r,o=t[45][1].name+"",a,l,c,u=[0,1,2,3,4],f=[];for(let h=0;h<5;h+=1)f[h]=QS(WS(t,u,h));return{c(){e=D("li"),i=ye(n),s=z(),r=D("li"),a=ye(o),l=z();for(let h=0;h<5;h+=1)f[h].c();c=ms(),M(e,"class","text-gray-300")},m(h,d){I(h,e,d),E(e,i),I(h,s,d),I(h,r,d),E(r,a),I(h,l,d);for(let p=0;p<5;p+=1)f[p].m(h,d);I(h,c,d)},p(h,d){if(d[0]&128&&o!==(o=h[45][1].name+"")&&nt(a,o),d[0]&128){u=[0,1,2,3,4];let p;for(p=0;p<5;p+=1){const _=WS(h,u,p);f[p]?f[p].p(_,d):(f[p]=QS(_),f[p].c(),f[p].m(c.parentNode,c))}for(;p<5;p+=1)f[p].d(1)}},d(h){h&&O(e),h&&O(s),h&&O(r),h&&O(l),en(f,h),h&&O(c)}}}function tE(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w,x,S,T,A,C,k=t[7].players,L=[];for(let U=0;U<k.length;U+=1)L[U]=iE(HS(t,k,U));let F=t[9]&&sE(t);return A=new At({props:{class:"bg-red-700 text-gray-300 my-8",$$slots:{default:[Dee]},$$scope:{ctx:t}}}),A.$on("click",t[34]),{c(){e=D("ul"),n=D("li"),i=z(),s=D("li"),s.textContent="Player",r=z(),o=D("li"),o.textContent="T1",a=z(),l=D("li"),l.textContent="T2",c=z(),u=D("li"),u.textContent="T3",f=z(),h=D("li"),h.textContent="T4",d=z(),p=D("li"),p.textContent="T5",_=z(),m=D("li"),m.textContent="Ao5",v=z(),g=D("li"),g.textContent="Best",b=z(),y=D("li"),y.textContent="Worst",w=z();for(let U=0;U<L.length;U+=1)L[U].c();x=z(),S=D("div"),F&&F.c(),T=z(),ce(A.$$.fragment),M(n,"class","header svelte-ts44cs"),M(s,"class","header svelte-ts44cs"),M(o,"class","header svelte-ts44cs"),M(l,"class","header svelte-ts44cs"),M(u,"class","header svelte-ts44cs"),M(h,"class","header svelte-ts44cs"),M(p,"class","header svelte-ts44cs"),M(m,"class","header svelte-ts44cs"),M(g,"class","header svelte-ts44cs"),M(y,"class","header svelte-ts44cs"),M(e,"id","players-gameover"),M(e,"class","svelte-ts44cs"),M(S,"class","flex items-center justify-center gap-4 w-full")},m(U,N){I(U,e,N),E(e,n),E(e,i),E(e,s),E(e,r),E(e,o),E(e,a),E(e,l),E(e,c),E(e,u),E(e,f),E(e,h),E(e,d),E(e,p),E(e,_),E(e,m),E(e,v),E(e,g),E(e,b),E(e,y),E(e,w);for(let B=0;B<L.length;B+=1)L[B].m(e,null);I(U,x,N),I(U,S,N),F&&F.m(S,null),E(S,T),ae(A,S,null),C=!0},p(U,N){if(N[0]&128){k=U[7].players;let W;for(W=0;W<k.length;W+=1){const ee=HS(U,k,W);L[W]?L[W].p(ee,N):(L[W]=iE(ee),L[W].c(),L[W].m(e,null))}for(;W<L.length;W+=1)L[W].d(1);L.length=k.length}U[9]?F?(F.p(U,N),N[0]&512&&P(F,1)):(F=sE(U),F.c(),P(F,1),F.m(S,T)):F&&(at(),H(F,1,1,()=>{F=null}),lt());const B={};N[1]&8388608&&(B.$$scope={dirty:N,ctx:U}),A.$set(B)},i(U){C||(P(F),P(A.$$.fragment,U),C=!0)},o(U){H(F),H(A.$$.fragment,U),C=!1},d(U){U&&O(e),en(L,U),U&&O(x),U&&O(S),F&&F.d(),le(A)}}}function nE(t){let e,n=(t[45][1].times[t[48]]===null?"DNF":t[45][1].times[t[48]]?xt(t[45][1].times[t[48]],!0):"-")+"",i;return{c(){e=D("li"),i=ye(n)},m(s,r){I(s,e,r),E(e,i)},p(s,r){r[0]&128&&n!==(n=(s[45][1].times[s[48]]===null?"DNF":s[45][1].times[s[48]]?xt(s[45][1].times[s[48]],!0):"-")+"")&&nt(i,n)},d(s){s&&O(e)}}}function iE(t){let e,n=t[47]+1+"",i,s,r,o=t[45][1].name+"",a,l,c,u,f=xt(t[45][1].times[5],!0)+"",h,d,p,_=xt(t[45][1].times[6],!0)+"",m,v,g,b=xt(t[45][1].times[7],!0)+"",y,w,x=[0,1,2,3,4],S=[];for(let T=0;T<5;T+=1)S[T]=nE(VS(t,x,T));return{c(){e=D("li"),i=ye(n),s=z(),r=D("li"),a=ye(o),l=z();for(let T=0;T<5;T+=1)S[T].c();c=z(),u=D("li"),h=ye(f),d=z(),p=D("li"),m=ye(_),v=z(),g=D("li"),y=ye(b),w=z(),M(e,"class","header svelte-ts44cs"),M(u,"class","text-blue-400"),M(p,"class","text-green-600"),M(g,"class","text-orange-600")},m(T,A){I(T,e,A),E(e,i),I(T,s,A),I(T,r,A),E(r,a),I(T,l,A);for(let C=0;C<5;C+=1)S[C].m(T,A);I(T,c,A),I(T,u,A),E(u,h),I(T,d,A),I(T,p,A),E(p,m),I(T,v,A),I(T,g,A),E(g,y),E(g,w)},p(T,A){if(A[0]&128&&o!==(o=T[45][1].name+"")&&nt(a,o),A[0]&128){x=[0,1,2,3,4];let C;for(C=0;C<5;C+=1){const k=VS(T,x,C);S[C]?S[C].p(k,A):(S[C]=nE(k),S[C].c(),S[C].m(c.parentNode,c))}for(;C<5;C+=1)S[C].d(1)}A[0]&128&&f!==(f=xt(T[45][1].times[5],!0)+"")&&nt(h,f),A[0]&128&&_!==(_=xt(T[45][1].times[6],!0)+"")&&nt(m,_),A[0]&128&&b!==(b=xt(T[45][1].times[7],!0)+"")&&nt(y,b)},d(T){T&&O(e),T&&O(s),T&&O(r),T&&O(l),en(S,T),T&&O(c),T&&O(u),T&&O(d),T&&O(p),T&&O(v),T&&O(g)}}}function sE(t){let e,n;return e=new At({props:{class:"bg-violet-700 text-gray-300 my-8",$$slots:{default:[Ree]},$$scope:{ctx:t}}}),e.$on("click",t[33]),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,s){const r={};s[1]&8388608&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Ree(t){let e;return{c(){e=ye("Rematch")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function Dee(t){let e;return{c(){e=ye("Exit")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function rE(t){let e,n,i,s,r;return s=new At({props:{class:"bg-red-700 text-gray-300",$$slots:{default:[Oee]},$$scope:{ctx:t}}}),s.$on("click",t[35]),{c(){e=D("h2"),e.textContent="Error",n=z(),i=D("div"),ce(s.$$.fragment),M(e,"class","text-gray-300 text-2xl text-center mb-6"),M(i,"class","flex items-center justify-center gap-4")},m(o,a){I(o,e,a),I(o,n,a),I(o,i,a),ae(s,i,null),r=!0},p(o,a){const l={};a[1]&8388608&&(l.$$scope={dirty:a,ctx:o}),s.$set(l)},i(o){r||(P(s.$$.fragment,o),r=!0)},o(o){H(s.$$.fragment,o),r=!1},d(o){o&&O(e),o&&O(n),o&&O(i),le(s)}}}function Oee(t){let e;return{c(){e=ye("Back")},m(n,i){I(n,e,i)},d(n){n&&O(e)}}}function oE(t){let e,n=t[42]+"",i;return{c(){e=D("li"),i=ye(n)},m(s,r){I(s,e,r),E(e,i)},p(s,r){r[0]&4096&&n!==(n=s[42]+"")&&nt(i,n)},d(s){s&&O(e)}}}function Iee(t){let e,n,i=t[13].get(t[0])+"",s,r,o,a,l,c,u,f,h,d,p,_,m,v=t[0]==="idle"&&jS(t),g=t[0]==="create"&&YS(t),b=t[0]==="join"&&qS(t),y=t[0]==="waiting"&&XS(t),w=t[0]==="play"&&ZS(t),x=t[0]==="gameover"&&tE(t),S=t[0]==="error"&&rE(t),T=t[12],A=[];for(let C=0;C<T.length;C+=1)A[C]=oE(US(t,T,C));return{c(){e=D("div"),n=D("h1"),s=ye(i),r=z(),v&&v.c(),o=z(),g&&g.c(),a=z(),b&&b.c(),l=z(),y&&y.c(),c=z(),w&&w.c(),u=z(),x&&x.c(),f=z(),S&&S.c(),h=z(),d=D("ul"),p=D("li"),p.textContent="Event list",_=z();for(let C=0;C<A.length;C+=1)A[C].c();M(n,"class","text-gray-300 text-3xl text-center mb-6"),M(p,"class","text-xl text-violet-400 font-bold"),M(d,"class","w-full text-white grid mt-8 items-center justify-center"),M(e,"class","container-mini bg-white bg-opacity-10 m-4 p-4 rounded-md pb-6 text-gray-400 relative")},m(C,k){I(C,e,k),E(e,n),E(n,s),E(e,r),v&&v.m(e,null),E(e,o),g&&g.m(e,null),E(e,a),b&&b.m(e,null),E(e,l),y&&y.m(e,null),E(e,c),w&&w.m(e,null),E(e,u),x&&x.m(e,null),E(e,f),S&&S.m(e,null),E(e,h),E(e,d),E(d,p),E(d,_);for(let L=0;L<A.length;L+=1)A[L].m(d,null);m=!0},p(C,k){if((!m||k[0]&1)&&i!==(i=C[13].get(C[0])+"")&&nt(s,i),C[0]==="idle"?v?(v.p(C,k),k[0]&1&&P(v,1)):(v=jS(C),v.c(),P(v,1),v.m(e,o)):v&&(at(),H(v,1,1,()=>{v=null}),lt()),C[0]==="create"?g?(g.p(C,k),k[0]&1&&P(g,1)):(g=YS(C),g.c(),P(g,1),g.m(e,a)):g&&(at(),H(g,1,1,()=>{g=null}),lt()),C[0]==="join"?b?(b.p(C,k),k[0]&1&&P(b,1)):(b=qS(C),b.c(),P(b,1),b.m(e,l)):b&&(at(),H(b,1,1,()=>{b=null}),lt()),C[0]==="waiting"?y?(y.p(C,k),k[0]&1&&P(y,1)):(y=XS(C),y.c(),P(y,1),y.m(e,c)):y&&(at(),H(y,1,1,()=>{y=null}),lt()),C[0]==="play"?w?(w.p(C,k),k[0]&1&&P(w,1)):(w=ZS(C),w.c(),P(w,1),w.m(e,u)):w&&(at(),H(w,1,1,()=>{w=null}),lt()),C[0]==="gameover"?x?(x.p(C,k),k[0]&1&&P(x,1)):(x=tE(C),x.c(),P(x,1),x.m(e,f)):x&&(at(),H(x,1,1,()=>{x=null}),lt()),C[0]==="error"?S?(S.p(C,k),k[0]&1&&P(S,1)):(S=rE(C),S.c(),P(S,1),S.m(e,h)):S&&(at(),H(S,1,1,()=>{S=null}),lt()),k[0]&4096){T=C[12];let L;for(L=0;L<T.length;L+=1){const F=US(C,T,L);A[L]?A[L].p(F,k):(A[L]=oE(F),A[L].c(),A[L].m(d,null))}for(;L<A.length;L+=1)A[L].d(1);A.length=T.length}},i(C){m||(P(v),P(g),P(b),P(y),P(w),P(x),P(S),m=!0)},o(C){H(v),H(g),H(b),H(y),H(w),H(x),H(S),m=!1},d(C){C&&O(e),v&&v.d(),g&&g.d(),b&&b.d(),y&&y.d(),w&&w.d(),x&&x.d(),S&&S.d(),en(A,C)}}}let Nee="ws://192.168.17.93:8080/";const Bee=t=>t[0],Fee=t=>t[1];function zee(t,e,n){const i=new Map([["idle","Cube battle!"],["create","Create a battle"],["join","Join a battle"],["waiting","Connecting..."],["play","Battle!"],["error","Error :("],["gameover","Game Over"]]);let s="idle",r=la[0][1],o,a=!1,l=!1,c="",u="",f="",h={players:[],observers:[],round:0,started:!1,total:0},d="",p=!1,_=!1,m=-1,v=!1,g=[];function b(...pe){g.push(pe.map(Te=>JSON.stringify(Te,null,2)).join(" ")),n(12,g)}function y(pe){n(0,s=pe),pe==="idle"&&(S(!1,!1),n(5,u=""),n(8,d="333"),m=-1,n(11,v=!1))}function w(){return n(4,c=c.trim()),b("tryCreate",c,d,o.connected),c&&d&&o.connected?(o.emit("CREATE",c),!0):!1}function x(){return n(4,c=c.trim()),b(a?"Trying to observe":"Trying to join"),c&&/^[0-9a-f]{8}$/.test(u)&&o.connected?(o.emit(a?"LOOK":"JOIN",u,c),!0):!1}function S(pe,Te){n(9,p=pe),n(10,_=Te)}function T(pe){n(11,v=!0);let Te=pe.detail;b("SOLVE: ",Te,yr(Te)?1/0:Te.time,m),Te.group===-1&&(Te.group=m),o.emit("TIME",yr(Te)?1/0:Te.time,Te.group)}function A(){let pe=h.players;for(let Te=0,De=pe.length;Te<De;Te+=1){let je=pe[Te][1].times.map(de=>de===null?1/0:de);pe[Te][1].times[5]=lA(5,je,kr.SEQUENTIAL)[4],pe[Te][1].times[6]=Math.min(...je.slice(0,5)),pe[Te][1].times[7]=Math.max(...je.slice(0,5))}h.players.sort((Te,De)=>Te[1].times[5]-De[1].times[5])}function C(){o.connected&&o.emit("EXIT")}function k(){o!=null&&o.connected&&o.disconnect(),n(1,o=Vp(Nee))}gs(()=>{k(),console.error=function(...pe){b(...pe)},o.on("connect",()=>{b("CONNECTED")}),o.on("CREATED",pe=>{b("CREATED",pe),n(5,u=pe),y("play"),S(!0,!1)}),o.on("JOINED",()=>{b("JOINED"),y("play"),S(!1,!1)}),o.on("LOOKING",()=>{b("LOOKING"),y("play"),S(!1,!0)}),o.on("GAME_OVER",()=>{b("GAME_OVER"),y("gameover"),A(),n(3,l=!1)}),o.on("EXIT",()=>{b("EXIT"),y("idle")}),o.on("GAME_DATA",pe=>{b("GAME_DATA",pe),n(7,h=pe)}),o.on("SCRAMBLE",pe=>{b("SCRAMBLE",pe),n(6,f=pe)}),o.on("TIMEOUT",()=>{b("TIMEOUT"),n(3,l=!0)}),o.on("NEXT_ROUND",()=>{try{if(b("NEXT_ROUND"),n(11,v=!1),m+=1,p){let pe=r.find(Te=>Te[1]===d);b("gen: ",d,pe),o.emit("SCRAMBLE",zf.get(d).apply(null,[d,Math.abs(pe[2]),void 0]).replace(/\\n/g,"<br>").trim())}}catch(pe){b("ERROR: ",pe)}}),o.on("REMATCH",pe=>{b("REMATCH"),y("play")}),o.on("JOIN_ERROR",pe=>{b("JOIN_ERROR",pe),y("error")}),o.on("LOOK_ERROR",pe=>{b("LOOK_ERROR",pe),y("error")}),o.on("TIME_ERROR",pe=>{b("TIME_ERROR",pe),y("error")}),o.on("disconnect",()=>{b("DISCONNECTED"),y("idle")})}),er(()=>{o.disconnect()});const L=()=>y("create"),F=()=>y("join");function U(pe){c=pe,n(4,c)}function N(pe){d=pe,n(8,d)}const B=()=>y("idle"),W=()=>w()&&y("waiting");function ee(pe){c=pe,n(4,c)}function K(pe){u=pe,n(5,u)}return[s,o,a,l,c,u,f,h,d,p,_,v,g,i,r,y,w,x,T,C,L,F,U,N,B,W,ee,K,pe=>n(2,a=pe.detail.value),()=>y("idle"),()=>x()&&y("waiting"),()=>y("idle"),()=>o.emit("START"),()=>o.emit("REMATCH"),()=>o.emit("EXIT"),()=>y("idle")]}class Uee extends dt{constructor(e){super(),ht(this,e,zee,Iee,ft,{},null,[-1,-1])}}function Hee(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,_,m,v,g,b,y,w,x,S,T,A,C,k;return e=new PD({}),i=new ID({}),o=new rr({props:{path:"/",component:HD}}),l=new rr({props:{path:"/tutorials",component:vy}}),u=new rr({props:{path:"/tutorials/:something",component:vy}}),h=new rr({props:{path:"/tutorials/:puzzle/:tutorial",component:A$}}),p=new rr({props:{path:"/algorithms/*",component:VW}}),m=new rr({props:{path:"/timer",component:wk}}),g=new rr({props:{path:"/battle",component:Uee}}),y=new rr({props:{path:"/pll-trainer",component:DW}}),x=new rr({props:{path:"/simulator",component:f$}}),T=new rr({props:{path:"/contest",component:aQ}}),C=new rr({props:{path:"/import-export",component:CQ}}),{c(){ce(e.$$.fragment),n=z(),ce(i.$$.fragment),s=z(),r=D("main"),ce(o.$$.fragment),a=z(),ce(l.$$.fragment),c=z(),ce(u.$$.fragment),f=z(),ce(h.$$.fragment),d=z(),ce(p.$$.fragment),_=z(),ce(m.$$.fragment),v=z(),ce(g.$$.fragment),b=z(),ce(y.$$.fragment),w=z(),ce(x.$$.fragment),S=z(),ce(T.$$.fragment),A=z(),ce(C.$$.fragment),M(r,"class","pt-24")},m(L,F){ae(e,L,F),I(L,n,F),ae(i,L,F),I(L,s,F),I(L,r,F),ae(o,r,null),E(r,a),ae(l,r,null),E(r,c),ae(u,r,null),E(r,f),ae(h,r,null),E(r,d),ae(p,r,null),E(r,_),ae(m,r,null),E(r,v),ae(g,r,null),E(r,b),ae(y,r,null),E(r,w),ae(x,r,null),E(r,S),ae(T,r,null),E(r,A),ae(C,r,null),k=!0},p:Ve,i(L){k||(P(e.$$.fragment,L),P(i.$$.fragment,L),P(o.$$.fragment,L),P(l.$$.fragment,L),P(u.$$.fragment,L),P(h.$$.fragment,L),P(p.$$.fragment,L),P(m.$$.fragment,L),P(g.$$.fragment,L),P(y.$$.fragment,L),P(x.$$.fragment,L),P(T.$$.fragment,L),P(C.$$.fragment,L),k=!0)},o(L){H(e.$$.fragment,L),H(i.$$.fragment,L),H(o.$$.fragment,L),H(l.$$.fragment,L),H(u.$$.fragment,L),H(h.$$.fragment,L),H(p.$$.fragment,L),H(m.$$.fragment,L),H(g.$$.fragment,L),H(y.$$.fragment,L),H(x.$$.fragment,L),H(T.$$.fragment,L),H(C.$$.fragment,L),k=!1},d(L){le(e,L),L&&O(n),le(i,L),L&&O(s),L&&O(r),le(o),le(l),le(u),le(h),le(p),le(m),le(g),le(y),le(x),le(T),le(C)}}}function Vee(t){let e,n;return e=new _L({props:{basepath:t[0],$$slots:{default:[Hee]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(i,s){ae(e,i,s),n=!0},p(i,[s]){const r={};s&4&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(P(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){le(e,i)}}}function Gee(t){const e=window.location.pathname;return[/^\/?[a-zA-Z]+:/.test(e)?e.substr(0,e.indexOf(":")+1):"/"]}class Wee extends dt{constructor(e){super(),ht(this,e,Gee,Vee,ft,{})}}new Wee({target:document.getElementById("app")||document.body});
